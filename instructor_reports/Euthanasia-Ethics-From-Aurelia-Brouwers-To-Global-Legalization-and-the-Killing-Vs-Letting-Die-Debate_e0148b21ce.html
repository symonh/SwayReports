<!DOCTYPE html>

<html class="dark-mode" lang="en">
<head>
<script>
    // Set the correct Bootswatch theme based on theme_mode immediately
    window.themeMode = 'dark-mode';
    if (window.themeMode === 'light-mode') {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/flatly/bootstrap.min.css" id="theme-css">');
    } else {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">');
    }
  </script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<title>Euthanasia for Mental Illness</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/>
<style>
    :root {
      /* Darkened dark mode theme */
      --bg-color: #050505;          /* Near-black background */
      --card-bg: #0e0e1a;           /* Deeper navy card */
      --card-header-bg: #141422;     /* Darker header */
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #1f1f2d;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #141422;
      --message-right-bg: #0e0e1a;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple Sway theme colors */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    html {
      margin: 0;
      padding: 0;
      border: none;
      outline: none;
    }
    
    body { 
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
      border: none; /* Remove any borders */
      outline: none; /* Remove any outlines */
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
      border: none;
      outline: none;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 0;
        margin-right: 0;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 0;
        margin-right: 0;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: background-color 0.3s ease;
    }
    .card:hover {
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    /* No hover effect for section title cards */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.68rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      padding-left: 15px;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.7em;
      padding: 6px 8px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 15px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        flex-wrap: nowrap;
      }
      .thread-list-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: calc(50% - 8px);
      }
    }
    .thread-card {
      margin-bottom: 0 !important;
    }
    .thread-item {
      display: flex;
      flex-direction: column;
      width: 100%;
      opacity: 1; /* Ensure visibility */
      padding: 15px;
      background-color: var(--card-bg);
      border-radius: 12px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent; /* Remove orange border */
    }
    .thread-item.visible {
      opacity: 1;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .thread-header .thread-actions {
      display: flex;
      gap: 6px;
      white-space: nowrap;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
      /* Hide theme toggle and edit prompts in mobile */
      .theme-toggle {
        display: none !important;
      }
      a.back-btn[href*="edit_prompts"] {
        display: none !important;
      }
      #share-export-btn {
        margin-right: 0 !important;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to match the Info card */
    #topics-container {
      max-height: 420px;
      min-height: 420px;
      overflow-y: auto;
    }
    /* Smaller height for export mode */
    html.export-mode #topics-container {
      max-height: 345px;
      min-height: 345px;
    }

    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: #090118 !important;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    
    .histogram-bar {
      background: linear-gradient(180deg, #a9a9ff 0%, #8a8aff 100%);
      border-radius: 4px 4px 6px 6px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      box-shadow: 0 2px 6px rgba(138,138,255,0.2);
    }
    .histogram-bar:hover {
      box-shadow: 0 4px 8px rgba(138,138,255,0.4);
    }
    .histogram-axis-line {
      background: rgba(169,173,193,0.4);
      width: 2px;
    }
    .histogram-grid-line {
      background: rgba(169,173,193,0.13);
      height: 1px;
    }
    .histogram-container .axis-label {
      color: #a9adc1;
      font-size: 0.95rem;
      opacity: 0.85;
    }
    .histogram-container .x-label {
      color: #a9adc1;
      font-size: 1.1rem;
      font-weight: 500;
      margin-top: 0.35rem;
    }
    .histogram-container .card-body {
      padding: 1.25rem;
    }
    
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }

    /* Add social sharing buttons styling */
    .social-share-container {
      background-color: var(--card-header-bg);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .social-share-title {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary-color);
    }
    .social-share-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: opacity 0.2s;
      font-size: 0.9rem;
    }
    .social-btn:hover {
      opacity: 0.85;
      text-decoration: none;
      color: white;
    }
    .social-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    .btn-twitter {
      background-color: #1DA1F2;
    }
    .btn-facebook {
      background-color: #4267B2;
    }
    .btn-linkedin {
      background-color: #0077B5;
    }
    .btn-instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }
    @media (max-width: 576px) {
      .social-btn {
        padding: 4px 9px;
        font-size: 0.8rem;
      }
      .social-btn i {
        margin-right: 4px;
      }
    }

    .full-width-page {
      width: 100%;
      max-width: 1420px;
      margin: 0 auto;
      padding-left: 24px;
      padding-right: 24px;
    }
    @media (min-width: 576px) {
      .full-width-page {
        padding-left: 50px;
        padding-right: 50px;
      }
    }
    @media (min-width: 992px) {
      .full-width-page {
        padding-left: 64px;
        padding-right: 64px;
      }
    }

    /* Histogram card styling - more aggressive fixes */
    .histogram-card {
      background-color: #070113 !important;
      border: none; 
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin-bottom: 0;
      overflow: hidden;
    }

    .histogram-card:hover {
      box-shadow: 0 7px 15px rgba(0,0,0,0.25);
    }

    .histogram-card .card-body {
      padding: 8px 0 !important;
    }

    /* Target histogram SVG elements directly */
    .histogram-card svg {
      max-width: 100% !important;
      margin-left: -20px !important; /* Pull SVG to the left */
      width: calc(100% + 20px) !important; /* Compensate for negative margin */
    }

    /* More aggressive targeting for histogram titles */
    .histogram-card h3,
    .histogram-card .x-label,
    .histogram-card text.title,
    .histogram-card [class*="title"],
    .histogram-card text[font-size="14px"],
    .histogram-card text[font-weight="bold"] {
      text-transform: capitalize !important;
      font-size: 1.15rem !important;
      font-weight: 600 !important;
      color: var(--primary-color) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 95% !important;
      display: block !important;
    }

    /* Add text truncation to histogram title element specifically */
    .histogram-card .histogram-content svg text[y="30"],
    .histogram-card .histogram-content svg text.title {
      text-overflow: ellipsis !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      max-width: 250px !important;
    }

    /* Target mean text specifically */
    .histogram-card .mean-text,
    .histogram-card text[y="300"],
    .histogram-card text:last-of-type,
    .histogram-card text[font-size="12px"] {
      font-size: 0.9rem !important;
    }

    /* Add italicized m= to mean values with several selectors to catch them */
    .histogram-card .mean-text::before,
    .histogram-card text[y="300"]::before,
    .histogram-card text:last-of-type::before {
      content: "m = ";
      font-style: italic;
    }

    @media (max-width: 767.98px) {
      .histogram-card .card-body {
        padding: 8px 0 !important;
      }
    }

    /* Card with no hover effects */
    .no-hover {
      transition: background-color 0.3s ease !important;
    }

    .no-hover:hover {
      transform: none !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
    }

    .thread-heading {
      color: var(--primary-color) !important;
      font-weight: 600;
    }

    /* Truncate long histogram HTML titles with ellipsis */
    .histogram-title,
    .histogram-card [style*="font-size:1.25rem"] {
      font-size: 1rem !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      max-width: 95%;
    }

    /* Hide histogram cards that only contain "No data" text */
    .histogram-card .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .card-body .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .histogram-content:has(> div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Also hide the parent cards when they only contain "No data" content */
    .histogram-card:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")),
    .card-body:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Hide the entire column if it only contains a "No data" card */
    .col-md-6:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))),
    .col-lg-4:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))) {
      display: none !important;
    }

    /* Bootstrap Histogram Styles */
    .histogram-container {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        position: relative;
    }
    
    .histogram-bar-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        padding: 0 2px;
    }
    
    .histogram-bar {
        width: 80%;
        transition: background-color 0.2s ease;
        border-radius: 3px 3px 0 0;
    }
    
    .histogram-bar:hover {
        background-color: #a5a5ff !important;
    }
    
    .histogram-label {
        margin-top: 5px;
        font-size: 11px;
        text-align: center;
    }
    
    .histogram-stats {
        margin-top: 10px;
        text-align: center;
    }
    
    /* Light mode overrides for histograms */
    html.light-mode .histogram-bar {
        background-color: #6a6ae6 !important;
    }
    
    html.light-mode .histogram-bar:hover {
        background-color: #8a8aff !important;
    }

    /* Histogram Checkbox Styles */
    .histogram-export-checkbox {
        position: absolute;
        bottom: 8px;
        right: 8px;
        z-index: 2;
        opacity: 0.6;
        transform: translateY(0);
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    
    .histogram-export-checkbox:hover {
        opacity: 1;
        transform: translateY(-2px);
    }
    
    .histogram-export-checkbox input[type="checkbox"] {
        margin-right: 4px;
        cursor: pointer;
        accent-color: var(--card-bg); /* Match card background for subtlety */
        opacity: 0.5;
        transition: opacity 0.2s;
    }
    
    .histogram-export-checkbox input[type="checkbox"]:hover,
    .histogram-export-checkbox input[type="checkbox"]:focus {
        opacity: 0.85;
    }
    
    .histogram-export-checkbox label {
        font-size: 0.75rem;
        cursor: pointer;
        margin: 0;
        color: var(--muted-text-color);
    }
    
    /* Make the card position relative so absolute positioned checkbox works */
    .card.thread-card .card-body {
        position: relative;
    }
    
    /* Highlight the checkbox when checked */
    .histogram-export-checkbox input[type="checkbox"]:checked + label {
        color: var(--primary-color);
        font-weight: 500;
    }

    .card.thread-card .card-header {
      background-color: #070113 !important;
    }
</style>
<style>
    /* Global color fixes */
    body, html {
      min-height: 100vh;
      width: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #000000; /* Default to black for dark mode */
    }
    
    /* Override for light mode */
    html.light-mode, 
    body.light-mode {
      background-color: white;
    }
    
    /* Ensure all content containers have proper width */
    .container, 
    .container-fluid, 
    .row {
      max-width: 100%;
    }
    
    /* Eliminate any unwanted margins on containers */
    .row {
      margin-left: 0;
      margin-right: 0;
    }
    
    .full-width-page {
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      box-sizing: border-box;
    }
    
    /* Apple-inspired font styling */
    body, button, input, select, textarea {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3, h4, h5, h6, .section-title, .generated-title {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-weight: 600;
      letter-spacing: +0.005em;
    }
    
    /* Custom styles for floating thread items */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .thread-list {
      margin-top: 15px;
      position: relative;
      display: block;
      clear: both;
      margin-bottom: 10px;
    }
    
    /* Masonry layout using columns */
    .masonry-grid {
      column-count: 2;
      column-gap: 1.5rem;
      width: 100%;
      margin-bottom: 8px;
    }
    
    @media (max-width: 767px) {
      .masonry-grid {
        column-count: 1;
      }
    }
    
    .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Items in the masonry grid */
    .masonry-grid .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Make sure thread cards in masonry layout have required styles */
    .masonry-grid .card.thread-card, .card.thread-card {
      background: none !important;
      border: 1px solid var(--thread-card-border, #313131) !important;
      border-radius: 12px !important;
      box-shadow: none !important;
      transition: border-color 0.2s;
    }
    
    /* Dark mode border override */
    body.dark-mode .masonry-grid .card.thread-card,
    body.dark-mode .card.thread-card {
      border-color: #23263a !important;
    }
    
    /* Override any position:relative that may be applied to .card-body elsewhere */
    .masonry-grid .card.thread-card .card-body {
      position: static;
    }
    
    .masonry-grid .card.thread-card:hover {
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .masonry-item.hidden-thread {
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      padding-top: 0 !important;
      padding-bottom: 0 !important;
      margin-top: 0 !important;
      margin-bottom: 0 !important;
      border-top-width: 0 !important;
      border-bottom-width: 0 !important;
      overflow: hidden !important;
      pointer-events: none !important;
    }
    
    .show-toggle-btn {
      display: block;
      margin: 30px auto 10px auto;
      min-width: 220px;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .show-toggle-btn i {
      margin-left: 8px;
      transition: transform 0.2s;
    }
    .show-toggle-btn.expanded i {
      transform: rotate(180deg);
    }
    .collapsible-section {
      transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.4s;
      overflow: hidden;
      opacity: 1;
      max-height: 2000px; /* Large enough for most content */
    }
    .collapsible-section.collapsed {
      max-height: 0 !important;
      opacity: 0;
      pointer-events: none;
    }
    /* Premium title styling with maximum specificity to override any other styles */
    html body .generated-title,
    html[class] body .generated-title,
    body .generated-title.text-info,
    .full-width-page .generated-title,
    .generated-title {
      font-size: 2.5rem !important;
      line-height: 1.2 !important;
      margin-top: 2.5rem !important;
      margin-bottom: 1rem !important;
      font-weight: 600;
      color: white !important;
      text-shadow: 0 1px 3px rgba(0,0,0,0.15);
      letter-spacing: -0.0025em;
      display: block;
      position: relative;
      max-width: 94%;
      padding-bottom: 0.5rem;
      font-style: normal !important; /* Force normal style, no italics */
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
    }
    
    .generated-title::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 8rem;
      height: 3px;
      background: white;
      opacity: 0.7;
      border-radius: 2px;
    }
    
    /* Enhanced styling for better title visibility */
    .dark-mode .generated-title {
      text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(0,0,0,0.1);
    }
    
    /* Light mode title styling */
    .light-mode .generated-title {
      color: #4750c5 !important;
      text-shadow: none;
    }
    
    /* Adjust underline color in light mode */
    .light-mode .generated-title::after {
      background: #4750c5;
      opacity: 0.5;
    }
    
    /* Fix for pure black background in dark mode - only targeting page containers */
    body.dark-mode,
    html.dark-mode,
    .dark-mode .full-width-page {
      background-color: #000000 !important;
    }
    
    /* Explicitly exempt chart elements from background override */
    .dark-mode .progress,
    .dark-mode .progress-bar,
    .dark-mode .bg-success,
    .dark-mode .bg-info,
    .dark-mode .bg-warning,
    .dark-mode .bg-danger,
    .dark-mode .bg-secondary,
    .dark-mode .chart-container,
    .dark-mode [class*="histogram-"] {
      background-color: initial !important; /* Preserve original background colors */
    }
    
    /* Ensure the page fills the viewport */
    html, body {
      min-height: 100% !important;
      height: 100% !important;
    }
    
    .dark-mode.shared-page {
      background-color: #000000 !important;
    }
    
    /* For longer titles, ensure they wrap properly */
    @media (max-width: 992px) {
      .generated-title {
        font-size: 2.4rem !important;
        max-width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      .generated-title {
        font-size: 2rem !important;
        margin-top: 2rem !important;
        margin-bottom: 1.2rem !important;
      }
    }
    .section-title {
      font-size: 1.7rem !important;
      font-weight: 600;
      margin-bottom: 1.2rem;
      letter-spacing: -0.01em;
    }
    /* Remove background from thread card headers */
    .card.thread-card .card-header {
      background: none !important;
      border-bottom: none !important;
    }
    .small {
      font-size: 1em !important;
    }
    /* Show More/Fewer Threads button custom color */
    .btn-thread-toggle {
      color: #3498DB !important;
      border-color: #3498DB !important;
      background: transparent !important;
    }
    .btn-thread-toggle:hover, .btn-thread-toggle:focus {
      background: #eaf6fb !important;
      color: #217dbb !important;
      border-color: #217dbb !important;
    }
    /* Prevent button flash in dark mode */
    .dark-mode .btn-thread-toggle,
    .dark-mode .btn-thread-toggle:active,
    .dark-mode .btn-thread-toggle:focus,
    .dark-mode .btn-thread-toggle:hover {
      background: transparent !important;
      border-color: #99aaff !important;
      color: #99aaff !important;
      box-shadow: none !important;
    }
    /* Ensure info text under section headings aligns with the heading text */
    .section-info-align {
      margin-left: 2.2rem; /* matches the icon+text indent of .section-title .title-text */
    }
    .hidden-histogram {
      display: none !important;
    }
    /* Add extra margin above Continue Reading button in Instructor Report */
    #report-content + .show-toggle-btn {
      margin-top: 2.5rem !important;
    }
    .collapsible-section + .show-toggle-btn {
      margin-top: 2.5rem !important;
    }

    /* ===== Stylish Share Banner ===== */
    .share-banner {
      margin: 0 -1.5rem 2rem -1.5rem;
      background: rgba(24, 26, 45, 0.95);
      backdrop-filter: blur(10px);
      padding: 1.5rem 0;
      position: relative;
      z-index: 10;
    }
    .light-mode .share-banner {
      background: rgba(46, 87, 170, 0.9);
    }
    .share-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .share-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1.2rem;
    }
    .share-text {
      font-size: 1.1rem;
      color: white;
      opacity: 0.95;
      font-weight: 500;
      letter-spacing: -0.01em;
    }
    .share-buttons {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
    }
    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }
    .share-button i {
      font-size: 1.1rem;
    }
    .share-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    .share-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: all 0.1s ease;
    }
    .twitter-share {
      background: #000000; /* X logo has a black background */
    }
    .facebook-share {
      background: #4267B2;
    }
    .linkedin-share {
      background: #0077B5;
    }
    .instagram-share {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    }
    @media (max-width: 576px) {
      .share-text {
        font-size: 0.95rem;
      }
      .share-button {
        width: 2.6rem;
        height: 2.6rem;
      }
    }
    /* ===== End Share Header Styles ===== */

    /* ===== Additional Layout Adjustments for Share Header ===== */
    .shared-page {
      padding-top: 0 !important;
    }
    
    .shared-page .generated-title {
      margin-top: 3.2rem !important;
      animation: title-fade-in 1s ease-out;
    }
    
    /* Add spacing between share banner and content */
    .share-banner + .row {
      margin-top: 2.5rem;
    }
    
    /* Subtle animation for title appearance */
    @keyframes title-fade-in {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* ===== End Layout Adjustments ===== */

    /* Add improved line spacing for content */
    .markdown-content {
      line-height: 1.6;
    }
    
    .markdown-content p, 
    .markdown-content li,
    .thread-summary p, 
    .thread-summary li {
      line-height: 1.65;
      margin-bottom: 0.9em;
    }
    
    .markdown-content h3, 
    .markdown-content h4 {
      margin-top: 1.7em;
      margin-bottom: 0.7em;
      line-height: 1.4;
    }
    
    /* Improve readability of thread cards */
    .thread-card .card-body,
    .thread-summary {
      line-height: 1.65;
    }
    
    /* Increase spacing between list items */
    .markdown-content ul, 
    .markdown-content ol,
    .thread-summary ul,
    .thread-summary ol {
      padding-left: 1.6em;
      margin-bottom: 1.2em;
    }

    /* Final fixes to ensure proper layout */
    @media (max-width: 767px) {
      body.dark-mode .px-md-3 {
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
    }
  </style>
</head>
<body <div="" class=""><div class="row mb-5">
<div class="col-12 px-2 px-md-4">
<h1 class="generated-title">Euthanasia for Mental Illness</h1>
</div>
</div>
<div class="row mb-4">
<div class="col-md-6 mb-4 mb-md-0">
<div class="py-4 h-100">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
</h5>
<div class="card-body" id="timelines-container">
<div class="row mb-2">
<div class="col-5 col-label">Completion deadline:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-03-05 05:59:00+00:00">2025-03-05 05:59:00+00:00</span>
<span class="local-time"></span>
</div>
</div>
<div class="row mb-2">
<div class="col-5 col-label">Opinion deadline:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-03-02 05:59:00+00:00">2025-03-02 05:59:00+00:00</span>
<span class="local-time"></span>
</div>
</div>
</div>
<h5 class="section-title mt-4">
<div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
</h5>
<div class="card-body" id="info-container">
<div class="row mb-3">
<div class="col-5 col-label">Instructor:</div>
<div class="col-7 col-value">[Redacted]</div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Min. chat time:</div>
<div class="col-7 col-value">
      
        25 minutes
      
    </div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Created on:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-02-25 19:10:31.370576+00:00">2025-02-25 19:10:31.370576+00:00</span>
<span class="local-time"></span>
</div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Chat threads:</div>
<div class="col-7 col-value">14</div>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="py-4 h-100">
<!-- Topics Section Partial -->
<h5 class="section-title">
<div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
</h5>
<div class="card-body" id="topics-container">
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Active Euthanasia</div>
<div>We ought to legalize the practice of active euthanasia across the world.</div>
</div>
<hr class="my-3" style="border-color: #2d2d43;"/>
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Aurelia Brouwers</div>
<div>It was morally permissible for the End of Life Clinic to grant Aurelia Brouwers's request for euthanasia.</div>
</div>
<hr class="my-3" style="border-color: #2d2d43;"/>
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Killing and Letting Die</div>
<div>Killing is not in any morally significant way different from letting die.</div>
</div>
</div>
</div>
</div>
</div>
<div class="row mb-2">
<div class="col-12">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
</h5>
</div>
<div class="pt-0 pb-2">
<div class="text-muted small mb-0 section-info-align">
<i class="fas fa-info-circle mr-1"></i>Opinion scale: 1 = Strongly Disagree, 7 = Strongly Agree. Mean and 95% CI shown below each chart.
          </div>
<!-- DEBUG: Show if histogram_html or topic_labels are missing -->
</div>
</div>
<!-- Separate row for histogram charts floating on background -->
<div class="row mb-4">
<div class="col-12">
<div class="row" id="opinion-histogram-row">
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Aurelia Brouwers</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">8</div>
<div style="position:absolute; top:25.0%; right:10px; color:#a9adc1; font-size:14px;">6</div>
<div style="position:absolute; top:50.0%; right:10px; color:#a9adc1; font-size:14px;">4</div>
<div style="position:absolute; top:75.0%; right:10px; color:#a9adc1; font-size:14px;">2</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:25.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:50.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:75.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:37.5%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:87.5%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:25.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:100.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:87.5%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:50.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = -0.32 <span style="opacity:0.7;">(95% confidence interval: -0.910.26)</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Active Euthanasia</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
<div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">10</div>
<div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">5</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:26.666666666666668%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:20.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:26.666666666666668%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:73.33333333333333%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 0.48 <span style="opacity:0.7;">(95% confidence interval: -0.091.06)</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Killing and Letting Die</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">6</div>
<div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">4</div>
<div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">2</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:50.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:100.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:83.33333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:50.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:83.33333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:50.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:100.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 0.10 <span style="opacity:0.7;">(95% confidence interval: -0.660.85)</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="text-center">
<button class="btn btn-thread-toggle show-toggle-btn" id="show-more-histograms-btn" style="display:none;">Show More Histograms</button>
<button class="btn btn-thread-toggle show-toggle-btn" id="show-fewer-histograms-btn" style="display:none;">Show Fewer Histograms</button>
</div>
</div>
</div>
<div class="row mb-4">
<div class="col-12">
<div class="py-4">
<!-- Report Section Partial -->
<h5 class="section-title">
<div class="title-text">
<i class="fas fa-file-alt mr-1"></i> Instructor Report
  </div>
</h5>
<!-- DEBUG: Show if report or has_saved_summaries are missing -->
<div class="card-body" id="report-section">
<div class="markdown-content" id="report-content">
<p>Students engaged with ethical questions surrounding euthanasia and the moral equivalence of killing versus letting die. They analyzed topics including active euthanasia's permissibility, the treatment of psychiatric versus physical suffering in end-of-life decisions, and the moral weight of action versus inaction in life-or-death scenarios.</p>
<h3>Themes</h3>
<ul>
<li><strong>Students consistently struggled with balancing patient autonomy against concerns about abuse and premature death.</strong> Many discussions revolved around whether an individual's right to choose death outweighs societal interests in protection, with students often citing the risk of a "slippery slope" if euthanasia were broadly permitted.</li>
<li><strong>The distinction between mental and physical suffering emerged as a critical boundary for many students.</strong> While most could support euthanasia for terminal physical conditions with unbearable pain, they expressed greater hesitation about extending this to psychiatric conditions due to concerns about treatment potential and the subjective nature of mental suffering.</li>
<li><strong>Students frequently referenced the need for strict safeguards when considering euthanasia legalization.</strong> Discussions often evolved from initial polarized positions toward more nuanced considerations of specific criteria, including comprehensive treatment history, medical oversight, waiting periods, and documented resistance to intervention.</li>
</ul>
<h3>Guide's role</h3>
<ul>
<li><strong>Guide consistently challenged students to clarify their assumptions through targeted questioning.</strong> When students made claims about the sanctity of life or the right to autonomy, Guide would present counterexamples that tested the consistency of their moral frameworks, asking them to reconcile apparent contradictions in their positions.</li>
<li><strong>Guide prompted deeper ethical analysis by introducing specific scenarios that highlighted moral tensions.</strong> By presenting cases like drowning bystander situations or Aurelia Brouwers's euthanasia request, Guide pushed students beyond abstract principles to confront real-world complexity and clarify their reasoning in concrete situations.</li>
<li><strong>Guide helped refine students' thinking by questioning how theoretical positions would translate to practical implementation.</strong> When students proposed safeguards or criteria for permissible euthanasia, Guide frequently asked them to specify exactly how such standards would work and whether they could be applied fairly and consistently.</li>
</ul>
<h3>Common ground</h3>
<ul>
<li><strong>Most students agreed that some form of euthanasia is justifiable for terminal physical conditions with unbearable suffering.</strong> Even those who initially expressed strong concerns about euthanasia typically conceded that when death is imminent and suffering is severe, allowing patients to choose the timing and manner of death could be morally permissible.</li>
<li><strong>Students reached consensus that multiple safeguards would be necessary if euthanasia were to be legalized.</strong> Across conversations, students supported measures like extensive documentation of treatment history, multiple medical opinions, waiting periods, and thorough evaluation of decision-making capacity to prevent abuse or hasty decisions.</li>
<li><strong>Students generally agreed that considerations of patient suffering should influence end-of-life ethics.</strong> While they differed on whether suffering alone justified euthanasia, most acknowledged that the medical community has an obligation to address suffering and that merely extending life without regard to its quality was insufficient.</li>
</ul>
<h3>Persistent disagreements</h3>
<ul>
<li><strong>Students remained divided over whether mental suffering could ever justify euthanasia.</strong> Some argued that treatment-resistant psychiatric conditions causing unbearable suffering should be treated similarly to physical conditions, while others maintained that the subjective nature of mental suffering and the possibility of future treatment breakthroughs made such cases fundamentally different.</li>
<li><strong>The moral equivalence of killing versus letting die generated sustained disagreement.</strong> Some students held firmly that intention creates a fundamental moral distinction between actively causing death and allowing it to occur, while others argued that if the outcome is identical, the moral responsibility is comparable, especially in scenarios where intervention would be easy.</li>
<li><strong>Students disagreed about whether religious or traditional moral frameworks should inform euthanasia policy.</strong> Some students emphasized the sanctity of life and religious prohibitions against taking life, while others argued that pluralistic societies should not base policy on particular religious views and should instead prioritize individual autonomy.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Personal experiences significantly shaped students' ethical perspectives.</strong> Several students referenced witnessing prolonged suffering of family members as influencing their views on euthanasia, bringing emotional depth to otherwise abstract philosophical debates and highlighting how lived experience informs moral reasoning.</li>
<li><strong>Students showed remarkable willingness to modify their positions when presented with challenging scenarios.</strong> Many conversations demonstrated how initially rigid positions became more nuanced as Guide and fellow students introduced edge cases or complications, suggesting that structured ethical dialogue can foster intellectual flexibility.</li>
<li><strong>The discussion format allowed students to explore the practical implementation challenges of ethical principles.</strong> Unlike traditional essays that might remain theoretical, these conversations regularly shifted toward questions of how abstract moral principles would translate into concrete policies, procedures, and safeguards in real-world medical settings.</li>
</ul>
<h3>Possible misconceptions</h3>
<ul>
<li><strong>Some students seemed to conflate euthanasia with suicide, potentially overlooking important distinctions.</strong> There appears to be some confusion about the differences between suicide (self-initiated death often driven by mental health crises), physician-assisted suicide (where patients self-administer lethal medication), and active euthanasia (where physicians directly cause death), which may suggest a need for clearer terminology.</li>
<li><strong>Several discussions reflected incomplete understanding of current medical practice around end-of-life care.</strong> Students sometimes presented oversimplified views of palliative care options or existing legal frameworks for refusal of treatment, suggesting that additional factual context might enhance these ethical discussions.</li>
</ul>
</div>
<!-- Hidden raw markdown for test compatibility -->
<div id="report-raw-markdown" style="display:none;">This assignment asked students to engage with ethical questions surrounding euthanasia and the moral equivalence of killing versus letting die. Student pairs analyzed topics including active euthanasia's permissibility, the treatment of psychiatric versus physical suffering in end-of-life decisions, and the moral weight of action versus inaction in life-or-death scenarios.

### Themes
- **Students consistently struggled with balancing patient autonomy against concerns about abuse and premature death.** Many discussions revolved around whether an individual's right to choose death outweighs societal interests in protection, with students often citing the risk of a "slippery slope" if euthanasia were broadly permitted.
- **The distinction between mental and physical suffering emerged as a critical boundary for many students.** While most could support euthanasia for terminal physical conditions with unbearable pain, they expressed greater hesitation about extending this to psychiatric conditions due to concerns about treatment potential and the subjective nature of mental suffering.
- **Students frequently referenced the need for strict safeguards when considering euthanasia legalization.** Discussions often evolved from initial polarized positions toward more nuanced considerations of specific criteria, including comprehensive treatment history, medical oversight, waiting periods, and documented resistance to intervention.

### Guide's role
- **Guide consistently challenged students to clarify their assumptions through targeted questioning.** When students made claims about the sanctity of life or the right to autonomy, Guide would present counterexamples that tested the consistency of their moral frameworks, asking them to reconcile apparent contradictions in their positions.
- **Guide prompted deeper ethical analysis by introducing specific scenarios that highlighted moral tensions.** By presenting cases like drowning bystander situations or Aurelia Brouwers's euthanasia request, Guide pushed students beyond abstract principles to confront real-world complexity and clarify their reasoning in concrete situations.
- **Guide helped refine students' thinking by questioning how theoretical positions would translate to practical implementation.** When students proposed safeguards or criteria for permissible euthanasia, Guide frequently asked them to specify exactly how such standards would work and whether they could be applied fairly and consistently.

### Common ground
- **Most students agreed that some form of euthanasia is justifiable for terminal physical conditions with unbearable suffering.** Even those who initially expressed strong concerns about euthanasia typically conceded that when death is imminent and suffering is severe, allowing patients to choose the timing and manner of death could be morally permissible.
- **Students reached consensus that multiple safeguards would be necessary if euthanasia were to be legalized.** Across conversations, students supported measures like extensive documentation of treatment history, multiple medical opinions, waiting periods, and thorough evaluation of decision-making capacity to prevent abuse or hasty decisions.
- **Students generally agreed that considerations of patient suffering should influence end-of-life ethics.** While they differed on whether suffering alone justified euthanasia, most acknowledged that the medical community has an obligation to address suffering and that merely extending life without regard to its quality was insufficient.

### Persistent disagreements
- **Students remained divided over whether mental suffering could ever justify euthanasia.** Some argued that treatment-resistant psychiatric conditions causing unbearable suffering should be treated similarly to physical conditions, while others maintained that the subjective nature of mental suffering and the possibility of future treatment breakthroughs made such cases fundamentally different.
- **The moral equivalence of killing versus letting die generated sustained disagreement.** Some students held firmly that intention creates a fundamental moral distinction between actively causing death and allowing it to occur, while others argued that if the outcome is identical, the moral responsibility is comparable, especially in scenarios where intervention would be easy.
- **Students disagreed about whether religious or traditional moral frameworks should inform euthanasia policy.** Some students emphasized the sanctity of life and religious prohibitions against taking life, while others argued that pluralistic societies should not base policy on particular religious views and should instead prioritize individual autonomy.

### Insights
- **Personal experiences significantly shaped students' ethical perspectives.** Several students referenced witnessing prolonged suffering of family members as influencing their views on euthanasia, bringing emotional depth to otherwise abstract philosophical debates and highlighting how lived experience informs moral reasoning.
- **Students showed remarkable willingness to modify their positions when presented with challenging scenarios.** Many conversations demonstrated how initially rigid positions became more nuanced as Guide and fellow students introduced edge cases or complications, suggesting that structured ethical dialogue can foster intellectual flexibility.
- **The discussion format allowed students to explore the practical implementation challenges of ethical principles.** Unlike traditional essays that might remain theoretical, these conversations regularly shifted toward questions of how abstract moral principles would translate into concrete policies, procedures, and safeguards in real-world medical settings.

### Possible misconceptions
- **Some students seemed to conflate euthanasia with suicide, potentially overlooking important distinctions.** There appears to be some confusion about the differences between suicide (self-initiated death often driven by mental health crises), physician-assisted suicide (where patients self-administer lethal medication), and active euthanasia (where physicians directly cause death), which may suggest a need for clearer terminology.
- **Several discussions reflected incomplete understanding of current medical practice around end-of-life care.** Students sometimes presented oversimplified views of palliative care options or existing legal frameworks for refusal of treatment, suggesting that additional factual context might enhance these ethical discussions.</div>
<!-- RAW REPORT CONTENT FOR TESTING: This assignment aske -->
<span id="report-prefix" style="display:none;">This assignment aske</span>
<div class="text-muted mt-2 d-flex justify-content-end align-items-center">
<span class="text-right" style="flex:1; text-align:right;">Generated on: 
        <script>
          document.write(new Date("2025-05-06T15:02:14.360371").toLocaleDateString('en-US', {
            month: 'short', 
            day: 'numeric', 
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          }));
        </script>
<noscript>2025-05-06T15:02:14.360371</noscript>
</span>
</div>
<div id="report-editor-container" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
      </div>
<textarea class="form-control" id="report-markdown-editor">This assignment asked students to engage with ethical questions surrounding euthanasia and the moral equivalence of killing versus letting die. Student pairs analyzed topics including active euthanasia's permissibility, the treatment of psychiatric versus physical suffering in end-of-life decisions, and the moral weight of action versus inaction in life-or-death scenarios.

### Themes
- **Students consistently struggled with balancing patient autonomy against concerns about abuse and premature death.** Many discussions revolved around whether an individual's right to choose death outweighs societal interests in protection, with students often citing the risk of a "slippery slope" if euthanasia were broadly permitted.
- **The distinction between mental and physical suffering emerged as a critical boundary for many students.** While most could support euthanasia for terminal physical conditions with unbearable pain, they expressed greater hesitation about extending this to psychiatric conditions due to concerns about treatment potential and the subjective nature of mental suffering.
- **Students frequently referenced the need for strict safeguards when considering euthanasia legalization.** Discussions often evolved from initial polarized positions toward more nuanced considerations of specific criteria, including comprehensive treatment history, medical oversight, waiting periods, and documented resistance to intervention.

### Guide's role
- **Guide consistently challenged students to clarify their assumptions through targeted questioning.** When students made claims about the sanctity of life or the right to autonomy, Guide would present counterexamples that tested the consistency of their moral frameworks, asking them to reconcile apparent contradictions in their positions.
- **Guide prompted deeper ethical analysis by introducing specific scenarios that highlighted moral tensions.** By presenting cases like drowning bystander situations or Aurelia Brouwers's euthanasia request, Guide pushed students beyond abstract principles to confront real-world complexity and clarify their reasoning in concrete situations.
- **Guide helped refine students' thinking by questioning how theoretical positions would translate to practical implementation.** When students proposed safeguards or criteria for permissible euthanasia, Guide frequently asked them to specify exactly how such standards would work and whether they could be applied fairly and consistently.

### Common ground
- **Most students agreed that some form of euthanasia is justifiable for terminal physical conditions with unbearable suffering.** Even those who initially expressed strong concerns about euthanasia typically conceded that when death is imminent and suffering is severe, allowing patients to choose the timing and manner of death could be morally permissible.
- **Students reached consensus that multiple safeguards would be necessary if euthanasia were to be legalized.** Across conversations, students supported measures like extensive documentation of treatment history, multiple medical opinions, waiting periods, and thorough evaluation of decision-making capacity to prevent abuse or hasty decisions.
- **Students generally agreed that considerations of patient suffering should influence end-of-life ethics.** While they differed on whether suffering alone justified euthanasia, most acknowledged that the medical community has an obligation to address suffering and that merely extending life without regard to its quality was insufficient.

### Persistent disagreements
- **Students remained divided over whether mental suffering could ever justify euthanasia.** Some argued that treatment-resistant psychiatric conditions causing unbearable suffering should be treated similarly to physical conditions, while others maintained that the subjective nature of mental suffering and the possibility of future treatment breakthroughs made such cases fundamentally different.
- **The moral equivalence of killing versus letting die generated sustained disagreement.** Some students held firmly that intention creates a fundamental moral distinction between actively causing death and allowing it to occur, while others argued that if the outcome is identical, the moral responsibility is comparable, especially in scenarios where intervention would be easy.
- **Students disagreed about whether religious or traditional moral frameworks should inform euthanasia policy.** Some students emphasized the sanctity of life and religious prohibitions against taking life, while others argued that pluralistic societies should not base policy on particular religious views and should instead prioritize individual autonomy.

### Insights
- **Personal experiences significantly shaped students' ethical perspectives.** Several students referenced witnessing prolonged suffering of family members as influencing their views on euthanasia, bringing emotional depth to otherwise abstract philosophical debates and highlighting how lived experience informs moral reasoning.
- **Students showed remarkable willingness to modify their positions when presented with challenging scenarios.** Many conversations demonstrated how initially rigid positions became more nuanced as Guide and fellow students introduced edge cases or complications, suggesting that structured ethical dialogue can foster intellectual flexibility.
- **The discussion format allowed students to explore the practical implementation challenges of ethical principles.** Unlike traditional essays that might remain theoretical, these conversations regularly shifted toward questions of how abstract moral principles would translate into concrete policies, procedures, and safeguards in real-world medical settings.

### Possible misconceptions
- **Some students seemed to conflate euthanasia with suicide, potentially overlooking important distinctions.** There appears to be some confusion about the differences between suicide (self-initiated death often driven by mental health crises), physician-assisted suicide (where patients self-administer lethal medication), and active euthanasia (where physicians directly cause death), which may suggest a need for clearer terminology.
- **Several discussions reflected incomplete understanding of current medical practice around end-of-life care.** Students sometimes presented oversimplified views of palliative care options or existing legal frameworks for refusal of treatment, suggesting that additional factual context might enhance these ethical discussions.</textarea>
<div class="mt-3">
<button class="btn btn-primary" id="save-report-btn">
<i class="fas fa-save mr-1"></i> Save Changes
        </button>
<button class="btn btn-secondary ml-2" id="cancel-report-edit-btn">
<i class="fas fa-times mr-1"></i> Cancel
        </button>
<span class="spinner-border spinner-border-sm ml-2" id="editor-spinner" role="status" style="display: none;"></span>
</div>
<div class="status-message mt-3" id="editor-status-message" style="display: none;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="row mb-2">
<div class="col-12">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
</h5>
</div>
<div class="pt-0 pb-2">
<!-- DEBUG: Show if threads is missing or empty -->
<div class="text-muted small mb-0 section-info-align">
<i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
</div>
</div>
<!-- Separate row for thread items floating on background -->
<div class="row mb-5">
<div class="col-12">
<div class="thread-list" id="thread-list">
<div class="masonry-grid">
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Killing and Letting Die
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce">
<ul>
<li>
<p><strong>Students wrestled with whether killing and letting die carry the same moral weight.</strong> Student 2 argued that inactionlike withholding a life preserveramounts to condoning death, while Student 1 maintained that directly pushing someone is a deeper moral violation, even as both conceded that in certain rescue scenarios inaction can be almost as culpable. Their positions converged somewhat as they recognized that both acts and omissions can cause harm and deserve moral scrutiny.</p>
</li>
<li>
<p><strong>They probed how ability and context influence moral responsibility in rescue situations.</strong> The life-preserver thought experiment led to discussions about swimming skill, failed CPR attempts, and the presence of other bystanders, with students agreeing that ones capacity and willingness to intervene shape how wrong inaction is. By the end, both saw that mitigating circumstanceslike lack of skill or reliance on otherscomplicate the active/passive distinction.</p>
</li>
<li>
<p><strong>Guide steered the dialogue with concrete hypotheticals and pointed follow-ups to deepen reflection.</strong> It introduced the drowning scenarios, pressed each student to justify their stance on responsibility and capability, and closed by summarizing their insights and asking if their views had shifted.</p>
</li>
</ul>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce">- **Students wrestled with whether killing and letting die carry the same moral weight.** Student 2 argued that inactionlike withholding a life preserveramounts to condoning death, while Student 1 maintained that directly pushing someone is a deeper moral violation, even as both conceded that in certain rescue scenarios inaction can be almost as culpable. Their positions converged somewhat as they recognized that both acts and omissions can cause harm and deserve moral scrutiny.

- **They probed how ability and context influence moral responsibility in rescue situations.** The life-preserver thought experiment led to discussions about swimming skill, failed CPR attempts, and the presence of other bystanders, with students agreeing that ones capacity and willingness to intervene shape how wrong inaction is. By the end, both saw that mitigating circumstanceslike lack of skill or reliance on otherscomplicate the active/passive distinction.

- **Guide steered the dialogue with concrete hypotheticals and pointed follow-ups to deepen reflection.** It introduced the drowning scenarios, pressed each student to justify their stance on responsibility and capability, and closed by summarizing their insights and asking if their views had shifted.</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==c0f33c0ade::student-z21hawwuy29t727419eee7::ceab5b2c93::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Killing and Letting Die
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce">
<ul>
<li><strong>Students discussed the moral equivalence debate regarding killing versus letting die.</strong> Student 1 argued that both actions are morally equivalent since they result in preventable death, while Student 2 maintained that killing is inherently different because it involves deliberate harm, highlighting nuances such as intent and responsibility.</li>
<li><strong>Students examined the impact of personal autonomy and cultural upbringing on moral obligations.</strong> They debated how factors like a doctor's responsibility, patient choice, and bystander behavior influence whether actively causing death is worse than passively allowing it, with each student evolving their views through careful questioning and reflection.</li>
<li><strong>Guide prompted deeper reflection on intentions versus outcomes in ethical decisions.</strong> Guides interventions skillfully challenged the students to scrutinize their assumptions and explore if judging actions solely by outcomes undermines the importance of moral intent in life-and-death scenarios.</li>
</ul>
<blockquote>
<p><strong>Student 2, you've consistently emphasized intention as key to the moral distinction. But if we judge actions by their consequences, and both killing and letting die result in a preventable death, why should the actor's intention matter more than the outcome? Consider: If someone dies because I deliberately chose not to help them, haven't I intended their death just as much as if I killed them directly?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce">- **Students discussed the moral equivalence debate regarding killing versus letting die.** Student 1 argued that both actions are morally equivalent since they result in preventable death, while Student 2 maintained that killing is inherently different because it involves deliberate harm, highlighting nuances such as intent and responsibility.
- **Students examined the impact of personal autonomy and cultural upbringing on moral obligations.** They debated how factors like a doctor's responsibility, patient choice, and bystander behavior influence whether actively causing death is worse than passively allowing it, with each student evolving their views through careful questioning and reflection.
- **Guide prompted deeper reflection on intentions versus outcomes in ethical decisions.** Guides interventions skillfully challenged the students to scrutinize their assumptions and explore if judging actions solely by outcomes undermines the importance of moral intent in life-and-death scenarios.

&gt; **Student 2, you've consistently emphasized intention as key to the moral distinction. But if we judge actions by their consequences, and both killing and letting die result in a preventable death, why should the actor's intention matter more than the outcome? Consider: If someone dies because I deliberately chose not to help them, haven't I intended their death just as much as if I killed them directly?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==7208e4c4df::ceab5b2c93::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Active Euthanasia
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce">
<ul>
<li><strong>Students examined the morality of active euthanasia.</strong> One student argued that euthanasia is inherently wrong and violates the sanctity of life, while the other stressed patient autonomy and the relief of suffering as justifications.</li>
<li><strong>The debate centered on balancing patient rights with doctors freedom of conscience.</strong> One student maintained that both patients and physicians should retain the right to act according to their beliefs, whereas the other proposed that medical decisions should prioritize alleviating suffering despite personal convictions.</li>
<li><strong>Guides interventions challenged the students to sharpen their reasoning.</strong> Guide pressed them to consider the precise conditions under which suffering justifies euthanasia and how excessive reliance on subjective morality might lead to misuse.  </li>
</ul>
<blockquote>
<p><strong>Student 2, regarding Student 1's point about suffering - how do we determine when suffering is 'enough' to justify euthanasia? If we accept that some suffering warrants it, we need clear criteria to prevent misuse while still respecting genuine cases.</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce">- **Students examined the morality of active euthanasia.** One student argued that euthanasia is inherently wrong and violates the sanctity of life, while the other stressed patient autonomy and the relief of suffering as justifications.
- **The debate centered on balancing patient rights with doctors freedom of conscience.** One student maintained that both patients and physicians should retain the right to act according to their beliefs, whereas the other proposed that medical decisions should prioritize alleviating suffering despite personal convictions.
- **Guides interventions challenged the students to sharpen their reasoning.** Guide pressed them to consider the precise conditions under which suffering justifies euthanasia and how excessive reliance on subjective morality might lead to misuse.  

&gt; **Student 2, regarding Student 1's point about suffering - how do we determine when suffering is 'enough' to justify euthanasia? If we accept that some suffering warrants it, we need clear criteria to prevent misuse while still respecting genuine cases.**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b03ab1d0df::student-z21hawwuy29t7abc1642dd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Killing and Letting Die
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce">
<ul>
<li><strong>Students sharply debated the ethics of active euthanasia versus letting die.</strong> One side argued that actively ending a lifeeven with consent and to alleviate sufferingviolates the sanctity of life and proper medical care, while the other side maintained that in cases of extreme pain and financial pressure, active euthanasia can be morally justified.</li>
<li><strong>Guide kept the discussion focused with incisive, targeted questions.</strong> It challenged the students to consider real-world implications like resource constraints and doctor obligations, pushing them to explore whether patient autonomy should override traditional ethical boundaries.</li>
<li><strong>Guide further deepened the analysis by questioning the balance between alleviating suffering and preserving life.</strong> It urged the students to rethink how consent, professional duty, and societal expectations might shift ethical standards around end-of-life care.</li>
</ul>
<blockquote>
<p><strong>Student 2, how do you weigh the "sanctity of life" against the reality of suffering? If we accept that patients can refuse treatment (letting die), isn't that already compromising the absolute sanctity of life in favor of patient autonomy? Consider how this perspective might reshape expectations of a doctor's duty to preserve life.</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce">- **Students sharply debated the ethics of active euthanasia versus letting die.** One side argued that actively ending a lifeeven with consent and to alleviate sufferingviolates the sanctity of life and proper medical care, while the other side maintained that in cases of extreme pain and financial pressure, active euthanasia can be morally justified.
- **Guide kept the discussion focused with incisive, targeted questions.** It challenged the students to consider real-world implications like resource constraints and doctor obligations, pushing them to explore whether patient autonomy should override traditional ethical boundaries.
- **Guide further deepened the analysis by questioning the balance between alleviating suffering and preserving life.** It urged the students to rethink how consent, professional duty, and societal expectations might shift ethical standards around end-of-life care.

&gt; **Student 2, how do you weigh the "sanctity of life" against the reality of suffering? If we accept that patients can refuse treatment (letting die), isn't that already compromising the absolute sanctity of life in favor of patient autonomy? Consider how this perspective might reshape expectations of a doctor's duty to preserve life.**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==7d6f80b8dd::ceab5b2c93::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Aurelia Brouwers
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce">
<ul>
<li><strong>Students debated the moral grounds for granting Aurelia Brouwers's euthanasia request.</strong> Student 1 emphasized patient autonomy and the importance of consent, while Student 2 raised concerns about the impact of mental illness on decision-making and the possible neglect of treatment opportunities.</li>
<li><strong>Guide actively steered the discussion toward a deeper look at ethical complexities and treatment history.</strong> It challenged both students to reconsider whether extensive prior treatment should influence the moral assessment of Aurelia's request, pushing them to critically analyze the balance between autonomy and the potential for temporary crises.  </li>
</ul>
<blockquote>
<p><strong>Student 2, given that you and Student 1 seem to agree about the risks - what do you make of Aurelia's specific case? She had undergone extensive treatment for years before requesting euthanasia. Does that change your assessment?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce">- **Students debated the moral grounds for granting Aurelia Brouwers's euthanasia request.** Student 1 emphasized patient autonomy and the importance of consent, while Student 2 raised concerns about the impact of mental illness on decision-making and the possible neglect of treatment opportunities.
- **Guide actively steered the discussion toward a deeper look at ethical complexities and treatment history.** It challenged both students to reconsider whether extensive prior treatment should influence the moral assessment of Aurelia's request, pushing them to critically analyze the balance between autonomy and the potential for temporary crises.  

&gt; **Student 2, given that you and Student 1 seem to agree about the risks - what do you make of Aurelia's specific case? She had undergone extensive treatment for years before requesting euthanasia. Does that change your assessment?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==be8e2cdede::0f08229b42::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Aurelia Brouwers
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce">
<ul>
<li><strong>Students began by debating whether euthanasia for severe psychiatric conditions is morally permissible, with Student 1 initially opposing it and Student 2 expressing uncertainty.</strong> Student 1 stressed therapy and interventions over suicide while Student 2 questioned why someone would go through formal medical channels instead of self-harm. Their early exchange set the stage for examining personal beliefs on free will and the nature of psychiatric suffering.  </li>
<li><strong>The conversation deepened as students discussed limits and evaluation criteria for psychiatric euthanasia, prompted by Student 2s personal experience.</strong> They agreed on long-term check-ins (57 years), multiple medication trials, and clear distinctions between fixable situational depression and enduring mental illnesses. Both students moved closer to consensus that extreme, treatment-resistant suffering could justify euthanasia under strict safeguards.  </li>
<li><strong>Guide consistently steered the dialogue toward nuanced ethical analysis by challenging assumptions and asking targeted follow-up questions.</strong> It probed why someone might choose formal euthanasia, whether unrelieved suffering justifies ending life, and how to operationalize limits, helping students refine their arguments and acknowledge each others perspectives.</li>
</ul>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce">- **Students began by debating whether euthanasia for severe psychiatric conditions is morally permissible, with Student 1 initially opposing it and Student 2 expressing uncertainty.** Student 1 stressed therapy and interventions over suicide while Student 2 questioned why someone would go through formal medical channels instead of self-harm. Their early exchange set the stage for examining personal beliefs on free will and the nature of psychiatric suffering.  
- **The conversation deepened as students discussed limits and evaluation criteria for psychiatric euthanasia, prompted by Student 2s personal experience.** They agreed on long-term check-ins (57 years), multiple medication trials, and clear distinctions between fixable situational depression and enduring mental illnesses. Both students moved closer to consensus that extreme, treatment-resistant suffering could justify euthanasia under strict safeguards.  
- **Guide consistently steered the dialogue toward nuanced ethical analysis by challenging assumptions and asking targeted follow-up questions.** It probed why someone might choose formal euthanasia, whether unrelieved suffering justifies ending life, and how to operationalize limits, helping students refine their arguments and acknowledge each others perspectives.</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==93db5196ef::0f08229b42::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Active Euthanasia
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce">
<ul>
<li><strong>Students debated active euthanasia with Student 1 expressing concerns that its legalization could raise suicide rates and erode trust in medical practice while Student 2 advocated for strict regulation and clear qualifying criteria.</strong> The discussion delved into issues of depressive states, medical oversight, and the potential misuse of the practice, with both participants refining their positions on safeguarding patient care.  </li>
<li><strong>Guide played a critical role in deepening the discussion by challenging assumptions about eligibility and objectivity in determining quality of life.</strong> Its probing questions pushed the students to clarify and justify the criteria for qualifying patients, highlighting the difficulty of setting exact standards and the importance of protecting patient autonomy.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you've introduced the key concept of qualifying criteria, but Student 2 raises a critical challenge about implementation. Could you explain specifically how you think we should determine when someone's quality of life is "significantly low" enough to qualify for euthanasia? This gets at a fundamental challenge: how can we create clear, objective standards for such a deeply personal and subjective matter?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce">- **Students debated active euthanasia with Student 1 expressing concerns that its legalization could raise suicide rates and erode trust in medical practice while Student 2 advocated for strict regulation and clear qualifying criteria.** The discussion delved into issues of depressive states, medical oversight, and the potential misuse of the practice, with both participants refining their positions on safeguarding patient care.  
- **Guide played a critical role in deepening the discussion by challenging assumptions about eligibility and objectivity in determining quality of life.** Its probing questions pushed the students to clarify and justify the criteria for qualifying patients, highlighting the difficulty of setting exact standards and the importance of protecting patient autonomy.  
   
&gt; **Student 1, you've introduced the key concept of qualifying criteria, but Student 2 raises a critical challenge about implementation. Could you explain specifically how you think we should determine when someone's quality of life is "significantly low" enough to qualify for euthanasia? This gets at a fundamental challenge: how can we create clear, objective standards for such a deeply personal and subjective matter?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==f0dad5d2dd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Aurelia Brouwers
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce">
<ul>
<li><strong>Students debated the ethics of euthanasia amid conflicting priorities of autonomy versus precaution.</strong> One student grounded their initial support for euthanasia in the principle of autonomy and compassion, while the other stressed that medical uncertainty and the potential for recovery should compel a more cautious approach.  </li>
<li><strong>Guide pushed the discussion further by challenging the students to examine the limits of medical certainty in mental health cases.</strong> It urged the students to compare the ethical weight of patient suffering against the possibility of future improvement, prompting a re-evaluation of initial positions and a clearer articulation of their concerns.</li>
</ul>
<blockquote>
<p><strong>Student 2, if we accept your view that mental illness cases can never have enough certainty for euthanasia, what about patients with treatment-resistant depression who have tried every available therapy for decades? Should they be permanently denied the option that we give to those with terminal physical illnesses?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce">- **Students debated the ethics of euthanasia amid conflicting priorities of autonomy versus precaution.** One student grounded their initial support for euthanasia in the principle of autonomy and compassion, while the other stressed that medical uncertainty and the potential for recovery should compel a more cautious approach.  
- **Guide pushed the discussion further by challenging the students to examine the limits of medical certainty in mental health cases.** It urged the students to compare the ethical weight of patient suffering against the possibility of future improvement, prompting a re-evaluation of initial positions and a clearer articulation of their concerns.

  
&gt; **Student 2, if we accept your view that mental illness cases can never have enough certainty for euthanasia, what about patients with treatment-resistant depression who have tried every available therapy for decades? Should they be permanently denied the option that we give to those with terminal physical illnesses?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==144d2402de::0f08229b42::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Killing and Letting Die
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce">
<ul>
<li>
<p><strong>Students strongly debated whether killing and letting die carry the same moral weight.</strong> Early in the discussion one students explanation conflicted with the assigned statement, prompting both to examine scenarios like a doctor withholding treatment and a drowning child to tease out the nuances between active harm and inaction.</p>
</li>
<li>
<p><strong>Guide steered the dialogue by challenging assumptions and introducing ethically provocative scenarios.</strong> It pushed the discussion deeper by asking targeted questions that made the students re-evaluate their positions, especially as they considered the implications of active versus passive harm.  </p>
</li>
</ul>
<blockquote>
<p><strong>Let me introduce a challenging scenario to explore: A doctor can save a dying patient with medicine, but chooses not to. Is this morally different from actively giving a lethal injection? Student 2, what do you think?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce">- **Students strongly debated whether killing and letting die carry the same moral weight.** Early in the discussion one students explanation conflicted with the assigned statement, prompting both to examine scenarios like a doctor withholding treatment and a drowning child to tease out the nuances between active harm and inaction.

- **Guide steered the dialogue by challenging assumptions and introducing ethically provocative scenarios.** It pushed the discussion deeper by asking targeted questions that made the students re-evaluate their positions, especially as they considered the implications of active versus passive harm.  

&gt; **Let me introduce a challenging scenario to explore: A doctor can save a dying patient with medicine, but chooses not to. Is this morally different from actively giving a lethal injection? Student 2, what do you think?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==ed70a0f2dd::ceab5b2c93::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Active Euthanasia
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce">
<ul>
<li><strong>Students coalesced around legalizing active euthanasia for terminal illnesses while excluding mental health cases and underscoring patient autonomy.</strong> They considered quality of life versus mere survival, proposed mandatory involvement of doctors and families, and grounded their views in personal experiences with relatives who chose euthanasia.  </li>
<li><strong>Guide drove the dialogue deeper by probing key tensionssurvival versus suffering, loopholes in physician-administered drugs, and the physical versus mental health divideand demanded concrete safeguards.</strong> Its pointed questions pushed students to refine their arguments, define ethical boundaries, and articulate regulatory measures.  </li>
</ul>
<blockquote>
<p><strong>Student 1 you raise concerns about unsafe under the table practices - but what safeguards would you propose in a legalized system to prevent abuse while still maintaining access for those who genuinely need it?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce">- **Students coalesced around legalizing active euthanasia for terminal illnesses while excluding mental health cases and underscoring patient autonomy.** They considered quality of life versus mere survival, proposed mandatory involvement of doctors and families, and grounded their views in personal experiences with relatives who chose euthanasia.  
- **Guide drove the dialogue deeper by probing key tensionssurvival versus suffering, loopholes in physician-administered drugs, and the physical versus mental health divideand demanded concrete safeguards.** Its pointed questions pushed students to refine their arguments, define ethical boundaries, and articulate regulatory measures.  


&gt; **Student 1 you raise concerns about unsafe under the table practices - but what safeguards would you propose in a legalized system to prevent abuse while still maintaining access for those who genuinely need it?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==54f3bcccde::b624f9c9b3::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Aurelia Brouwers
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce">
<ul>
<li><strong>Students grappled with whether active euthanasia is morally permissible for psychiatric suffering, with Student 1 supporting it after 17 years of failed treatments, and Student 2 initially opposing it as risking autonomy and the medical oath.</strong> Student 1 argued that prolonging suffering constitutes harm and that clinical refusal might drive patients to suicide, while Student 2 insisted on stricter probable cause and lab-based criteria especially for mental health cases.  </li>
<li><strong>The discussion evolved as Student 2 distinguished mental from physical suffering and resisted subjective reports, then gradually conceded that biological markers and comprehensive records could offer a common evidentiary standard.</strong> Both students ended up agreeing that documented treatment resistance, lab work, and medical history could form a basis for considering euthanasia requests, though they remained cautious about mental health inclusion.  </li>
<li><strong>Guide repeatedly challenged assumptions and pressed for clear criteria, steering the debate from general principles to concrete safeguards.</strong> By questioning whether mental suffering could meet the same evidentiary standards as physical illness and highlighting the do-no-harm tension, Guide helped students refine their positions and reach a nuanced consensus.  </li>
</ul>
<blockquote>
<p><strong>Student 2, your distinction between physical and mental illness raises a crucial question: Should we trust patients' subjective reports of mental suffering less than physical suffering? Mental health conditions have biological components and measurable impacts, even if they're harder to quantify than physical ailments. If someone has documented treatment resistance for nearly two decades, does this provide the "medical markers" you're looking for?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce">- **Students grappled with whether active euthanasia is morally permissible for psychiatric suffering, with Student 1 supporting it after 17 years of failed treatments, and Student 2 initially opposing it as risking autonomy and the medical oath.** Student 1 argued that prolonging suffering constitutes harm and that clinical refusal might drive patients to suicide, while Student 2 insisted on stricter probable cause and lab-based criteria especially for mental health cases.  
- **The discussion evolved as Student 2 distinguished mental from physical suffering and resisted subjective reports, then gradually conceded that biological markers and comprehensive records could offer a common evidentiary standard.** Both students ended up agreeing that documented treatment resistance, lab work, and medical history could form a basis for considering euthanasia requests, though they remained cautious about mental health inclusion.  
- **Guide repeatedly challenged assumptions and pressed for clear criteria, steering the debate from general principles to concrete safeguards.** By questioning whether mental suffering could meet the same evidentiary standards as physical illness and highlighting the do-no-harm tension, Guide helped students refine their positions and reach a nuanced consensus.  


&gt; **Student 2, your distinction between physical and mental illness raises a crucial question: Should we trust patients' subjective reports of mental suffering less than physical suffering? Mental health conditions have biological components and measurable impacts, even if they're harder to quantify than physical ailments. If someone has documented treatment resistance for nearly two decades, does this provide the "medical markers" you're looking for?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==b47c4be4df::0f08229b42::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Active Euthanasia
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce">
<ul>
<li><strong>Students debated the legalization of active euthanasia by weighing ethical risks against individual autonomy.</strong> Student 1 consistently raised concerns about potential coercion and a slippery slope that could pressure vulnerable populations, while Student 2 argued that personal autonomy and the right to choose are paramount, even in the face of excellent palliative care.  </li>
<li><strong>Guide played an active role in sharpening the debate by pressing for concrete examples and clearer criteria.</strong> It repeatedly challenged both sides to specify safeguards and real-world mechanisms, ensuring that the discussion drilled down into how legal frameworks might evolve and whether alternatives like improved palliative care could truly address the concerns raised.</li>
</ul>
<blockquote>
<p><strong>Student 1, even with your valid concerns about mental health cases, what about patients with terminal illnesses who are fully mentally competent and explicitly request euthanasia? Should they be denied this choice?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce">- **Students debated the legalization of active euthanasia by weighing ethical risks against individual autonomy.** Student 1 consistently raised concerns about potential coercion and a slippery slope that could pressure vulnerable populations, while Student 2 argued that personal autonomy and the right to choose are paramount, even in the face of excellent palliative care.  
- **Guide played an active role in sharpening the debate by pressing for concrete examples and clearer criteria.** It repeatedly challenged both sides to specify safeguards and real-world mechanisms, ensuring that the discussion drilled down into how legal frameworks might evolve and whether alternatives like improved palliative care could truly address the concerns raised.

  
&gt; **Student 1, even with your valid concerns about mental health cases, what about patients with terminal illnesses who are fully mentally competent and explicitly request euthanasia? Should they be denied this choice?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==7c87150edd::b624f9c9b3::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Active Euthanasia
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce">
<ul>
<li>
<p><strong>Students debated the ethical implications of legalizing active euthanasia, with Student 1 emphasizing risks of abuse and long-term cultural shifts, while Student 2 argued that strict regulation could address most concerns.</strong> The discussion evolved as each student challenged the other's comparisonsStudent 1 warned of potential normalization leading to devaluing life, and Student 2 countered with analogies to regulated tools and palliative care.</p>
</li>
<li>
<p><strong>Guide steered the conversation by asking targeted questions that forced both students to clarify and defend their positions on oversight and societal impact.</strong> Guides interventions helped focus the debate on core issues like the potential normalization of euthanasia and the integrity of safeguards, ensuring the discussion remained both practical and philosophically rigorous.</p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, could you address Student 1s concern about long-term cultural shifts more directly? What makes you confident that legalizing active euthanasia wouldn't gradually erode society's commitment to caring for vulnerable people?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce">- **Students debated the ethical implications of legalizing active euthanasia, with Student 1 emphasizing risks of abuse and long-term cultural shifts, while Student 2 argued that strict regulation could address most concerns.** The discussion evolved as each student challenged the other's comparisonsStudent 1 warned of potential normalization leading to devaluing life, and Student 2 countered with analogies to regulated tools and palliative care.

- **Guide steered the conversation by asking targeted questions that forced both students to clarify and defend their positions on oversight and societal impact.** Guides interventions helped focus the debate on core issues like the potential normalization of euthanasia and the integrity of safeguards, ensuring the discussion remained both practical and philosophically rigorous.

  
&gt; **Student 2, could you address Student 1s concern about long-term cultural shifts more directly? What makes you confident that legalizing active euthanasia wouldn't gradually erode society's commitment to caring for vulnerable people?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==fa671a3cdf::b624f9c9b3::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Aurelia Brouwers
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce">
<ul>
<li><strong>Students debated whether euthanasia could be morally justified for cases like Aurelia Brouwers's, focusing on patient autonomy versus the nature of suffering.</strong> Student 1 supported the view that both mental and physical suffering warrant the same ethical consideration for euthanasia, while Student 2 stressed the importance of exhaustively exploring treatment options and safeguarding against premature decisions.</li>
<li><strong>Guide effectively challenged the students by probing the differences between mental and physical suffering and questioning if the expected natural lifespan should affect the morality of euthanasia.</strong> Student arguments were deepened after Guides interventions prompted them to consider distinguishing criteria and safeguards for such cases.  </li>
</ul>
<blockquote>
<p><strong>Student 1, what makes Aurelia's case different from terminal illness cases where you'd support euthanasia? Her mental suffering was severe and treatment-resistant  does the nature of the suffering (mental vs physical) change the moral calculation? What if someone has genuinely tried for years to find happiness and meaning, as Aurelia did, but their mental suffering remains unbearable? At what point do we respect their autonomy to make this choice, even if we personally believe there might still be hope?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce">- **Students debated whether euthanasia could be morally justified for cases like Aurelia Brouwers's, focusing on patient autonomy versus the nature of suffering.** Student 1 supported the view that both mental and physical suffering warrant the same ethical consideration for euthanasia, while Student 2 stressed the importance of exhaustively exploring treatment options and safeguarding against premature decisions.
- **Guide effectively challenged the students by probing the differences between mental and physical suffering and questioning if the expected natural lifespan should affect the morality of euthanasia.** Student arguments were deepened after Guides interventions prompted them to consider distinguishing criteria and safeguards for such cases.  

&gt; **Student 1, what makes Aurelia's case different from terminal illness cases where you'd support euthanasia? Her mental suffering was severe and treatment-resistant  does the nature of the suffering (mental vs physical) change the moral calculation? What if someone has genuinely tried for years to find happiness and meaning, as Aurelia did, but their mental suffering remains unbearable? At what point do we respect their autonomy to make this choice, even if we personally believe there might still be hope?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==988dab6ade::0f08229b42::e0148b21ce" style="display: none;"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="clear:both; height:20px;"></div>
<!-- Add Qualtrics Survey Data Card - if data exists -->
<div class="row mb-4">
<div class="col-12">
<div class="py-4 mb-4">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Post-Chat Survey Data</div>
</h5>
<div class="card-body pt-0">
<div class="row">
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>28</h3>
<p class="text-muted">Total Survey Responses</p>
</div>
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>14</h3>
<p class="text-muted">Threads With Surveys</p>
</div>
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>100.0%</h3>
<p class="text-muted">Response Rate</p>
</div>
</div>
<div class="d-flex justify-content-between align-items-center text-muted small mb-0" style="gap: 1rem;">
<span class="ml-auto text-right" style="flex:1; text-align:right;">Last updated: 2025-05-06 22:34:28.326000</span>
</div>
</div>
</div>
</div>
</div>
<!-- Separate row for survey histogram charts floating on background -->
<div class="row mb-4">
<div class="col-12">
<!-- Overall Rating and Guide Feedback -->
<div class="row">
<div class="col-md-6 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">How was your chat?</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;"> Awesome</span>
<span style="font-size:0.9rem; color:#a9adc1;">13 (46.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:46.42857142857143%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;"> Good</span>
<span style="font-size:0.9rem; color:#a9adc1;">11 (39.3%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:39.285714285714285%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;"> It's OK</span>
<span style="font-size:0.9rem; color:#a9adc1;">4 (14.3%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:14.285714285714285%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;"> Not a fan</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;"> Hated it</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.68 <span style="opacity:0.7;">(95% confidence interval: 1.401.96)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">Guide contributed the right amount</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">21 (75.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:75.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">6 (21.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:21.428571428571427%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (3.6%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:3.571428571428571%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 0.71 <span style="opacity:0.7;">(95% confidence interval: 0.510.92)</span></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="height: 2rem;"></div>
<div class="row">
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I felt comfortable sharing my honest opinions with my partner</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">8 (61.5%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:61.53846153846154%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">5 (38.5%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:38.46153846153847%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.62 <span style="opacity:0.7;">(95% confidence interval: 1.311.92)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I was not offended by my partner's perspective</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">12 (70.6%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:70.58823529411765%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">2 (11.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:11.76470588235294%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (17.6%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:17.647058823529413%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.53 <span style="opacity:0.7;">(95% confidence interval: 1.121.94)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It was valuable to chat with a student who did not share my perspective</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (18.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:18.75%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">9 (56.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:56.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (18.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:18.75%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (6.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:6.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 0.81 <span style="opacity:0.7;">(95% confidence interval: 0.291.34)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It would be good if more students and classes used Sway</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">7 (53.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:53.84615384615385%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">4 (30.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:30.76923076923077%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">2 (15.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:15.384615384615385%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.38 <span style="opacity:0.7;">(95% confidence interval: 0.921.85)</span></div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Opinion Changes Section -->
</div>
</div>
<!-- End Qualtrics Survey Data Section -->
<!-- Modal containers will be dynamically injected here by JS if needed -->
<div id="modal-container"></div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- =====================
     Core Utilities
     ===================== -->
<script>
  // Debug logging utility
  function debug_log(message, level, details = null) {
    if (details) {
      console.log(`DEBUG[${level}]:`, message, details);
    } else {
      console.log(`DEBUG[${level}]:`, message);
    }
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- =====================
     Theme Toggle
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input'); // Fixed id to match the input in _header.html
    if (!themeToggle) return;
    // Determine initial theme from localStorage or template variable
    let initialTheme = localStorage.getItem('theme');
    if (!initialTheme) {
      initialTheme = 'dark-mode' === 'light-mode' ? 'light' : 'dark';
    }
    // Set initial toggle state and class
    themeToggle.checked = initialTheme === 'light';
    document.documentElement.className = initialTheme === 'light' ? 'light-mode' : 'dark-mode';
    // Add event listener for theme toggle
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.classList.remove('dark-mode');
        document.documentElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.classList.remove('light-mode');
        document.documentElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
  });
</script>
<!-- =====================
     Summary/Report Generation & Polling
     ===================== -->
<script>
  let pollingInterval = null;
  let cancelRequested = false;
  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    let hasSavedSummaries = "true" === "true";
    
    // Check directly if there are any thread summaries actually present on the page
    const allThreadSummaries = document.querySelectorAll('.thread-summary.markdown-content');
    const hasVisibleSummaries = Array.from(allThreadSummaries).some(el => 
      el.innerHTML.trim() !== '' && el.style.display !== 'none'
    );
    
    // If we have visible summaries on the page, allow generating the report regardless of server-side flag
    if (hasVisibleSummaries) {
      hasSavedSummaries = true;
      debug_log("Enabling report button because visible summaries were found on page", 1);
    }
    
    if (reportBtn && hasSavedSummaries) {
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    if (hasGeneratingThreads) {
      startPolling();
      if (generateBtn) generateBtn.style.display = 'none';
      if (cancelBtn) cancelBtn.style.display = 'inline-block';
    }
    // Generate summaries
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        generateBtn.style.display = 'none';
        if (cancelBtn) cancelBtn.style.display = 'inline-block';
        fetch('/assignment/e0148b21ce/generate_summaries', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1);
            startPolling();
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1);
          }
        })
        .catch(error => debug_log("Network error:", error, 1));
      });
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/e0148b21ce/cancel_generation', { method: 'POST' })
            .then(response => {
              if (response.ok) {
                stopPolling();
                document.querySelectorAll('.thread-status').forEach(status => {
                  if (status.textContent === 'Queued for generation...') status.style.display = 'none';
                });
                document.querySelectorAll('.spinner-border').forEach(spinner => spinner.style.display = 'none');
                generateBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'none';
              }
            });
        });
      }
    }
    // Report button
    if (reportBtn) {
      // Show/hide advanced thinking controls based on model selection
      const modelToggleGroup = document.getElementById('report-model-toggle-group');
      const advancedThinkingControls = document.getElementById('advanced-thinking-controls');
      function updateThinkingControlsVisibility() {
        const checked = modelToggleGroup.querySelector('input[type=radio]:checked');
        if (checked && checked.value === 'anthropic') {
          advancedThinkingControls.style.display = 'flex';
        } else {
          advancedThinkingControls.style.display = 'none';
        }
      }
      if (modelToggleGroup && advancedThinkingControls) {
        modelToggleGroup.addEventListener('change', updateThinkingControlsVisibility);
        updateThinkingControlsVisibility();
      }
      reportBtn.addEventListener('click', function() {
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        reportBtn.disabled = true;
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        // Collect all visible summaries from the UI
        const summaries = {};
        document.querySelectorAll('.thread-card').forEach(card => {
          const threadId = card.id.replace('thread-', '');
          const summaryEl = card.querySelector('.thread-summary');
          if (summaryEl && summaryEl.innerHTML.trim() !== '' && summaryEl.style.display !== 'none') {
            // Try to get the raw markdown if available
            let summaryContent = '';
            const editorEl = card.querySelector('.summary-markdown-editor');
            if (editorEl && editorEl.value.trim() !== '') {
              summaryContent = editorEl.value.trim();
            } else {
              // Otherwise use the HTML content
              summaryContent = summaryEl.innerHTML;
            }
            summaries[threadId] = {
              thread_id: threadId,
              assignment_id: 'e0148b21ce',
              summary: summaryContent,
              content: summaryContent,
              status: 'completed'
            };
          }
        });
        debug_log(`Collected ${Object.keys(summaries).length} visible summaries from UI`, 1);
        // Get selected model provider
        let modelProvider = 'openai';
        const checked = document.querySelector('#report-model-toggle-group input[type=radio]:checked');
        if (checked) modelProvider = checked.value;
        // Get advanced thinking mode and budget if Anthropic
        let enableThinking = false;
        let thinkingBudgetTokens = 4096;
        if (modelProvider === 'anthropic') {
          const enableThinkingCheckbox = document.getElementById('enable-thinking-checkbox');
          const thinkingBudgetInput = document.getElementById('thinking-budget-input');
          if (enableThinkingCheckbox && enableThinkingCheckbox.checked) {
            enableThinking = true;
          }
          if (thinkingBudgetInput && thinkingBudgetInput.value) {
            thinkingBudgetTokens = parseInt(thinkingBudgetInput.value) || 4096;
          }
        }
        fetch('/assignment/e0148b21ce/generate_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            summaries: summaries,
            model_provider: modelProvider,
            enable_thinking: enableThinking,
            thinking_budget_tokens: thinkingBudgetTokens
          })
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1);
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1);
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    // Refresh data
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        refreshDataBtn.disabled = true;
        fetch('/assignment/e0148b21ce/refresh_data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    // Regenerate title
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        fetch('/assignment/e0148b21ce/regenerate_title', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) titleEl.textContent = data.title;
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
    
    // Final check to ensure report button is enabled if summaries exist
    setTimeout(function() {
      const reportBtn = document.getElementById('report-btn');
      if (reportBtn && reportBtn.disabled) {
        const visibleSummaries = document.querySelectorAll('.thread-summary.markdown-content');
        const hasContent = Array.from(visibleSummaries).some(el => 
          el.innerHTML.trim() !== '' && el.style.display !== 'none'
        );
        
        if (hasContent) {
          reportBtn.disabled = false;
          debug_log("Enabling report button in final check - summaries exist", 1);
        }
      }
    }, 500); // Short delay to ensure all content is processed
  });
  function startPolling() {
    if (pollingInterval) clearInterval(pollingInterval);
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    checkSummaryStatus();
  }
  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }
  function checkSummaryStatus() {
    fetch('/assignment/e0148b21ce/summary_status')
      .then(response => response.json())
      .then(data => {
        let activeGeneration = false;
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'inline-block';
          } else if (threadInfo.status === 'completed') {
            if (statusEl) statusEl.style.display = 'none';
            if (spinnerEl) spinnerEl.style.display = 'none';
            if (summaryEl && threadInfo.render_html) {
              summaryEl.innerHTML = threadInfo.render_html;
              summaryEl.style.display = 'block';
              // Update the markdown textarea value for this thread
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                // If threadInfo has markdown, use it; otherwise, fallback to extracting from HTML
                if (threadInfo.markdown) {
                  textarea.value = threadInfo.markdown;
                } else if (threadInfo.render_html) {
                  // Optionally, convert HTML back to markdown if needed (or leave blank)
                  textarea.value = '';
                }
                // If CodeMirror is open for this thread, update its value too
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(textarea.value);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              // If a summary was successfully displayed, enable the report button
              const reportBtn = document.getElementById('report-btn');
              if (reportBtn) {
                reportBtn.disabled = false;
                debug_log("Enabling report button because a summary was loaded", 1);
              }
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          }
        });
        if (!activeGeneration) {
          stopPolling();
          const generateBtn = document.getElementById('generate-btn');
          const cancelBtn = document.getElementById('cancel-btn');
          if (generateBtn) generateBtn.style.display = 'inline-block';
          if (cancelBtn) cancelBtn.style.display = 'none';
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => debug_log('Error checking summary status:', error, 1));
  }
  function checkReportStatus() {
    fetch('/assignment/e0148b21ce/report_status')
      .then(response => response.json())
      .then(data => {
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        debug_log("Report status update:", data, 1);
        
        if (data.status === 'completed') {
          // Report generation completed
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Only update the UI if we have content
          if (data.content && reportSection) {
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            const styleTag = document.createElement('style');
            styleTag.textContent = `#report-content ul ul {margin-top:0.5em;margin-bottom:0.5em;padding-left:2em;}#report-content li > ul {margin-left:1em;}`;
            reportContent.appendChild(styleTag);
            
            // Check if render_html is available first, otherwise use content
            if (data.render_html) {
              reportContent.innerHTML += data.render_html;
            } else {
              reportContent.innerHTML += data.content;
            }
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2 d-flex justify-content-end align-items-center';
            
            // Create formatted date display
            const formattedDate = new Date(data.generated_at).toLocaleDateString('en-US', {
              month: 'short', 
              day: 'numeric', 
              year: 'numeric',
              hour: 'numeric',
              minute: '2-digit',
              hour12: true
            });
            
            generatedText.innerHTML = `
              <span class="text-right" style="flex:1; text-align:right;">Generated on: ${formattedDate}</span>
              ${!exportMode ? `
                <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-2" id="edit-report-btn" title="Edit report" style="vertical-align: baseline;">
                  <i class="fas fa-pencil-alt"></i>
                </button>
              ` : ''}
            `;
            
            // Clear existing content and append new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert UTC timestamps to local
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) { console.error('Error converting time:', e); }
            });
            
            debug_log("Updated report UI with new content", 1);
          } else {
            debug_log("Report completed but no content received", 2);
          }
        } else if (data.status === 'generating' || data.status === 'running') {
          // Report is still being generated
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          
          // Show elapsed time if available
          if (data.elapsed_seconds) {
            const elapsed = Math.round(data.elapsed_seconds);
            if (noReportMsg) {
              noReportMsg.textContent = `Generating instructor report... (${elapsed}s)`;
            }
          }
          
          // Continue polling
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        } else {
          // Unknown or not_started status
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (data.report_exists && reportSection) {
            // If report exists but no status, try refreshing the page after a timeout
            debug_log("Report exists but status not provided - will try to reload content", 2);
            setTimeout(checkReportStatus, 2000);
          }
        }
      })
      .catch(error => {
        debug_log("Error checking report status:", error, 2);
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>
<!-- =====================
     CodeMirror for Editing
     ===================== -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css" rel="stylesheet"/>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Report editing
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        if (reportEditor) reportEditor.refresh();
      });
    }
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        const markdown = reportEditor.getValue();
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        editorSpinner.style.display = 'inline-block';
        fetch('/assignment/e0148b21ce/edit_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ markdown: markdown })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          if (data.success) {
            reportContent.innerHTML = data.content;
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusMessage.style.display = 'none'; }, 3000);
      }
    }
  });
</script>
<!-- =====================
     Summary Editing (CodeMirror)
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    const summaryEditors = {};
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          let markdownContent = textarea.value;
          if (!markdownContent) {
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          summaryEditors[sessionId].setValue(markdownContent);
          summaryEditors[sessionId].refresh();
        } else {
          summaryEditors[sessionId].refresh();
        }
      });
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          const markdown = summaryEditors[sessionId].getValue();
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          fetch('/assignment/e0148b21ce/edit_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId, markdown: markdown })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.render_html || data.content;
              summaryElement.style.display = 'block';
              // Update the markdown textarea value
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                textarea.value = markdown;
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(markdown);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      btn.addEventListener('click', function() {
        // Removed confirmation dialog for immediate regeneration
        const statusElement = document.getElementById(`status-${sessionId}`);
        const spinnerElement = document.getElementById(`spinner-${sessionId}`);
        if (statusElement && spinnerElement) {
          statusElement.textContent = 'Regenerating summary...';
          statusElement.className = 'status-message thread-status text-info';
          statusElement.style.display = 'block';
          spinnerElement.style.display = 'inline-block';
          summaryElement.style.opacity = '0.5';
          fetch('/assignment/e0148b21ce/regenerate_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId })
          })
          .then(response => response.json())
          .then(data => {
            spinnerElement.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.content;
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message;
              statusElement.className = 'status-message thread-status success';
              attachButtonListeners(sessionId);
              setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
            } else {
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message || 'Error regenerating summary';
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            }
          })
          .catch(error => {
            spinnerElement.style.display = 'none';
            summaryElement.style.opacity = '1';
            statusElement.textContent = 'Error regenerating summary: ' + error;
            statusElement.className = 'status-message thread-status error';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
          });
        }
      });
    });
    function attachButtonListeners(sessionId) {
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          // Removed confirmation dialog for immediate regeneration
          const summaryElement = document.getElementById(`summary-${sessionId}`);
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            summaryElement.style.opacity = '0.5';
            fetch('/assignment/e0148b21ce/regenerate_summary', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ session_id: sessionId })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              if (data.success) {
                summaryElement.innerHTML = data.content;
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                attachButtonListeners(sessionId);
                setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            });
          }
        });
      }
    }
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusEl.style.display = 'none'; }, 3000);
      }
    }
  });
</script>
<!-- =====================
     Export/Share Functionality
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Export button
    const exportBtn = document.querySelector('a[href*="/export"]');
    if (exportBtn) {
      exportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        const exportUrl = new URL(this.href, window.location.origin);
        
        // Add selected histogram fields to export URL
        const selectedHistograms = getSelectedHistograms();
        if (selectedHistograms.length > 0) {
          exportUrl.searchParams.set('histograms', selectedHistograms.join(','));
        }
        
        exportUrl.searchParams.set('theme', currentTheme);
        window.location.href = exportUrl.toString();
      });
    }
    // Set theme class on HTML element for export mode
    if ('True' === 'True' && 'dark-mode') {
      document.documentElement.className = 'dark-mode';
    }
    // Share export button
    const shareExportBtn = document.getElementById('share-export-btn');
    if (shareExportBtn) {
      shareExportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        shareExportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
        shareExportBtn.disabled = true;
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        
        // Add selected histogram fields to share request
        const selectedHistograms = getSelectedHistograms();
        
        fetch('/assignment/e0148b21ce/share_export', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            theme: currentTheme,
            selected_histograms: selectedHistograms
          })
        })
        .then(response => response.json())
        .then(data => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          if (data.success) {
            const modalHtml = `
              <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content" style="background-color: var(--card-bg); color: var(--text-color);">
                    <div class="modal-header" style="border-color: var(--border-color);">
                      <h5 class="modal-title" id="shareModalLabel">Share Export</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: var(--text-color);">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Your export has been saved. Share this link:</p>
                      <div class="input-group mb-3">
                        <input type="text" id="share-link" class="form-control" value="${data.share_url}" readonly style="background-color: var(--input-bg); color: var(--text-color); border-color: var(--border-color);">
                        <div class="input-group-append">
                          <button class="btn btn-primary" type="button" id="copy-link-btn">
                            <i class="fas fa-copy"></i> Copy
                          </button>
                        </div>
                      </div>
                      <div id="copy-feedback" class="text-success" style="display: none;">Link copied to clipboard!</div>
                    </div>
                    <div class="modal-footer" style="border-color: var(--border-color);">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <a href="${data.share_url}" target="_blank" class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> Open
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            `;
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHtml;
            document.body.appendChild(modalContainer);
            $('#shareModal').modal('show');
            document.getElementById('copy-link-btn').addEventListener('click', function() {
              const shareLink = document.getElementById('share-link');
              shareLink.select();
              document.execCommand('copy');
              const copyFeedback = document.getElementById('copy-feedback');
              copyFeedback.style.display = 'block';
              setTimeout(() => { copyFeedback.style.display = 'none'; }, 3000);
            });
            $('#shareModal').on('hidden.bs.modal', function() {
              modalContainer.remove();
            });
          } else {
            alert('Error: ' + (data.message || 'Could not generate shared export'));
          }
        })
        .catch(error => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          alert('Error: Could not generate shared export');
          console.error('Error:', error);
        });
      });
    }
    
    // Helper function to get selected histograms
    function getSelectedHistograms() {
      const checkboxes = document.querySelectorAll('.export-histogram-checkbox:checked');
      return Array.from(checkboxes).map(cb => cb.getAttribute('data-field')).filter(Boolean);
    }
  });
</script>
<!-- =====================
     Histogram Selection for Export
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle the select/deselect all buttons
    const selectAllBtn = document.getElementById('select-all-histograms');
    const deselectAllBtn = document.getElementById('deselect-all-histograms');
    
    if (selectAllBtn) {
      selectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = true;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.color = '#8a8aff';
            setTimeout(() => {
              label.style.color = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = selectAllBtn.innerHTML;
        selectAllBtn.innerHTML = '<i class="fas fa-check mr-1"></i> All Selected';
        setTimeout(() => {
          selectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    if (deselectAllBtn) {
      deselectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = false;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.opacity = '0.7';
            setTimeout(() => {
              label.style.opacity = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = deselectAllBtn.innerHTML;
        deselectAllBtn.innerHTML = '<i class="fas fa-times mr-1"></i> All Deselected';
        setTimeout(() => {
          deselectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    // Initialize checkboxes from localStorage if available
    const savedSelections = localStorage.getItem('selected_histograms');
    if (savedSelections) {
      try {
        const selections = JSON.parse(savedSelections);
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          const field = checkbox.getAttribute('data-field');
          if (field && selections.includes(field)) {
            checkbox.checked = true;
          }
        });
      } catch (e) {
        console.error('Error loading saved histogram selections:', e);
      }
    } else {
      // If no saved selections, select all by default
      document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
        checkbox.checked = true;
      });
      saveHistogramSelections();
    }
    
    // Save selections to localStorage when changed
    document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', saveHistogramSelections);
    });
    
    function saveHistogramSelections() {
      const selectedFields = Array.from(document.querySelectorAll('.export-histogram-checkbox:checked'))
        .map(cb => cb.getAttribute('data-field'))
        .filter(Boolean);
      
      localStorage.setItem('selected_histograms', JSON.stringify(selectedFields));
    }
  });
</script>
<!-- =====================
     Social Sharing Buttons
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('twitter-share')) {
      const pageUrl = encodeURIComponent(window.location.href);
      const shareMessage = encodeURIComponent("Check out the assignments my students just finished on Sway! The AI Guide killed it! ");
      
      // X (formerly Twitter) sharing
      const xBtn = document.getElementById('twitter-share');
      xBtn.href = `https://x.com/intent/tweet?text=${shareMessage}&url=${pageUrl}`;
      xBtn.target = '_blank';
      xBtn.rel = 'noopener noreferrer';
      
      // Facebook sharing
      const facebookBtn = document.getElementById('facebook-share');
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}&quote=${shareMessage}`;
      facebookBtn.target = '_blank';
      facebookBtn.rel = 'noopener noreferrer';
      
      // LinkedIn sharing
      const linkedinBtn = document.getElementById('linkedin-share');
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
      linkedinBtn.target = '_blank';
      linkedinBtn.rel = 'noopener noreferrer';
      
      // Instagram sharing (requires copy to clipboard)
      const instagramBtn = document.getElementById('instagram-share');
      instagramBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const textarea = document.createElement('textarea');
        textarea.value = `${shareMessage}\n\n${window.location.href}`;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Link and message copied to clipboard. Paste this into Instagram to share!');
      });
    }
  });
</script>
<!-- =====================
     CSS for Status Messages and CodeMirror
     ===================== -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>
<script src="/static/js/histogram-title-fixer.js"></script>
<!-- Script for polished Show More/Fewer functionality in all modes -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Instructor Report Show More
      const setupReportShowMore = function() {
        const reportContent = document.getElementById('report-content');
        if (reportContent) {
          const headings = reportContent.querySelectorAll('h3');
          if (headings.length > 2) {
            const secondHeading = headings[1];
            const hiddenContentWrapper = document.createElement('div');
            hiddenContentWrapper.id = 'hidden-report-content';
            hiddenContentWrapper.className = 'collapsible-section collapsed';
            let currentNode = secondHeading.nextElementSibling;
            let nodesToMove = [];
            while (currentNode) {
              if (currentNode.tagName === 'H3' && currentNode !== secondHeading) {
                nodesToMove.push(currentNode);
              } else if (nodesToMove.length > 0) {
                nodesToMove.push(currentNode);
              }
              currentNode = currentNode.nextElementSibling;
            }
            nodesToMove.forEach(node => { hiddenContentWrapper.appendChild(node); });
            reportContent.appendChild(hiddenContentWrapper);
            
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'btn btn-thread-toggle show-toggle-btn';
            showMoreBtn.innerHTML = 'Continue Reading <i class="fas fa-chevron-down"></i>';
            showMoreBtn.style.marginTop = '1.5rem';
            reportContent.insertBefore(showMoreBtn, hiddenContentWrapper);
            
            // Add a spacer div ABOVE the Continue Reading button for extra spacing
            const spacerDiv = document.createElement('div');
            spacerDiv.style.height = '1rem';
            spacerDiv.style.clear = 'both';
            reportContent.insertBefore(spacerDiv, showMoreBtn);
            
            showMoreBtn.addEventListener('click', function() {
              const expanded = hiddenContentWrapper.classList.contains('collapsed');
              if (expanded) {
                hiddenContentWrapper.classList.remove('collapsed');
                showMoreBtn.classList.add('expanded');
                showMoreBtn.innerHTML = 'Show Less <i class="fas fa-chevron-up"></i>';
              } else {
                hiddenContentWrapper.classList.add('collapsed');
                showMoreBtn.classList.remove('expanded');
                showMoreBtn.innerHTML = 'Continue Reading <i class="fas fa-chevron-down"></i>';
              }
            });
          }
        }
      };
      // Threads Masonry Show More
      const setupThreadsShowMore = function() {
        const masonryGrid = document.querySelector('.masonry-grid');
        if (!masonryGrid || masonryGrid.children.length <= 2) {
          return; // Do nothing if 2 or fewer items
        }

        const masonryItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
        const itemsToShowInitially = 2;

        const performHideAndSetupButtons = () => {
          // Hide items beyond the initial set
          for (let i = itemsToShowInitially; i < masonryItems.length; i++) {
            if (masonryItems[i]) { // Ensure item exists
              masonryItems[i].classList.add('hidden-thread');
            }
          }

          const hiddenItemCount = masonryGrid.querySelectorAll('.masonry-item.hidden-thread').length;
          if (hiddenItemCount === 0 && masonryItems.length > itemsToShowInitially) {
            // Fallback or logging if hiding didn't work as expected but should have
            console.warn("Masonry items were expected to be hidden but were not.");
            // Potentially, if itemsToShowInitially is high, this might be normal if total items < itemsToShowInitially
          }
          
          // Only proceed with buttons if there are actually items to unhide
          if (masonryItems.length <= itemsToShowInitially) {
            return;
          }

          const showMoreThreadsBtn = document.createElement('button');
          showMoreThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';

          const updateShowMoreText = () => {
            const currentHiddenCount = masonryGrid.querySelectorAll('.masonry-item.hidden-thread').length;
            showMoreThreadsBtn.innerHTML = `Show ${currentHiddenCount} More Threads`;
            // Show button only if there are hidden threads
            showMoreThreadsBtn.style.display = currentHiddenCount > 0 ? 'block' : 'none';
          };
          
          const showFewerThreadsBtn = document.createElement('button');
          showFewerThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          showFewerThreadsBtn.innerHTML = 'Show Fewer Threads';
          showFewerThreadsBtn.style.display = 'none'; // Initially hidden

          const threadListSection = document.querySelector('.thread-list');
          let spacerDiv;
          if (threadListSection) {
            spacerDiv = document.createElement('div');
            spacerDiv.style.height = '4px';
            spacerDiv.style.clear = 'both';
            spacerDiv.style.display = 'none';
            threadListSection.appendChild(spacerDiv);
            threadListSection.appendChild(showFewerThreadsBtn);
          }
          
          // Insert Show More button only if there's a chance it will be displayed
          if (masonryItems.length > itemsToShowInitially) {
             masonryGrid.parentNode.insertBefore(showMoreThreadsBtn, masonryGrid.nextSibling);
             updateShowMoreText(); // Set initial text and visibility
          }


          showMoreThreadsBtn.addEventListener('click', function() {
            masonryItems.forEach(item => item.classList.remove('hidden-thread'));
            updateShowMoreText(); // Button should hide itself
            showFewerThreadsBtn.style.display = 'block';
            if (spacerDiv) spacerDiv.style.display = 'block';
          });

          showFewerThreadsBtn.addEventListener('click', function() {
            for (let i = itemsToShowInitially; i < masonryItems.length; i++) {
              if (masonryItems[i]) {
                masonryItems[i].classList.add('hidden-thread');
              }
            }
            updateShowMoreText(); // Button should reappear and update count
            showFewerThreadsBtn.style.display = 'none';
            if (spacerDiv) spacerDiv.style.display = 'none';
            
            const chatThreadsSectionTitle = document.querySelector('h5.section-title .fa-comments');
            if (chatThreadsSectionTitle && chatThreadsSectionTitle.closest('h5.section-title')) {
              chatThreadsSectionTitle.closest('h5.section-title').scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
              masonryGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        };

        if (window.requestAnimationFrame) {
          window.requestAnimationFrame(() => {
            setTimeout(performHideAndSetupButtons, 75); // Delay to allow layout to settle
          });
        } else {
          setTimeout(performHideAndSetupButtons, 75); // Fallback
        }
      };

      setupReportShowMore();
      setupThreadsShowMore();

      // Opinion Distribution Show More/Less
      const histogramCards = document.querySelectorAll('.opinion-histogram-card');
      const showMoreBtn = document.getElementById('show-more-histograms-btn');
      const showFewerBtn = document.getElementById('show-fewer-histograms-btn');
      const maxVisible = 6;
      if (histogramCards.length > maxVisible) {
        for (let i = maxVisible; i < histogramCards.length; i++) {
          histogramCards[i].classList.add('hidden-histogram');
        }
        showMoreBtn.style.display = 'inline-block';
      }
      if (showMoreBtn && showFewerBtn) {
        showMoreBtn.addEventListener('click', function() {
          for (let i = maxVisible; i < histogramCards.length; i++) {
            histogramCards[i].classList.remove('hidden-histogram');
          }
          showMoreBtn.style.display = 'none';
          showFewerBtn.style.display = 'inline-block';
        });
        showFewerBtn.addEventListener('click', function() {
          for (let i = maxVisible; i < histogramCards.length; i++) {
            histogramCards[i].classList.add('hidden-histogram');
          }
          showMoreBtn.style.display = 'inline-block';
          showFewerBtn.style.display = 'none';
          // Scroll to the top of the histogram section
          const sectionTitle = document.querySelector('.section-title .fa-chart-bar');
          if (sectionTitle && sectionTitle.closest('.section-title')) {
            sectionTitle.closest('.section-title').scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      }
    });
  </script>
<!-- Script to disable hover animations -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create a style element
      var style = document.createElement('style');
      
      // Add CSS rules to disable hover animations
      style.innerHTML = `
        .card:hover, 
        .thread-item:hover, 
        .histogram-container:hover, 
        .histogram-bar:hover, 
        .histogram-card:hover {
          transform: none !important;
        }
      `;
      
      // Append the style element to the head
      document.head.appendChild(style);
    });
  </script>
<!-- Close content-wrapper -->
</body>
</html>