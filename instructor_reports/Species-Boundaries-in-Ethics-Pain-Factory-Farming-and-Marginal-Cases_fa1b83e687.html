<!DOCTYPE html>

<html class="dark-mode" lang="en">
<head>
<script>
    // Set the correct Bootswatch theme based on theme_mode immediately
    window.themeMode = 'dark-mode';
    if (window.themeMode === 'light-mode') {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/flatly/bootstrap.min.css" id="theme-css">');
    } else {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">');
    }
  </script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<title>Animal Suffering &amp; Factory Farming</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/>
<style>
    :root {
      /* Darkened dark mode theme */
      --bg-color: #050505;          /* Near-black background */
      --card-bg: #0e0e1a;           /* Deeper navy card */
      --card-header-bg: #141422;     /* Darker header */
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #1f1f2d;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #141422;
      --message-right-bg: #0e0e1a;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple Sway theme colors */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    html {
      margin: 0;
      padding: 0;
      border: none;
      outline: none;
    }
    
    body { 
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
      border: none; /* Remove any borders */
      outline: none; /* Remove any outlines */
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
      border: none;
      outline: none;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 0;
        margin-right: 0;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 0;
        margin-right: 0;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: background-color 0.3s ease;
    }
    .card:hover {
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    /* No hover effect for section title cards */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.68rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      padding-left: 15px;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.7em;
      padding: 6px 8px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 15px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        flex-wrap: nowrap;
      }
      .thread-list-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: calc(50% - 8px);
      }
    }
    .thread-card {
      margin-bottom: 0 !important;
    }
    .thread-item {
      display: flex;
      flex-direction: column;
      width: 100%;
      opacity: 1; /* Ensure visibility */
      padding: 15px;
      background-color: var(--card-bg);
      border-radius: 12px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent; /* Remove orange border */
    }
    .thread-item.visible {
      opacity: 1;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .thread-header .thread-actions {
      display: flex;
      gap: 6px;
      white-space: nowrap;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
      /* Hide theme toggle and edit prompts in mobile */
      .theme-toggle {
        display: none !important;
      }
      a.back-btn[href*="edit_prompts"] {
        display: none !important;
      }
      #share-export-btn {
        margin-right: 0 !important;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to match the Info card */
    #topics-container {
      max-height: 420px;
      min-height: 420px;
      overflow-y: auto;
    }
    /* Smaller height for export mode */
    html.export-mode #topics-container {
      max-height: 345px;
      min-height: 345px;
    }

    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: #090118 !important;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    
    .histogram-bar {
      background: linear-gradient(180deg, #a9a9ff 0%, #8a8aff 100%);
      border-radius: 4px 4px 6px 6px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      box-shadow: 0 2px 6px rgba(138,138,255,0.2);
    }
    .histogram-bar:hover {
      box-shadow: 0 4px 8px rgba(138,138,255,0.4);
    }
    .histogram-axis-line {
      background: rgba(169,173,193,0.4);
      width: 2px;
    }
    .histogram-grid-line {
      background: rgba(169,173,193,0.13);
      height: 1px;
    }
    .histogram-container .axis-label {
      color: #a9adc1;
      font-size: 0.95rem;
      opacity: 0.85;
    }
    .histogram-container .x-label {
      color: #a9adc1;
      font-size: 1.1rem;
      font-weight: 500;
      margin-top: 0.35rem;
    }
    .histogram-container .card-body {
      padding: 1.25rem;
    }
    
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }

    /* Add social sharing buttons styling */
    .social-share-container {
      background-color: var(--card-header-bg);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .social-share-title {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary-color);
    }
    .social-share-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: opacity 0.2s;
      font-size: 0.9rem;
    }
    .social-btn:hover {
      opacity: 0.85;
      text-decoration: none;
      color: white;
    }
    .social-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    .btn-twitter {
      background-color: #1DA1F2;
    }
    .btn-facebook {
      background-color: #4267B2;
    }
    .btn-linkedin {
      background-color: #0077B5;
    }
    .btn-instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }
    @media (max-width: 576px) {
      .social-btn {
        padding: 4px 9px;
        font-size: 0.8rem;
      }
      .social-btn i {
        margin-right: 4px;
      }
    }

    .full-width-page {
      width: 100%;
      max-width: 1420px;
      margin: 0 auto;
      padding-left: 24px;
      padding-right: 24px;
    }
    @media (min-width: 576px) {
      .full-width-page {
        padding-left: 50px;
        padding-right: 50px;
      }
    }
    @media (min-width: 992px) {
      .full-width-page {
        padding-left: 64px;
        padding-right: 64px;
      }
    }

    /* Histogram card styling - more aggressive fixes */
    .histogram-card {
      background-color: #070113 !important;
      border: none; 
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin-bottom: 0;
      overflow: hidden;
    }

    .histogram-card:hover {
      box-shadow: 0 7px 15px rgba(0,0,0,0.25);
    }

    .histogram-card .card-body {
      padding: 8px 0 !important;
    }

    /* Target histogram SVG elements directly */
    .histogram-card svg {
      max-width: 100% !important;
      margin-left: -20px !important; /* Pull SVG to the left */
      width: calc(100% + 20px) !important; /* Compensate for negative margin */
    }

    /* More aggressive targeting for histogram titles */
    .histogram-card h3,
    .histogram-card .x-label,
    .histogram-card text.title,
    .histogram-card [class*="title"],
    .histogram-card text[font-size="14px"],
    .histogram-card text[font-weight="bold"] {
      text-transform: capitalize !important;
      font-size: 1.15rem !important;
      font-weight: 600 !important;
      color: var(--primary-color) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 95% !important;
      display: block !important;
    }

    /* Add text truncation to histogram title element specifically */
    .histogram-card .histogram-content svg text[y="30"],
    .histogram-card .histogram-content svg text.title {
      text-overflow: ellipsis !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      max-width: 250px !important;
    }

    /* Target mean text specifically */
    .histogram-card .mean-text,
    .histogram-card text[y="300"],
    .histogram-card text:last-of-type,
    .histogram-card text[font-size="12px"] {
      font-size: 0.9rem !important;
    }

    /* Add italicized m= to mean values with several selectors to catch them */
    .histogram-card .mean-text::before,
    .histogram-card text[y="300"]::before,
    .histogram-card text:last-of-type::before {
      content: "m = ";
      font-style: italic;
    }

    @media (max-width: 767.98px) {
      .histogram-card .card-body {
        padding: 8px 0 !important;
      }
    }

    /* Card with no hover effects */
    .no-hover {
      transition: background-color 0.3s ease !important;
    }

    .no-hover:hover {
      transform: none !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
    }

    .thread-heading {
      color: var(--primary-color) !important;
      font-weight: 600;
    }

    /* Truncate long histogram HTML titles with ellipsis */
    .histogram-title,
    .histogram-card [style*="font-size:1.25rem"] {
      font-size: 1rem !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      max-width: 95%;
    }

    /* Hide histogram cards that only contain "No data" text */
    .histogram-card .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .card-body .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .histogram-content:has(> div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Also hide the parent cards when they only contain "No data" content */
    .histogram-card:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")),
    .card-body:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Hide the entire column if it only contains a "No data" card */
    .col-md-6:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))),
    .col-lg-4:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))) {
      display: none !important;
    }

    /* Bootstrap Histogram Styles */
    .histogram-container {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        position: relative;
    }
    
    .histogram-bar-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        padding: 0 2px;
    }
    
    .histogram-bar {
        width: 80%;
        transition: background-color 0.2s ease;
        border-radius: 3px 3px 0 0;
    }
    
    .histogram-bar:hover {
        background-color: #a5a5ff !important;
    }
    
    .histogram-label {
        margin-top: 5px;
        font-size: 11px;
        text-align: center;
    }
    
    .histogram-stats {
        margin-top: 10px;
        text-align: center;
    }
    
    /* Light mode overrides for histograms */
    html.light-mode .histogram-bar {
        background-color: #6a6ae6 !important;
    }
    
    html.light-mode .histogram-bar:hover {
        background-color: #8a8aff !important;
    }

    /* Histogram Checkbox Styles */
    .histogram-export-checkbox {
        position: absolute;
        bottom: 8px;
        right: 8px;
        z-index: 2;
        opacity: 0.6;
        transform: translateY(0);
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    
    .histogram-export-checkbox:hover {
        opacity: 1;
        transform: translateY(-2px);
    }
    
    .histogram-export-checkbox input[type="checkbox"] {
        margin-right: 4px;
        cursor: pointer;
        accent-color: var(--card-bg); /* Match card background for subtlety */
        opacity: 0.5;
        transition: opacity 0.2s;
    }
    
    .histogram-export-checkbox input[type="checkbox"]:hover,
    .histogram-export-checkbox input[type="checkbox"]:focus {
        opacity: 0.85;
    }
    
    .histogram-export-checkbox label {
        font-size: 0.75rem;
        cursor: pointer;
        margin: 0;
        color: var(--muted-text-color);
    }
    
    /* Make the card position relative so absolute positioned checkbox works */
    .card.thread-card .card-body {
        position: relative;
    }
    
    /* Highlight the checkbox when checked */
    .histogram-export-checkbox input[type="checkbox"]:checked + label {
        color: var(--primary-color);
        font-weight: 500;
    }

    .card.thread-card .card-header {
      background-color: #070113 !important;
    }
</style>
<style>
    /* Global color fixes */
    body, html {
      min-height: 100vh;
      width: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #000000; /* Default to black for dark mode */
    }
    
    /* Override for light mode */
    html.light-mode, 
    body.light-mode {
      background-color: white;
    }
    
    /* Ensure all content containers have proper width */
    .container, 
    .container-fluid, 
    .row {
      max-width: 100%;
    }
    
    /* Eliminate any unwanted margins on containers */
    .row {
      margin-left: 0;
      margin-right: 0;
    }
    
    .full-width-page {
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      box-sizing: border-box;
    }
    
    /* Apple-inspired font styling */
    body, button, input, select, textarea {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3, h4, h5, h6, .section-title, .generated-title {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-weight: 600;
      letter-spacing: +0.005em;
    }
    
    /* Custom styles for floating thread items */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .thread-list {
      margin-top: 15px;
      position: relative;
      display: block;
      clear: both;
      margin-bottom: 10px;
    }
    
    /* Masonry layout using columns */
    .masonry-grid {
      column-count: 2;
      column-gap: 1.5rem;
      width: 100%;
      margin-bottom: 8px;
    }
    
    @media (max-width: 767px) {
      .masonry-grid {
        column-count: 1;
      }
    }
    
    .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Items in the masonry grid */
    .masonry-grid .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Make sure thread cards in masonry layout have required styles */
    .masonry-grid .card.thread-card, .card.thread-card {
      background: none !important;
      border: 1px solid var(--thread-card-border, #313131) !important;
      border-radius: 12px !important;
      box-shadow: none !important;
      transition: border-color 0.2s;
    }
    
    /* Dark mode border override */
    body.dark-mode .masonry-grid .card.thread-card,
    body.dark-mode .card.thread-card {
      border-color: #23263a !important;
    }
    
    /* Override any position:relative that may be applied to .card-body elsewhere */
    .masonry-grid .card.thread-card .card-body {
      position: static;
    }
    
    .masonry-grid .card.thread-card:hover {
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .masonry-item.hidden-thread {
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      padding-top: 0 !important;
      padding-bottom: 0 !important;
      margin-top: 0 !important;
      margin-bottom: 0 !important;
      border-top-width: 0 !important;
      border-bottom-width: 0 !important;
      overflow: hidden !important;
      pointer-events: none !important;
    }
    
    .show-toggle-btn {
      display: block;
      margin: 30px auto 10px auto;
      min-width: 220px;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .show-toggle-btn i {
      margin-left: 8px;
      transition: transform 0.2s;
    }
    .show-toggle-btn.expanded i {
      transform: rotate(180deg);
    }
    .collapsible-section {
      transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.4s;
      overflow: hidden;
      opacity: 1;
      max-height: 2000px; /* Large enough for most content */
    }
    .collapsible-section.collapsed {
      max-height: 0 !important;
      opacity: 0;
      pointer-events: none;
    }
    /* Premium title styling with maximum specificity to override any other styles */
    html body .generated-title,
    html[class] body .generated-title,
    body .generated-title.text-info,
    .full-width-page .generated-title,
    .generated-title {
      font-size: 2.5rem !important;
      line-height: 1.2 !important;
      margin-top: 2.5rem !important;
      margin-bottom: 1rem !important;
      font-weight: 600;
      color: white !important;
      text-shadow: 0 1px 3px rgba(0,0,0,0.15);
      letter-spacing: -0.0025em;
      display: block;
      position: relative;
      max-width: 94%;
      padding-bottom: 0.5rem;
      font-style: normal !important; /* Force normal style, no italics */
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
    }
    
    .generated-title::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 8rem;
      height: 3px;
      background: white;
      opacity: 0.7;
      border-radius: 2px;
    }
    
    /* Enhanced styling for better title visibility */
    .dark-mode .generated-title {
      text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(0,0,0,0.1);
    }
    
    /* Light mode title styling */
    .light-mode .generated-title {
      color: #4750c5 !important;
      text-shadow: none;
    }
    
    /* Adjust underline color in light mode */
    .light-mode .generated-title::after {
      background: #4750c5;
      opacity: 0.5;
    }
    
    /* Fix for pure black background in dark mode - only targeting page containers */
    body.dark-mode,
    html.dark-mode,
    .dark-mode .full-width-page {
      background-color: #000000 !important;
    }
    
    /* Explicitly exempt chart elements from background override */
    .dark-mode .progress,
    .dark-mode .progress-bar,
    .dark-mode .bg-success,
    .dark-mode .bg-info,
    .dark-mode .bg-warning,
    .dark-mode .bg-danger,
    .dark-mode .bg-secondary,
    .dark-mode .chart-container,
    .dark-mode [class*="histogram-"] {
      background-color: initial !important; /* Preserve original background colors */
    }
    
    /* Ensure the page fills the viewport */
    html, body {
      min-height: 100% !important;
      height: 100% !important;
    }
    
    .dark-mode.shared-page {
      background-color: #000000 !important;
    }
    
    /* For longer titles, ensure they wrap properly */
    @media (max-width: 992px) {
      .generated-title {
        font-size: 2.4rem !important;
        max-width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      .generated-title {
        font-size: 2rem !important;
        margin-top: 2rem !important;
        margin-bottom: 1.2rem !important;
      }
    }
    .section-title {
      font-size: 1.7rem !important;
      font-weight: 600;
      margin-bottom: 1.2rem;
      letter-spacing: -0.01em;
    }
    /* Remove background from thread card headers */
    .card.thread-card .card-header {
      background: none !important;
      border-bottom: none !important;
    }
    .small {
      font-size: 1em !important;
    }
    /* Show More/Fewer Threads button custom color */
    .btn-thread-toggle {
      color: #3498DB !important;
      border-color: #3498DB !important;
      background: transparent !important;
    }
    .btn-thread-toggle:hover, .btn-thread-toggle:focus {
      background: #eaf6fb !important;
      color: #217dbb !important;
      border-color: #217dbb !important;
    }
    /* Prevent button flash in dark mode */
    .dark-mode .btn-thread-toggle,
    .dark-mode .btn-thread-toggle:active,
    .dark-mode .btn-thread-toggle:focus,
    .dark-mode .btn-thread-toggle:hover {
      background: transparent !important;
      border-color: #99aaff !important;
      color: #99aaff !important;
      box-shadow: none !important;
    }
    /* Ensure info text under section headings aligns with the heading text */
    .section-info-align {
      margin-left: 2.2rem; /* matches the icon+text indent of .section-title .title-text */
    }
    .hidden-histogram {
      display: none !important;
    }
    /* Add extra margin above Continue Reading button in Instructor Report */
    #report-content + .show-toggle-btn {
      margin-top: 2.5rem !important;
    }
    .collapsible-section + .show-toggle-btn {
      margin-top: 2.5rem !important;
    }

    /* ===== Stylish Share Banner ===== */
    .share-banner {
      margin: 0 -1.5rem 2rem -1.5rem;
      background: rgba(24, 26, 45, 0.95);
      backdrop-filter: blur(10px);
      padding: 1.5rem 0;
      position: relative;
      z-index: 10;
    }
    .light-mode .share-banner {
      background: rgba(46, 87, 170, 0.9);
    }
    .share-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .share-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1.2rem;
    }
    .share-text {
      font-size: 1.1rem;
      color: white;
      opacity: 0.95;
      font-weight: 500;
      letter-spacing: -0.01em;
    }
    .share-buttons {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
    }
    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }
    .share-button i {
      font-size: 1.1rem;
    }
    .share-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    .share-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: all 0.1s ease;
    }
    .twitter-share {
      background: #000000; /* X logo has a black background */
    }
    .facebook-share {
      background: #4267B2;
    }
    .linkedin-share {
      background: #0077B5;
    }
    .instagram-share {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    }
    @media (max-width: 576px) {
      .share-text {
        font-size: 0.95rem;
      }
      .share-button {
        width: 2.6rem;
        height: 2.6rem;
      }
    }
    /* ===== End Share Header Styles ===== */

    /* ===== Additional Layout Adjustments for Share Header ===== */
    .shared-page {
      padding-top: 0 !important;
    }
    
    .shared-page .generated-title {
      margin-top: 3.2rem !important;
      animation: title-fade-in 1s ease-out;
    }
    
    /* Add spacing between share banner and content */
    .share-banner + .row {
      margin-top: 2.5rem;
    }
    
    /* Subtle animation for title appearance */
    @keyframes title-fade-in {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* ===== End Layout Adjustments ===== */

    /* Add improved line spacing for content */
    .markdown-content {
      line-height: 1.6;
    }
    
    .markdown-content p, 
    .markdown-content li,
    .thread-summary p, 
    .thread-summary li {
      line-height: 1.65;
      margin-bottom: 0.9em;
    }
    
    .markdown-content h3, 
    .markdown-content h4 {
      margin-top: 1.7em;
      margin-bottom: 0.7em;
      line-height: 1.4;
    }
    
    /* Improve readability of thread cards */
    .thread-card .card-body,
    .thread-summary {
      line-height: 1.65;
    }
    
    /* Increase spacing between list items */
    .markdown-content ul, 
    .markdown-content ol,
    .thread-summary ul,
    .thread-summary ol {
      padding-left: 1.6em;
      margin-bottom: 1.2em;
    }

    /* Final fixes to ensure proper layout */
    @media (max-width: 767px) {
      body.dark-mode .px-md-3 {
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
    }
  </style>
</head>
<body <div="" class=""><div class="row mb-5">
<div class="col-12 px-2 px-md-4">
<h1 class="generated-title">Animal Suffering &amp; Factory Farming</h1>
</div>
</div>
<div class="row mb-4">
<div class="col-md-6 mb-4 mb-md-0">
<div class="py-4 h-100">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
</h5>
<div class="card-body" id="timelines-container">
<div class="row mb-2">
<div class="col-5 col-label">Completion deadline:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-02-23 05:59:00+00:00">2025-02-23 05:59:00+00:00</span>
<span class="local-time"></span>
</div>
</div>
<div class="row mb-2">
<div class="col-5 col-label">Opinion deadline:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-02-21 05:59:00+00:00">2025-02-21 05:59:00+00:00</span>
<span class="local-time"></span>
</div>
</div>
</div>
<h5 class="section-title mt-4">
<div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
</h5>
<div class="card-body" id="info-container">
<div class="row mb-3">
<div class="col-5 col-label">Instructor:</div>
<div class="col-7 col-value">[Redacted]</div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Min. chat time:</div>
<div class="col-7 col-value">
      
        25 minutes
      
    </div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Created on:</div>
<div class="col-7 col-value">
<span class="utc-time" data-utc-time="2025-02-17 18:02:06.905668+00:00">2025-02-17 18:02:06.905668+00:00</span>
<span class="local-time"></span>
</div>
</div>
<div class="row mb-3">
<div class="col-5 col-label">Chat threads:</div>
<div class="col-7 col-value">17</div>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="py-4 h-100">
<!-- Topics Section Partial -->
<h5 class="section-title">
<div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
</h5>
<div class="card-body" id="topics-container">
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Animal Pain</div>
<div>All animal pain matters less, morally speaking, than experientially similar human pain.</div>
</div>
<hr class="my-3" style="border-color: #2d2d43;"/>
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Marginal Cases</div>
<div>If it is morally permissible to perform medical experiments on an animal, then it must be morally permissible to perform medical experiments on a cognitively-similar human being.</div>
</div>
<hr class="my-3" style="border-color: #2d2d43;"/>
<div class="mb-3">
<div class="text-info mb-1 font-weight-bold">Meat consumption</div>
<div>It is morally wrong to purchase and consume factory-farmed meat products.</div>
</div>
</div>
</div>
</div>
</div>
<div class="row mb-2">
<div class="col-12">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
</h5>
</div>
<div class="pt-0 pb-2">
<div class="text-muted small mb-0 section-info-align">
<i class="fas fa-info-circle mr-1"></i>Opinion scale: 1 = Strongly Disagree, 7 = Strongly Agree. Mean and 95% CI shown below each chart.
          </div>
<!-- DEBUG: Show if histogram_html or topic_labels are missing -->
</div>
</div>
<!-- Separate row for histogram charts floating on background -->
<div class="row mb-4">
<div class="col-12">
<div class="row" id="opinion-histogram-row">
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Animal Pain</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
<div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">10</div>
<div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">5</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:46.666666666666664%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:33.33333333333333%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:26.666666666666668%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:73.33333333333333%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:33.33333333333333%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = -0.22 <span style="opacity:0.7;">(95% confidence interval: -0.88–0.44)</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Meat Consumption</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">10</div>
<div style="position:absolute; top:50.0%; right:10px; color:#a9adc1; font-size:14px;">5</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:50.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:100.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:90.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:70.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:20.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = -1.25 <span style="opacity:0.7;">(95% confidence interval: -1.82–-0.68)</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4 opinion-histogram-card" data-index="0">
<!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
<div class="card-body p-0 px-1 position-relative">
<div class="histogram-content">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
<div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Marginal Cases</div>
<div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
<!-- Y-axis -->
<div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
<div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
<div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">10</div>
<div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">5</div>
<div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
<div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
</div>
<!-- Horizontal grid lines -->
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
<div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
<div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
</div>
<div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:86.66666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:26.666666666666668%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
<div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
<div style="width:70%; height:20.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
</div>
</div>
<div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
<div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = -0.64 <span style="opacity:0.7;">(95% confidence interval: -1.32–0.04)</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="text-center">
<button class="btn btn-thread-toggle show-toggle-btn" id="show-more-histograms-btn" style="display:none;">Show More Histograms</button>
<button class="btn btn-thread-toggle show-toggle-btn" id="show-fewer-histograms-btn" style="display:none;">Show Fewer Histograms</button>
</div>
</div>
</div>
<div class="row mb-4">
<div class="col-12">
<div class="py-4">
<!-- Report Section Partial -->
<h5 class="section-title">
<div class="title-text">
<i class="fas fa-file-alt mr-1"></i> Instructor Report
  </div>
</h5>
<!-- DEBUG: Show if report or has_saved_summaries are missing -->
<div class="card-body" id="report-section">
<div class="markdown-content" id="report-content">
<p>Students debated the moral significance of animal and human pain. They explored whether physiological similarities in pain perception should translate to equal moral consideration or if human cognitive capacities justify differential treatment. The discussions examined practical implications including emergency resource allocation, medical testing ethics, and animal welfare regulations...</p>
<h3>Themes</h3>
<ul>
<li><strong>Students frequently debated whether cognitive capacities justify different moral treatment of pain.</strong> Many arguments centered on whether human self-awareness, complex emotions, and ability to anticipate suffering create a qualitatively different moral category, with one student noting that "human pain is more profound due to complex emotional and psychological capacities."</li>
<li><strong>Discussions often evolved from polarized positions toward more nuanced frameworks.</strong> Initially rigid stances about human exceptionalism or species equality typically shifted toward context-specific ethical judgments that considered factors like consent mechanisms, necessity of testing, and availability of alternatives.</li>
</ul>
<h3>Guide's role</h3>
<ul>
<li><strong>Guide consistently challenged students to scrutinize underlying assumptions in their arguments.</strong> When students made claims about human exceptionalism, Guide would pose hypotheticals like: "If we discovered an alien species with greater consciousness and legacy-creating abilities than humans, would that justify them causing us pain for their benefit?"</li>
<li><strong>Guide pushed for deeper ethical analysis by highlighting potential inconsistencies.</strong> A recurring intervention involved the "consistency challenge" where Guide asked why cognitive similarities between some animals and cognitively impaired humans wouldn't justify similar ethical treatment: "If we accept that it's OK to experiment on animals without consent because it benefits humans, why shouldn't we accept experimenting on severely cognitively impaired humans who also can't consent?"</li>
</ul>
<h3>Common ground</h3>
<ul>
<li><strong>Students generally agreed that unnecessary animal suffering should be minimized regardless of their position on moral equivalence.</strong> Even those who argued for human priority acknowledged ethical obligations to reduce animal suffering when possible, particularly in contexts like cosmetic testing where benefits seemed insufficient to justify harm.</li>
<li><strong>Most discussions converged on the importance of necessity and proportionality when causing animal pain.</strong> Students typically found common ground in believing that animal testing could be justified in medical research with significant human benefits, while agreeing it was unethical for less crucial purposes like cosmetic development.</li>
</ul>
<h3>Persistent disagreements</h3>
<ul>
<li><strong>Students remained divided on whether similarities in pain perception should translate to equal moral consideration.</strong> Some maintained that the neurological capacity to feel pain creates equivalent moral claims, while others insisted that human cognitive, emotional, and social capacities fundamentally transform the moral significance of suffering.</li>
<li><strong>The role of species membership as a moral category remained contested.</strong> Some students viewed species as a morally arbitrary category similar to race or gender, while others defended the special moral status of humans based on cognitive capacities, social relationships, or in one case, religious beliefs about human uniqueness.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Several discussions revealed how students struggled to separate intuitive bias from reasoned ethical principles.</strong> When Guide challenged students on whether their prioritization of human pain stemmed from principled reasoning or simply in-group preference, many reconsidered their positions and developed more sophisticated arguments about the basis of moral consideration.</li>
<li><strong>The emergence of hybrid frameworks combining multiple ethical considerations showed impressive philosophical development.</strong> Rather than adhering to single-principle approaches like utilitarianism or rights theory, many discussions evolved toward complex ethical frameworks that considered multiple factors including capacity for suffering, consent possibilities, and practical contextual factors.</li>
</ul>
<h3>Possible misconceptions</h3>
<ul>
<li><strong>Some students appeared to conflate pain perception with pain processing in ways that may misrepresent animal neuroscience.</strong> Current research suggests that while animals may lack human-like conceptual understanding of pain, evidence indicates many vertebrates experience similar affective components of pain, potentially undermining arguments that animal pain is fundamentally "simpler."</li>
<li><strong>Arguments relying on human potential or "genetic legacy" sometimes overlooked distinctions between individual and species characteristics.</strong> Some students justified prioritizing humans based on species capabilities rather than individual traits, which may create logical tensions when considering humans with severe cognitive impairments.</li>
</ul>
<h3>Lessons</h3>
<ul>
<li><strong>The "consistency challenge" comparing cognitively similar animals and humans proved especially effective at deepening ethical analysis.</strong> Guide's questions about why we might treat cognitively similar beings differently based solely on species membership consistently pushed students to refine their arguments and consider potential inconsistencies.</li>
<li><strong>Some discussions were periodically derailed by student concerns about completion percentages and deadlines.</strong> Future assignments might benefit from clearer progress indicators or time management guidance to help students remain focused on the philosophical exchange rather than procedural concerns.</li>
</ul>
</div>
<!-- Hidden raw markdown for test compatibility -->
<div id="report-raw-markdown" style="display:none;">This assignment prompted students to compare the moral significance of animal and human pain across multiple ethical considerations. Students explored whether physiological similarities in pain perception should translate to equal moral consideration or if human cognitive capacities justify differential treatment. The discussions examined practical implications including emergency resource allocation, medical testing ethics, and animal welfare regulations.

### Themes
- **Students frequently debated whether cognitive capacities justify different moral treatment of pain.** Many arguments centered on whether human self-awareness, complex emotions, and ability to anticipate suffering create a qualitatively different moral category, with one student noting that "human pain is more profound due to complex emotional and psychological capacities."
- **Discussions often evolved from polarized positions toward more nuanced frameworks.** Initially rigid stances about human exceptionalism or species equality typically shifted toward context-specific ethical judgments that considered factors like consent mechanisms, necessity of testing, and availability of alternatives.

### Guide's role
- **Guide consistently challenged students to scrutinize underlying assumptions in their arguments.** When students made claims about human exceptionalism, Guide would pose hypotheticals like: "If we discovered an alien species with greater consciousness and legacy-creating abilities than humans, would that justify them causing us pain for their benefit?"
- **Guide pushed for deeper ethical analysis by highlighting potential inconsistencies.** A recurring intervention involved the "consistency challenge" where Guide asked why cognitive similarities between some animals and cognitively impaired humans wouldn't justify similar ethical treatment: "If we accept that it's OK to experiment on animals without consent because it benefits humans, why shouldn't we accept experimenting on severely cognitively impaired humans who also can't consent?"

### Common ground
- **Students generally agreed that unnecessary animal suffering should be minimized regardless of their position on moral equivalence.** Even those who argued for human priority acknowledged ethical obligations to reduce animal suffering when possible, particularly in contexts like cosmetic testing where benefits seemed insufficient to justify harm.
- **Most discussions converged on the importance of necessity and proportionality when causing animal pain.** Students typically found common ground in believing that animal testing could be justified in medical research with significant human benefits, while agreeing it was unethical for less crucial purposes like cosmetic development.

### Persistent disagreements
- **Students remained divided on whether similarities in pain perception should translate to equal moral consideration.** Some maintained that the neurological capacity to feel pain creates equivalent moral claims, while others insisted that human cognitive, emotional, and social capacities fundamentally transform the moral significance of suffering.
- **The role of species membership as a moral category remained contested.** Some students viewed species as a morally arbitrary category similar to race or gender, while others defended the special moral status of humans based on cognitive capacities, social relationships, or in one case, religious beliefs about human uniqueness.

### Insights
- **Several discussions revealed how students struggled to separate intuitive bias from reasoned ethical principles.** When Guide challenged students on whether their prioritization of human pain stemmed from principled reasoning or simply in-group preference, many reconsidered their positions and developed more sophisticated arguments about the basis of moral consideration.
- **The emergence of hybrid frameworks combining multiple ethical considerations showed impressive philosophical development.** Rather than adhering to single-principle approaches like utilitarianism or rights theory, many discussions evolved toward complex ethical frameworks that considered multiple factors including capacity for suffering, consent possibilities, and practical contextual factors.

### Possible misconceptions
- **Some students appeared to conflate pain perception with pain processing in ways that may misrepresent animal neuroscience.** Current research suggests that while animals may lack human-like conceptual understanding of pain, evidence indicates many vertebrates experience similar affective components of pain, potentially undermining arguments that animal pain is fundamentally "simpler."
- **Arguments relying on human potential or "genetic legacy" sometimes overlooked distinctions between individual and species characteristics.** Some students justified prioritizing humans based on species capabilities rather than individual traits, which may create logical tensions when considering humans with severe cognitive impairments.

### Lessons
- **The "consistency challenge" comparing cognitively similar animals and humans proved especially effective at deepening ethical analysis.** Guide's questions about why we might treat cognitively similar beings differently based solely on species membership consistently pushed students to refine their arguments and consider potential inconsistencies.
- **Some discussions were periodically derailed by student concerns about completion percentages and deadlines.** Future assignments might benefit from clearer progress indicators or time management guidance to help students remain focused on the philosophical exchange rather than procedural concerns.</div>
<!-- RAW REPORT CONTENT FOR TESTING: This assignment prom -->
<span id="report-prefix" style="display:none;">This assignment prom</span>
<div class="text-muted mt-2 d-flex justify-content-end align-items-center">
<span class="text-right" style="flex:1; text-align:right;">Generated on: 
        <script>
          document.write(new Date("2025-05-06T15:08:39.862949").toLocaleDateString('en-US', {
            month: 'short', 
            day: 'numeric', 
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          }));
        </script>
<noscript>2025-05-06T15:08:39.862949</noscript>
</span>
</div>
<div id="report-editor-container" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
      </div>
<textarea class="form-control" id="report-markdown-editor">This assignment prompted students to compare the moral significance of animal and human pain across multiple ethical considerations. Students explored whether physiological similarities in pain perception should translate to equal moral consideration or if human cognitive capacities justify differential treatment. The discussions examined practical implications including emergency resource allocation, medical testing ethics, and animal welfare regulations.

### Themes
- **Students frequently debated whether cognitive capacities justify different moral treatment of pain.** Many arguments centered on whether human self-awareness, complex emotions, and ability to anticipate suffering create a qualitatively different moral category, with one student noting that "human pain is more profound due to complex emotional and psychological capacities."
- **Discussions often evolved from polarized positions toward more nuanced frameworks.** Initially rigid stances about human exceptionalism or species equality typically shifted toward context-specific ethical judgments that considered factors like consent mechanisms, necessity of testing, and availability of alternatives.

### Guide's role
- **Guide consistently challenged students to scrutinize underlying assumptions in their arguments.** When students made claims about human exceptionalism, Guide would pose hypotheticals like: "If we discovered an alien species with greater consciousness and legacy-creating abilities than humans, would that justify them causing us pain for their benefit?"
- **Guide pushed for deeper ethical analysis by highlighting potential inconsistencies.** A recurring intervention involved the "consistency challenge" where Guide asked why cognitive similarities between some animals and cognitively impaired humans wouldn't justify similar ethical treatment: "If we accept that it's OK to experiment on animals without consent because it benefits humans, why shouldn't we accept experimenting on severely cognitively impaired humans who also can't consent?"

### Common ground
- **Students generally agreed that unnecessary animal suffering should be minimized regardless of their position on moral equivalence.** Even those who argued for human priority acknowledged ethical obligations to reduce animal suffering when possible, particularly in contexts like cosmetic testing where benefits seemed insufficient to justify harm.
- **Most discussions converged on the importance of necessity and proportionality when causing animal pain.** Students typically found common ground in believing that animal testing could be justified in medical research with significant human benefits, while agreeing it was unethical for less crucial purposes like cosmetic development.

### Persistent disagreements
- **Students remained divided on whether similarities in pain perception should translate to equal moral consideration.** Some maintained that the neurological capacity to feel pain creates equivalent moral claims, while others insisted that human cognitive, emotional, and social capacities fundamentally transform the moral significance of suffering.
- **The role of species membership as a moral category remained contested.** Some students viewed species as a morally arbitrary category similar to race or gender, while others defended the special moral status of humans based on cognitive capacities, social relationships, or in one case, religious beliefs about human uniqueness.

### Insights
- **Several discussions revealed how students struggled to separate intuitive bias from reasoned ethical principles.** When Guide challenged students on whether their prioritization of human pain stemmed from principled reasoning or simply in-group preference, many reconsidered their positions and developed more sophisticated arguments about the basis of moral consideration.
- **The emergence of hybrid frameworks combining multiple ethical considerations showed impressive philosophical development.** Rather than adhering to single-principle approaches like utilitarianism or rights theory, many discussions evolved toward complex ethical frameworks that considered multiple factors including capacity for suffering, consent possibilities, and practical contextual factors.

### Possible misconceptions
- **Some students appeared to conflate pain perception with pain processing in ways that may misrepresent animal neuroscience.** Current research suggests that while animals may lack human-like conceptual understanding of pain, evidence indicates many vertebrates experience similar affective components of pain, potentially undermining arguments that animal pain is fundamentally "simpler."
- **Arguments relying on human potential or "genetic legacy" sometimes overlooked distinctions between individual and species characteristics.** Some students justified prioritizing humans based on species capabilities rather than individual traits, which may create logical tensions when considering humans with severe cognitive impairments.

### Lessons
- **The "consistency challenge" comparing cognitively similar animals and humans proved especially effective at deepening ethical analysis.** Guide's questions about why we might treat cognitively similar beings differently based solely on species membership consistently pushed students to refine their arguments and consider potential inconsistencies.
- **Some discussions were periodically derailed by student concerns about completion percentages and deadlines.** Future assignments might benefit from clearer progress indicators or time management guidance to help students remain focused on the philosophical exchange rather than procedural concerns.</textarea>
<div class="mt-3">
<button class="btn btn-primary" id="save-report-btn">
<i class="fas fa-save mr-1"></i> Save Changes
        </button>
<button class="btn btn-secondary ml-2" id="cancel-report-edit-btn">
<i class="fas fa-times mr-1"></i> Cancel
        </button>
<span class="spinner-border spinner-border-sm ml-2" id="editor-spinner" role="status" style="display: none;"></span>
</div>
<div class="status-message mt-3" id="editor-status-message" style="display: none;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="row mb-2">
<div class="col-12">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
</h5>
</div>
<div class="pt-0 pb-2">
<!-- DEBUG: Show if threads is missing or empty -->
<div class="text-muted small mb-0 section-info-align">
<i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
</div>
</div>
<!-- Separate row for thread items floating on background -->
<div class="row mb-5">
<div class="col-12">
<div class="thread-list" id="thread-list">
<div class="masonry-grid">
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students initially split on the moral hierarchy of pain, with Student 3 arguing animal pain is morally equivalent or even greater due to lack of choice, while Students 1 and 2 maintained that human pain carries more weight because of emotional complexity, social obligations, and cognitive capacity.</strong> Student 3 emphasized animals' inability to understand or escape suffering, and Students 1 and 2 countered with arguments about human agency, moral systems, and the transmission of cultural knowledge.  </li>
<li><strong>Guide persistently challenged their assumptions by asking how human-caused animal suffering creates special obligations and whether animals’ vulnerability might heighten the moral significance of their pain.</strong> These interventions pushed Student 2 to confront critiques of cognitive bias and led Student 1 to complicate her original position, eventually proposing a shift toward assessing the degree of harm over species membership.  </li>
<li><strong>Ultimately, the group reached consensus that pain matters regardless of species and that moral weight should hinge on the degree of suffering and justification, not on human exceptionalism.</strong> They then applied this framework to animal research ethics, agreeing that experiments with substantial human benefit may be justified if animal welfare standards are upheld, while unnecessary or overly painful tests remain impermissible.</li>
</ul>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687">- **Students initially split on the moral hierarchy of pain, with Student 3 arguing animal pain is morally equivalent or even greater due to lack of choice, while Students 1 and 2 maintained that human pain carries more weight because of emotional complexity, social obligations, and cognitive capacity.** Student 3 emphasized animals' inability to understand or escape suffering, and Students 1 and 2 countered with arguments about human agency, moral systems, and the transmission of cultural knowledge.  
- **Guide persistently challenged their assumptions by asking how human-caused animal suffering creates special obligations and whether animals’ vulnerability might heighten the moral significance of their pain.** These interventions pushed Student 2 to confront critiques of cognitive bias and led Student 1 to complicate her original position, eventually proposing a shift toward assessing the degree of harm over species membership.  
- **Ultimately, the group reached consensus that pain matters regardless of species and that moral weight should hinge on the degree of suffering and justification, not on human exceptionalism.** They then applied this framework to animal research ethics, agreeing that experiments with substantial human benefit may be justified if animal welfare standards are upheld, while unnecessary or overly painful tests remain impermissible.</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==7d6f80b8dd::student-dwfilmvkdq==a8cfc07edd::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students weighed the ethical ramifications of animal versus human pain.</strong> Student 1 argued that human pain holds greater moral weight due to higher cognitive potential and a more complex nervous system, while Student 2 maintained that both humans and animals experience pain similarly through shared neural structures.  </li>
<li><strong>Students debated whether cognitive abilities should influence the moral significance of suffering.</strong> Student 1 defended the idea that using animals in experiments is more acceptable since their inability to process pain makes their suffering less morally critical, whereas Student 2 countered that animal distress might actually be compounded by confusion and fear.  </li>
<li><strong>Guide probed the underlying assumptions by challenging the link between 'potential' and moral value.</strong> Guide’s intervention forced the students to reconsider if diminished cognitive capacity truly lessens the moral weight of pain, urging a clearer ethical examination of suffering across species.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you've shifted the argument from pain to 'potential' - but how exactly does having more 'potential' make the direct experience of suffering less morally significant? Consider: If we had to choose between causing intense pain to either a brilliant scientist or a homeless person with few prospects, would the homeless person's pain matter less because they have less 'potential'? This might help us examine whether 'potential' is really relevant to the moral weight of suffering itself.</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687">- **Students weighed the ethical ramifications of animal versus human pain.** Student 1 argued that human pain holds greater moral weight due to higher cognitive potential and a more complex nervous system, while Student 2 maintained that both humans and animals experience pain similarly through shared neural structures.  
- **Students debated whether cognitive abilities should influence the moral significance of suffering.** Student 1 defended the idea that using animals in experiments is more acceptable since their inability to process pain makes their suffering less morally critical, whereas Student 2 countered that animal distress might actually be compounded by confusion and fear.  
- **Guide probed the underlying assumptions by challenging the link between 'potential' and moral value.** Guide’s intervention forced the students to reconsider if diminished cognitive capacity truly lessens the moral weight of pain, urging a clearer ethical examination of suffering across species.  

&gt; **Student 1, you've shifted the argument from pain to 'potential' - but how exactly does having more 'potential' make the direct experience of suffering less morally significant? Consider: If we had to choose between causing intense pain to either a brilliant scientist or a homeless person with few prospects, would the homeless person's pain matter less because they have less 'potential'? This might help us examine whether 'potential' is really relevant to the moral weight of suffering itself.**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t7abc1642dd::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated whether animal pain is morally comparable to human pain.</strong> Student 1 argued from a standpoint of equal physiological capacity for pain, while Student 2 maintained that human cognitive abilities and self-awareness merit greater moral weight. Their discussion also covered practical implications, such as emergency resource allocation and the ethics of animal testing.  </li>
<li><strong>Guide consistently challenged students to probe the underlying assumptions in their arguments.</strong> Guide pressed for clarity on how cognitive differences might justify varying moral treatments of pain, steering the conversation toward a more refined ethical analysis.</li>
</ul>
<blockquote>
<p><strong>Student 2, you keep returning to the ability to feel physical pain, but Student 1 is challenging you on cognitive differences. If a being's capacity for complex thought, emotional understanding, and self-awareness affects their experience of suffering, why shouldn't these factors influence our moral calculations?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687">- **Students debated whether animal pain is morally comparable to human pain.** Student 1 argued from a standpoint of equal physiological capacity for pain, while Student 2 maintained that human cognitive abilities and self-awareness merit greater moral weight. Their discussion also covered practical implications, such as emergency resource allocation and the ethics of animal testing.  
- **Guide consistently challenged students to probe the underlying assumptions in their arguments.** Guide pressed for clarity on how cognitive differences might justify varying moral treatments of pain, steering the conversation toward a more refined ethical analysis.

&gt; **Student 2, you keep returning to the ability to feel physical pain, but Student 1 is challenging you on cognitive differences. If a being's capacity for complex thought, emotional understanding, and self-awareness affects their experience of suffering, why shouldn't these factors influence our moral calculations?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==be8e2cdede::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated whether animal pain holds equal moral weight compared to human pain.</strong> Student 1 argued that human suffering is intensified by advanced cognition and prolonged emotional trauma, while Student 2 maintained that animals feel pain similarly despite differences in processing and healing speed.</li>
<li><strong>Guide challenged the students to clarify their assumptions and refine their arguments.</strong> Guide’s probing questions pushed Student 1 to reconsider if prioritizing humans was about cognitive capacity or simply a matter of societal responsibilities, and urged Student 2 to explore how emotional equivalence plays a role in moral evaluation.</li>
</ul>
<blockquote>
<p><strong>Student 1, you've evolved from arguing that animal pain matters less to a more nuanced position about prioritization. Can you clarify - do you think the initial pain experience itself matters less in animals, or is it more about how we must sometimes prioritize humans despite equal capacity for suffering?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687">- **Students debated whether animal pain holds equal moral weight compared to human pain.** Student 1 argued that human suffering is intensified by advanced cognition and prolonged emotional trauma, while Student 2 maintained that animals feel pain similarly despite differences in processing and healing speed.
- **Guide challenged the students to clarify their assumptions and refine their arguments.** Guide’s probing questions pushed Student 1 to reconsider if prioritizing humans was about cognitive capacity or simply a matter of societal responsibilities, and urged Student 2 to explore how emotional equivalence plays a role in moral evaluation.

  
&gt; **Student 1, you've evolved from arguing that animal pain matters less to a more nuanced position about prioritization. Can you clarify - do you think the initial pain experience itself matters less in animals, or is it more about how we must sometimes prioritize humans despite equal capacity for suffering?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t344c4094df::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated whether animal pain is morally equal to human pain.</strong> One participant leaned on the similarity in physical manifestations of pain, arguing that shared biological responses point to equal significance, while the other maintained a practical stance that human bias and our inability to care for every creature justify a differential view.</li>
<li><strong>Guide intervened decisively, urging students to scrutinize their assumptions about biology and ethics.</strong> It pushed the discussion deeper by questioning whether similar nervous systems in mammals should alter the perceived moral hierarchy and challenging the idea that species-based bias is merely natural.</li>
</ul>
<blockquote>
<p><strong>If certain mammals were found to have pain processing nearly identical to humans, wouldn’t that force a reconsideration of the notion that animal pain matters less? Is there truly a moral hierarchy based solely on species membership, or should ethical considerations be more closely tied to neurological and emotional capacities?</strong></p>
<p><strong>Consider that our natural in-group bias may reflect preferential treatment in other contexts that warrants critical ethical examination. You need to dissect and challenge the assumption that human pain is uniquely valuable independent of these biological similarities.</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687">- **Students debated whether animal pain is morally equal to human pain.** One participant leaned on the similarity in physical manifestations of pain, arguing that shared biological responses point to equal significance, while the other maintained a practical stance that human bias and our inability to care for every creature justify a differential view.
- **Guide intervened decisively, urging students to scrutinize their assumptions about biology and ethics.** It pushed the discussion deeper by questioning whether similar nervous systems in mammals should alter the perceived moral hierarchy and challenging the idea that species-based bias is merely natural.

  
&gt; **If certain mammals were found to have pain processing nearly identical to humans, wouldn’t that force a reconsideration of the notion that animal pain matters less? Is there truly a moral hierarchy based solely on species membership, or should ethical considerations be more closely tied to neurological and emotional capacities?**
&gt;
&gt; **Consider that our natural in-group bias may reflect preferential treatment in other contexts that warrants critical ethical examination. You need to dissect and challenge the assumption that human pain is uniquely valuable independent of these biological similarities.**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==fa671a3cdf::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Marginal Cases
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687">
<ul>
<li><strong>Students initially clashed over whether cognitive similarity justified human experimentation, with one rejecting all human tests and the other allowing consensual trials.</strong> They navigated tricky scenarios—animals never consent but families might, safeguards against pain—and gradually aligned on requiring consent or proxy consent plus strict rules for both humans and animals.  </li>
<li><strong>Guide repeatedly pressed the consistency challenge by asking why benefits allowed animal experiments but would forbid similar tests on cognitively impaired humans.</strong> Its pointed questions forced students to refine their ethical distinctions, ultimately leading them to a nuanced agreement around consent and family permission.  </li>
</ul>
<blockquote>
<p><strong>Student 1, if we accept that it's OK to experiment on animals without consent because it benefits humans, why shouldn't we accept experimenting on severely cognitively impaired humans who also can't consent, if doing so would benefit humanity?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687">- **Students initially clashed over whether cognitive similarity justified human experimentation, with one rejecting all human tests and the other allowing consensual trials.** They navigated tricky scenarios—animals never consent but families might, safeguards against pain—and gradually aligned on requiring consent or proxy consent plus strict rules for both humans and animals.  
- **Guide repeatedly pressed the consistency challenge by asking why benefits allowed animal experiments but would forbid similar tests on cognitively impaired humans.** Its pointed questions forced students to refine their ethical distinctions, ultimately leading them to a nuanced agreement around consent and family permission.  


&gt; **Student 1, if we accept that it's OK to experiment on animals without consent because it benefits humans, why shouldn't we accept experimenting on severely cognitively impaired humans who also can't consent, if doing so would benefit humanity?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==f0dad5d2dd::e086825bbd::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687">
<ul>
<li><strong>Student 1 argued that human suffering is more morally significant due to its emotional, social, and reflective dimensions.</strong> Student 1 emphasized how human pain can lead to trauma, relationship impacts, and future-oriented anxiety, making it more complex than animal pain.  </li>
<li><strong>Student 2 countered that animals’ sophisticated nervous systems and inability to communicate or rationalize their distress can prolong and intensify their suffering.</strong> They pointed out that lack of cognitive coping and unexpected pain spikes fear and anxiety in animals, arguing this deserves equal moral weight.  </li>
<li><strong>Guide steered the dialogue with precise prompts that highlighted key distinctions—reflection vs immediate fear—and guided the students toward consensus on policy implications.</strong> By systematically asking each to address the other’s objections, Guide fostered a respectful debate and helped them converge on balanced welfare measures.</li>
</ul>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687">- **Student 1 argued that human suffering is more morally significant due to its emotional, social, and reflective dimensions.** Student 1 emphasized how human pain can lead to trauma, relationship impacts, and future-oriented anxiety, making it more complex than animal pain.  
- **Student 2 countered that animals’ sophisticated nervous systems and inability to communicate or rationalize their distress can prolong and intensify their suffering.** They pointed out that lack of cognitive coping and unexpected pain spikes fear and anxiety in animals, arguing this deserves equal moral weight.  
- **Guide steered the dialogue with precise prompts that highlighted key distinctions—reflection vs immediate fear—and guided the students toward consensus on policy implications.** By systematically asking each to address the other’s objections, Guide fostered a respectful debate and helped them converge on balanced welfare measures.</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==24cd2638dd::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated the moral weight of animal versus human pain.</strong> They examined whether similar pain experiences should yield equal moral consideration, weighing factors like consciousness, intelligence, and communication while questioning the moral justification of animal testing practices.  </li>
<li><strong>Guide pushed the conversation deeper by challenging underlying assumptions.</strong> It forced the students to reconsider the criteria for moral status—asking how self-awareness tests and unique human traits could alter the balance between animal and human pain—thus refining their arguments.</li>
</ul>
<blockquote>
<p><strong>Student 1, since you both seem open to self-awareness as a criterion - how would you respond to evidence that dolphins, elephants, and some primates can recognize themselves in mirrors and show signs of self-awareness? Would this affect your view of the moral weight of their pain?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687">- **Students debated the moral weight of animal versus human pain.** They examined whether similar pain experiences should yield equal moral consideration, weighing factors like consciousness, intelligence, and communication while questioning the moral justification of animal testing practices.  
- **Guide pushed the conversation deeper by challenging underlying assumptions.** It forced the students to reconsider the criteria for moral status—asking how self-awareness tests and unique human traits could alter the balance between animal and human pain—thus refining their arguments.

  
&gt; **Student 1, since you both seem open to self-awareness as a criterion - how would you respond to evidence that dolphins, elephants, and some primates can recognize themselves in mirrors and show signs of self-awareness? Would this affect your view of the moral weight of their pain?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8793533cdd::student-dwfilmvkdq==ed832820df::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students began by contrasting self-awareness and moral reasoning in humans versus animals, with Student 2 asserting human pain carries greater moral weight due to existential reflection and Student 1 initially emphasizing context and scriptural dominion.</strong> They debated definitions of self-awareness, species membership, and membership in a moral community, with Student 1 referencing biblical texts to justify human priority and Student 2 highlighting cognitive sophistication.  </li>
<li><strong>Guide consistently challenged foundational assumptions—particularly the idea of divinely ordained dominion and species-based moral worth—by drawing parallels to racism and prompting secular justifications.</strong> Its questions forced students to reconsider reliance on religious authority and species membership, driving them to articulate more universal criteria like empathy, moral community participation, and cognitive capacity.  </li>
<li><strong>Despite differing starting points, the students converged on practical measures to minimize animal suffering, proposing stricter USDA enforcement, ethical oaths for practitioners, and agency-led changes bypassing legislation.</strong> They acknowledged that even if animal pain is deemed less morally significant, humane treatment remains a shared ethical responsibility, and they ended by brainstorming lobbying strategies to implement their proposals.  </li>
</ul>
<blockquote>
<p><strong>Student 2, you mentioned animals were put here for a purpose - what leads you to this conclusion? This seems to be a key assumption underlying your view that causing animal pain for human benefit is acceptable. If we didn't assume animals had a designated purpose to serve humans, how might that change our moral calculation about causing them pain?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687">- **Students began by contrasting self-awareness and moral reasoning in humans versus animals, with Student 2 asserting human pain carries greater moral weight due to existential reflection and Student 1 initially emphasizing context and scriptural dominion.** They debated definitions of self-awareness, species membership, and membership in a moral community, with Student 1 referencing biblical texts to justify human priority and Student 2 highlighting cognitive sophistication.  
- **Guide consistently challenged foundational assumptions—particularly the idea of divinely ordained dominion and species-based moral worth—by drawing parallels to racism and prompting secular justifications.** Its questions forced students to reconsider reliance on religious authority and species membership, driving them to articulate more universal criteria like empathy, moral community participation, and cognitive capacity.  
- **Despite differing starting points, the students converged on practical measures to minimize animal suffering, proposing stricter USDA enforcement, ethical oaths for practitioners, and agency-led changes bypassing legislation.** They acknowledged that even if animal pain is deemed less morally significant, humane treatment remains a shared ethical responsibility, and they ended by brainstorming lobbying strategies to implement their proposals.  



&gt; **Student 2, you mentioned animals were put here for a purpose - what leads you to this conclusion? This seems to be a key assumption underlying your view that causing animal pain for human benefit is acceptable. If we didn't assume animals had a designated purpose to serve humans, how might that change our moral calculation about causing them pain?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==c0f33c0ade::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students discussed the ethical weight of animal versus human pain.</strong> Student 1 emphasized that animals’ inability to verbally refuse or consent diminishes the moral urgency of their suffering, while Student 2 countered by highlighting observable expressions of pain and the complexity of comparing species.</li>
<li><strong>Students debated the ethics of animal testing and the conditions under which experimentation is acceptable.</strong> They refined their views on using impaired versus healthy animals and agreed on searching for more humane alternatives, which showed an evolution from polarized positions to a more nuanced stance.</li>
<li><strong>Guide played a pivotal role in challenging assumptions and deepening ethical analysis.</strong> It repeatedly pushed the discussion to examine whether the capacity for verbal refusal is truly a valid measure of moral consideration in cases of pain.</li>
</ul>
<blockquote>
<p><strong>Student 2, you raise an interesting point about animals' ability to express pain. But let me challenge your position: If a human infant or someone with severe cognitive disabilities cannot verbally articulate their pain (similar to animals), does their suffering matter less morally? This gets at a deeper question: Is the ability to linguistically express pain relevant to its moral weight?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687">- **Students discussed the ethical weight of animal versus human pain.** Student 1 emphasized that animals’ inability to verbally refuse or consent diminishes the moral urgency of their suffering, while Student 2 countered by highlighting observable expressions of pain and the complexity of comparing species.
- **Students debated the ethics of animal testing and the conditions under which experimentation is acceptable.** They refined their views on using impaired versus healthy animals and agreed on searching for more humane alternatives, which showed an evolution from polarized positions to a more nuanced stance.
- **Guide played a pivotal role in challenging assumptions and deepening ethical analysis.** It repeatedly pushed the discussion to examine whether the capacity for verbal refusal is truly a valid measure of moral consideration in cases of pain.

  
&gt; **Student 2, you raise an interesting point about animals' ability to express pain. But let me challenge your position: If a human infant or someone with severe cognitive disabilities cannot verbally articulate their pain (similar to animals), does their suffering matter less morally? This gets at a deeper question: Is the ability to linguistically express pain relevant to its moral weight?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==988dab6ade::student-z21hawwuy29t727419eee7::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated the moral weight of animal pain versus human pain.</strong> One student argued that human pain is more profound due to complex emotional and psychological capacities, while the other maintained that although animal pain matters, its simpler processing makes it less morally significant.</li>
<li><strong>Students compared the ethics of animal testing in medical versus cosmetic contexts.</strong> They agreed that animal testing can be justified in medical research where benefits clearly outweigh harms, but testing for cosmetics is seen as unnecessary and unethical.</li>
<li><strong>Guide pushed students to sharpen their criteria and consider future alternatives to animal testing.</strong> It pressed for deeper analysis by challenging students to specify when harm becomes unacceptable and what technological advances might replace animal testing in research.</li>
</ul>
<blockquote>
<p><strong>Student 2, that's an intriguing point about technological alternatives. What specific technological advances do you think would need to happen before we could ethically phase out animal testing in medical research completely?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687">- **Students debated the moral weight of animal pain versus human pain.** One student argued that human pain is more profound due to complex emotional and psychological capacities, while the other maintained that although animal pain matters, its simpler processing makes it less morally significant.
- **Students compared the ethics of animal testing in medical versus cosmetic contexts.** They agreed that animal testing can be justified in medical research where benefits clearly outweigh harms, but testing for cosmetics is seen as unnecessary and unethical.
- **Guide pushed students to sharpen their criteria and consider future alternatives to animal testing.** It pressed for deeper analysis by challenging students to specify when harm becomes unacceptable and what technological advances might replace animal testing in research.

  
&gt; **Student 2, that's an intriguing point about technological alternatives. What specific technological advances do you think would need to happen before we could ethically phase out animal testing in medical research completely?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==ed70a0f2dd::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Marginal Cases
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687">
<ul>
<li><strong>Students debated the ethics of medical experiments on animals versus cognitively similar humans.</strong> Student 1 argued against speciesism by promoting equal moral consideration based on capacities like suffering and pleasure, while Student 2 raised concerns about exploitation and the protective value of human status.</li>
<li><strong>Guide challenged the students to scrutinize their assumptions and reasoning.</strong> It asked focused questions on how to measure moral qualities across species and why being human automatically grants special moral status, pushing both students to reflect on inconsistencies in their arguments.</li>
</ul>
<blockquote>
<p><strong>Student 1, if suffering and pleasure are what matter morally, how do you measure these between species? A rabbit and a cognitively impaired human might experience pain and pleasure very differently, even if their cognitive abilities seem similar in other ways.</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687">- **Students debated the ethics of medical experiments on animals versus cognitively similar humans.** Student 1 argued against speciesism by promoting equal moral consideration based on capacities like suffering and pleasure, while Student 2 raised concerns about exploitation and the protective value of human status.
- **Guide challenged the students to scrutinize their assumptions and reasoning.** It asked focused questions on how to measure moral qualities across species and why being human automatically grants special moral status, pushing both students to reflect on inconsistencies in their arguments.

  
&gt; **Student 1, if suffering and pleasure are what matter morally, how do you measure these between species? A rabbit and a cognitively impaired human might experience pain and pleasure very differently, even if their cognitive abilities seem similar in other ways.**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==349f5f32df::e086825bbd::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students debated whether human pain should be prioritized over animal pain.</strong> One stance, represented by Student 1, defended human exceptionalism by arguing that our unique cognitive abilities and potential for legacy justify inflicting pain on animals, while Student 2 pushed back, insisting that animal sentience and vulnerability demand equal moral consideration.</li>
<li><strong>Guide actively challenged assumptions and pushed for deeper reflection.</strong> Guide questioned the basis of human exceptionalism by probing what specific traits truly make human pain more morally significant, and it pressed the students to consider if similar logic might justify other kinds of exploitation.</li>
</ul>
<blockquote>
<p><strong>Student 1, your argument seems to rest on human exceptionalism - that our species' capabilities justify causing pain to other species. But what specific traits make human pain inherently more morally significant than animal pain?</strong></p>
<p><strong>Consider: If we discovered an alien species with greater consciousness and legacy-creating abilities than humans, would that justify them causing us pain for their benefit? This gets at a core ethical question: Does greater cognitive capability or potential for legacy actually make a being's suffering more morally important?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687">- **Students debated whether human pain should be prioritized over animal pain.** One stance, represented by Student 1, defended human exceptionalism by arguing that our unique cognitive abilities and potential for legacy justify inflicting pain on animals, while Student 2 pushed back, insisting that animal sentience and vulnerability demand equal moral consideration.
- **Guide actively challenged assumptions and pushed for deeper reflection.** Guide questioned the basis of human exceptionalism by probing what specific traits truly make human pain more morally significant, and it pressed the students to consider if similar logic might justify other kinds of exploitation.

  
&gt; **Student 1, your argument seems to rest on human exceptionalism - that our species' capabilities justify causing pain to other species. But what specific traits make human pain inherently more morally significant than animal pain?**
&gt;
&gt; **Consider: If we discovered an alien species with greater consciousness and legacy-creating abilities than humans, would that justify them causing us pain for their benefit? This gets at a core ethical question: Does greater cognitive capability or potential for legacy actually make a being's suffering more morally important?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==a15461fcdf::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students began with opposing views on the moral weight of animal pain versus human pain and moved toward agreement.</strong> Student 1 initially argued that societal practice—favoring humans over animals—justified treating animal suffering as less significant, while Student 2 insisted that sentience, not species, should guide moral concern; through exchange, both acknowledged this tension and edged toward equal consideration of suffering.  </li>
<li><strong>They concluded that unnecessary animal suffering should be minimized while balancing genuine human needs.</strong> The dialogue evolved from abstract moral claims to practical solutions like plant-based alternatives, stricter livestock regulations, and developing non-animal medical testing methods, reflecting a pivot from disagreement to shared strategies for reducing harm.  </li>
<li><strong>Guide consistently challenged assumptions and refocused the discussion on balancing moral and practical factors.</strong> Its prompts—such as asking how current practices inform moral judgments and how to weigh animal pain against human benefits—helped clarify positions, maintain topic focus, and guide students to common ground.</li>
</ul>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687">- **Students began with opposing views on the moral weight of animal pain versus human pain and moved toward agreement.** Student 1 initially argued that societal practice—favoring humans over animals—justified treating animal suffering as less significant, while Student 2 insisted that sentience, not species, should guide moral concern; through exchange, both acknowledged this tension and edged toward equal consideration of suffering.  
- **They concluded that unnecessary animal suffering should be minimized while balancing genuine human needs.** The dialogue evolved from abstract moral claims to practical solutions like plant-based alternatives, stricter livestock regulations, and developing non-animal medical testing methods, reflecting a pivot from disagreement to shared strategies for reducing harm.  
- **Guide consistently challenged assumptions and refocused the discussion on balancing moral and practical factors.** Its prompts—such as asking how current practices inform moral judgments and how to weigh animal pain against human benefits—helped clarify positions, maintain topic focus, and guide students to common ground.</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==b03ab1d0df::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
<div class="masonry-item">
<div class="card thread-card" id="thread-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687">
<div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
<h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                              
                                  Animal Pain
                              
                          </h6>
</div>
<div class="card-body">
<div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687">
<ul>
<li><strong>Students engaged in a deep dive on whether animal pain matters as much as human pain, with Student 1 arguing for equal moral weight based on genetic similarity and shared capacity for suffering.</strong> They invoked real-world analogies—from experimental COVID vaccines to personal anecdotes about a cancer‐treating aunt—to emphasize informed consent and humane protocols. The debate evolved as they grappled with the ethics of voluntary versus coercive testing across species.  </li>
<li><strong>Student 2 defended the moral hierarchy favoring human pain, citing risks of economic coercion among the poor and higher cognitive and linguistic capacities as justifications.</strong> While conceding that animal testing should be as humane as possible, they maintained that language, societal complexity, and the potential for exploitation distinguish humans from animals. Surprises included their firm stance that no amount of monetary incentive could ethically justify paid human experiments.  </li>
<li><strong>Guide persistently challenged the students’ assumptions, pressing for clarity on consent issues, economic coercion, and the precise cognitive–emotional distinctions between humans and animals.</strong> By posing targeted questions about income thresholds, experimental consent, and animal social cognition, Guide ensured the discussion moved beyond surface claims toward nuanced ethical reasoning.  </li>
</ul>
<blockquote>
<p><strong>Student 2, could you explain what specific cognitive or emotional capacities make human suffering more morally significant than animal suffering? You've stated this belief, but given what we know about animal consciousness and emotional complexity (especially in mammals), what's the key distinction that justifies different moral treatment?</strong></p>
</blockquote>
</div>
<div class="status-message thread-status" id="status-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687" style="display: none;"></div>
<div class="spinner-border spinner-border-sm text-orange" id="spinner-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Loading...</span>
</div>
<!-- Edit Summary Modal Content -->
<div class="summary-editor-container" id="summary-editor-container-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687" style="display: none;">
<div class="alert alert-info">
<i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                              </div>
<textarea class="form-control summary-markdown-editor" id="summary-markdown-editor-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687">- **Students engaged in a deep dive on whether animal pain matters as much as human pain, with Student 1 arguing for equal moral weight based on genetic similarity and shared capacity for suffering.** They invoked real-world analogies—from experimental COVID vaccines to personal anecdotes about a cancer‐treating aunt—to emphasize informed consent and humane protocols. The debate evolved as they grappled with the ethics of voluntary versus coercive testing across species.  
- **Student 2 defended the moral hierarchy favoring human pain, citing risks of economic coercion among the poor and higher cognitive and linguistic capacities as justifications.** While conceding that animal testing should be as humane as possible, they maintained that language, societal complexity, and the potential for exploitation distinguish humans from animals. Surprises included their firm stance that no amount of monetary incentive could ethically justify paid human experiments.  
- **Guide persistently challenged the students’ assumptions, pressing for clarity on consent issues, economic coercion, and the precise cognitive–emotional distinctions between humans and animals.** By posing targeted questions about income thresholds, experimental consent, and animal social cognition, Guide ensured the discussion moved beyond surface claims toward nuanced ethical reasoning.  



&gt; **Student 2, could you explain what specific cognitive or emotional capacities make human suffering more morally significant than animal suffering? You've stated this belief, but given what we know about animal consciousness and emotional complexity (especially in mammals), what's the key distinction that justifies different moral treatment?**</textarea>
<div class="mt-3">
<button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687">
<i class="fas fa-save mr-1"></i> Save Changes
                                  </button>
<button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687">
<i class="fas fa-times mr-1"></i> Cancel
                                  </button>
<div class="spinner-border text-primary ml-2 summary-editor-spinner" id="summary-editor-spinner-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687" role="status" style="display: none;">
<span class="sr-only">Saving...</span>
</div>
</div>
<div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==3692c9d0df::a7060c2886::fa1b83e687" style="display: none;"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="clear:both; height:20px;"></div>
<!-- Add Qualtrics Survey Data Card - if data exists -->
<div class="row mb-4">
<div class="col-12">
<div class="py-4 mb-4">
<h5 class="section-title">
<div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Post-Chat Survey Data</div>
</h5>
<div class="card-body pt-0">
<div class="row">
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>24</h3>
<p class="text-muted">Total Survey Responses</p>
</div>
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>12</h3>
<p class="text-muted">Threads With Surveys</p>
</div>
<div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
<h3>80.0%</h3>
<p class="text-muted">Response Rate</p>
</div>
</div>
<div class="d-flex justify-content-between align-items-center text-muted small mb-0" style="gap: 1rem;">
<span class="ml-auto text-right" style="flex:1; text-align:right;">Last updated: 2025-05-06 22:34:59.363152</span>
</div>
</div>
</div>
</div>
</div>
<!-- Separate row for survey histogram charts floating on background -->
<div class="row mb-4">
<div class="col-12">
<!-- Overall Rating and Guide Feedback -->
<div class="row">
<div class="col-md-6 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">How was your chat?</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">🔥 Awesome</span>
<span style="font-size:0.9rem; color:#a9adc1;">6 (25.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:25.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">👍 Good</span>
<span style="font-size:0.9rem; color:#a9adc1;">15 (62.5%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:62.5%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">😐 It's OK</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (4.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:4.166666666666666%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">👎 Not a fan</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">💩 Hated it</span>
<span style="font-size:0.9rem; color:#a9adc1;">2 (8.3%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:8.333333333333332%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 2.04 <span style="opacity:0.7;">(95% confidence interval: 1.60–2.48)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">Guide contributed the right amount</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">18 (75.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:75.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">5 (20.8%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:20.833333333333336%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (4.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:4.166666666666666%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 0.71 <span style="opacity:0.7;">(95% confidence interval: 0.48–0.94)</span></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="height: 2rem;"></div>
<div class="row">
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I felt comfortable sharing my honest opinions with my partner</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">9 (56.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:56.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">5 (31.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:31.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (6.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:6.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (6.2%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:6.25%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.31 <span style="opacity:0.7;">(95% confidence interval: 0.74–1.89)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I was not offended by my partner's perspective</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">10 (76.9%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:76.92307692307693%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (7.7%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (7.7%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (7.7%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.54 <span style="opacity:0.7;">(95% confidence interval: 0.95–2.12)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It was valuable to chat with a student who did not share my perspective</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">7 (50.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:50.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (21.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:21.428571428571427%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (21.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:21.428571428571427%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">1 (7.1%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:7.142857142857142%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.07 <span style="opacity:0.7;">(95% confidence interval: 0.37–1.77)</span></div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6 col-lg-4 mb-4">
<div class="card h-100 thread-card">
<div class="card-body p-0">
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
<div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
<div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It would be good if more students and classes used Sway</div>
</div>
<div style="padding:25px;">
<div style="position:relative; width:100%;">
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">9 (64.3%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:64.28571428571429%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
<span style="font-size:0.9rem; color:#a9adc1;">2 (14.3%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:14.285714285714285%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
<span style="font-size:0.9rem; color:#a9adc1;">3 (21.4%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:21.428571428571427%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
<div style="margin-bottom:12px;">
<div style="display:flex; justify-content:space-between; margin-bottom:4px;">
<span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
<span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
</div>
<div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
<div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
</div>
</div>
</div>
<div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.43 <span style="opacity:0.7;">(95% confidence interval: 0.94–1.92)</span></div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Opinion Changes Section -->
</div>
</div>
<!-- End Qualtrics Survey Data Section -->
<!-- Modal containers will be dynamically injected here by JS if needed -->
<div id="modal-container"></div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- =====================
     Core Utilities
     ===================== -->
<script>
  // Debug logging utility
  function debug_log(message, level, details = null) {
    if (details) {
      console.log(`DEBUG[${level}]:`, message, details);
    } else {
      console.log(`DEBUG[${level}]:`, message);
    }
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- =====================
     Theme Toggle
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input'); // Fixed id to match the input in _header.html
    if (!themeToggle) return;
    // Determine initial theme from localStorage or template variable
    let initialTheme = localStorage.getItem('theme');
    if (!initialTheme) {
      initialTheme = 'dark-mode' === 'light-mode' ? 'light' : 'dark';
    }
    // Set initial toggle state and class
    themeToggle.checked = initialTheme === 'light';
    document.documentElement.className = initialTheme === 'light' ? 'light-mode' : 'dark-mode';
    // Add event listener for theme toggle
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.classList.remove('dark-mode');
        document.documentElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.classList.remove('light-mode');
        document.documentElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
  });
</script>
<!-- =====================
     Summary/Report Generation & Polling
     ===================== -->
<script>
  let pollingInterval = null;
  let cancelRequested = false;
  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    let hasSavedSummaries = "true" === "true";
    
    // Check directly if there are any thread summaries actually present on the page
    const allThreadSummaries = document.querySelectorAll('.thread-summary.markdown-content');
    const hasVisibleSummaries = Array.from(allThreadSummaries).some(el => 
      el.innerHTML.trim() !== '' && el.style.display !== 'none'
    );
    
    // If we have visible summaries on the page, allow generating the report regardless of server-side flag
    if (hasVisibleSummaries) {
      hasSavedSummaries = true;
      debug_log("Enabling report button because visible summaries were found on page", 1);
    }
    
    if (reportBtn && hasSavedSummaries) {
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    if (hasGeneratingThreads) {
      startPolling();
      if (generateBtn) generateBtn.style.display = 'none';
      if (cancelBtn) cancelBtn.style.display = 'inline-block';
    }
    // Generate summaries
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        generateBtn.style.display = 'none';
        if (cancelBtn) cancelBtn.style.display = 'inline-block';
        fetch('/assignment/fa1b83e687/generate_summaries', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1);
            startPolling();
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1);
          }
        })
        .catch(error => debug_log("Network error:", error, 1));
      });
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/fa1b83e687/cancel_generation', { method: 'POST' })
            .then(response => {
              if (response.ok) {
                stopPolling();
                document.querySelectorAll('.thread-status').forEach(status => {
                  if (status.textContent === 'Queued for generation...') status.style.display = 'none';
                });
                document.querySelectorAll('.spinner-border').forEach(spinner => spinner.style.display = 'none');
                generateBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'none';
              }
            });
        });
      }
    }
    // Report button
    if (reportBtn) {
      // Show/hide advanced thinking controls based on model selection
      const modelToggleGroup = document.getElementById('report-model-toggle-group');
      const advancedThinkingControls = document.getElementById('advanced-thinking-controls');
      function updateThinkingControlsVisibility() {
        const checked = modelToggleGroup.querySelector('input[type=radio]:checked');
        if (checked && checked.value === 'anthropic') {
          advancedThinkingControls.style.display = 'flex';
        } else {
          advancedThinkingControls.style.display = 'none';
        }
      }
      if (modelToggleGroup && advancedThinkingControls) {
        modelToggleGroup.addEventListener('change', updateThinkingControlsVisibility);
        updateThinkingControlsVisibility();
      }
      reportBtn.addEventListener('click', function() {
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        reportBtn.disabled = true;
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        // Collect all visible summaries from the UI
        const summaries = {};
        document.querySelectorAll('.thread-card').forEach(card => {
          const threadId = card.id.replace('thread-', '');
          const summaryEl = card.querySelector('.thread-summary');
          if (summaryEl && summaryEl.innerHTML.trim() !== '' && summaryEl.style.display !== 'none') {
            // Try to get the raw markdown if available
            let summaryContent = '';
            const editorEl = card.querySelector('.summary-markdown-editor');
            if (editorEl && editorEl.value.trim() !== '') {
              summaryContent = editorEl.value.trim();
            } else {
              // Otherwise use the HTML content
              summaryContent = summaryEl.innerHTML;
            }
            summaries[threadId] = {
              thread_id: threadId,
              assignment_id: 'fa1b83e687',
              summary: summaryContent,
              content: summaryContent,
              status: 'completed'
            };
          }
        });
        debug_log(`Collected ${Object.keys(summaries).length} visible summaries from UI`, 1);
        // Get selected model provider
        let modelProvider = 'openai';
        const checked = document.querySelector('#report-model-toggle-group input[type=radio]:checked');
        if (checked) modelProvider = checked.value;
        // Get advanced thinking mode and budget if Anthropic
        let enableThinking = false;
        let thinkingBudgetTokens = 4096;
        if (modelProvider === 'anthropic') {
          const enableThinkingCheckbox = document.getElementById('enable-thinking-checkbox');
          const thinkingBudgetInput = document.getElementById('thinking-budget-input');
          if (enableThinkingCheckbox && enableThinkingCheckbox.checked) {
            enableThinking = true;
          }
          if (thinkingBudgetInput && thinkingBudgetInput.value) {
            thinkingBudgetTokens = parseInt(thinkingBudgetInput.value) || 4096;
          }
        }
        fetch('/assignment/fa1b83e687/generate_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            summaries: summaries,
            model_provider: modelProvider,
            enable_thinking: enableThinking,
            thinking_budget_tokens: thinkingBudgetTokens
          })
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1);
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1);
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    // Refresh data
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        refreshDataBtn.disabled = true;
        fetch('/assignment/fa1b83e687/refresh_data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    // Regenerate title
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        fetch('/assignment/fa1b83e687/regenerate_title', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) titleEl.textContent = data.title;
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
    
    // Final check to ensure report button is enabled if summaries exist
    setTimeout(function() {
      const reportBtn = document.getElementById('report-btn');
      if (reportBtn && reportBtn.disabled) {
        const visibleSummaries = document.querySelectorAll('.thread-summary.markdown-content');
        const hasContent = Array.from(visibleSummaries).some(el => 
          el.innerHTML.trim() !== '' && el.style.display !== 'none'
        );
        
        if (hasContent) {
          reportBtn.disabled = false;
          debug_log("Enabling report button in final check - summaries exist", 1);
        }
      }
    }, 500); // Short delay to ensure all content is processed
  });
  function startPolling() {
    if (pollingInterval) clearInterval(pollingInterval);
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    checkSummaryStatus();
  }
  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }
  function checkSummaryStatus() {
    fetch('/assignment/fa1b83e687/summary_status')
      .then(response => response.json())
      .then(data => {
        let activeGeneration = false;
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'inline-block';
          } else if (threadInfo.status === 'completed') {
            if (statusEl) statusEl.style.display = 'none';
            if (spinnerEl) spinnerEl.style.display = 'none';
            if (summaryEl && threadInfo.render_html) {
              summaryEl.innerHTML = threadInfo.render_html;
              summaryEl.style.display = 'block';
              // Update the markdown textarea value for this thread
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                // If threadInfo has markdown, use it; otherwise, fallback to extracting from HTML
                if (threadInfo.markdown) {
                  textarea.value = threadInfo.markdown;
                } else if (threadInfo.render_html) {
                  // Optionally, convert HTML back to markdown if needed (or leave blank)
                  textarea.value = '';
                }
                // If CodeMirror is open for this thread, update its value too
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(textarea.value);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              // If a summary was successfully displayed, enable the report button
              const reportBtn = document.getElementById('report-btn');
              if (reportBtn) {
                reportBtn.disabled = false;
                debug_log("Enabling report button because a summary was loaded", 1);
              }
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          }
        });
        if (!activeGeneration) {
          stopPolling();
          const generateBtn = document.getElementById('generate-btn');
          const cancelBtn = document.getElementById('cancel-btn');
          if (generateBtn) generateBtn.style.display = 'inline-block';
          if (cancelBtn) cancelBtn.style.display = 'none';
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => debug_log('Error checking summary status:', error, 1));
  }
  function checkReportStatus() {
    fetch('/assignment/fa1b83e687/report_status')
      .then(response => response.json())
      .then(data => {
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        debug_log("Report status update:", data, 1);
        
        if (data.status === 'completed') {
          // Report generation completed
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Only update the UI if we have content
          if (data.content && reportSection) {
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            const styleTag = document.createElement('style');
            styleTag.textContent = `#report-content ul ul {margin-top:0.5em;margin-bottom:0.5em;padding-left:2em;}#report-content li > ul {margin-left:1em;}`;
            reportContent.appendChild(styleTag);
            
            // Check if render_html is available first, otherwise use content
            if (data.render_html) {
              reportContent.innerHTML += data.render_html;
            } else {
              reportContent.innerHTML += data.content;
            }
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2 d-flex justify-content-end align-items-center';
            
            // Create formatted date display
            const formattedDate = new Date(data.generated_at).toLocaleDateString('en-US', {
              month: 'short', 
              day: 'numeric', 
              year: 'numeric',
              hour: 'numeric',
              minute: '2-digit',
              hour12: true
            });
            
            generatedText.innerHTML = `
              <span class="text-right" style="flex:1; text-align:right;">Generated on: ${formattedDate}</span>
              ${!exportMode ? `
                <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-2" id="edit-report-btn" title="Edit report" style="vertical-align: baseline;">
                  <i class="fas fa-pencil-alt"></i>
                </button>
              ` : ''}
            `;
            
            // Clear existing content and append new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert UTC timestamps to local
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) { console.error('Error converting time:', e); }
            });
            
            debug_log("Updated report UI with new content", 1);
          } else {
            debug_log("Report completed but no content received", 2);
          }
        } else if (data.status === 'generating' || data.status === 'running') {
          // Report is still being generated
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          
          // Show elapsed time if available
          if (data.elapsed_seconds) {
            const elapsed = Math.round(data.elapsed_seconds);
            if (noReportMsg) {
              noReportMsg.textContent = `Generating instructor report... (${elapsed}s)`;
            }
          }
          
          // Continue polling
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        } else {
          // Unknown or not_started status
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (data.report_exists && reportSection) {
            // If report exists but no status, try refreshing the page after a timeout
            debug_log("Report exists but status not provided - will try to reload content", 2);
            setTimeout(checkReportStatus, 2000);
          }
        }
      })
      .catch(error => {
        debug_log("Error checking report status:", error, 2);
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>
<!-- =====================
     CodeMirror for Editing
     ===================== -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css" rel="stylesheet"/>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Report editing
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        if (reportEditor) reportEditor.refresh();
      });
    }
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        const markdown = reportEditor.getValue();
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        editorSpinner.style.display = 'inline-block';
        fetch('/assignment/fa1b83e687/edit_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ markdown: markdown })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          if (data.success) {
            reportContent.innerHTML = data.content;
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusMessage.style.display = 'none'; }, 3000);
      }
    }
  });
</script>
<!-- =====================
     Summary Editing (CodeMirror)
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    const summaryEditors = {};
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          let markdownContent = textarea.value;
          if (!markdownContent) {
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          summaryEditors[sessionId].setValue(markdownContent);
          summaryEditors[sessionId].refresh();
        } else {
          summaryEditors[sessionId].refresh();
        }
      });
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          const markdown = summaryEditors[sessionId].getValue();
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          fetch('/assignment/fa1b83e687/edit_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId, markdown: markdown })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.render_html || data.content;
              summaryElement.style.display = 'block';
              // Update the markdown textarea value
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                textarea.value = markdown;
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(markdown);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      btn.addEventListener('click', function() {
        // Removed confirmation dialog for immediate regeneration
        const statusElement = document.getElementById(`status-${sessionId}`);
        const spinnerElement = document.getElementById(`spinner-${sessionId}`);
        if (statusElement && spinnerElement) {
          statusElement.textContent = 'Regenerating summary...';
          statusElement.className = 'status-message thread-status text-info';
          statusElement.style.display = 'block';
          spinnerElement.style.display = 'inline-block';
          summaryElement.style.opacity = '0.5';
          fetch('/assignment/fa1b83e687/regenerate_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId })
          })
          .then(response => response.json())
          .then(data => {
            spinnerElement.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.content;
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message;
              statusElement.className = 'status-message thread-status success';
              attachButtonListeners(sessionId);
              setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
            } else {
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message || 'Error regenerating summary';
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            }
          })
          .catch(error => {
            spinnerElement.style.display = 'none';
            summaryElement.style.opacity = '1';
            statusElement.textContent = 'Error regenerating summary: ' + error;
            statusElement.className = 'status-message thread-status error';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
          });
        }
      });
    });
    function attachButtonListeners(sessionId) {
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          // Removed confirmation dialog for immediate regeneration
          const summaryElement = document.getElementById(`summary-${sessionId}`);
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            summaryElement.style.opacity = '0.5';
            fetch('/assignment/fa1b83e687/regenerate_summary', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ session_id: sessionId })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              if (data.success) {
                summaryElement.innerHTML = data.content;
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                attachButtonListeners(sessionId);
                setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            });
          }
        });
      }
    }
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusEl.style.display = 'none'; }, 3000);
      }
    }
  });
</script>
<!-- =====================
     Export/Share Functionality
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Export button
    const exportBtn = document.querySelector('a[href*="/export"]');
    if (exportBtn) {
      exportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        const exportUrl = new URL(this.href, window.location.origin);
        
        // Add selected histogram fields to export URL
        const selectedHistograms = getSelectedHistograms();
        if (selectedHistograms.length > 0) {
          exportUrl.searchParams.set('histograms', selectedHistograms.join(','));
        }
        
        exportUrl.searchParams.set('theme', currentTheme);
        window.location.href = exportUrl.toString();
      });
    }
    // Set theme class on HTML element for export mode
    if ('True' === 'True' && 'dark-mode') {
      document.documentElement.className = 'dark-mode';
    }
    // Share export button
    const shareExportBtn = document.getElementById('share-export-btn');
    if (shareExportBtn) {
      shareExportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        shareExportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
        shareExportBtn.disabled = true;
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        
        // Add selected histogram fields to share request
        const selectedHistograms = getSelectedHistograms();
        
        fetch('/assignment/fa1b83e687/share_export', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            theme: currentTheme,
            selected_histograms: selectedHistograms
          })
        })
        .then(response => response.json())
        .then(data => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          if (data.success) {
            const modalHtml = `
              <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content" style="background-color: var(--card-bg); color: var(--text-color);">
                    <div class="modal-header" style="border-color: var(--border-color);">
                      <h5 class="modal-title" id="shareModalLabel">Share Export</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: var(--text-color);">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Your export has been saved. Share this link:</p>
                      <div class="input-group mb-3">
                        <input type="text" id="share-link" class="form-control" value="${data.share_url}" readonly style="background-color: var(--input-bg); color: var(--text-color); border-color: var(--border-color);">
                        <div class="input-group-append">
                          <button class="btn btn-primary" type="button" id="copy-link-btn">
                            <i class="fas fa-copy"></i> Copy
                          </button>
                        </div>
                      </div>
                      <div id="copy-feedback" class="text-success" style="display: none;">Link copied to clipboard!</div>
                    </div>
                    <div class="modal-footer" style="border-color: var(--border-color);">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <a href="${data.share_url}" target="_blank" class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> Open
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            `;
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHtml;
            document.body.appendChild(modalContainer);
            $('#shareModal').modal('show');
            document.getElementById('copy-link-btn').addEventListener('click', function() {
              const shareLink = document.getElementById('share-link');
              shareLink.select();
              document.execCommand('copy');
              const copyFeedback = document.getElementById('copy-feedback');
              copyFeedback.style.display = 'block';
              setTimeout(() => { copyFeedback.style.display = 'none'; }, 3000);
            });
            $('#shareModal').on('hidden.bs.modal', function() {
              modalContainer.remove();
            });
          } else {
            alert('Error: ' + (data.message || 'Could not generate shared export'));
          }
        })
        .catch(error => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          alert('Error: Could not generate shared export');
          console.error('Error:', error);
        });
      });
    }
    
    // Helper function to get selected histograms
    function getSelectedHistograms() {
      const checkboxes = document.querySelectorAll('.export-histogram-checkbox:checked');
      return Array.from(checkboxes).map(cb => cb.getAttribute('data-field')).filter(Boolean);
    }
  });
</script>
<!-- =====================
     Histogram Selection for Export
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle the select/deselect all buttons
    const selectAllBtn = document.getElementById('select-all-histograms');
    const deselectAllBtn = document.getElementById('deselect-all-histograms');
    
    if (selectAllBtn) {
      selectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = true;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.color = '#8a8aff';
            setTimeout(() => {
              label.style.color = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = selectAllBtn.innerHTML;
        selectAllBtn.innerHTML = '<i class="fas fa-check mr-1"></i> All Selected';
        setTimeout(() => {
          selectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    if (deselectAllBtn) {
      deselectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = false;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.opacity = '0.7';
            setTimeout(() => {
              label.style.opacity = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = deselectAllBtn.innerHTML;
        deselectAllBtn.innerHTML = '<i class="fas fa-times mr-1"></i> All Deselected';
        setTimeout(() => {
          deselectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    // Initialize checkboxes from localStorage if available
    const savedSelections = localStorage.getItem('selected_histograms');
    if (savedSelections) {
      try {
        const selections = JSON.parse(savedSelections);
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          const field = checkbox.getAttribute('data-field');
          if (field && selections.includes(field)) {
            checkbox.checked = true;
          }
        });
      } catch (e) {
        console.error('Error loading saved histogram selections:', e);
      }
    } else {
      // If no saved selections, select all by default
      document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
        checkbox.checked = true;
      });
      saveHistogramSelections();
    }
    
    // Save selections to localStorage when changed
    document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', saveHistogramSelections);
    });
    
    function saveHistogramSelections() {
      const selectedFields = Array.from(document.querySelectorAll('.export-histogram-checkbox:checked'))
        .map(cb => cb.getAttribute('data-field'))
        .filter(Boolean);
      
      localStorage.setItem('selected_histograms', JSON.stringify(selectedFields));
    }
  });
</script>
<!-- =====================
     Social Sharing Buttons
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('twitter-share')) {
      const pageUrl = encodeURIComponent(window.location.href);
      const shareMessage = encodeURIComponent("Check out the assignments my students just finished on Sway! The AI Guide killed it! 🤯");
      
      // X (formerly Twitter) sharing
      const xBtn = document.getElementById('twitter-share');
      xBtn.href = `https://x.com/intent/tweet?text=${shareMessage}&url=${pageUrl}`;
      xBtn.target = '_blank';
      xBtn.rel = 'noopener noreferrer';
      
      // Facebook sharing
      const facebookBtn = document.getElementById('facebook-share');
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}&quote=${shareMessage}`;
      facebookBtn.target = '_blank';
      facebookBtn.rel = 'noopener noreferrer';
      
      // LinkedIn sharing
      const linkedinBtn = document.getElementById('linkedin-share');
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
      linkedinBtn.target = '_blank';
      linkedinBtn.rel = 'noopener noreferrer';
      
      // Instagram sharing (requires copy to clipboard)
      const instagramBtn = document.getElementById('instagram-share');
      instagramBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const textarea = document.createElement('textarea');
        textarea.value = `${shareMessage}\n\n${window.location.href}`;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Link and message copied to clipboard. Paste this into Instagram to share!');
      });
    }
  });
</script>
<!-- =====================
     CSS for Status Messages and CodeMirror
     ===================== -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>
<script src="/static/js/histogram-title-fixer.js"></script>
<!-- Script for polished Show More/Fewer functionality in all modes -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Instructor Report Show More
      const setupReportShowMore = function() {
        const reportContent = document.getElementById('report-content');
        if (reportContent) {
          const headings = reportContent.querySelectorAll('h3');
          if (headings.length > 2) {
            const secondHeading = headings[1];
            const hiddenContentWrapper = document.createElement('div');
            hiddenContentWrapper.id = 'hidden-report-content';
            hiddenContentWrapper.className = 'collapsible-section collapsed';
            let currentNode = secondHeading.nextElementSibling;
            let nodesToMove = [];
            while (currentNode) {
              if (currentNode.tagName === 'H3' && currentNode !== secondHeading) {
                nodesToMove.push(currentNode);
              } else if (nodesToMove.length > 0) {
                nodesToMove.push(currentNode);
              }
              currentNode = currentNode.nextElementSibling;
            }
            nodesToMove.forEach(node => { hiddenContentWrapper.appendChild(node); });
            reportContent.appendChild(hiddenContentWrapper);
            
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'btn btn-thread-toggle show-toggle-btn';
            showMoreBtn.innerHTML = 'Continue Reading <i class="fas fa-chevron-down"></i>';
            showMoreBtn.style.marginTop = '1.5rem';
            reportContent.insertBefore(showMoreBtn, hiddenContentWrapper);
            
            // Add a spacer div ABOVE the Continue Reading button for extra spacing
            const spacerDiv = document.createElement('div');
            spacerDiv.style.height = '1rem';
            spacerDiv.style.clear = 'both';
            reportContent.insertBefore(spacerDiv, showMoreBtn);
            
            showMoreBtn.addEventListener('click', function() {
              const expanded = hiddenContentWrapper.classList.contains('collapsed');
              if (expanded) {
                hiddenContentWrapper.classList.remove('collapsed');
                showMoreBtn.classList.add('expanded');
                showMoreBtn.innerHTML = 'Show Less <i class="fas fa-chevron-up"></i>';
              } else {
                hiddenContentWrapper.classList.add('collapsed');
                showMoreBtn.classList.remove('expanded');
                showMoreBtn.innerHTML = 'Continue Reading <i class="fas fa-chevron-down"></i>';
              }
            });
          }
        }
      };
      // Threads Masonry Show More
      const setupThreadsShowMore = function() {
        const masonryGrid = document.querySelector('.masonry-grid');
        if (!masonryGrid || masonryGrid.children.length <= 2) {
          return; // Do nothing if 2 or fewer items
        }

        const masonryItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
        const itemsToShowInitially = 2;

        const performHideAndSetupButtons = () => {
          // Hide items beyond the initial set
          for (let i = itemsToShowInitially; i < masonryItems.length; i++) {
            if (masonryItems[i]) { // Ensure item exists
              masonryItems[i].classList.add('hidden-thread');
            }
          }

          const hiddenItemCount = masonryGrid.querySelectorAll('.masonry-item.hidden-thread').length;
          if (hiddenItemCount === 0 && masonryItems.length > itemsToShowInitially) {
            // Fallback or logging if hiding didn't work as expected but should have
            console.warn("Masonry items were expected to be hidden but were not.");
            // Potentially, if itemsToShowInitially is high, this might be normal if total items < itemsToShowInitially
          }
          
          // Only proceed with buttons if there are actually items to unhide
          if (masonryItems.length <= itemsToShowInitially) {
            return;
          }

          const showMoreThreadsBtn = document.createElement('button');
          showMoreThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';

          const updateShowMoreText = () => {
            const currentHiddenCount = masonryGrid.querySelectorAll('.masonry-item.hidden-thread').length;
            showMoreThreadsBtn.innerHTML = `Show ${currentHiddenCount} More Threads`;
            // Show button only if there are hidden threads
            showMoreThreadsBtn.style.display = currentHiddenCount > 0 ? 'block' : 'none';
          };
          
          const showFewerThreadsBtn = document.createElement('button');
          showFewerThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          showFewerThreadsBtn.innerHTML = 'Show Fewer Threads';
          showFewerThreadsBtn.style.display = 'none'; // Initially hidden

          const threadListSection = document.querySelector('.thread-list');
          let spacerDiv;
          if (threadListSection) {
            spacerDiv = document.createElement('div');
            spacerDiv.style.height = '4px';
            spacerDiv.style.clear = 'both';
            spacerDiv.style.display = 'none';
            threadListSection.appendChild(spacerDiv);
            threadListSection.appendChild(showFewerThreadsBtn);
          }
          
          // Insert Show More button only if there's a chance it will be displayed
          if (masonryItems.length > itemsToShowInitially) {
             masonryGrid.parentNode.insertBefore(showMoreThreadsBtn, masonryGrid.nextSibling);
             updateShowMoreText(); // Set initial text and visibility
          }


          showMoreThreadsBtn.addEventListener('click', function() {
            masonryItems.forEach(item => item.classList.remove('hidden-thread'));
            updateShowMoreText(); // Button should hide itself
            showFewerThreadsBtn.style.display = 'block';
            if (spacerDiv) spacerDiv.style.display = 'block';
          });

          showFewerThreadsBtn.addEventListener('click', function() {
            for (let i = itemsToShowInitially; i < masonryItems.length; i++) {
              if (masonryItems[i]) {
                masonryItems[i].classList.add('hidden-thread');
              }
            }
            updateShowMoreText(); // Button should reappear and update count
            showFewerThreadsBtn.style.display = 'none';
            if (spacerDiv) spacerDiv.style.display = 'none';
            
            const chatThreadsSectionTitle = document.querySelector('h5.section-title .fa-comments');
            if (chatThreadsSectionTitle && chatThreadsSectionTitle.closest('h5.section-title')) {
              chatThreadsSectionTitle.closest('h5.section-title').scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
              masonryGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        };

        if (window.requestAnimationFrame) {
          window.requestAnimationFrame(() => {
            setTimeout(performHideAndSetupButtons, 75); // Delay to allow layout to settle
          });
        } else {
          setTimeout(performHideAndSetupButtons, 75); // Fallback
        }
      };

      setupReportShowMore();
      setupThreadsShowMore();

      // Opinion Distribution Show More/Less
      const histogramCards = document.querySelectorAll('.opinion-histogram-card');
      const showMoreBtn = document.getElementById('show-more-histograms-btn');
      const showFewerBtn = document.getElementById('show-fewer-histograms-btn');
      const maxVisible = 6;
      if (histogramCards.length > maxVisible) {
        for (let i = maxVisible; i < histogramCards.length; i++) {
          histogramCards[i].classList.add('hidden-histogram');
        }
        showMoreBtn.style.display = 'inline-block';
      }
      if (showMoreBtn && showFewerBtn) {
        showMoreBtn.addEventListener('click', function() {
          for (let i = maxVisible; i < histogramCards.length; i++) {
            histogramCards[i].classList.remove('hidden-histogram');
          }
          showMoreBtn.style.display = 'none';
          showFewerBtn.style.display = 'inline-block';
        });
        showFewerBtn.addEventListener('click', function() {
          for (let i = maxVisible; i < histogramCards.length; i++) {
            histogramCards[i].classList.add('hidden-histogram');
          }
          showMoreBtn.style.display = 'inline-block';
          showFewerBtn.style.display = 'none';
          // Scroll to the top of the histogram section
          const sectionTitle = document.querySelector('.section-title .fa-chart-bar');
          if (sectionTitle && sectionTitle.closest('.section-title')) {
            sectionTitle.closest('.section-title').scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      }
    });
  </script>
<!-- Script to disable hover animations -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create a style element
      var style = document.createElement('style');
      
      // Add CSS rules to disable hover animations
      style.innerHTML = `
        .card:hover, 
        .thread-item:hover, 
        .histogram-container:hover, 
        .histogram-bar:hover, 
        .histogram-card:hover {
          transform: none !important;
        }
      `;
      
      // Append the style element to the head
      document.head.appendChild(style);
    });
  </script>
<!-- Close content-wrapper -->
</body>
</html>