<!doctype html>
<html lang="en" class="dark-mode">
<head>
  <script>
    // Set the correct Bootswatch theme based on theme_mode immediately
    window.themeMode = 'dark-mode';
    if (window.themeMode === 'light-mode') {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/flatly/bootstrap.min.css" id="theme-css">');
    } else {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">');
    }
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Securing Health, Work, and Manufacturing Revival to Reverse Deaths of Despair</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
<style>
    /* Global font size increase by 20% */
    html {
      font-size: 110%;
    }

    :root {
      /* Darkened dark mode theme */
      --bg-color: #000000;          /* Near-black background */
      --card-bg: #0e0e1a;           /* Deeper navy card */
      --card-header-bg: #000000;     /* Darker header */
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #1f1f2d;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #141422;
      --message-right-bg: #0e0e1a;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #000000;
      --muted-text-color: #000000;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple Sway theme colors */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    html {
      margin: 0;
      padding: 0;
      border: none;
      outline: none;
    }
    
    body { 
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
      border: none; /* Remove any borders */
      outline: none; /* Remove any outlines */
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
      border: none;
      outline: none;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 0;
        margin-right: 0;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 0;
        margin-right: 0;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: background-color 0.3s ease;
    }
    .card:hover {
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    /* No hover effect for section title cards */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.68rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      padding-left: 15px;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.7em;
      padding: 6px 8px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 15px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        flex-wrap: nowrap;
      }
      .thread-list-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: calc(50% - 8px);
      }
    }
    .thread-card {
      margin-bottom: 0 !important;
    }
    .thread-item {
      display: flex;
      flex-direction: column;
      width: 100%;
      opacity: 1; /* Ensure visibility */
      padding: 15px;
      background-color: var(--card-bg);
      border-radius: 12px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent; /* Remove orange border */
    }
    .thread-item.visible {
      opacity: 1;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .thread-header .thread-actions {
      display: flex;
      gap: 6px;
      white-space: nowrap;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
      /* Hide theme toggle and edit prompts in mobile */
      .theme-toggle {
        display: none !important;
      }
      a.back-btn[href*="edit_prompts"] {
        display: none !important;
      }
      #share-export-btn {
        margin-right: 0 !important;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to match the Info card */
    #topics-container {
      max-height: 420px;
      min-height: 420px;
      overflow-y: auto;
    }
    /* Smaller height for export mode */
    html.export-mode #topics-container {
      max-height: 345px;
      min-height: 345px;
    }

    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: #090118 !important;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    
    .histogram-bar {
      background: linear-gradient(180deg, #a9a9ff 0%, #8a8aff 100%);
      border-radius: 4px 4px 6px 6px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      box-shadow: 0 2px 6px rgba(138,138,255,0.2);
    }
    .histogram-bar:hover {
      box-shadow: 0 4px 8px rgba(138,138,255,0.4);
    }
    .histogram-axis-line {
      background: rgba(169,173,193,0.4);
      width: 2px;
    }
    .histogram-grid-line {
      background: rgba(169,173,193,0.13);
      height: 1px;
    }
    .histogram-container .axis-label {
      color: #a9adc1;
      font-size: 0.95rem;
      opacity: 0.85;
    }
    .histogram-container .x-label {
      color: #a9adc1;
      font-size: 1.1rem;
      font-weight: 500;
      margin-top: 0.35rem;
    }
    .histogram-container .card-body {
      padding: 1.25rem;
    }
    
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }

    /* Add social sharing buttons styling */
    .social-share-container {
      background-color: var(--card-header-bg);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .social-share-title {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary-color);
    }
    .social-share-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: opacity 0.2s;
      font-size: 0.9rem;
    }
    .social-btn:hover {
      opacity: 0.85;
      text-decoration: none;
      color: white;
    }
    .social-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    .btn-twitter {
      background-color: #1DA1F2;
    }
    .btn-facebook {
      background-color: #4267B2;
    }
    .btn-linkedin {
      background-color: #0077B5;
    }
    .btn-instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }
    @media (max-width: 576px) {
      .social-btn {
        padding: 4px 9px;
        font-size: 0.8rem;
      }
      .social-btn i {
        margin-right: 4px;
      }
    }

    .full-width-page {
      width: 100%;
      max-width: 1420px;
      margin: 0 auto;
      padding-left: 24px;
      padding-right: 24px;
    }
    @media (min-width: 576px) {
      .full-width-page {
        padding-left: 50px;
        padding-right: 50px;
      }
    }
    @media (min-width: 992px) {
      .full-width-page {
        padding-left: 64px;
        padding-right: 64px;
      }
    }

    /* Histogram card styling - more aggressive fixes */
    .histogram-card {
      background-color: #070113 !important;
      border: none; 
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin-bottom: 0;
      overflow: hidden;
    }

    .histogram-card:hover {
      box-shadow: 0 7px 15px rgba(0,0,0,0.25);
    }

    .histogram-card .card-body {
      padding: 8px 0 !important;
    }

    /* Target histogram SVG elements directly */
    .histogram-card svg {
      max-width: 100% !important;
      margin-left: -20px !important; /* Pull SVG to the left */
      width: calc(100% + 20px) !important; /* Compensate for negative margin */
    }

    /* More aggressive targeting for histogram titles */
    .histogram-card h3,
    .histogram-card .x-label,
    .histogram-card text.title,
    .histogram-card [class*="title"],
    .histogram-card text[font-size="14px"],
    .histogram-card text[font-weight="bold"] {
      text-transform: capitalize !important;
      font-size: 1.15rem !important;
      font-weight: 600 !important;
      color: var(--primary-color) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 95% !important;
      display: block !important;
    }

    /* Add text truncation to histogram title element specifically */
    .histogram-card .histogram-content svg text[y="30"],
    .histogram-card .histogram-content svg text.title {
      text-overflow: ellipsis !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      max-width: 250px !important;
    }

    /* Target mean text specifically */
    .histogram-card .mean-text,
    .histogram-card text[y="300"],
    .histogram-card text:last-of-type,
    .histogram-card text[font-size="12px"] {
      font-size: 0.9rem !important;
    }

    /* Add italicized m= to mean values with several selectors to catch them */
    .histogram-card .mean-text::before,
    .histogram-card text[y="300"]::before,
    .histogram-card text:last-of-type::before {
      content: "m = ";
      font-style: italic;
    }

    @media (max-width: 767.98px) {
      .histogram-card .card-body {
        padding: 8px 0 !important;
      }
    }

    /* Card with no hover effects */
    .no-hover {
      transition: background-color 0.3s ease !important;
    }

    .no-hover:hover {
      transform: none !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
    }

    .thread-heading {
      color: var(--primary-color) !important;
      font-weight: 600;
    }

    /* Truncate long histogram HTML titles with ellipsis */
    .histogram-title,
    .histogram-card [style*="font-size:1.25rem"] {
      font-size: 1rem !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      max-width: 95%;
    }

    /* Hide histogram cards that only contain "No data" text */
    .histogram-card .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .card-body .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .histogram-content:has(> div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Also hide the parent cards when they only contain "No data" content */
    .histogram-card:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")),
    .card-body:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Hide the entire column if it only contains a "No data" card */
    .col-md-6:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))),
    .col-lg-4:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))) {
      display: none !important;
    }

    /* Bootstrap Histogram Styles */
    .histogram-container {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        position: relative;
    }
    
    .histogram-bar-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        padding: 0 2px;
    }
    
    .histogram-bar {
        width: 80%;
        transition: background-color 0.2s ease;
        border-radius: 3px 3px 0 0;
    }
    
    .histogram-bar:hover {
        background-color: #a5a5ff !important;
    }
    
    .histogram-label {
        margin-top: 5px;
        font-size: 11px;
        text-align: center;
    }
    
    .histogram-stats {
        margin-top: 10px;
        text-align: center;
    }
    
    /* Light mode overrides for histograms */
    html.light-mode .histogram-bar {
        background-color: #6a6ae6 !important;
    }
    
    html.light-mode .histogram-bar:hover {
        background-color: #8a8aff !important;
    }

    /* Histogram Checkbox Styles */
    .histogram-export-checkbox {
        position: absolute;
        bottom: 8px;
        right: 8px;
        z-index: 2;
        opacity: 0.6;
        transform: translateY(0);
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    
    .histogram-export-checkbox:hover {
        opacity: 1;
        transform: translateY(-2px);
    }
    
    .histogram-export-checkbox input[type="checkbox"] {
        margin-right: 4px;
        cursor: pointer;
        accent-color: var(--card-bg); /* Match card background for subtlety */
        opacity: 0.5;
        transition: opacity 0.2s;
    }
    
    .histogram-export-checkbox input[type="checkbox"]:hover,
    .histogram-export-checkbox input[type="checkbox"]:focus {
        opacity: 0.85;
    }
    
    .histogram-export-checkbox label {
        font-size: 0.75rem;
        cursor: pointer;
        margin: 0;
        color: var(--muted-text-color);
    }
    
    /* Make the card position relative so absolute positioned checkbox works */
    .card.thread-card .card-body {
        position: relative;
    }
    
    /* Highlight the checkbox when checked */
    .histogram-export-checkbox input[type="checkbox"]:checked + label {
        color: var(--primary-color);
        font-weight: 500;
    }

    .card.thread-card .card-header {
      background-color: #070113 !important;
    }
</style>
  <style>
    /* Apple-inspired font styling */
    body, button, input, select, textarea {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3, h4, h5, h6, .section-title, .generated-title {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-weight: 600;
      letter-spacing: +0.005em;
    }
    
    /* Custom styles for floating thread items */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .thread-list {
      margin-top: 15px;
      position: relative;
      display: block;
      clear: both;
      margin-bottom: 30px;
    }
    
    /* Masonry layout using columns */
    .masonry-grid {
      column-count: 2;
      column-gap: 1.5rem;
      width: 100%;
    }
    
    @media (max-width: 767px) {
      .masonry-grid {
        column-count: 1;
      }
    }
    
    .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Items in the masonry grid */
    .masonry-grid .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Make sure thread cards in masonry layout have required styles */
    .masonry-grid .card.thread-card, .card.thread-card {
      background: none !important;
      border: 1px solid var(--thread-card-border, #313131) !important;
      border-radius: 12px !important;
      box-shadow: none !important;
      transition: border-color 0.2s;
    }
    
    /* Dark mode border override */
    body.dark-mode .masonry-grid .card.thread-card,
    body.dark-mode .card.thread-card {
      border-color: #23263a !important;
    }
    
    /* Override any position:relative that may be applied to .card-body elsewhere */
    .masonry-grid .card.thread-card .card-body {
      position: static;
    }
    
    .masonry-grid .card.thread-card:hover {
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .show-toggle-btn {
      display: block;
      margin: 30px auto 10px auto;
      min-width: 220px;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .show-toggle-btn i {
      margin-left: 8px;
      transition: transform 0.2s;
    }
    .show-toggle-btn.expanded i {
      transform: rotate(180deg);
    }
    .collapsible-section {
      transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.4s;
      overflow: hidden;
      opacity: 1;
      max-height: 2000px; /* Large enough for most content */
    }
    .collapsible-section.collapsed {
      max-height: 0 !important;
      opacity: 0;
      pointer-events: none;
    }
    /* Premium title styling with maximum specificity to override any other styles */
    html body .generated-title,
    html[class] body .generated-title,
    body .generated-title.text-info,
    .full-width-page .generated-title,
    .generated-title {
      font-size: 2.0rem !important;
      line-height: 1.2 !important;
      margin-top: 2rem !important;
      margin-bottom: 1rem !important;
      font-weight: 600;
      text-shadow: 0 1px 3px rgba(0,0,0,0.15);
      letter-spacing: 0.0025em;
      display: block;
      position: relative;
      max-width: 94%;
      padding-bottom: 0.5rem;
      font-style: normal !important; /* Force normal style, no italics */
    }
    
    /* Light mode title styling */
    html.light-mode .generated-title,
    body.light-mode .generated-title {
      color: #23004D !important;
      text-shadow: none;
    }
    
    /* Dark mode specifics */
    html.dark-mode .generated-title,
    body.dark-mode .generated-title {
      color: white !important;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .generated-title::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 8rem;
      height: 3px;
      background: white;
      opacity: 0.7;
      border-radius: 2px;
    }
    
    /* Adjust underline color in light mode */
    body.light-mode .generated-title::after,
    html.light-mode .generated-title::after {
      background: #23004D;
      opacity: 0.5;
    }
    
    /* For longer titles, ensure they wrap properly */
    @media (max-width: 992px) {
      .generated-title {
        font-size: 2.4rem !important;
        max-width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      .generated-title {
        font-size: 2rem !important;
        margin-top: 2rem !important;
        margin-bottom: 1.2rem !important;
      }
    }
    .section-title {
      font-size: 1.35rem !important; 
      font-weight: 700;
      margin-bottom: 1.2rem;
      letter-spacing: 0.01em;
    }
    /* Remove background from thread card headers */
    .card.thread-card .card-header {
      background: none !important;
      border-bottom: none !important;
    }
    .small {
      font-size: 0.875em !important;
    }
    /* Show More/Fewer Threads button custom color */
    .btn-thread-toggle {
      color: #3498DB !important;
      border-color: #3498DB !important;
      background: transparent !important;
    }
    .btn-thread-toggle:hover, .btn-thread-toggle:focus {
      background: #eaf6fb !important;
      color: #217dbb !important;
      border-color: #217dbb !important;
    }
    /* Ensure info text under section headings aligns with the heading text */
    .section-info-align {
      margin-left: 2.2rem; /* matches the icon+text indent of .section-title .title-text */
    }

    /* ===== Stylish Share Banner ===== */
    .share-banner {
      margin: 0 -1.5rem 2rem -1.5rem;
      background: rgba(24, 26, 45, 0.95);
      backdrop-filter: blur(10px);
      padding: 1.5rem 0;
      position: relative;
      z-index: 10;
    }
    .light-mode .share-banner {
      background: rgba(46, 87, 170, 0.9);
    }
    .share-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .share-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1.2rem;
    }
    .share-text {
      font-size: 1.1rem;
      color: white;
      opacity: 0.95;
      font-weight: 500;
      letter-spacing: -0.01em;
    }
    .share-buttons {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
    }
    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }
    .share-button i {
      font-size: 1.1rem;
    }
    .share-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    .share-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: all 0.1s ease;
    }
    .twitter-share {
      background: #000000; /* X logo has a black background */
    }
    .facebook-share {
      background: #4267B2;
    }
    .linkedin-share {
      background: #0077B5;
    }
    .instagram-share {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    }
    @media (max-width: 576px) {
      .share-text {
        font-size: 0.95rem;
      }
      .share-button {
        width: 2.6rem;
        height: 2.6rem;
      }
    }
    /* ===== End Share Header Styles ===== */

    /* ===== Additional Layout Adjustments for Share Header ===== */
    .shared-page {
      padding-top: 0 !important;
    }
    
    .shared-page .generated-title {
      margin-top: 3.2rem !important;
      animation: title-fade-in 1s ease-out;
    }
    
    /* Add spacing between share banner and content */
    .share-banner + .row {
      margin-top: 2.5rem;
    }
    
    /* Subtle animation for title appearance */
    @keyframes title-fade-in {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* ===== End Layout Adjustments ===== */

    /* Add improved line spacing for content */
    .markdown-content {
      line-height: 1.6;
    }
    
    .markdown-content p, 
    .markdown-content li,
    .thread-summary p, 
    .thread-summary li {
      line-height: 1.65;
      margin-bottom: 0.9em;
    }
    
    .markdown-content h3, 
    .markdown-content h4 {
      margin-top: 1.7em;
      margin-bottom: 0.7em;
      line-height: 1.4;
    }
    
    /* Improve readability of thread cards */
    .thread-card .card-body,
    .thread-summary {
      line-height: 1.65;
    }
    
    /* Increase spacing between list items */
    .markdown-content ul, 
    .markdown-content ol,
    .thread-summary ul,
    .thread-summary ol {
      padding-left: 1.6em;
      margin-bottom: 1.2em;
    }
  </style>
</head>
<body>
  <div class="full-width-page px-3 py-4">
  
    
    <div class="row mb-4">
      <div class="col-12">
        <h1 class="generated-title">
          Securing Health, Work, and Manufacturing Revival to Reverse Deaths of Despair
        </h1>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-md-6 mb-4 mb-md-0">
        <div class="py-4 h-100">
          
<h5 class="section-title">
  <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
</h5>

  <div id="timelines-container" class="card-body">
    
      <div class="row mb-2">
        <div class="col-5 col-label">Completion deadline:</div>
        <div class="col-7 col-value">
          <span class="utc-time" data-utc-time="2025-04-25 04:59:00+00:00">2025-04-25 04:59:00+00:00</span>
          <span class="local-time"></span>
        </div>
      </div>
    
      <div class="row mb-2">
        <div class="col-5 col-label">Opinion deadline:</div>
        <div class="col-7 col-value">
          <span class="utc-time" data-utc-time="2025-04-22 04:59:00+00:00">2025-04-22 04:59:00+00:00</span>
          <span class="local-time"></span>
        </div>
      </div>
    
  </div>


<h5 class="section-title mt-4">
  <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
</h5>
<div id="info-container" class="card-body">
  <div class="row mb-3">
    <div class="col-5 col-label">Instructor:</div>
    <div class="col-7 col-value">[Redacted]</div>
  </div>
  <div class="row mb-3">
    <div class="col-5 col-label">Min. chat time:</div>
    <div class="col-7 col-value">
      
        25 minutes
      
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-5 col-label">Created on:</div>
    <div class="col-7 col-value">
      <span class="utc-time" data-utc-time="2025-04-20 12:42:17.292771+00:00">2025-04-20 12:42:17.292771+00:00</span>
      <span class="local-time"></span>
    </div>
  </div>
  
  
  <div class="row mb-3">
    <div class="col-5 col-label">Chat threads:</div>
    <div class="col-7 col-value">14</div>
  </div>
</div> 
        </div>
      </div>
      <div class="col-md-6">
        <div class="py-4 h-100">
          <!-- Topics Section Partial -->


<h5 class="section-title">
  <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
</h5>

  <div id="topics-container" class="card-body">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Job Guarantee</div>
        <div>The US should guarantee access to decent employment for all of its citizens in order to counteract the epidemic of deaths of despair.</div>
      </div>
      <hr class="my-3" style="border-color: #2d2d43;">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Reindustrialization</div>
        <div>Because many of the lost jobs that have contributed to the epidemic of deaths of despair have been in the manufacturing sector, the US should institute policy to bring those jobs back to the US.</div>
      </div>
      <hr class="my-3" style="border-color: #2d2d43;">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Universal Healthcare</div>
        <div>The US should guarantee access to health insurance for all of its legal residents.</div>
      </div>
      
    
  </div>
 
        </div>
      </div>
    </div>
    <div class="row mb-2">
      <div class="col-12">
        <h5 class="section-title">
          <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
          
        </h5>
      </div>
      <div class="pt-0 pb-2">
        <div class="text-muted small mb-0 section-info-align">
          <i class="fas fa-info-circle mr-1"></i>Opinion scale: â€“3 = Strongly disagree, 0 = No idea, +3 = Strongly agree. Mean and 95% CI shown below each chart.
        </div>
        <!-- DEBUG: Show if histogram_html or topic_labels are missing -->
        
        
      </div>
    </div>

    <!-- Separate row for histogram charts floating on background -->
    <div class="row mb-4">
      <div class="col-12">
        
          <div class="row">
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Universal Healthcare</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">30</div>
            
                    <div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">20</div>
            
                    <div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:20.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:66.66666666666666%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:86.66666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.87 <span style="opacity:0.7;">(95% confidence interval: 1.47â€“2.26)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Reindustrialization</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">20</div>
            
                    <div style="position:absolute; top:25.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
            
                    <div style="position:absolute; top:50.0%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:75.0%; right:10px; color:#a9adc1; font-size:14px;">5</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:25.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:50.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:75.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:10.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:30.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:60.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:90.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:70.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.27 <span style="opacity:0.7;">(95% confidence interval: 0.89â€“1.64)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Job Guarantee</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">20</div>
            
                    <div style="position:absolute; top:25.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
            
                    <div style="position:absolute; top:50.0%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:75.0%; right:10px; color:#a9adc1; font-size:14px;">5</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:25.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:50.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:75.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:10.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:20.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:60.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:100.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:70.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.37 <span style="opacity:0.7;">(95% confidence interval: 1.01â€“1.73)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
          </div>
        
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-12">
        <div class="py-4">
          <!-- Report Section Partial -->

<h5 class="section-title">
  <div class="title-text">
    <i class="fas fa-file-alt mr-1"></i> Instructor Report
  </div>
  
</h5>

<!-- DEBUG: Show if report or has_saved_summaries are missing -->



<div class="card-body" id="report-section">
  
    
    <div id="report-content" class="markdown-content">
      <p>The discussions centered on universal healthcare systems, with students debating the economic, practical, and ethical dimensions of government-guaranteed healthcare coverage. Students explored tensions between increased access and potential quality concerns, the balance between taxes and overall cost savings, and how different implementation models might address various challenges. The conversations featured devil's advocate positions to test the strength of arguments, comparisons with international healthcare systems, and considerations of regional disparities in healthcare access and resource allocation.</p>
<h3>Themes</h3>
<ul>
<li><strong>Students across discussions identified trade-offs between economic considerations and healthcare access.</strong> They examined how tax structures might support universal coverage while weighing concerns about middle-class financial burden against potential system-wide cost savings through preventative care and administrative simplification.</li>
<li><strong>Quality of care and innovation emerged as central concerns in multiple conversations.</strong> Students debated whether universal systems might lead to longer wait times and reduced specialist availability, while also considering how different models could preserve incentives for medical innovation and professional excellence.</li>
<li><strong>Regional disparities in healthcare access formed a significant discussion point.</strong> Students explored how universal healthcare systems might address or potentially exacerbate differences in care quality and resource allocation between urban and rural areas, highlighting the challenge of ensuring equitable implementation.</li>
</ul>
<h3>Guide's Role</h3>
<ul>
<li><strong>Guide consistently challenged students to provide evidence for their claims about healthcare economics and outcomes.</strong> When students made assertions about wait times or quality concerns, Guide pushed them to cite specific examples or data points rather than relying on generalized statements.</li>
<li><strong>Guide prompted students to address apparent contradictions in their positions.</strong> This approach was particularly effective when students acknowledged benefits of one approach while advocating for an opposing system, helping them develop more nuanced and internally consistent arguments.</li>
<li><strong>Guide encouraged deeper analysis by asking students to consider specific implementation approaches rather than debating abstract concepts.</strong> These interventions redirected conversations from general principles toward practical considerations about how different healthcare models might work in diverse communities.</li>
</ul>
<h3>Common Ground</h3>
<ul>
<li><strong>Students generally agreed that some form of safety net is necessary for vulnerable populations.</strong> Even those arguing against full universal healthcare acknowledged the importance of ensuring basic care access for those with limited resources or chronic conditions.</li>
<li><strong>Students found common ground on the importance of maintaining innovation and quality in any healthcare system.</strong> Across conversations, participants recognized that preserving incentives for medical advancement and professional excellence remains critical regardless of the funding or delivery model.</li>
</ul>
<h3>Persistent Disagreements</h3>
<ul>
<li><strong>Students disagreed about whether government involvement would primarily enhance or diminish healthcare efficiency.</strong> Some maintained that centralized systems would reduce administrative waste and improve coordination, while others argued that government bureaucracy would create new inefficiencies and limit responsive care.</li>
<li><strong>The appropriate balance between public and private involvement remained contested.</strong> While some students advocated for hybrid models with both government coverage and private options, they disagreed about where to draw the line between basic universal coverage and supplemental private services.</li>
</ul>
<h3>Possible Misconceptions</h3>
<ul>
<li><strong>Some discussions suggested a binary view of healthcare systems as either entirely public or entirely private.</strong> This overlooks the reality that most countries, including those with universal coverage, operate with mixed systems combining government funding with varying degrees of private delivery and supplemental insurance.</li>
<li><strong>Several claims about wait times and physician quality in universal systems appeared based on generalizations rather than specific evidence.</strong> Research suggests significant variation across different universal healthcare implementations, with some systems achieving shorter wait times for certain procedures than the current U.S. system.</li>
</ul>
    </div>
    <!-- Hidden raw markdown for test compatibility -->
    <div style="display:none;" id="report-raw-markdown">The discussions centered on universal healthcare systems, with students debating the economic, practical, and ethical dimensions of government-guaranteed healthcare coverage. Students explored tensions between increased access and potential quality concerns, the balance between taxes and overall cost savings, and how different implementation models might address various challenges. The conversations featured devil's advocate positions to test the strength of arguments, comparisons with international healthcare systems, and considerations of regional disparities in healthcare access and resource allocation.

### Themes
- **Students across discussions identified trade-offs between economic considerations and healthcare access.** They examined how tax structures might support universal coverage while weighing concerns about middle-class financial burden against potential system-wide cost savings through preventative care and administrative simplification.
- **Quality of care and innovation emerged as central concerns in multiple conversations.** Students debated whether universal systems might lead to longer wait times and reduced specialist availability, while also considering how different models could preserve incentives for medical innovation and professional excellence.
- **Regional disparities in healthcare access formed a significant discussion point.** Students explored how universal healthcare systems might address or potentially exacerbate differences in care quality and resource allocation between urban and rural areas, highlighting the challenge of ensuring equitable implementation.

### Guide's Role
- **Guide consistently challenged students to provide evidence for their claims about healthcare economics and outcomes.** When students made assertions about wait times or quality concerns, Guide pushed them to cite specific examples or data points rather than relying on generalized statements.
- **Guide prompted students to address apparent contradictions in their positions.** This approach was particularly effective when students acknowledged benefits of one approach while advocating for an opposing system, helping them develop more nuanced and internally consistent arguments.
- **Guide encouraged deeper analysis by asking students to consider specific implementation approaches rather than debating abstract concepts.** These interventions redirected conversations from general principles toward practical considerations about how different healthcare models might work in diverse communities.

### Common Ground
- **Students generally agreed that some form of safety net is necessary for vulnerable populations.** Even those arguing against full universal healthcare acknowledged the importance of ensuring basic care access for those with limited resources or chronic conditions.
- **Students found common ground on the importance of maintaining innovation and quality in any healthcare system.** Across conversations, participants recognized that preserving incentives for medical advancement and professional excellence remains critical regardless of the funding or delivery model.

### Persistent Disagreements
- **Students disagreed about whether government involvement would primarily enhance or diminish healthcare efficiency.** Some maintained that centralized systems would reduce administrative waste and improve coordination, while others argued that government bureaucracy would create new inefficiencies and limit responsive care.
- **The appropriate balance between public and private involvement remained contested.** While some students advocated for hybrid models with both government coverage and private options, they disagreed about where to draw the line between basic universal coverage and supplemental private services.

### Possible Misconceptions
- **Some discussions suggested a binary view of healthcare systems as either entirely public or entirely private.** This overlooks the reality that most countries, including those with universal coverage, operate with mixed systems combining government funding with varying degrees of private delivery and supplemental insurance.
- **Several claims about wait times and physician quality in universal systems appeared based on generalizations rather than specific evidence.** Research suggests significant variation across different universal healthcare implementations, with some systems achieving shorter wait times for certain procedures than the current U.S. system.</div>
    <!-- RAW REPORT CONTENT FOR TESTING: The discussions cent -->
    <span style="display:none;" id="report-prefix">The discussions cent</span>
    <div class="text-muted mt-2 d-flex justify-content-end align-items-center">
      <span class="text-right" style="flex:1; text-align:right;">Generated on: 
        <script>
          document.write(new Date("2025-05-07T03:39:35.526752").toLocaleDateString('en-US', {
            month: 'short', 
            day: 'numeric', 
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          }));
        </script>
        <noscript>2025-05-07T03:39:35.526752</noscript>
      </span>
      
    </div>
    <div id="report-editor-container" style="display: none;">
      <div class="alert alert-info">
        <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
      </div>
      <textarea id="report-markdown-editor" class="form-control">The discussions centered on universal healthcare systems, with students debating the economic, practical, and ethical dimensions of government-guaranteed healthcare coverage. Students explored tensions between increased access and potential quality concerns, the balance between taxes and overall cost savings, and how different implementation models might address various challenges. The conversations featured devil&#39;s advocate positions to test the strength of arguments, comparisons with international healthcare systems, and considerations of regional disparities in healthcare access and resource allocation.

### Themes
- **Students across discussions identified trade-offs between economic considerations and healthcare access.** They examined how tax structures might support universal coverage while weighing concerns about middle-class financial burden against potential system-wide cost savings through preventative care and administrative simplification.
- **Quality of care and innovation emerged as central concerns in multiple conversations.** Students debated whether universal systems might lead to longer wait times and reduced specialist availability, while also considering how different models could preserve incentives for medical innovation and professional excellence.
- **Regional disparities in healthcare access formed a significant discussion point.** Students explored how universal healthcare systems might address or potentially exacerbate differences in care quality and resource allocation between urban and rural areas, highlighting the challenge of ensuring equitable implementation.

### Guide&#39;s Role
- **Guide consistently challenged students to provide evidence for their claims about healthcare economics and outcomes.** When students made assertions about wait times or quality concerns, Guide pushed them to cite specific examples or data points rather than relying on generalized statements.
- **Guide prompted students to address apparent contradictions in their positions.** This approach was particularly effective when students acknowledged benefits of one approach while advocating for an opposing system, helping them develop more nuanced and internally consistent arguments.
- **Guide encouraged deeper analysis by asking students to consider specific implementation approaches rather than debating abstract concepts.** These interventions redirected conversations from general principles toward practical considerations about how different healthcare models might work in diverse communities.

### Common Ground
- **Students generally agreed that some form of safety net is necessary for vulnerable populations.** Even those arguing against full universal healthcare acknowledged the importance of ensuring basic care access for those with limited resources or chronic conditions.
- **Students found common ground on the importance of maintaining innovation and quality in any healthcare system.** Across conversations, participants recognized that preserving incentives for medical advancement and professional excellence remains critical regardless of the funding or delivery model.

### Persistent Disagreements
- **Students disagreed about whether government involvement would primarily enhance or diminish healthcare efficiency.** Some maintained that centralized systems would reduce administrative waste and improve coordination, while others argued that government bureaucracy would create new inefficiencies and limit responsive care.
- **The appropriate balance between public and private involvement remained contested.** While some students advocated for hybrid models with both government coverage and private options, they disagreed about where to draw the line between basic universal coverage and supplemental private services.

### Possible Misconceptions
- **Some discussions suggested a binary view of healthcare systems as either entirely public or entirely private.** This overlooks the reality that most countries, including those with universal coverage, operate with mixed systems combining government funding with varying degrees of private delivery and supplemental insurance.
- **Several claims about wait times and physician quality in universal systems appeared based on generalizations rather than specific evidence.** Research suggests significant variation across different universal healthcare implementations, with some systems achieving shorter wait times for certain procedures than the current U.S. system.</textarea>
      <div class="mt-3">
        <button id="save-report-btn" class="btn btn-primary">
          <i class="fas fa-save mr-1"></i> Save Changes
        </button>
        <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
          <i class="fas fa-times mr-1"></i> Cancel
        </button>
        <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
      </div>
      <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
    </div>
  
</div> 
        </div>
      </div>
    </div>

    <div class="row mb-2">
      <div class="col-12">
        <h5 class="section-title">
          <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
          
        </h5>
      </div>
      <div class="pt-0 pb-2">
        <!-- DEBUG: Show if threads is missing or empty -->
        
        <div class="text-muted small mb-0 section-info-align">
          <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
        </div>
      </div>
    </div>

    <!-- Separate row for thread items floating on background -->
    <div class="row mb-5">
      <div class="col-12">
        <div class="thread-list" id="thread-list">
          
            <div class="masonry-grid">
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209">
                                <ul>
<li>
<p><strong>Students engaged in a detailed debate on universal healthcare, with Student 1 arguing that government-guaranteed coverage risks higher taxes, reduced innovation, and diminished service quality while Student 2 emphasized the moral and practical benefits of providing comprehensive health coverage, especially for vulnerable communities.</strong> The discussion saw both students presenting historical comparisons and real-life examples while acknowledging that no single solution is without trade-offs.</p>
</li>
<li>
<p><strong>Student perspectives evolved as the conversation shifted from generalized critiques of universal healthcare to nuanced discussions of regional disparities and government regulation.</strong> Student 1 raised concerns about diminished choices and potential system inefficiencies, while Student 2 highlighted how local and state dynamics could affect access and resource distribution.</p>
</li>
<li>
<p><strong>Guide played a significant role by challenging the students to address specific counterpoints such as wait times, the role of local governance, and the impact of economic incentives on innovation.</strong> Its interventions encouraged both participants to refine their arguments through targeted questions and by confronting the apparent contradictions in their positions.</p>
</li>
</ul>
<blockquote>
<p><strong>Student 1, you've raised an important point about local governance and priorities. How might a universal healthcare system address the disparities you've highlighted between urban and rural areas? Would federal oversight help ensure equitable distribution of healthcare resources, or would it potentially worsen these regional differences?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students engaged in a detailed debate on universal healthcare, with Student 1 arguing that government-guaranteed coverage risks higher taxes, reduced innovation, and diminished service quality while Student 2 emphasized the moral and practical benefits of providing comprehensive health coverage, especially for vulnerable communities.** The discussion saw both students presenting historical comparisons and real-life examples while acknowledging that no single solution is without trade-offs.

- **Student perspectives evolved as the conversation shifted from generalized critiques of universal healthcare to nuanced discussions of regional disparities and government regulation.** Student 1 raised concerns about diminished choices and potential system inefficiencies, while Student 2 highlighted how local and state dynamics could affect access and resource distribution.

- **Guide played a significant role by challenging the students to address specific counterpoints such as wait times, the role of local governance, and the impact of economic incentives on innovation.** Its interventions encouraged both participants to refine their arguments through targeted questions and by confronting the apparent contradictions in their positions.


  
&gt; **Student 1, you&#39;ve raised an important point about local governance and priorities. How might a universal healthcare system address the disparities you&#39;ve highlighted between urban and rural areas? Would federal oversight help ensure equitable distribution of healthcare resources, or would it potentially worsen these regional differences?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==23bacef2dd::student-z21hawwuy29t7abc1642dd::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209">
                                <ul>
<li><strong>Students debated the merits and drawbacks of universal healthcare, with one student arguing against a system they personally supported while the other questioned assumptions regarding doctor quality and resource allocation.</strong> The discussion started with concerns about longer wait times, limited budgets, and reduced quality of specialized care, with the devilâ€™s advocate role intended to surface hidden weaknesses in the argument.</li>
<li><strong>Students examined the trade-offs between ensuring universal access and maintaining high-quality specialized care amid economic constraints.</strong> Their conversation evolved from a focus on whether financial incentives impact the caliber of care to considering a hybrid model that could merge government coverage with private insurance for specialized services.</li>
<li><strong>Guide actively intervened by challenging students to justify their claims with evidence, particularly on the economic and equity implications of universal healthcare.</strong> It pushed both students to consider how different international models address these issues and questioned whether incremental tax increases truly balance improved access with economic growth.</li>
</ul>
<blockquote>
<p><strong>Student 1, Medicare for All IS a form of universal healthcare - it's just one implementation approach. As devil's advocate, you need to argue against guaranteed coverage entirely. Student 2, that's a provocative question about economic priorities. But how would you respond to those who say America's economic dynamism comes precisely from limiting government involvement and taxation?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the merits and drawbacks of universal healthcare, with one student arguing against a system they personally supported while the other questioned assumptions regarding doctor quality and resource allocation.** The discussion started with concerns about longer wait times, limited budgets, and reduced quality of specialized care, with the devilâ€™s advocate role intended to surface hidden weaknesses in the argument.
- **Students examined the trade-offs between ensuring universal access and maintaining high-quality specialized care amid economic constraints.** Their conversation evolved from a focus on whether financial incentives impact the caliber of care to considering a hybrid model that could merge government coverage with private insurance for specialized services.
- **Guide actively intervened by challenging students to justify their claims with evidence, particularly on the economic and equity implications of universal healthcare.** It pushed both students to consider how different international models address these issues and questioned whether incremental tax increases truly balance improved access with economic growth.


  
&gt; **Student 1, Medicare for All IS a form of universal healthcare - it&#39;s just one implementation approach. As devil&#39;s advocate, you need to argue against guaranteed coverage entirely. Student 2, that&#39;s a provocative question about economic priorities. But how would you respond to those who say America&#39;s economic dynamism comes precisely from limiting government involvement and taxation?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==93db5196ef::student-dwfilmvkdq==ed832820df::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209">
                                <ul>
<li><strong>Students debated the merits of universal healthcare, emphasizing how guaranteed access can reduce financial strain and promote equity.</strong> Student 1 highlighted benefits like early diagnosis and cost savings, while Student 2 stressed concerns over wait times and the challenges posed by fluctuating political support.  </li>
<li><strong>They examined potential trade-offs, with Student 1 advocating for improved funding and leadership to overcome system inefficiencies, and Student 2 questioning whether political instability and increased taxes might undermine the benefits.</strong> The discussion evolved as both students recognized that while universal healthcare offers significant advantages, its success hinges on systematic reform and stable governance.  </li>
<li><strong>Guide actively intervened by challenging the students to robustly defend their positions, particularly urging Student 2 to solidify the economic counterarguments and consider the real-world impacts on patient care.</strong> Its prompts pushed both students to reassess their assumptions about wait times, political will, and the practical feasibility of implementing universal healthcare in the U.S.</li>
</ul>
<blockquote>
<p><strong>Student 2, push harder on wait times - how might they affect critical care situations? Could some Americans actually receive worse care under a universal system?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the merits of universal healthcare, emphasizing how guaranteed access can reduce financial strain and promote equity.** Student 1 highlighted benefits like early diagnosis and cost savings, while Student 2 stressed concerns over wait times and the challenges posed by fluctuating political support.  
- **They examined potential trade-offs, with Student 1 advocating for improved funding and leadership to overcome system inefficiencies, and Student 2 questioning whether political instability and increased taxes might undermine the benefits.** The discussion evolved as both students recognized that while universal healthcare offers significant advantages, its success hinges on systematic reform and stable governance.  
- **Guide actively intervened by challenging the students to robustly defend their positions, particularly urging Student 2 to solidify the economic counterarguments and consider the real-world impacts on patient care.** Its prompts pushed both students to reassess their assumptions about wait times, political will, and the practical feasibility of implementing universal healthcare in the U.S.


&gt; **Student 2, push harder on wait times - how might they affect critical care situations? Could some Americans actually receive worse care under a universal system?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==a8cfc07edd::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209">
                                <ul>
<li>
<p><strong>Students debated the merits and drawbacks of universal healthcare, focusing on cost, efficiency, and access.</strong> Student 1, acting as devilâ€™s advocate, raised concerns about governmental inefficiencies and wait times, while Student 2 emphasized that universal access could better serve vulnerable populations.</p>
</li>
<li>
<p><strong>The discussion shifted toward balancing market forces with government intervention through a tiered healthcare model.</strong> Student 2 proposed a system offering basic universal coverage with premium options to sustain innovation, whereas Student 1 questioned whether a government-run model would actually maintain adequate funding and quality due to bureaucratic delays.</p>
</li>
<li>
<p><strong>Guide played a pivotal role by consistently challenging both students to delve deeper into potential trade-offs and alternatives.</strong> Its targeted questions pushed the students to reexamine assumptions about government regulation, market incentives, and the balance between equal access and medical innovation.</p>
</li>
</ul>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the merits and drawbacks of universal healthcare, focusing on cost, efficiency, and access.** Student 1, acting as devilâ€™s advocate, raised concerns about governmental inefficiencies and wait times, while Student 2 emphasized that universal access could better serve vulnerable populations.

- **The discussion shifted toward balancing market forces with government intervention through a tiered healthcare model.** Student 2 proposed a system offering basic universal coverage with premium options to sustain innovation, whereas Student 1 questioned whether a government-run model would actually maintain adequate funding and quality due to bureaucratic delays.

- **Guide played a pivotal role by consistently challenging both students to delve deeper into potential trade-offs and alternatives.** Its targeted questions pushed the students to reexamine assumptions about government regulation, market incentives, and the balance between equal access and medical innovation.</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==b03ab1d0df::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209">
                                <ul>
<li><strong>Students engaged in a multifaceted debate on reindustrialization, evaluating the trade-offs between boosting domestic manufacturing and the potential negative impacts on workers both in the US and abroad.</strong> They examined options ranging from enhanced unemployment compensation and safety nets to stronger regulatory oversight and union protections, with Student 1 favoring a focus on domestic production and Student 2 calling for tighter government regulation to curb exploitative practices.</li>
<li><strong>Guide played a crucial role by posing targeted questions that challenged the studentsâ€™ initial positions and pushed for a deeper analysis of policy complexities.</strong> Guideâ€™s interventions probed uncertainties about distinguishing exploitative outsourcing from necessary economic efficiency and urged students to clarify how proposed policies might address not only financial but also social and identity-related consequences of job loss.</li>
</ul>
<blockquote>
<p><strong>Student 2, how would your unemployment compensation approach address the deeper social and identity issues that come with manufacturing job loss? The deaths of despair arenâ€™t just about income, so consider how your proposals might support both economic stability and worker well-being in a broader social context?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" class="form-control summary-markdown-editor">- **Students engaged in a multifaceted debate on reindustrialization, evaluating the trade-offs between boosting domestic manufacturing and the potential negative impacts on workers both in the US and abroad.** They examined options ranging from enhanced unemployment compensation and safety nets to stronger regulatory oversight and union protections, with Student 1 favoring a focus on domestic production and Student 2 calling for tighter government regulation to curb exploitative practices.
- **Guide played a crucial role by posing targeted questions that challenged the studentsâ€™ initial positions and pushed for a deeper analysis of policy complexities.** Guideâ€™s interventions probed uncertainties about distinguishing exploitative outsourcing from necessary economic efficiency and urged students to clarify how proposed policies might address not only financial but also social and identity-related consequences of job loss.


  
&gt; **Student 2, how would your unemployment compensation approach address the deeper social and identity issues that come with manufacturing job loss? The deaths of despair arenâ€™t just about income, so consider how your proposals might support both economic stability and worker well-being in a broader social context?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==3692c9d0df::9530e1fbc9::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209">
                                <ul>
<li><strong>Students intensely debated the merits and challenges of universal healthcare.</strong> They discussed the differences between health insurance and healthcare, with Student 1 emphasizing the necessity of guaranteed coverage and Student 2 challenging how such guarantees translate to real care, especially in emergencies.</li>
<li><strong>Guide steered the discussion by pushing for clarification on coverage gaps and political obstacles.</strong> Its interventions forced students to confront the practical limitations of current systems and to specify what a true universal model should address in terms of cost, quality, and economic inequality.</li>
</ul>
<blockquote>
<p><strong>Student 2, you've pointed out discounts for the uninsured, but what about catastrophic costs like Student 1 mentioned - surgeries or hospitalizations? Do your proposed discounts address these larger expenses?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students intensely debated the merits and challenges of universal healthcare.** They discussed the differences between health insurance and healthcare, with Student 1 emphasizing the necessity of guaranteed coverage and Student 2 challenging how such guarantees translate to real care, especially in emergencies.
- **Guide steered the discussion by pushing for clarification on coverage gaps and political obstacles.** Its interventions forced students to confront the practical limitations of current systems and to specify what a true universal model should address in terms of cost, quality, and economic inequality.


&gt; **Student 2, you&#39;ve pointed out discounts for the uninsured, but what about catastrophic costs like Student 1 mentioned - surgeries or hospitalizations? Do your proposed discounts address these larger expenses?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==988dab6ade::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209">
                                <ul>
<li><strong>Students presented a lively debate on universal healthcare, with Student 1 arguing that healthcare is a basic human right guaranteed through careful planning, while Student 2 questioned the implementation by invoking alternative remedies and potential system abuse.</strong> Their discussion evolved from affirming healthcare as a right to voicing pragmatic concerns about resource scarcity, administrative control, and the practical consequences of system mismanagement.</li>
<li><strong>Guide played a critical role by challenging the students to sharpen their positions and focus on mainstream objections, such as economic costs and quality of care under resource scarcity.</strong> Its interventions nudged both students toward addressing specific concerns about funding, provider shortages, and the broader implications of universal healthcare policies.</li>
</ul>
<blockquote>
<p><strong>Student 2, you're supposed to be arguing against universal healthcare as the devil's advocate. Your suggestions actually support implementing it. What concerns might you raise about the costs of these investments or potential tax increases?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students presented a lively debate on universal healthcare, with Student 1 arguing that healthcare is a basic human right guaranteed through careful planning, while Student 2 questioned the implementation by invoking alternative remedies and potential system abuse.** Their discussion evolved from affirming healthcare as a right to voicing pragmatic concerns about resource scarcity, administrative control, and the practical consequences of system mismanagement.
- **Guide played a critical role by challenging the students to sharpen their positions and focus on mainstream objections, such as economic costs and quality of care under resource scarcity.** Its interventions nudged both students toward addressing specific concerns about funding, provider shortages, and the broader implications of universal healthcare policies.


  
&gt; **Student 2, you&#39;re supposed to be arguing against universal healthcare as the devil&#39;s advocate. Your suggestions actually support implementing it. What concerns might you raise about the costs of these investments or potential tax increases?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==be8e2cdede::student-dwfilmvkdq==ed70a0f2dd::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209">
                                <ul>
<li><strong>Students examined the trade-offs between reviving domestic manufacturing and investing in education to address deaths of despair.</strong> Student 1 questioned the long-term viability of reinstating industrial jobs in a tech-driven era, while Student 2 argued that a short-term boost in manufacturing could provide immediate, stable employment if implemented with safeguards against consumer price hikes.</li>
<li><strong>Guide actively guided the discussion by probing for specific policy mechanisms and urging students to weigh immediate results versus sustainable growth.</strong> It challenged the students to clarify how to prevent companies from passing extra costs to consumers and encouraged them to envision a balanced approach that integrates both manufacturing incentives and educational investments.</li>
</ul>
<blockquote>
<p><strong>Student 1, Student 2 raises an interesting point about the pace of educational impact. How do you balance the immediacy of domestic manufacturing benefits with the long-term gains from targeted skill development? Can a hybrid policy approach accommodate both economic stability and future growth?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" class="form-control summary-markdown-editor">- **Students examined the trade-offs between reviving domestic manufacturing and investing in education to address deaths of despair.** Student 1 questioned the long-term viability of reinstating industrial jobs in a tech-driven era, while Student 2 argued that a short-term boost in manufacturing could provide immediate, stable employment if implemented with safeguards against consumer price hikes.
- **Guide actively guided the discussion by probing for specific policy mechanisms and urging students to weigh immediate results versus sustainable growth.** It challenged the students to clarify how to prevent companies from passing extra costs to consumers and encouraged them to envision a balanced approach that integrates both manufacturing incentives and educational investments.


  
&gt; **Student 1, Student 2 raises an interesting point about the pace of educational impact. How do you balance the immediacy of domestic manufacturing benefits with the long-term gains from targeted skill development? Can a hybrid policy approach accommodate both economic stability and future growth?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==f340be7edd::student-dwfilmvkdq==fa671a3cdf::9530e1fbc9::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209">
                                <ul>
<li><strong>Students debated the merits of a universal healthcare system, focusing especially on funding mechanisms and eligibility.</strong> Student 1 generally supported universal access while questioning how to fund it fairly, whereas Student 2 proposed alternative funding ideas that left some contradictions in view.</li>
<li><strong>Guide played an active role in probing the students' positions and clarifying inconsistencies.</strong> It repeatedly challenged the students to refine their proposals, especially around the issues of progressive funding without traditional tax dollars, equal care versus income-based differences, and eligibility for non-citizens.</li>
</ul>
<blockquote>
<p><strong>Student 2, there seems to be a contradiction in your position. You first suggested insurance costs should depend on income, but now say care should be equal between citizens. Can you clarify your stance on whether a universal system should have different tiers of coverage or equal care for all regardless of income?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the merits of a universal healthcare system, focusing especially on funding mechanisms and eligibility.** Student 1 generally supported universal access while questioning how to fund it fairly, whereas Student 2 proposed alternative funding ideas that left some contradictions in view.
- **Guide played an active role in probing the students&#39; positions and clarifying inconsistencies.** It repeatedly challenged the students to refine their proposals, especially around the issues of progressive funding without traditional tax dollars, equal care versus income-based differences, and eligibility for non-citizens.


&gt; **Student 2, there seems to be a contradiction in your position. You first suggested insurance costs should depend on income, but now say care should be equal between citizens. Can you clarify your stance on whether a universal system should have different tiers of coverage or equal care for all regardless of income?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b62c9cfcef::student-z21hawwuy29t4a1dddeade::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209">
                                <ul>
<li>
<p><strong>Students debated universal healthcare by discussing its potential to alleviate financial stress versus concerns over insufficient funding and reduced care quality.</strong> Student 1 argued that universal healthcare could relieve financial burdens by eliminating costly insurance, while Student 2 pressed on funding issues and the impact on care quality, citing challenges like increased wait times.</p>
</li>
<li>
<p><strong>The conversation's flow was intermittently interrupted by administrative messages and scheduling concerns, yet the core debate persisted.</strong> Both students coordinated when to resume the discussion amid exam pressures, and their exchange evolved to acknowledge that while universal healthcare might reduce individual financial strain, it also risks lowering service quality if not properly funded.</p>
</li>
<li>
<p><strong>Guide maintained a supportive role by repeatedly prompting the students to delve deeper into both the benefits and drawbacks of universal healthcare.</strong> It encouraged the students to consider broader economic impacts, engage with counterarguments, and fully articulate responses to concerns on affordability and care quality before wrapping up the session.</p>
</li>
</ul>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated universal healthcare by discussing its potential to alleviate financial stress versus concerns over insufficient funding and reduced care quality.** Student 1 argued that universal healthcare could relieve financial burdens by eliminating costly insurance, while Student 2 pressed on funding issues and the impact on care quality, citing challenges like increased wait times.

- **The conversation&#39;s flow was intermittently interrupted by administrative messages and scheduling concerns, yet the core debate persisted.** Both students coordinated when to resume the discussion amid exam pressures, and their exchange evolved to acknowledge that while universal healthcare might reduce individual financial strain, it also risks lowering service quality if not properly funded.

- **Guide maintained a supportive role by repeatedly prompting the students to delve deeper into both the benefits and drawbacks of universal healthcare.** It encouraged the students to consider broader economic impacts, engage with counterarguments, and fully articulate responses to concerns on affordability and care quality before wrapping up the session.</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==a15461fcdf::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209">
                                <ul>
<li><strong>Students debated the financial trade-offs inherent in universal healthcare by discussing potential tax burdens versus overall cost savings.</strong> Student 1 cautioned that increased taxes would strain the middle class, while Student 2 highlighted that fair taxation and mixed-insurance models could balance costs.</li>
<li><strong>Concerns over the potential decline in care quality and innovation marked a key part of the conversation.</strong> Student 1 pointed to issues like longer wait times and reduced doctor incentives, whereas Student 2 stressed that improved preventative care and public options might help maintain high-quality service.</li>
<li><strong>Guide played a pivotal role by continuously questioning the studentsâ€™ assumptions and urging more detailed explanations of their positions.</strong> Its probing questions led the students to clarify how a universal system could both manage economic burdens and preserve the incentives that attract innovative healthcare professionals.</li>
</ul>
<blockquote>
<p><strong>Student 2, what specific reforms would you propose that maintain innovation incentives while expanding coverage? You both agree on the importance of innovation. How might a universal system be designed to preserve the economic incentives that attract top medical talent while addressing access issues?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the financial trade-offs inherent in universal healthcare by discussing potential tax burdens versus overall cost savings.** Student 1 cautioned that increased taxes would strain the middle class, while Student 2 highlighted that fair taxation and mixed-insurance models could balance costs.
- **Concerns over the potential decline in care quality and innovation marked a key part of the conversation.** Student 1 pointed to issues like longer wait times and reduced doctor incentives, whereas Student 2 stressed that improved preventative care and public options might help maintain high-quality service.
- **Guide played a pivotal role by continuously questioning the studentsâ€™ assumptions and urging more detailed explanations of their positions.** Its probing questions led the students to clarify how a universal system could both manage economic burdens and preserve the incentives that attract innovative healthcare professionals.


&gt; **Student 2, what specific reforms would you propose that maintain innovation incentives while expanding coverage? You both agree on the importance of innovation. How might a universal system be designed to preserve the economic incentives that attract top medical talent while addressing access issues?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-awnsb3vklmnvbq==a75381f4ef::student-dwfilmvkdq==349f5f32df::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Job Guarantee
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209">
                                <ul>
<li><strong>Students debated whether a government job guarantee or market-driven incentives, such as tax breaks and industry revitalization, is the better approach to reduce deaths of despair.</strong> Student 1 staunchly supported a full job guarantee combined with robust safety nets, while Student 2 leaned towards an approach that encourages domestic industry growth and market competition to indirectly create jobs.</li>
<li><strong>Economic feasibility and funding mechanisms became a central theme, with both students considering trade-offs like reallocating government funds and developing fallback measures for the most vulnerable.</strong> Their conversation evolved as they acknowledged the complexity of financing these initiatives and the necessity of complementing job creation with mental health services and addiction treatment.</li>
<li><strong>Guide played an active role by challenging students to clarify how exactly policy measures would work in practice and reconcile conflicting approaches.</strong> Its probing questions pushed the discussion deeper, asking them to specify the policies that would drive industries back to the US and explore the implications of mixed strategies.</li>
</ul>
<blockquote>
<p><strong>Student 2, you're assuming industries will return and create wealth, but what specific policies would make companies choose the US over cheaper alternatives? Companies moved production overseas for economic reasons, and without addressing these underlying factors, your approach may fall short. And Student 1, what specific trade-offs in government spending would justify these initiatives, given that a full job guarantee implies the government as the employer of last resort?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" class="form-control summary-markdown-editor">- **Students debated whether a government job guarantee or market-driven incentives, such as tax breaks and industry revitalization, is the better approach to reduce deaths of despair.** Student 1 staunchly supported a full job guarantee combined with robust safety nets, while Student 2 leaned towards an approach that encourages domestic industry growth and market competition to indirectly create jobs.
- **Economic feasibility and funding mechanisms became a central theme, with both students considering trade-offs like reallocating government funds and developing fallback measures for the most vulnerable.** Their conversation evolved as they acknowledged the complexity of financing these initiatives and the necessity of complementing job creation with mental health services and addiction treatment.
- **Guide played an active role by challenging students to clarify how exactly policy measures would work in practice and reconcile conflicting approaches.** Its probing questions pushed the discussion deeper, asking them to specify the policies that would drive industries back to the US and explore the implications of mixed strategies.

  
&gt; **Student 2, you&#39;re assuming industries will return and create wealth, but what specific policies would make companies choose the US over cheaper alternatives? Companies moved production overseas for economic reasons, and without addressing these underlying factors, your approach may fall short. And Student 1, what specific trade-offs in government spending would justify these initiatives, given that a full job guarantee implies the government as the employer of last resort?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==209c3410dd::8a77ea056a::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209">
                                <ul>
<li><strong>Students debated the merits of universal healthcare by weighing government intervention against market-driven reforms.</strong> Student 1 emphasized that government-run systems tend to struggle with inefficiencies like denied procedures and over-regulation, while Student 2 highlighted that universal coverage can improve overall health outcomes and reduce individual financial risk.  </li>
<li><strong>The conversation evolved to address trade-offs such as wait times, taxation, and competition.</strong> Both students alternated between highlighting deficiencies in the current U.S. system and referencing international models where universal healthcare appears effective despite higher taxes or longer wait times.  </li>
<li><strong>Guide actively extended the discussion by challenging students to clarify and defend their positions on efficiency and quality.</strong> Its interventions pushed the debate deeper by asking for specific reforms and exploring the balance between universal access and practical service limitations.  </li>
</ul>
<blockquote>
<p><strong>Could you elaborate on your perspective about wait times? How would you balance the trade-off between universal access and potentially longer waits for some services? Are there specific approaches you think could address this challenge?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students debated the merits of universal healthcare by weighing government intervention against market-driven reforms.** Student 1 emphasized that government-run systems tend to struggle with inefficiencies like denied procedures and over-regulation, while Student 2 highlighted that universal coverage can improve overall health outcomes and reduce individual financial risk.  
- **The conversation evolved to address trade-offs such as wait times, taxation, and competition.** Both students alternated between highlighting deficiencies in the current U.S. system and referencing international models where universal healthcare appears effective despite higher taxes or longer wait times.  
- **Guide actively extended the discussion by challenging students to clarify and defend their positions on efficiency and quality.** Its interventions pushed the debate deeper by asking for specific reforms and exploring the balance between universal access and practical service limitations.  


&gt; **Could you elaborate on your perspective about wait times? How would you balance the trade-off between universal access and potentially longer waits for some services? Are there specific approaches you think could address this challenge?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==c0f33c0ade::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209">
                                <ul>
<li><strong>Students weighed universal healthcare by discussing its potential to reduce deaths of despair while questioning funding and quality implications.</strong> Student 1 supported the concept based on international success, while Student 2 expressed uncertainty, highlighting concerns about wait times and effective resource allocation.</li>
<li><strong>The debate evolved to focus on practical strategies, particularly concerning healthcare worker retention and funding models.</strong> Student 1 suggested top-down salary cuts and incorporating student loan forgiveness, whereas Student 2 remained cautious, emphasizing the risk of discouraging specialized professionals.</li>
<li><strong>Guide provided incisive interventions that steered the conversation towards a more rigorous examination of trade-offs.</strong> It challenged the students to balance idealism and realism, prompting them to deliberate on whether cost-balancing measures might inadvertently undermine care quality and recruitment.</li>
</ul>
<blockquote>
<p><strong>Student 2, Riley's suggesting a top-down approach to salary adjustments. What do you think about this prioritization? Would it create other problems if specialists and executives faced the largest cuts? Consider that highly specialized doctors often have extensive education debt and training requirements. Might there be consequences for recruitment in critical specialties if compensation changes dramatically?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" class="form-control summary-markdown-editor">- **Students weighed universal healthcare by discussing its potential to reduce deaths of despair while questioning funding and quality implications.** Student 1 supported the concept based on international success, while Student 2 expressed uncertainty, highlighting concerns about wait times and effective resource allocation.
- **The debate evolved to focus on practical strategies, particularly concerning healthcare worker retention and funding models.** Student 1 suggested top-down salary cuts and incorporating student loan forgiveness, whereas Student 2 remained cautious, emphasizing the risk of discouraging specialized professionals.
- **Guide provided incisive interventions that steered the conversation towards a more rigorous examination of trade-offs.** It challenged the students to balance idealism and realism, prompting them to deliberate on whether cost-balancing measures might inadvertently undermine care quality and recruitment.

  
&gt; **Student 2, Riley&#39;s suggesting a top-down approach to salary adjustments. What do you think about this prioritization? Would it create other problems if specialists and executives faced the largest cuts? Consider that highly specialized doctors often have extensive education debt and training requirements. Might there be consequences for recruitment in critical specialties if compensation changes dramatically?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==612b4322df::student-dwfilmvkdq==8793533cdd::348631c56c::8467401209" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
            </div>
          
        </div>
      </div>
    </div>
    
    <div style="clear:both; height:20px;"></div>
    
    <!-- Add Qualtrics Survey Data Card - if data exists -->
    
    <div class="row mb-4">
      <div class="col-12">
        <div class="py-4 mb-4">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Post-Chat Survey Data</div>
          </h5>
          <div class="card-body pt-0">
            <div class="row">
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>26</h3>
                <p class="text-muted">Total Survey Responses</p>
              </div>
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>14</h3>
                <p class="text-muted">Threads With Surveys</p>
              </div>
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>100.0%</h3>
                <p class="text-muted">Response Rate</p>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center text-muted small mb-0" style="gap: 1rem;">
              <span>Last updated: 2025-05-05T21:46:30.977177</span>
              
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Separate row for survey histogram charts floating on background -->
    <div class="row mb-4">
      <div class="col-12">
        
          <!-- Overall Rating and Guide Feedback -->
          <div class="row">
            
            <div class="col-md-6 mb-4">
              <div class="card h-100 thread-card">
                <div class="card-body p-0">
                  
                  
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">How was your chat?</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">ðŸ”¥ Awesome</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">12 (46.2%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:46.15384615384615%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">ðŸ‘ Good</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">9 (34.6%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:34.61538461538461%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">ðŸ˜ It's OK</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">2 (7.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">ðŸ‘Ž Not a fan</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">3 (11.5%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:11.538461538461538%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">ðŸ’© Hated it</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.85 <span style="opacity:0.7;">(95% confidence interval: 1.44â€“2.25)</span></div>
    </div>
</div>
                </div>
              </div>
            </div>
            
            
            
            <div class="col-md-6 mb-4">
              <div class="card h-100 thread-card">
                <div class="card-body p-0">
                  
                  
                    
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">Guide contributed the right amount</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">22 (84.6%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:84.61538461538461%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">4 (15.4%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:15.384615384615385%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 0.85 <span style="opacity:0.7;">(95% confidence interval: 0.70â€“0.99)</span></div>
    </div>
</div>
                  
                </div>
              </div>
            </div>
            
          </div>
          
          <div style="height: 2rem;"></div>
          <div class="row">
            
            
              
            
              
            
              
            
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I felt comfortable sharing my honest opinions with my partner</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">11 (64.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:64.70588235294117%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">5 (29.4%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:29.411764705882355%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">1 (5.9%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:5.88235294117647%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.59 <span style="opacity:0.7;">(95% confidence interval: 1.27â€“1.91)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I was not offended by my partner's perspective</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">10 (71.4%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:71.42857142857143%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">4 (28.6%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:28.57142857142857%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.71 <span style="opacity:0.7;">(95% confidence interval: 1.44â€“1.98)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It was valuable to chat with a student who did not share my perspective</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">7 (53.8%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:53.84615384615385%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">5 (38.5%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:38.46153846153847%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">1 (7.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.46 <span style="opacity:0.7;">(95% confidence interval: 1.06â€“1.86)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
            
              
            
          </div>
          
          <!-- Opinion Changes Section -->
          
        
      </div>
    </div>
    
    <!-- End Qualtrics Survey Data Section -->
  </div>
  
<!-- Modal containers will be dynamically injected here by JS if needed -->
<div id="modal-container"></div> 
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
  

<!-- =====================
     Core Utilities
     ===================== -->
<script>
  // Debug logging utility
  function debug_log(message, level, details = null) {
    if (details) {
      console.log(`DEBUG[${level}]:`, message, details);
    } else {
      console.log(`DEBUG[${level}]:`, message);
    }
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- =====================
     Theme Toggle
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input'); // Fixed id to match the input in _header.html
    if (!themeToggle) return;
    // Determine initial theme from localStorage or template variable
    let initialTheme = localStorage.getItem('theme');
    if (!initialTheme) {
      initialTheme = 'dark-mode' === 'light-mode' ? 'light' : 'dark';
    }
    // Set initial toggle state and class
    themeToggle.checked = initialTheme === 'light';
    document.documentElement.className = initialTheme === 'light' ? 'light-mode' : 'dark-mode';
    // Add event listener for theme toggle
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.classList.remove('dark-mode');
        document.documentElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.classList.remove('light-mode');
        document.documentElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
  });
</script>

<!-- =====================
     Summary/Report Generation & Polling
     ===================== -->
<script>
  let pollingInterval = null;
  let cancelRequested = false;
  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    let hasSavedSummaries = "true" === "true";
    
    // Check directly if there are any thread summaries actually present on the page
    const allThreadSummaries = document.querySelectorAll('.thread-summary.markdown-content');
    const hasVisibleSummaries = Array.from(allThreadSummaries).some(el => 
      el.innerHTML.trim() !== '' && el.style.display !== 'none'
    );
    
    // If we have visible summaries on the page, allow generating the report regardless of server-side flag
    if (hasVisibleSummaries) {
      hasSavedSummaries = true;
      debug_log("Enabling report button because visible summaries were found on page", 1);
    }
    
    if (reportBtn && hasSavedSummaries) {
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    if (hasGeneratingThreads) {
      startPolling();
      if (generateBtn) generateBtn.style.display = 'none';
      if (cancelBtn) cancelBtn.style.display = 'inline-block';
    }
    // Generate summaries
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        generateBtn.style.display = 'none';
        if (cancelBtn) cancelBtn.style.display = 'inline-block';
        fetch('/assignment/8467401209/generate_summaries', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1);
            startPolling();
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1);
          }
        })
        .catch(error => debug_log("Network error:", error, 1));
      });
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/8467401209/cancel_generation', { method: 'POST' })
            .then(response => {
              if (response.ok) {
                stopPolling();
                document.querySelectorAll('.thread-status').forEach(status => {
                  if (status.textContent === 'Queued for generation...') status.style.display = 'none';
                });
                document.querySelectorAll('.spinner-border').forEach(spinner => spinner.style.display = 'none');
                generateBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'none';
              }
            });
        });
      }
    }
    // Report button
    if (reportBtn) {
      // Show/hide advanced thinking controls based on model selection
      const modelToggleGroup = document.getElementById('report-model-toggle-group');
      const advancedThinkingControls = document.getElementById('advanced-thinking-controls');
      function updateThinkingControlsVisibility() {
        const checked = modelToggleGroup.querySelector('input[type=radio]:checked');
        if (checked && checked.value === 'anthropic') {
          advancedThinkingControls.style.display = 'flex';
        } else {
          advancedThinkingControls.style.display = 'none';
        }
      }
      if (modelToggleGroup && advancedThinkingControls) {
        modelToggleGroup.addEventListener('change', updateThinkingControlsVisibility);
        updateThinkingControlsVisibility();
      }
      reportBtn.addEventListener('click', function() {
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        reportBtn.disabled = true;
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        // Collect all visible summaries from the UI
        const summaries = {};
        document.querySelectorAll('.thread-card').forEach(card => {
          const threadId = card.id.replace('thread-', '');
          const summaryEl = card.querySelector('.thread-summary');
          if (summaryEl && summaryEl.innerHTML.trim() !== '' && summaryEl.style.display !== 'none') {
            // Try to get the raw markdown if available
            let summaryContent = '';
            const editorEl = card.querySelector('.summary-markdown-editor');
            if (editorEl && editorEl.value.trim() !== '') {
              summaryContent = editorEl.value.trim();
            } else {
              // Otherwise use the HTML content
              summaryContent = summaryEl.innerHTML;
            }
            summaries[threadId] = {
              thread_id: threadId,
              assignment_id: '8467401209',
              summary: summaryContent,
              content: summaryContent,
              status: 'completed'
            };
          }
        });
        debug_log(`Collected ${Object.keys(summaries).length} visible summaries from UI`, 1);
        // Get selected model provider
        let modelProvider = 'openai';
        const checked = document.querySelector('#report-model-toggle-group input[type=radio]:checked');
        if (checked) modelProvider = checked.value;
        // Get advanced thinking mode and budget if Anthropic
        let enableThinking = false;
        let thinkingBudgetTokens = 4096;
        if (modelProvider === 'anthropic') {
          const enableThinkingCheckbox = document.getElementById('enable-thinking-checkbox');
          const thinkingBudgetInput = document.getElementById('thinking-budget-input');
          if (enableThinkingCheckbox && enableThinkingCheckbox.checked) {
            enableThinking = true;
          }
          if (thinkingBudgetInput && thinkingBudgetInput.value) {
            thinkingBudgetTokens = parseInt(thinkingBudgetInput.value) || 4096;
          }
        }
        fetch('/assignment/8467401209/generate_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            summaries: summaries,
            model_provider: modelProvider,
            enable_thinking: enableThinking,
            thinking_budget_tokens: thinkingBudgetTokens
          })
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1);
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1);
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    // Refresh data
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        refreshDataBtn.disabled = true;
        fetch('/assignment/8467401209/refresh_data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    // Regenerate title
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        fetch('/assignment/8467401209/regenerate_title', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) titleEl.textContent = data.title;
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
    
    // Final check to ensure report button is enabled if summaries exist
    setTimeout(function() {
      const reportBtn = document.getElementById('report-btn');
      if (reportBtn && reportBtn.disabled) {
        const visibleSummaries = document.querySelectorAll('.thread-summary.markdown-content');
        const hasContent = Array.from(visibleSummaries).some(el => 
          el.innerHTML.trim() !== '' && el.style.display !== 'none'
        );
        
        if (hasContent) {
          reportBtn.disabled = false;
          debug_log("Enabling report button in final check - summaries exist", 1);
        }
      }
    }, 500); // Short delay to ensure all content is processed
  });
  function startPolling() {
    if (pollingInterval) clearInterval(pollingInterval);
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    checkSummaryStatus();
  }
  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }
  function checkSummaryStatus() {
    fetch('/assignment/8467401209/summary_status')
      .then(response => response.json())
      .then(data => {
        let activeGeneration = false;
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'inline-block';
          } else if (threadInfo.status === 'completed') {
            if (statusEl) statusEl.style.display = 'none';
            if (spinnerEl) spinnerEl.style.display = 'none';
            if (summaryEl && threadInfo.render_html) {
              summaryEl.innerHTML = threadInfo.render_html;
              summaryEl.style.display = 'block';
              // Update the markdown textarea value for this thread
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                // If threadInfo has markdown, use it; otherwise, fallback to extracting from HTML
                if (threadInfo.markdown) {
                  textarea.value = threadInfo.markdown;
                } else if (threadInfo.render_html) {
                  // Optionally, convert HTML back to markdown if needed (or leave blank)
                  textarea.value = '';
                }
                // If CodeMirror is open for this thread, update its value too
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(textarea.value);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              // If a summary was successfully displayed, enable the report button
              const reportBtn = document.getElementById('report-btn');
              if (reportBtn) {
                reportBtn.disabled = false;
                debug_log("Enabling report button because a summary was loaded", 1);
              }
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          }
        });
        if (!activeGeneration) {
          stopPolling();
          const generateBtn = document.getElementById('generate-btn');
          const cancelBtn = document.getElementById('cancel-btn');
          if (generateBtn) generateBtn.style.display = 'inline-block';
          if (cancelBtn) cancelBtn.style.display = 'none';
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => debug_log('Error checking summary status:', error, 1));
  }
  function checkReportStatus() {
    fetch('/assignment/8467401209/report_status')
      .then(response => response.json())
      .then(data => {
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        debug_log("Report status update:", data, 1);
        
        if (data.status === 'completed') {
          // Report generation completed
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Only update the UI if we have content
          if (data.content && reportSection) {
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            const styleTag = document.createElement('style');
            styleTag.textContent = `#report-content ul ul {margin-top:0.5em;margin-bottom:0.5em;padding-left:2em;}#report-content li > ul {margin-left:1em;}`;
            reportContent.appendChild(styleTag);
            
            // Check if render_html is available first, otherwise use content
            if (data.render_html) {
              reportContent.innerHTML += data.render_html;
            } else {
              reportContent.innerHTML += data.content;
            }
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2 d-flex justify-content-end align-items-center';
            
            // Create formatted date display
            const formattedDate = new Date(data.generated_at).toLocaleDateString('en-US', {
              month: 'short', 
              day: 'numeric', 
              year: 'numeric',
              hour: 'numeric',
              minute: '2-digit',
              hour12: true
            });
            
            generatedText.innerHTML = `
              <span class="text-right" style="flex:1; text-align:right;">Generated on: ${formattedDate}</span>
              ${!exportMode ? `
                <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-2" id="edit-report-btn" title="Edit report" style="vertical-align: baseline;">
                  <i class="fas fa-pencil-alt"></i>
                </button>
              ` : ''}
            `;
            
            // Clear existing content and append new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert UTC timestamps to local
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) { console.error('Error converting time:', e); }
            });
            
            debug_log("Updated report UI with new content", 1);
          } else {
            debug_log("Report completed but no content received", 2);
          }
        } else if (data.status === 'generating' || data.status === 'running') {
          // Report is still being generated
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          
          // Show elapsed time if available
          if (data.elapsed_seconds) {
            const elapsed = Math.round(data.elapsed_seconds);
            if (noReportMsg) {
              noReportMsg.textContent = `Generating instructor report... (${elapsed}s)`;
            }
          }
          
          // Continue polling
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        } else {
          // Unknown or not_started status
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (data.report_exists && reportSection) {
            // If report exists but no status, try refreshing the page after a timeout
            debug_log("Report exists but status not provided - will try to reload content", 2);
            setTimeout(checkReportStatus, 2000);
          }
        }
      })
      .catch(error => {
        debug_log("Error checking report status:", error, 2);
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- =====================
     CodeMirror for Editing
     ===================== -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Report editing
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        if (reportEditor) reportEditor.refresh();
      });
    }
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        const markdown = reportEditor.getValue();
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        editorSpinner.style.display = 'inline-block';
        fetch('/assignment/8467401209/edit_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ markdown: markdown })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          if (data.success) {
            reportContent.innerHTML = data.content;
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusMessage.style.display = 'none'; }, 3000);
      }
    }
  });
</script>

<!-- =====================
     Summary Editing (CodeMirror)
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    const summaryEditors = {};
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          let markdownContent = textarea.value;
          if (!markdownContent) {
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          summaryEditors[sessionId].setValue(markdownContent);
          summaryEditors[sessionId].refresh();
        } else {
          summaryEditors[sessionId].refresh();
        }
      });
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          const markdown = summaryEditors[sessionId].getValue();
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          fetch('/assignment/8467401209/edit_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId, markdown: markdown })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.render_html || data.content;
              summaryElement.style.display = 'block';
              // Update the markdown textarea value
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                textarea.value = markdown;
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(markdown);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      btn.addEventListener('click', function() {
        // Removed confirmation dialog for immediate regeneration
        const statusElement = document.getElementById(`status-${sessionId}`);
        const spinnerElement = document.getElementById(`spinner-${sessionId}`);
        if (statusElement && spinnerElement) {
          statusElement.textContent = 'Regenerating summary...';
          statusElement.className = 'status-message thread-status text-info';
          statusElement.style.display = 'block';
          spinnerElement.style.display = 'inline-block';
          summaryElement.style.opacity = '0.5';
          fetch('/assignment/8467401209/regenerate_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId })
          })
          .then(response => response.json())
          .then(data => {
            spinnerElement.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.content;
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message;
              statusElement.className = 'status-message thread-status success';
              attachButtonListeners(sessionId);
              setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
            } else {
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message || 'Error regenerating summary';
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            }
          })
          .catch(error => {
            spinnerElement.style.display = 'none';
            summaryElement.style.opacity = '1';
            statusElement.textContent = 'Error regenerating summary: ' + error;
            statusElement.className = 'status-message thread-status error';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
          });
        }
      });
    });
    function attachButtonListeners(sessionId) {
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          // Removed confirmation dialog for immediate regeneration
          const summaryElement = document.getElementById(`summary-${sessionId}`);
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            summaryElement.style.opacity = '0.5';
            fetch('/assignment/8467401209/regenerate_summary', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ session_id: sessionId })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              if (data.success) {
                summaryElement.innerHTML = data.content;
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                attachButtonListeners(sessionId);
                setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            });
          }
        });
      }
    }
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusEl.style.display = 'none'; }, 3000);
      }
    }
  });
</script>

<!-- =====================
     Export/Share Functionality
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Export button
    const exportBtn = document.querySelector('a[href*="/export"]');
    if (exportBtn) {
      exportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        const exportUrl = new URL(this.href, window.location.origin);
        
        // Add selected histogram fields to export URL
        const selectedHistograms = getSelectedHistograms();
        if (selectedHistograms.length > 0) {
          exportUrl.searchParams.set('histograms', selectedHistograms.join(','));
        }
        
        exportUrl.searchParams.set('theme', currentTheme);
        window.location.href = exportUrl.toString();
      });
    }
    // Set theme class on HTML element for export mode
    if ('True' === 'True' && 'dark-mode') {
      document.documentElement.className = 'dark-mode';
    }
    // Share export button
    const shareExportBtn = document.getElementById('share-export-btn');
    if (shareExportBtn) {
      shareExportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        shareExportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
        shareExportBtn.disabled = true;
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        
        // Add selected histogram fields to share request
        const selectedHistograms = getSelectedHistograms();
        
        fetch('/assignment/8467401209/share_export', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            theme: currentTheme,
            selected_histograms: selectedHistograms
          })
        })
        .then(response => response.json())
        .then(data => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          if (data.success) {
            const modalHtml = `
              <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content" style="background-color: var(--card-bg); color: var(--text-color);">
                    <div class="modal-header" style="border-color: var(--border-color);">
                      <h5 class="modal-title" id="shareModalLabel">Share Export</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: var(--text-color);">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Your export has been saved. Share this link:</p>
                      <div class="input-group mb-3">
                        <input type="text" id="share-link" class="form-control" value="${data.share_url}" readonly style="background-color: var(--input-bg); color: var(--text-color); border-color: var(--border-color);">
                        <div class="input-group-append">
                          <button class="btn btn-primary" type="button" id="copy-link-btn">
                            <i class="fas fa-copy"></i> Copy
                          </button>
                        </div>
                      </div>
                      <div id="copy-feedback" class="text-success" style="display: none;">Link copied to clipboard!</div>
                    </div>
                    <div class="modal-footer" style="border-color: var(--border-color);">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <a href="${data.share_url}" target="_blank" class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> Open
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            `;
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHtml;
            document.body.appendChild(modalContainer);
            $('#shareModal').modal('show');
            document.getElementById('copy-link-btn').addEventListener('click', function() {
              const shareLink = document.getElementById('share-link');
              shareLink.select();
              document.execCommand('copy');
              const copyFeedback = document.getElementById('copy-feedback');
              copyFeedback.style.display = 'block';
              setTimeout(() => { copyFeedback.style.display = 'none'; }, 3000);
            });
            $('#shareModal').on('hidden.bs.modal', function() {
              modalContainer.remove();
            });
          } else {
            alert('Error: ' + (data.message || 'Could not generate shared export'));
          }
        })
        .catch(error => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          alert('Error: Could not generate shared export');
          console.error('Error:', error);
        });
      });
    }
    
    // Helper function to get selected histograms
    function getSelectedHistograms() {
      const checkboxes = document.querySelectorAll('.export-histogram-checkbox:checked');
      return Array.from(checkboxes).map(cb => cb.getAttribute('data-field')).filter(Boolean);
    }
  });
</script>

<!-- =====================
     Histogram Selection for Export
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle the select/deselect all buttons
    const selectAllBtn = document.getElementById('select-all-histograms');
    const deselectAllBtn = document.getElementById('deselect-all-histograms');
    
    if (selectAllBtn) {
      selectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = true;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.color = '#8a8aff';
            setTimeout(() => {
              label.style.color = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = selectAllBtn.innerHTML;
        selectAllBtn.innerHTML = '<i class="fas fa-check mr-1"></i> All Selected';
        setTimeout(() => {
          selectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    if (deselectAllBtn) {
      deselectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = false;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.opacity = '0.7';
            setTimeout(() => {
              label.style.opacity = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = deselectAllBtn.innerHTML;
        deselectAllBtn.innerHTML = '<i class="fas fa-times mr-1"></i> All Deselected';
        setTimeout(() => {
          deselectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    // Initialize checkboxes from localStorage if available
    const savedSelections = localStorage.getItem('selected_histograms');
    if (savedSelections) {
      try {
        const selections = JSON.parse(savedSelections);
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          const field = checkbox.getAttribute('data-field');
          if (field && selections.includes(field)) {
            checkbox.checked = true;
          }
        });
      } catch (e) {
        console.error('Error loading saved histogram selections:', e);
      }
    } else {
      // If no saved selections, select all by default
      document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
        checkbox.checked = true;
      });
      saveHistogramSelections();
    }
    
    // Save selections to localStorage when changed
    document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', saveHistogramSelections);
    });
    
    function saveHistogramSelections() {
      const selectedFields = Array.from(document.querySelectorAll('.export-histogram-checkbox:checked'))
        .map(cb => cb.getAttribute('data-field'))
        .filter(Boolean);
      
      localStorage.setItem('selected_histograms', JSON.stringify(selectedFields));
    }
  });
</script>

<!-- =====================
     Social Sharing Buttons
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('twitter-share')) {
      const pageUrl = encodeURIComponent(window.location.href);
      const shareMessage = encodeURIComponent("Check out the assignments my students just finished on Sway! The AI Guide killed it! ðŸ¤¯");
      
      // X (formerly Twitter) sharing
      const xBtn = document.getElementById('twitter-share');
      xBtn.href = `https://x.com/intent/tweet?text=${shareMessage}&url=${pageUrl}`;
      xBtn.target = '_blank';
      xBtn.rel = 'noopener noreferrer';
      
      // Facebook sharing
      const facebookBtn = document.getElementById('facebook-share');
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}&quote=${shareMessage}`;
      facebookBtn.target = '_blank';
      facebookBtn.rel = 'noopener noreferrer';
      
      // LinkedIn sharing
      const linkedinBtn = document.getElementById('linkedin-share');
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
      linkedinBtn.target = '_blank';
      linkedinBtn.rel = 'noopener noreferrer';
      
      // Instagram sharing (requires copy to clipboard)
      const instagramBtn = document.getElementById('instagram-share');
      instagramBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const textarea = document.createElement('textarea');
        textarea.value = `${shareMessage}\n\n${window.location.href}`;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Link and message copied to clipboard. Paste this into Instagram to share!');
      });
    }
  });
</script>

<!-- =====================
     CSS for Status Messages and CodeMirror
     ===================== -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>
  <script src="/static/js/histogram-title-fixer.js"></script>
  
  <!-- Script for polished Show More/Fewer functionality in all modes -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Instructor Report Show More
      const setupReportShowMore = function() {
        const reportContent = document.getElementById('report-content');
        if (reportContent) {
          const headings = reportContent.querySelectorAll('h3');
          if (headings.length > 2) {
            const secondHeading = headings[1];
            const hiddenContentWrapper = document.createElement('div');
            hiddenContentWrapper.id = 'hidden-report-content';
            hiddenContentWrapper.className = 'collapsible-section collapsed';
            let currentNode = secondHeading.nextElementSibling;
            let nodesToMove = [];
            while (currentNode) {
              if (currentNode.tagName === 'H3' && currentNode !== secondHeading) {
                nodesToMove.push(currentNode);
              } else if (nodesToMove.length > 0) {
                nodesToMove.push(currentNode);
              }
              currentNode = currentNode.nextElementSibling;
            }
            nodesToMove.forEach(node => { hiddenContentWrapper.appendChild(node); });
            reportContent.appendChild(hiddenContentWrapper);
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'btn btn-thread-toggle show-toggle-btn';
            showMoreBtn.innerHTML = 'Show More <i class="fas fa-chevron-down"></i>';
            reportContent.insertBefore(showMoreBtn, hiddenContentWrapper);
            showMoreBtn.addEventListener('click', function() {
              const expanded = hiddenContentWrapper.classList.contains('collapsed');
              if (expanded) {
                hiddenContentWrapper.classList.remove('collapsed');
                showMoreBtn.classList.add('expanded');
                showMoreBtn.innerHTML = 'Show Less <i class="fas fa-chevron-up"></i>';
              } else {
                hiddenContentWrapper.classList.add('collapsed');
                showMoreBtn.classList.remove('expanded');
                showMoreBtn.innerHTML = 'Show More <i class="fas fa-chevron-down"></i>';
              }
            });
          }
        }
      };
      // Threads Masonry Show More (move nodes in/out of DOM for perfect layout)
      const setupThreadsShowMore = function() {
        const masonryGrid = document.querySelector('.masonry-grid');
        if (masonryGrid && masonryGrid.children.length > 2) {
          const masonryItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
          const extraItems = masonryItems.slice(2); // items to hide/show
          let removedItems = [];
          const showMoreThreadsBtn = document.createElement('button');
          showMoreThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          const updateShowMoreText = () => {
            const count = removedItems.length;
            showMoreThreadsBtn.innerHTML = `Show ${count} More Threads <i class="fas fa-chevron-down"></i>`;
          };
          removedItems = [...extraItems];
          updateShowMoreText();
          const showFewerThreadsBtn = document.createElement('button');
          showFewerThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          showFewerThreadsBtn.innerHTML = 'Show Fewer Threads <i class="fas fa-chevron-up"></i>';
          showFewerThreadsBtn.style.display = 'none';
          const threadListSection = document.querySelector('.thread-list');
          if (threadListSection) {
            const spacerDiv = document.createElement('div');
            spacerDiv.style.height = '20px';
            spacerDiv.style.clear = 'both';
            spacerDiv.style.display = 'none';
            threadListSection.appendChild(spacerDiv);
            threadListSection.appendChild(showFewerThreadsBtn);
          }
          masonryGrid.parentNode.insertBefore(showMoreThreadsBtn, masonryGrid.nextSibling);
          // Initially remove extra items from the grid
          extraItems.forEach(item => {
            masonryGrid.removeChild(item);
          });
          // Force reflow after initial removal
          masonryGrid.offsetHeight;
          showMoreThreadsBtn.addEventListener('click', function() {
            // Add extra items back to the grid
            removedItems.forEach(item => {
              masonryGrid.appendChild(item);
            });
            removedItems = [];
            updateShowMoreText();
            // Force reflow after adding
            masonryGrid.offsetHeight;
            showMoreThreadsBtn.style.display = 'none';
            showFewerThreadsBtn.style.display = 'block';
            if (threadListSection && threadListSection.lastChild.previousSibling) threadListSection.lastChild.previousSibling.style.display = 'block';
          });
          showFewerThreadsBtn.addEventListener('click', function() {
            // Remove extra items from the grid again
            const allItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
            const toRemove = allItems.slice(2);
            toRemove.forEach(item => {
              removedItems.push(item);
              masonryGrid.removeChild(item);
            });
            updateShowMoreText();
            // Force reflow after removal
            masonryGrid.offsetHeight;
            showMoreThreadsBtn.style.display = 'block';
            showFewerThreadsBtn.style.display = 'none';
            if (threadListSection && threadListSection.lastChild.previousSibling) threadListSection.lastChild.previousSibling.style.display = 'none';
            masonryGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
          });
        }
      };
      setupReportShowMore();
      setupThreadsShowMore();
    });
  </script>
  
  <!-- Script to disable hover animations -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create a style element
      var style = document.createElement('style');
      
      // Add CSS rules to disable hover animations
      style.innerHTML = `
        .card:hover, 
        .thread-item:hover, 
        .histogram-container:hover, 
        .histogram-bar:hover, 
        .histogram-card:hover {
          transform: none !important;
        }
      `;
      
      // Append the style element to the head
      document.head.appendChild(style);
    });
  </script>
</body>
</html>