<!doctype html>
<html lang="en" class="dark-mode">
<head>
  <script>
    // Set the correct Bootswatch theme based on theme_mode immediately
    window.themeMode = 'dark-mode';
    if (window.themeMode === 'light-mode') {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/flatly/bootstrap.min.css" id="theme-css">');
    } else {
      document.write('<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">');
    }
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Combating Despair: Universal Healthcare, Job Guarantees, and Reindustrialization Strategies</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
<style>
    /* Global font size increase by 20% */
    html {
      font-size: 120%;
    }

    :root {
      /* Darkened dark mode theme */
      --bg-color: #050505;          /* Near-black background */
      --card-bg: #0e0e1a;           /* Deeper navy card */
      --card-header-bg: #141422;     /* Darker header */
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #1f1f2d;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #141422;
      --message-right-bg: #0e0e1a;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #000000;
      --muted-text-color: #000000;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple Sway theme colors */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    html {
      margin: 0;
      padding: 0;
      border: none;
      outline: none;
    }
    
    body { 
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
      border: none; /* Remove any borders */
      outline: none; /* Remove any outlines */
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
      border: none;
      outline: none;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 0;
        margin-right: 0;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 0;
        margin-right: 0;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: background-color 0.3s ease;
    }
    .card:hover {
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    /* No hover effect for section title cards */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.68rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      padding-left: 15px;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.7em;
      padding: 6px 8px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 15px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        flex-wrap: nowrap;
      }
      .thread-list-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: calc(50% - 8px);
      }
    }
    .thread-card {
      margin-bottom: 0 !important;
    }
    .thread-item {
      display: flex;
      flex-direction: column;
      width: 100%;
      opacity: 1; /* Ensure visibility */
      padding: 15px;
      background-color: var(--card-bg);
      border-radius: 12px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border: 2px solid transparent; /* Remove orange border */
    }
    .thread-item.visible {
      opacity: 1;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .thread-header .thread-actions {
      display: flex;
      gap: 6px;
      white-space: nowrap;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
      /* Hide theme toggle and edit prompts in mobile */
      .theme-toggle {
        display: none !important;
      }
      a.back-btn[href*="edit_prompts"] {
        display: none !important;
      }
      #share-export-btn {
        margin-right: 0 !important;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to match the Info card */
    #topics-container {
      max-height: 420px;
      min-height: 420px;
      overflow-y: auto;
    }
    /* Smaller height for export mode */
    html.export-mode #topics-container {
      max-height: 345px;
      min-height: 345px;
    }

    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: #090118 !important;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    
    .histogram-bar {
      background: linear-gradient(180deg, #a9a9ff 0%, #8a8aff 100%);
      border-radius: 4px 4px 6px 6px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      box-shadow: 0 2px 6px rgba(138,138,255,0.2);
    }
    .histogram-bar:hover {
      box-shadow: 0 4px 8px rgba(138,138,255,0.4);
    }
    .histogram-axis-line {
      background: rgba(169,173,193,0.4);
      width: 2px;
    }
    .histogram-grid-line {
      background: rgba(169,173,193,0.13);
      height: 1px;
    }
    .histogram-container .axis-label {
      color: #a9adc1;
      font-size: 0.95rem;
      opacity: 0.85;
    }
    .histogram-container .x-label {
      color: #a9adc1;
      font-size: 1.1rem;
      font-weight: 500;
      margin-top: 0.35rem;
    }
    .histogram-container .card-body {
      padding: 1.25rem;
    }
    
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }

    /* Add social sharing buttons styling */
    .social-share-container {
      background-color: var(--card-header-bg);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .social-share-title {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary-color);
    }
    .social-share-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: opacity 0.2s;
      font-size: 0.9rem;
    }
    .social-btn:hover {
      opacity: 0.85;
      text-decoration: none;
      color: white;
    }
    .social-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    .btn-twitter {
      background-color: #1DA1F2;
    }
    .btn-facebook {
      background-color: #4267B2;
    }
    .btn-linkedin {
      background-color: #0077B5;
    }
    .btn-instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }
    @media (max-width: 576px) {
      .social-btn {
        padding: 4px 9px;
        font-size: 0.8rem;
      }
      .social-btn i {
        margin-right: 4px;
      }
    }

    .full-width-page {
      width: 100%;
      max-width: 1420px;
      margin: 0 auto;
      padding-left: 24px;
      padding-right: 24px;
    }
    @media (min-width: 576px) {
      .full-width-page {
        padding-left: 50px;
        padding-right: 50px;
      }
    }
    @media (min-width: 992px) {
      .full-width-page {
        padding-left: 64px;
        padding-right: 64px;
      }
    }

    /* Histogram card styling - more aggressive fixes */
    .histogram-card {
      background-color: #070113 !important;
      border: none; 
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin-bottom: 0;
      overflow: hidden;
    }

    .histogram-card:hover {
      box-shadow: 0 7px 15px rgba(0,0,0,0.25);
    }

    .histogram-card .card-body {
      padding: 8px 0 !important;
    }

    /* Target histogram SVG elements directly */
    .histogram-card svg {
      max-width: 100% !important;
      margin-left: -20px !important; /* Pull SVG to the left */
      width: calc(100% + 20px) !important; /* Compensate for negative margin */
    }

    /* More aggressive targeting for histogram titles */
    .histogram-card h3,
    .histogram-card .x-label,
    .histogram-card text.title,
    .histogram-card [class*="title"],
    .histogram-card text[font-size="14px"],
    .histogram-card text[font-weight="bold"] {
      text-transform: capitalize !important;
      font-size: 1.15rem !important;
      font-weight: 600 !important;
      color: var(--primary-color) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 95% !important;
      display: block !important;
    }

    /* Add text truncation to histogram title element specifically */
    .histogram-card .histogram-content svg text[y="30"],
    .histogram-card .histogram-content svg text.title {
      text-overflow: ellipsis !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      max-width: 250px !important;
    }

    /* Target mean text specifically */
    .histogram-card .mean-text,
    .histogram-card text[y="300"],
    .histogram-card text:last-of-type,
    .histogram-card text[font-size="12px"] {
      font-size: 0.9rem !important;
    }

    /* Add italicized m= to mean values with several selectors to catch them */
    .histogram-card .mean-text::before,
    .histogram-card text[y="300"]::before,
    .histogram-card text:last-of-type::before {
      content: "m = ";
      font-style: italic;
    }

    @media (max-width: 767.98px) {
      .histogram-card .card-body {
        padding: 8px 0 !important;
      }
    }

    /* Card with no hover effects */
    .no-hover {
      transition: background-color 0.3s ease !important;
    }

    .no-hover:hover {
      transform: none !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
    }

    .thread-heading {
      color: var(--primary-color) !important;
      font-weight: 600;
    }

    /* Truncate long histogram HTML titles with ellipsis */
    .histogram-title,
    .histogram-card [style*="font-size:1.25rem"] {
      font-size: 1rem !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      max-width: 95%;
    }

    /* Hide histogram cards that only contain "No data" text */
    .histogram-card .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .card-body .histogram-content:only-child:has(> div.text-muted:only-child:contains("No data")),
    .histogram-content:has(> div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Also hide the parent cards when they only contain "No data" content */
    .histogram-card:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")),
    .card-body:has(.histogram-content:only-child > div.text-muted:only-child:contains("No data")) {
      display: none !important;
    }
    
    /* Hide the entire column if it only contains a "No data" card */
    .col-md-6:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))),
    .col-lg-4:has(.card.histogram-card:only-child:has(.histogram-content > div.text-muted:only-child:contains("No data"))) {
      display: none !important;
    }

    /* Bootstrap Histogram Styles */
    .histogram-container {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        position: relative;
    }
    
    .histogram-bar-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        padding: 0 2px;
    }
    
    .histogram-bar {
        width: 80%;
        transition: background-color 0.2s ease;
        border-radius: 3px 3px 0 0;
    }
    
    .histogram-bar:hover {
        background-color: #a5a5ff !important;
    }
    
    .histogram-label {
        margin-top: 5px;
        font-size: 11px;
        text-align: center;
    }
    
    .histogram-stats {
        margin-top: 10px;
        text-align: center;
    }
    
    /* Light mode overrides for histograms */
    html.light-mode .histogram-bar {
        background-color: #6a6ae6 !important;
    }
    
    html.light-mode .histogram-bar:hover {
        background-color: #8a8aff !important;
    }

    /* Histogram Checkbox Styles */
    .histogram-export-checkbox {
        position: absolute;
        bottom: 8px;
        right: 8px;
        z-index: 2;
        opacity: 0.6;
        transform: translateY(0);
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    
    .histogram-export-checkbox:hover {
        opacity: 1;
        transform: translateY(-2px);
    }
    
    .histogram-export-checkbox input[type="checkbox"] {
        margin-right: 4px;
        cursor: pointer;
        accent-color: var(--card-bg); /* Match card background for subtlety */
        opacity: 0.5;
        transition: opacity 0.2s;
    }
    
    .histogram-export-checkbox input[type="checkbox"]:hover,
    .histogram-export-checkbox input[type="checkbox"]:focus {
        opacity: 0.85;
    }
    
    .histogram-export-checkbox label {
        font-size: 0.75rem;
        cursor: pointer;
        margin: 0;
        color: var(--muted-text-color);
    }
    
    /* Make the card position relative so absolute positioned checkbox works */
    .card.thread-card .card-body {
        position: relative;
    }
    
    /* Highlight the checkbox when checked */
    .histogram-export-checkbox input[type="checkbox"]:checked + label {
        color: var(--primary-color);
        font-weight: 500;
    }

    .card.thread-card .card-header {
      background-color: #070113 !important;
    }
</style>
  <style>
    /* Apple-inspired font styling */
    body, button, input, select, textarea {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3, h4, h5, h6, .section-title, .generated-title {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-weight: 600;
      letter-spacing: +0.005em;
    }
    
    /* Custom styles for floating thread items */
    .card.no-hover:hover {
      transform: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .thread-list {
      margin-top: 15px;
      position: relative;
      display: block;
      clear: both;
      margin-bottom: 30px;
    }
    
    /* Masonry layout using columns */
    .masonry-grid {
      column-count: 2;
      column-gap: 1.5rem;
      width: 100%;
    }
    
    @media (max-width: 767px) {
      .masonry-grid {
        column-count: 1;
      }
    }
    
    .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Items in the masonry grid */
    .masonry-grid .masonry-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      display: block;
    }
    
    /* Make sure thread cards in masonry layout have required styles */
    .masonry-grid .card.thread-card, .card.thread-card {
      background: none !important;
      border: 1px solid var(--thread-card-border, #313131) !important;
      border-radius: 12px !important;
      box-shadow: none !important;
      transition: border-color 0.2s;
    }
    
    /* Dark mode border override */
    body.dark-mode .masonry-grid .card.thread-card,
    body.dark-mode .card.thread-card {
      border-color: #23263a !important;
    }
    
    /* Override any position:relative that may be applied to .card-body elsewhere */
    .masonry-grid .card.thread-card .card-body {
      position: static;
    }
    
    .masonry-grid .card.thread-card:hover {
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .show-toggle-btn {
      display: block;
      margin: 30px auto 10px auto;
      min-width: 220px;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .show-toggle-btn i {
      margin-left: 8px;
      transition: transform 0.2s;
    }
    .show-toggle-btn.expanded i {
      transform: rotate(180deg);
    }
    .collapsible-section {
      transition: max-height 0.4s cubic-bezier(0.4,0,0.2,1), opacity 0.4s;
      overflow: hidden;
      opacity: 1;
      max-height: 2000px; /* Large enough for most content */
    }
    .collapsible-section.collapsed {
      max-height: 0 !important;
      opacity: 0;
      pointer-events: none;
    }
    /* Premium title styling with maximum specificity to override any other styles */
    html body .generated-title,
    html[class] body .generated-title,
    body .generated-title.text-info,
    .full-width-page .generated-title,
    .generated-title {
      font-size: 2.5rem !important;
      line-height: 1.2 !important;
      margin-top: 2.5rem !important;
      margin-bottom: 1rem !important;
      font-weight: 600;
      text-shadow: 0 1px 3px rgba(0,0,0,0.15);
      letter-spacing: -0.0025em;
      display: block;
      position: relative;
      max-width: 94%;
      padding-bottom: 0.5rem;
      font-style: normal !important; /* Force normal style, no italics */
    }
    
    /* Light mode title styling */
    html.light-mode .generated-title,
    body.light-mode .generated-title {
      color: #23004D !important;
      text-shadow: none;
    }
    
    /* Dark mode specifics */
    html.dark-mode .generated-title,
    body.dark-mode .generated-title {
      color: white !important;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .generated-title::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 8rem;
      height: 3px;
      background: white;
      opacity: 0.7;
      border-radius: 2px;
    }
    
    /* Adjust underline color in light mode */
    body.light-mode .generated-title::after,
    html.light-mode .generated-title::after {
      background: #23004D;
      opacity: 0.5;
    }
    
    /* For longer titles, ensure they wrap properly */
    @media (max-width: 992px) {
      .generated-title {
        font-size: 2.4rem !important;
        max-width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      .generated-title {
        font-size: 2rem !important;
        margin-top: 2rem !important;
        margin-bottom: 1.2rem !important;
      }
    }
    .section-title {
      font-size: 1.7rem !important; /* 35% larger than default 1.25rem */
      font-weight: 600;
      margin-bottom: 1.2rem;
      letter-spacing: 0.01em;
    }
    /* Remove background from thread card headers */
    .card.thread-card .card-header {
      background: none !important;
      border-bottom: none !important;
    }
    .small {
      font-size: 0.875em !important;
    }
    /* Show More/Fewer Threads button custom color */
    .btn-thread-toggle {
      color: #3498DB !important;
      border-color: #3498DB !important;
      background: transparent !important;
    }
    .btn-thread-toggle:hover, .btn-thread-toggle:focus {
      background: #eaf6fb !important;
      color: #217dbb !important;
      border-color: #217dbb !important;
    }
    /* Ensure info text under section headings aligns with the heading text */
    .section-info-align {
      margin-left: 2.2rem; /* matches the icon+text indent of .section-title .title-text */
    }

    /* ===== Stylish Share Banner ===== */
    .share-banner {
      margin: 0 -1.5rem 2rem -1.5rem;
      background: rgba(24, 26, 45, 0.95);
      backdrop-filter: blur(10px);
      padding: 1.5rem 0;
      position: relative;
      z-index: 10;
    }
    .light-mode .share-banner {
      background: rgba(46, 87, 170, 0.9);
    }
    .share-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .share-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1.2rem;
    }
    .share-text {
      font-size: 1.1rem;
      color: white;
      opacity: 0.95;
      font-weight: 500;
      letter-spacing: -0.01em;
    }
    .share-buttons {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
    }
    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }
    .share-button i {
      font-size: 1.1rem;
    }
    .share-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    .share-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: all 0.1s ease;
    }
    .twitter-share {
      background: #000000; /* X logo has a black background */
    }
    .facebook-share {
      background: #4267B2;
    }
    .linkedin-share {
      background: #0077B5;
    }
    .instagram-share {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    }
    @media (max-width: 576px) {
      .share-text {
        font-size: 0.95rem;
      }
      .share-button {
        width: 2.6rem;
        height: 2.6rem;
      }
    }
    /* ===== End Share Header Styles ===== */

    /* ===== Additional Layout Adjustments for Share Header ===== */
    .shared-page {
      padding-top: 0 !important;
    }
    
    .shared-page .generated-title {
      margin-top: 3.2rem !important;
      animation: title-fade-in 1s ease-out;
    }
    
    /* Add spacing between share banner and content */
    .share-banner + .row {
      margin-top: 2.5rem;
    }
    
    /* Subtle animation for title appearance */
    @keyframes title-fade-in {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* ===== End Layout Adjustments ===== */

    /* Add improved line spacing for content */
    .markdown-content {
      line-height: 1.6;
    }
    
    .markdown-content p, 
    .markdown-content li,
    .thread-summary p, 
    .thread-summary li {
      line-height: 1.65;
      margin-bottom: 0.9em;
    }
    
    .markdown-content h3, 
    .markdown-content h4 {
      margin-top: 1.7em;
      margin-bottom: 0.7em;
      line-height: 1.4;
    }
    
    /* Improve readability of thread cards */
    .thread-card .card-body,
    .thread-summary {
      line-height: 1.65;
    }
    
    /* Increase spacing between list items */
    .markdown-content ul, 
    .markdown-content ol,
    .thread-summary ul,
    .thread-summary ol {
      padding-left: 1.6em;
      margin-bottom: 1.2em;
    }
  </style>
</head>
<body>
  <div class="full-width-page px-3 py-4">
    
    
    <div class="row mb-4">
      <div class="col-12">
        <h1 class="generated-title">
          Combating Despair: Universal Healthcare, Job Guarantees, and Reindustrialization Strategies
        </h1>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-md-6 mb-4 mb-md-0">
        <div class="py-4 h-100">
          
<h5 class="section-title">
  <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
</h5>

  <div id="timelines-container" class="card-body">
    
      <div class="row mb-2">
        <div class="col-5 col-label">Completion deadline:</div>
        <div class="col-7 col-value">
          <span class="utc-time" data-utc-time="2025-04-25 04:59:00+00:00">2025-04-25 04:59:00+00:00</span>
          <span class="local-time"></span>
        </div>
      </div>
    
      <div class="row mb-2">
        <div class="col-5 col-label">Opinion deadline:</div>
        <div class="col-7 col-value">
          <span class="utc-time" data-utc-time="2025-04-22 04:59:00+00:00">2025-04-22 04:59:00+00:00</span>
          <span class="local-time"></span>
        </div>
      </div>
    
  </div>


<h5 class="section-title mt-4">
  <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
</h5>
<div id="info-container" class="card-body">
  <div class="row mb-3">
    <div class="col-5 col-label">Instructor:</div>
    <div class="col-7 col-value">[Redacted]</div>
  </div>
  <div class="row mb-3">
    <div class="col-5 col-label">Min. chat time:</div>
    <div class="col-7 col-value">
      
        25 minutes
      
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-5 col-label">Created on:</div>
    <div class="col-7 col-value">
      <span class="utc-time" data-utc-time="2025-04-20 12:46:46.184503+00:00">2025-04-20 12:46:46.184503+00:00</span>
      <span class="local-time"></span>
    </div>
  </div>
  
  
  <div class="row mb-3">
    <div class="col-5 col-label">Chat threads:</div>
    <div class="col-7 col-value">13</div>
  </div>
</div> 
        </div>
      </div>
      <div class="col-md-6">
        <div class="py-4 h-100">
          <!-- Topics Section Partial -->


<h5 class="section-title">
  <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
</h5>

  <div id="topics-container" class="card-body">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Jobs Guarantee</div>
        <div>The US should guarantee access to decent employment for all of its citizens in order to counteract the epidemic of deaths of despair.</div>
      </div>
      <hr class="my-3" style="border-color: #2d2d43;">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Reindustrialization</div>
        <div>Because many of the lost jobs that have contributed to the epidemic of deaths of despair have been in the manufacturing sector, the US should institute policy to bring those jobs back to the US.</div>
      </div>
      <hr class="my-3" style="border-color: #2d2d43;">
    
      <div class="mb-3">
        <div class="text-info mb-1 font-weight-bold">Universal Healthcare</div>
        <div>The US should guarantee access to health insurance for all of its legal residents.</div>
      </div>
      
    
  </div>
 
        </div>
      </div>
    </div>
    <div class="row mb-2">
      <div class="col-12">
        <h5 class="section-title">
          <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
          
        </h5>
      </div>
      <div class="pt-0 pb-2">
        <div class="text-muted small mb-0 section-info-align">
          <i class="fas fa-info-circle mr-1"></i>Opinion scale: 1 = Strongly Disagree, 7 = Strongly Agree. Mean and 95% CI shown below each chart.
        </div>
        <!-- DEBUG: Show if histogram_html or topic_labels are missing -->
        
        
      </div>
    </div>

    <!-- Separate row for histogram charts floating on background -->
    <div class="row mb-4">
      <div class="col-12">
        
          <div class="row">
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Jobs Guarantee</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">20</div>
            
                    <div style="position:absolute; top:25.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
            
                    <div style="position:absolute; top:50.0%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:75.0%; right:10px; color:#a9adc1; font-size:14px;">5</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:25.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:50.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:75.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:10.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:80.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:60.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:50.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:70.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.33 <span style="opacity:0.7;">(95% confidence interval: 0.99–1.68)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Reindustrialization</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">15</div>
            
                    <div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">5</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:40.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:80.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:80.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:66.66666666666666%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:80.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.04 <span style="opacity:0.7;">(95% confidence interval: 0.62–1.46)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <!-- Individual Opinion Histogram Card -->
<div class="card histogram-card">
  <div class="card-body p-0 px-1 position-relative">
    <div class="histogram-content">
      
        <div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:25px;">
            <div style="font-size:1.25rem; font-weight:500; margin-bottom:15px;">Universal Healthcare</div>
            <div style="position:relative; height:175px; width:100%; margin-bottom:10px;">
                <!-- Y-axis -->
                <div style="position:absolute; top:0; left:0; bottom:25px; width:40px; display:flex; flex-direction:column; justify-content:space-between;">
        
                    <div style="position:absolute; top:0.0%; right:10px; color:#a9adc1; font-size:14px;">30</div>
            
                    <div style="position:absolute; top:33.33333333333333%; right:10px; color:#a9adc1; font-size:14px;">20</div>
            
                    <div style="position:absolute; top:66.66666666666666%; right:10px; color:#a9adc1; font-size:14px;">10</div>
            
                    <div style="position:absolute; top:100.0%; right:10px; color:#a9adc1; font-size:14px;">0</div>
            
                    <div style="position:absolute; top:0; bottom:0; right:0; width:1px; background:rgba(169,173,193,0.3);"></div>
                </div>
                
                <!-- Horizontal grid lines -->
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px;">
        
                    <div style="position:absolute; top:0.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:33.33333333333333%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:66.66666666666666%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                    <div style="position:absolute; top:100.0%; left:0; right:0; height:1px; background:rgba(169,173,193,0.15);"></div>
            
                </div>
                <div style="position:absolute; top:0; left:40px; right:0; bottom:25px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:6.666666666666667%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:0.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:13.333333333333334%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:46.666666666666664%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:33.33333333333333%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                    <div style="flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
                        <div style="width:70%; height:80.0%; background:linear-gradient(180deg, #a5a5ff 0%, #8888ff 100%); 
                                    border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(138,138,255,0.2);"></div>
                    </div>
            
                </div>
                <div style="position:absolute; left:40px; right:0; bottom:0; height:25px; display:flex; justify-content:space-between; padding:0 2px;">
        
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-3</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">-1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">0</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">1</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">2</div>
            
                    <div style="flex:1; text-align:center; color:#a9adc1; font-size:16px; font-weight:500;">3</div>
            
                </div>
            </div>
        
            <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:6px; letter-spacing:0.01em;">
                mean = 1.89 <span style="opacity:0.7;">(95% confidence interval: 1.54–2.24)</span>
            </div>
            
        </div>
        
    </div>
  </div>
</div> 
                </div>
              
            
          </div>
        
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-12">
        <div class="py-4">
          <!-- Report Section Partial -->

<h5 class="section-title">
  <div class="title-text">
    <i class="fas fa-file-alt mr-1"></i> Instructor Report
  </div>
  
</h5>

<!-- DEBUG: Show if report or has_saved_summaries are missing -->



<div class="card-body" id="report-section">
  
    
    <div id="report-content" class="markdown-content">
      <p>Students engaged in structured debates on two major policy topics: universal healthcare and reindustrialization as a remedy for "deaths of despair." In both cases, students were typically assigned devil's advocate roles to ensure robust argumentation from multiple perspectives. For healthcare debates, students examined whether the U.S. should guarantee insurance coverage for all legal residents, weighing moral imperatives against economic feasibility. In the reindustrialization discussions, students evaluated whether bringing manufacturing jobs back to America could reduce the epidemic of suicides, drug overdoses, and alcohol-related deaths in former industrial regions.</p>
<h3>Themes</h3>
<ul>
<li><strong>Healthcare debates consistently revealed tension between viewing healthcare as a right versus a market commodity.</strong> Students advocating for universal coverage emphasized moral obligations and human dignity, while opponents focused on tax implications, quality concerns, and innovation incentives.</li>
<li><strong>Students frequently proposed hybrid solutions rather than pure models.</strong> These typically included public safety nets for vulnerable populations combined with private options to maintain market competition, showing a pragmatic recognition of American political realities.</li>
<li><strong>In reindustrialization discussions, students distinguished between job quantity and quality.</strong> Those skeptical of manufacturing's return argued that simply creating jobs without addressing wages, stability, and dignified working conditions would merely provide a "bandaid" rather than tackle root causes of despair.</li>
</ul>
<h3>Guide's Role</h3>
<ul>
<li><strong>Guide consistently challenged assumptions by asking for evidence and pushing students to justify trade-offs.</strong> When students made claims about healthcare costs, efficiency, or manufacturing job quality, Guide prompted them to provide specific examples and consider comparative data from other countries or industries.</li>
<li><strong>Guide steered conversations from abstract principles toward concrete policy specifications.</strong> By asking targeted questions about funding mechanisms, implementation timelines, and specific program designs, Guide prevented discussions from remaining at the level of vague ideals or simplistic opposition.</li>
<li><strong>Guide maintained the devil's advocate structure when students showed signs of agreement or role confusion.</strong> In several instances when students abandoned assigned positions, Guide reoriented the discussion by reminding participants of their debate roles and offering provocative prompts to reinvigorate opposition.</li>
</ul>
<h3>Common Ground</h3>
<ul>
<li><strong>Most students ultimately acknowledged the need for some form of safety net for vulnerable populations.</strong> Even those arguing against universal healthcare typically conceded that no one should be denied care due to inability to pay, suggesting targeted programs as alternatives to full universal coverage.</li>
<li><strong>Students generally agreed that government has a legitimate role in addressing market failures in healthcare.</strong> Discussions frequently cited examples like price transparency requirements, protection for pre-existing conditions, and regulation of pharmaceutical costs as areas where intervention is justified.</li>
<li><strong>In reindustrialization debates, students found common ground on the social and cultural value of meaningful work.</strong> While disagreeing on methods, participants recognized that employment provides more than income—it confers dignity, purpose, and community connection crucial to combating despair.</li>
</ul>
<h3>Persistent Disagreements</h3>
<ul>
<li><strong>Students remained divided on whether access to healthcare implies affordability or merely availability.</strong> Some maintained that removing legal barriers to purchase satisfied the obligation to provide access, while others argued access means nothing if prohibitive costs remain.</li>
<li><strong>Disagreement persisted about whether universal healthcare would increase or decrease total system costs.</strong> Proponents cited administrative savings and preventive care benefits, while opponents warned of overutilization, inefficiency, and expanded bureaucracy.</li>
<li><strong>Students could not resolve whether manufacturing revival or education/services expansion would better address economic displacement.</strong> This reflected deeper tensions about balancing immediate job creation against long-term economic transformation, especially for communities with historical ties to industrial employment.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Several students demonstrated genuine evolution in their thinking during discussions.</strong> This was particularly evident in Thread 13, where a student acknowledged changing their stance on reindustrialization after considering their partner's arguments about comprehensive social investments.</li>
<li><strong>The devil's advocate structure successfully pushed students beyond their comfort zones.</strong> By defending positions they personally disagreed with, students engaged more deeply with opposing viewpoints and identified nuances they might otherwise have overlooked.</li>
<li><strong>Students recognized connections between employment, healthcare, and "deaths of despair" even when discussing them separately.</strong> This suggests an emerging understanding of how economic security, health access, and community wellbeing form an interconnected policy landscape.</li>
</ul>
<h3>Possible Misconceptions</h3>
<ul>
<li><strong>Some discussions revealed confusion about how universal healthcare is funded in other countries.</strong> Several exchanges suggested misunderstandings about taxation models, administrative costs, and per-capita spending comparisons between the U.S. and nations with universal systems.</li>
<li><strong>Students occasionally overgeneralized about automation's impact on manufacturing employment.</strong> While automation has reduced certain types of industrial jobs, evidence suggests its effects vary significantly across manufacturing sectors, with new positions sometimes created alongside those eliminated.</li>
</ul>
    </div>
    <!-- Hidden raw markdown for test compatibility -->
    <div style="display:none;" id="report-raw-markdown">Students engaged in structured debates on two major policy topics: universal healthcare and reindustrialization as a remedy for "deaths of despair." In both cases, students were typically assigned devil's advocate roles to ensure robust argumentation from multiple perspectives. For healthcare debates, students examined whether the U.S. should guarantee insurance coverage for all legal residents, weighing moral imperatives against economic feasibility. In the reindustrialization discussions, students evaluated whether bringing manufacturing jobs back to America could reduce the epidemic of suicides, drug overdoses, and alcohol-related deaths in former industrial regions.

### Themes
- **Healthcare debates consistently revealed tension between viewing healthcare as a right versus a market commodity.** Students advocating for universal coverage emphasized moral obligations and human dignity, while opponents focused on tax implications, quality concerns, and innovation incentives.
- **Students frequently proposed hybrid solutions rather than pure models.** These typically included public safety nets for vulnerable populations combined with private options to maintain market competition, showing a pragmatic recognition of American political realities.
- **In reindustrialization discussions, students distinguished between job quantity and quality.** Those skeptical of manufacturing's return argued that simply creating jobs without addressing wages, stability, and dignified working conditions would merely provide a "bandaid" rather than tackle root causes of despair.

### Guide's Role
- **Guide consistently challenged assumptions by asking for evidence and pushing students to justify trade-offs.** When students made claims about healthcare costs, efficiency, or manufacturing job quality, Guide prompted them to provide specific examples and consider comparative data from other countries or industries.
- **Guide steered conversations from abstract principles toward concrete policy specifications.** By asking targeted questions about funding mechanisms, implementation timelines, and specific program designs, Guide prevented discussions from remaining at the level of vague ideals or simplistic opposition.
- **Guide maintained the devil's advocate structure when students showed signs of agreement or role confusion.** In several instances when students abandoned assigned positions, Guide reoriented the discussion by reminding participants of their debate roles and offering provocative prompts to reinvigorate opposition.

### Common Ground
- **Most students ultimately acknowledged the need for some form of safety net for vulnerable populations.** Even those arguing against universal healthcare typically conceded that no one should be denied care due to inability to pay, suggesting targeted programs as alternatives to full universal coverage.
- **Students generally agreed that government has a legitimate role in addressing market failures in healthcare.** Discussions frequently cited examples like price transparency requirements, protection for pre-existing conditions, and regulation of pharmaceutical costs as areas where intervention is justified.
- **In reindustrialization debates, students found common ground on the social and cultural value of meaningful work.** While disagreeing on methods, participants recognized that employment provides more than income—it confers dignity, purpose, and community connection crucial to combating despair.

### Persistent Disagreements
- **Students remained divided on whether access to healthcare implies affordability or merely availability.** Some maintained that removing legal barriers to purchase satisfied the obligation to provide access, while others argued access means nothing if prohibitive costs remain.
- **Disagreement persisted about whether universal healthcare would increase or decrease total system costs.** Proponents cited administrative savings and preventive care benefits, while opponents warned of overutilization, inefficiency, and expanded bureaucracy.
- **Students could not resolve whether manufacturing revival or education/services expansion would better address economic displacement.** This reflected deeper tensions about balancing immediate job creation against long-term economic transformation, especially for communities with historical ties to industrial employment.

### Insights
- **Several students demonstrated genuine evolution in their thinking during discussions.** This was particularly evident in Thread 13, where a student acknowledged changing their stance on reindustrialization after considering their partner's arguments about comprehensive social investments.
- **The devil's advocate structure successfully pushed students beyond their comfort zones.** By defending positions they personally disagreed with, students engaged more deeply with opposing viewpoints and identified nuances they might otherwise have overlooked.
- **Students recognized connections between employment, healthcare, and "deaths of despair" even when discussing them separately.** This suggests an emerging understanding of how economic security, health access, and community wellbeing form an interconnected policy landscape.

### Possible Misconceptions
- **Some discussions revealed confusion about how universal healthcare is funded in other countries.** Several exchanges suggested misunderstandings about taxation models, administrative costs, and per-capita spending comparisons between the U.S. and nations with universal systems.
- **Students occasionally overgeneralized about automation's impact on manufacturing employment.** While automation has reduced certain types of industrial jobs, evidence suggests its effects vary significantly across manufacturing sectors, with new positions sometimes created alongside those eliminated.</div>
    <!-- RAW REPORT CONTENT FOR TESTING: Students engaged in  -->
    <span style="display:none;" id="report-prefix">Students engaged in </span>
    <div class="text-muted mt-2 d-flex justify-content-end align-items-center">
      <span class="text-right" style="flex:1; text-align:right;">Generated on: 
        <script>
          document.write(new Date("2025-05-06T15:20:34.759349").toLocaleDateString('en-US', {
            month: 'short', 
            day: 'numeric', 
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          }));
        </script>
        <noscript>2025-05-06T15:20:34.759349</noscript>
      </span>
      
    </div>
    <div id="report-editor-container" style="display: none;">
      <div class="alert alert-info">
        <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
      </div>
      <textarea id="report-markdown-editor" class="form-control">Students engaged in structured debates on two major policy topics: universal healthcare and reindustrialization as a remedy for &#34;deaths of despair.&#34; In both cases, students were typically assigned devil&#39;s advocate roles to ensure robust argumentation from multiple perspectives. For healthcare debates, students examined whether the U.S. should guarantee insurance coverage for all legal residents, weighing moral imperatives against economic feasibility. In the reindustrialization discussions, students evaluated whether bringing manufacturing jobs back to America could reduce the epidemic of suicides, drug overdoses, and alcohol-related deaths in former industrial regions.

### Themes
- **Healthcare debates consistently revealed tension between viewing healthcare as a right versus a market commodity.** Students advocating for universal coverage emphasized moral obligations and human dignity, while opponents focused on tax implications, quality concerns, and innovation incentives.
- **Students frequently proposed hybrid solutions rather than pure models.** These typically included public safety nets for vulnerable populations combined with private options to maintain market competition, showing a pragmatic recognition of American political realities.
- **In reindustrialization discussions, students distinguished between job quantity and quality.** Those skeptical of manufacturing&#39;s return argued that simply creating jobs without addressing wages, stability, and dignified working conditions would merely provide a &#34;bandaid&#34; rather than tackle root causes of despair.

### Guide&#39;s Role
- **Guide consistently challenged assumptions by asking for evidence and pushing students to justify trade-offs.** When students made claims about healthcare costs, efficiency, or manufacturing job quality, Guide prompted them to provide specific examples and consider comparative data from other countries or industries.
- **Guide steered conversations from abstract principles toward concrete policy specifications.** By asking targeted questions about funding mechanisms, implementation timelines, and specific program designs, Guide prevented discussions from remaining at the level of vague ideals or simplistic opposition.
- **Guide maintained the devil&#39;s advocate structure when students showed signs of agreement or role confusion.** In several instances when students abandoned assigned positions, Guide reoriented the discussion by reminding participants of their debate roles and offering provocative prompts to reinvigorate opposition.

### Common Ground
- **Most students ultimately acknowledged the need for some form of safety net for vulnerable populations.** Even those arguing against universal healthcare typically conceded that no one should be denied care due to inability to pay, suggesting targeted programs as alternatives to full universal coverage.
- **Students generally agreed that government has a legitimate role in addressing market failures in healthcare.** Discussions frequently cited examples like price transparency requirements, protection for pre-existing conditions, and regulation of pharmaceutical costs as areas where intervention is justified.
- **In reindustrialization debates, students found common ground on the social and cultural value of meaningful work.** While disagreeing on methods, participants recognized that employment provides more than income—it confers dignity, purpose, and community connection crucial to combating despair.

### Persistent Disagreements
- **Students remained divided on whether access to healthcare implies affordability or merely availability.** Some maintained that removing legal barriers to purchase satisfied the obligation to provide access, while others argued access means nothing if prohibitive costs remain.
- **Disagreement persisted about whether universal healthcare would increase or decrease total system costs.** Proponents cited administrative savings and preventive care benefits, while opponents warned of overutilization, inefficiency, and expanded bureaucracy.
- **Students could not resolve whether manufacturing revival or education/services expansion would better address economic displacement.** This reflected deeper tensions about balancing immediate job creation against long-term economic transformation, especially for communities with historical ties to industrial employment.

### Insights
- **Several students demonstrated genuine evolution in their thinking during discussions.** This was particularly evident in Thread 13, where a student acknowledged changing their stance on reindustrialization after considering their partner&#39;s arguments about comprehensive social investments.
- **The devil&#39;s advocate structure successfully pushed students beyond their comfort zones.** By defending positions they personally disagreed with, students engaged more deeply with opposing viewpoints and identified nuances they might otherwise have overlooked.
- **Students recognized connections between employment, healthcare, and &#34;deaths of despair&#34; even when discussing them separately.** This suggests an emerging understanding of how economic security, health access, and community wellbeing form an interconnected policy landscape.

### Possible Misconceptions
- **Some discussions revealed confusion about how universal healthcare is funded in other countries.** Several exchanges suggested misunderstandings about taxation models, administrative costs, and per-capita spending comparisons between the U.S. and nations with universal systems.
- **Students occasionally overgeneralized about automation&#39;s impact on manufacturing employment.** While automation has reduced certain types of industrial jobs, evidence suggests its effects vary significantly across manufacturing sectors, with new positions sometimes created alongside those eliminated.</textarea>
      <div class="mt-3">
        <button id="save-report-btn" class="btn btn-primary">
          <i class="fas fa-save mr-1"></i> Save Changes
        </button>
        <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
          <i class="fas fa-times mr-1"></i> Cancel
        </button>
        <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
      </div>
      <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
    </div>
  
</div> 
        </div>
      </div>
    </div>

    <div class="row mb-2">
      <div class="col-12">
        <h5 class="section-title">
          <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
          
        </h5>
      </div>
      <div class="pt-0 pb-2">
        <!-- DEBUG: Show if threads is missing or empty -->
        
        <div class="text-muted small mb-0 section-info-align">
          <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
        </div>
      </div>
    </div>

    <!-- Separate row for thread items floating on background -->
    <div class="row mb-5">
      <div class="col-12">
        <div class="thread-list" id="thread-list">
          
            <div class="masonry-grid">
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807">
                                <ul>
<li><strong>Students debated whether reindustrialization could curb deaths of despair by restoring factory jobs versus addressing root causes.</strong> Student 2 argued that modern manufacturing’s automation and skill mismatch mean displaced workers won’t benefit, and that mental health, education, and community support would be more effective. Student 1 initially agreed with reindustrialization for its quick relief but gradually acknowledged the need for broader social investments.  </li>
<li><strong>The conversation showed an evolution in Student 1’s perspective under Student 2’s influence.</strong> At first Student 1 saw job creation as the fastest way to restore security, citing examples like Obama-era policies, but later admitted unpreparedness on policy details and shifted toward education and mental health priorities. By the end, Student 1 planned to change her stance in the quiz, reflecting genuine learning.  </li>
<li><strong>Guide steered the dialogue through pointed challenges and policy probes.</strong> It asked Student 1 to propose realistic reindustrialization policies and pushed Student 2 to outline alternative solutions, then raised the cultural and identity implications for communities historically dependent on manufacturing. These interventions deepened the analysis beyond surface‐level solutions.  </li>
</ul>
<blockquote>
<p><strong>Before we wrap up, I'd like to challenge you both to think more deeply: What about communities where manufacturing was the economic backbone for generations? Is there a cultural or identity component to this issue that goes beyond just having a job?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" class="form-control summary-markdown-editor">- **Students debated whether reindustrialization could curb deaths of despair by restoring factory jobs versus addressing root causes.** Student 2 argued that modern manufacturing’s automation and skill mismatch mean displaced workers won’t benefit, and that mental health, education, and community support would be more effective. Student 1 initially agreed with reindustrialization for its quick relief but gradually acknowledged the need for broader social investments.  
- **The conversation showed an evolution in Student 1’s perspective under Student 2’s influence.** At first Student 1 saw job creation as the fastest way to restore security, citing examples like Obama-era policies, but later admitted unpreparedness on policy details and shifted toward education and mental health priorities. By the end, Student 1 planned to change her stance in the quiz, reflecting genuine learning.  
- **Guide steered the dialogue through pointed challenges and policy probes.** It asked Student 1 to propose realistic reindustrialization policies and pushed Student 2 to outline alternative solutions, then raised the cultural and identity implications for communities historically dependent on manufacturing. These interventions deepened the analysis beyond surface‐level solutions.  


&gt; **Before we wrap up, I&#39;d like to challenge you both to think more deeply: What about communities where manufacturing was the economic backbone for generations? Is there a cultural or identity component to this issue that goes beyond just having a job?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==d1381236df::student-dwfilmvkdq==e4d9f16cdf::51c18dd447::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students tackled universal healthcare by weighing government cost against citizens’ health rights and economic productivity.</strong> The devil’s advocate (Student 1) raised concerns about taxes, national debt, and uncertain savings, while Student 2 and Student 3 countered by pointing to administrative inefficiencies, preventive care savings, and broader economic gains.  </li>
<li><strong>The discussion evolved from financing mechanisms to more nuanced considerations of long-term returns and social determinants of health.</strong> Initially focused on funding sources and budget projections, the students later acknowledged that factors like education and housing also shape health outcomes and debated whether immediate needs could be overshadowed by future benefits.  </li>
<li><strong>Guide structured the conversation with funding proposals and kept the debate on track by challenging assumptions and probing deeper economic arguments.</strong> It listed progressive tax options, cost-reduction strategies, and then asked Student 1 to address the argument that universal coverage acts as an investment in human capital, driving productivity and growth.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you raise a valid concern about budget projections versus reality. While universal healthcare requires significant upfront investment, how would you respond to Student 3's point that healthcare is an investment in human capital? Many economists argue that healthier populations contribute more to economic growth through increased productivity and reduced absenteeism.</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students tackled universal healthcare by weighing government cost against citizens’ health rights and economic productivity.** The devil’s advocate (Student 1) raised concerns about taxes, national debt, and uncertain savings, while Student 2 and Student 3 countered by pointing to administrative inefficiencies, preventive care savings, and broader economic gains.  
- **The discussion evolved from financing mechanisms to more nuanced considerations of long-term returns and social determinants of health.** Initially focused on funding sources and budget projections, the students later acknowledged that factors like education and housing also shape health outcomes and debated whether immediate needs could be overshadowed by future benefits.  
- **Guide structured the conversation with funding proposals and kept the debate on track by challenging assumptions and probing deeper economic arguments.** It listed progressive tax options, cost-reduction strategies, and then asked Student 1 to address the argument that universal coverage acts as an investment in human capital, driving productivity and growth.  



&gt; **Student 1, you raise a valid concern about budget projections versus reality. While universal healthcare requires significant upfront investment, how would you respond to Student 3&#39;s point that healthcare is an investment in human capital? Many economists argue that healthier populations contribute more to economic growth through increased productivity and reduced absenteeism.**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==8c5648d0df::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students tackled the pros and cons of guaranteeing health insurance, with Student2 championing universal care on grounds of societal fairness.</strong> It emphasized collective responsibility and lower emergency costs for all legal residents, framing healthcare access as a fundamental right.  </li>
<li><strong>Student1 adopted the devil’s advocate role, questioning fairness toward healthy individuals and potential drops in care quality under a government system.</strong> These objections prompted Student2 to rebut with cost-saving and equitable use arguments, maintaining that even infrequent users benefit by avoiding high emergency charges.  </li>
<li><strong>Guide kept the discussion focused by prompting both perspectives and reminding Student1 of their assigned role, then challenging Student2 to justify compulsory contributions.</strong> This ensured a balanced debate as students explored costs, freedom of choice, and systemic quality, though they largely reinforced their initial stances.</li>
</ul>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students tackled the pros and cons of guaranteeing health insurance, with Student2 championing universal care on grounds of societal fairness.** It emphasized collective responsibility and lower emergency costs for all legal residents, framing healthcare access as a fundamental right.  
- **Student1 adopted the devil’s advocate role, questioning fairness toward healthy individuals and potential drops in care quality under a government system.** These objections prompted Student2 to rebut with cost-saving and equitable use arguments, maintaining that even infrequent users benefit by avoiding high emergency charges.  
- **Guide kept the discussion focused by prompting both perspectives and reminding Student1 of their assigned role, then challenging Student2 to justify compulsory contributions.** This ensured a balanced debate as students explored costs, freedom of choice, and systemic quality, though they largely reinforced their initial stances.</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==90422b2edd::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students wrestled with what “guaranteed access” entails in practice, moving from broad support for universal coverage to a nuanced view that access must mean affordability.</strong> Initially juxtaposing the US model with Canada’s free system, they concluded that guaranteeing the option to purchase insurance without making it affordable offers little real improvement, and floated solutions like tiered low-cost plans, emergency-only coverage, and nonprofit assistance for those in dire need.  </li>
<li><strong>Guide persistently probed students’ assumptions by distinguishing access from affordability and zeroing in on practical barriers to coverage.</strong> It asked targeted questions about cost burdens, discrimination, and systemic complexities, pushing students to specify how reforms could move beyond allowing purchase to ensuring actual enrollment and use.  </li>
<li><strong>Despite labeling free insurance as practically unattainable, students coalesced around incremental reforms and recognized the deeper debate over treating healthcare as a right versus a market commodity.</strong> Their evolving consensus highlighted both immediate financial obstacles and the larger ideological clash shaping feasible policy changes.  </li>
</ul>
<blockquote>
<p><strong>If health insurance is guaranteed but still unaffordable for many, what meaningful change would this represent from our current system? Does it simply mean everyone can purchase insurance (which is largely true now under the ACA), or does it mean ensuring everyone can actually afford it? If the latter, what mechanisms would you propose to make insurance truly accessible to all income levels?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students wrestled with what “guaranteed access” entails in practice, moving from broad support for universal coverage to a nuanced view that access must mean affordability.** Initially juxtaposing the US model with Canada’s free system, they concluded that guaranteeing the option to purchase insurance without making it affordable offers little real improvement, and floated solutions like tiered low-cost plans, emergency-only coverage, and nonprofit assistance for those in dire need.  
- **Guide persistently probed students’ assumptions by distinguishing access from affordability and zeroing in on practical barriers to coverage.** It asked targeted questions about cost burdens, discrimination, and systemic complexities, pushing students to specify how reforms could move beyond allowing purchase to ensuring actual enrollment and use.  
- **Despite labeling free insurance as practically unattainable, students coalesced around incremental reforms and recognized the deeper debate over treating healthcare as a right versus a market commodity.** Their evolving consensus highlighted both immediate financial obstacles and the larger ideological clash shaping feasible policy changes.  


&gt; **If health insurance is guaranteed but still unaffordable for many, what meaningful change would this represent from our current system? Does it simply mean everyone can purchase insurance (which is largely true now under the ACA), or does it mean ensuring everyone can actually afford it? If the latter, what mechanisms would you propose to make insurance truly accessible to all income levels?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==3ef5ff40dd::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807">
                                <ul>
<li>
<p><strong>Students clashed over whether bringing manufacturing jobs back to the US could curb deaths of despair or if healthcare was a more effective focus.</strong> Student 1 argued that domestic job growth would lower unemployment and provide choice, while Student 2 countered that modern manufacturing lacks the stability, community culture, and value of past union-protected roles and thus might only delay despair. Student 2 repeatedly underscored that without dignified work standards, simply adding jobs could be a temporary “bandaid” that fails to address deeper economic and social needs.</p>
</li>
<li>
<p><strong>Guide persistently challenged assumptions about job quality and cultural shifts to deepen the policy debate.</strong> It pressed Student 2 for evidence comparing manufacturing to fast-food work, probed whether values changed before or after job decline, and urged both to outline specific measures—like union protections and wage floors—that would make reindustrialization impactful. These interventions steered the conversation from broad opinions toward concrete trade-offs and policy design questions.</p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, what evidence supports your claim that outsourced manufacturing jobs are "not of much better quality" than fast food work? And if we accept Student 1's point that multiple approaches might be valuable, how do you weigh the potential benefits of reindustrialization against healthcare-focused solutions?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" class="form-control summary-markdown-editor">- **Students clashed over whether bringing manufacturing jobs back to the US could curb deaths of despair or if healthcare was a more effective focus.** Student 1 argued that domestic job growth would lower unemployment and provide choice, while Student 2 countered that modern manufacturing lacks the stability, community culture, and value of past union-protected roles and thus might only delay despair. Student 2 repeatedly underscored that without dignified work standards, simply adding jobs could be a temporary “bandaid” that fails to address deeper economic and social needs.

- **Guide persistently challenged assumptions about job quality and cultural shifts to deepen the policy debate.** It pressed Student 2 for evidence comparing manufacturing to fast-food work, probed whether values changed before or after job decline, and urged both to outline specific measures—like union protections and wage floors—that would make reindustrialization impactful. These interventions steered the conversation from broad opinions toward concrete trade-offs and policy design questions.


&gt; **Student 2, what evidence supports your claim that outsourced manufacturing jobs are &#34;not of much better quality&#34; than fast food work? And if we accept Student 1&#39;s point that multiple approaches might be valuable, how do you weigh the potential benefits of reindustrialization against healthcare-focused solutions?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==be35ecf6de::51c18dd447::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807">
                                <ul>
<li><strong>Students clashed over whether reindustrialization provides urgent relief or merely revives outdated industries, with Student 1 advocating for bringing back manufacturing—especially green sectors like solar panels and EV batteries—to combat “deaths of despair” and Student 2 warning that it’s costlier and a step backward compared to investing in new markets.</strong> In the debate, Student 2 even conceded that manufacturing might offer faster help but maintained that long-term innovation lies in emerging fields, leading Student 1 to detail funding, training, and regional targeting strategies to balance urgency with sustainability.</li>
<li><strong>Guide persistently probed assumptions about timing, costs, and training feasibility, forcing students to specify evidence, funding sources, and potential transition hardships.</strong> Its targeted questions—demanding clarity on automation’s job impact, manufacturing’s adaptability, and trade-offs between immediate job creation and long-term growth—sharpened the debate and pushed both sides toward more concrete policy proposals.</li>
</ul>
<blockquote>
<p><strong>Student 2, you've conceded reindustrialization might provide faster relief but argue it's taking a step backward. What makes manufacturing inherently backward-looking rather than adaptable to future needs? Student 1, you're focused on immediate job creation but haven't addressed Student 2's concern about opportunity costs. If resources are limited, how do you weigh immediate relief against potentially greater long-term benefits from investing elsewhere?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" class="form-control summary-markdown-editor">- **Students clashed over whether reindustrialization provides urgent relief or merely revives outdated industries, with Student 1 advocating for bringing back manufacturing—especially green sectors like solar panels and EV batteries—to combat “deaths of despair” and Student 2 warning that it’s costlier and a step backward compared to investing in new markets.** In the debate, Student 2 even conceded that manufacturing might offer faster help but maintained that long-term innovation lies in emerging fields, leading Student 1 to detail funding, training, and regional targeting strategies to balance urgency with sustainability.
- **Guide persistently probed assumptions about timing, costs, and training feasibility, forcing students to specify evidence, funding sources, and potential transition hardships.** Its targeted questions—demanding clarity on automation’s job impact, manufacturing’s adaptability, and trade-offs between immediate job creation and long-term growth—sharpened the debate and pushed both sides toward more concrete policy proposals.


&gt; **Student 2, you&#39;ve conceded reindustrialization might provide faster relief but argue it&#39;s taking a step backward. What makes manufacturing inherently backward-looking rather than adaptable to future needs? Student 1, you&#39;re focused on immediate job creation but haven&#39;t addressed Student 2&#39;s concern about opportunity costs. If resources are limited, how do you weigh immediate relief against potentially greater long-term benefits from investing elsewhere?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==fc78c33cdf::51c18dd447::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students grappled with whether the U.S. should guarantee health insurance for all legal residents, with one arguing universal coverage is morally necessary and the other warning of higher taxes, system overuse, and threats to innovation.</strong> Student 2 (playing devil’s advocate) pushed for inclusive care to prevent deaths, while Student 1 emphasized the practical costs, potential wait times, and the value of private competition.  </li>
<li><strong>Over the discussion, Student 1 softened their stance, conceding that no one should die for lack of care but proposing targeted safety nets like expanded Medicaid or subsidies instead of full universal coverage.</strong> Student 2 then countered that means-tested programs face political resistance when they don’t appeal to wealthier voters, underlining how partisan divides can undermine efficiency and equity.  </li>
<li><strong>Guide consistently challenged both participants to provide evidence and justify trade-offs, asking them to address moral rights, tax implications, and real-world models of cost control and innovation.</strong> Its prompts drove deeper analysis of whether a tiered approach leaves gaps and how universal systems balance access with sustaining medical breakthroughs.  </li>
</ul>
<blockquote>
<p><strong>How would you address the moral argument that access to healthcare is a right rather than a privilege? Consider countries with universal systems that maintain innovation while controlling costs. What specific reforms would you prioritize to improve access without guaranteeing universal coverage?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students grappled with whether the U.S. should guarantee health insurance for all legal residents, with one arguing universal coverage is morally necessary and the other warning of higher taxes, system overuse, and threats to innovation.** Student 2 (playing devil’s advocate) pushed for inclusive care to prevent deaths, while Student 1 emphasized the practical costs, potential wait times, and the value of private competition.  
- **Over the discussion, Student 1 softened their stance, conceding that no one should die for lack of care but proposing targeted safety nets like expanded Medicaid or subsidies instead of full universal coverage.** Student 2 then countered that means-tested programs face political resistance when they don’t appeal to wealthier voters, underlining how partisan divides can undermine efficiency and equity.  
- **Guide consistently challenged both participants to provide evidence and justify trade-offs, asking them to address moral rights, tax implications, and real-world models of cost control and innovation.** Its prompts drove deeper analysis of whether a tiered approach leaves gaps and how universal systems balance access with sustaining medical breakthroughs.  


&gt; **How would you address the moral argument that access to healthcare is a right rather than a privilege? Consider countries with universal systems that maintain innovation while controlling costs. What specific reforms would you prioritize to improve access without guaranteeing universal coverage?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students clashed over universal healthcare versus private competition, with Student 2 emphasizing health as a human right, cost prevention, and job growth under a public option, while Student 1 warned of tax hikes, job cuts, and valued market-driven innovation.</strong> They gradually converged on a hybrid model: a public safety net for those who can’t afford care plus private plans to sustain competition, proposing reforms like price transparency, tort reform, and trimming unnecessary regulations.  </li>
<li><strong>Guide consistently redirected the debate toward evidence and practical details, challenging assumptions about cost, efficiency, and care quality, and prompting students to clarify how their hybrid system would be funded and maintained without creating second-class public care.</strong> Its targeted questions pressed the students to propose concrete solutions rather than broad principles, deepening the analysis on both sides.  </li>
</ul>
<blockquote>
<p><strong>You've suggested repurposing spending rather than raising taxes. What specific areas of government spending would you redirect to fund universal healthcare? The cost gap is substantial - how would you make the numbers work?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students clashed over universal healthcare versus private competition, with Student 2 emphasizing health as a human right, cost prevention, and job growth under a public option, while Student 1 warned of tax hikes, job cuts, and valued market-driven innovation.** They gradually converged on a hybrid model: a public safety net for those who can’t afford care plus private plans to sustain competition, proposing reforms like price transparency, tort reform, and trimming unnecessary regulations.  
- **Guide consistently redirected the debate toward evidence and practical details, challenging assumptions about cost, efficiency, and care quality, and prompting students to clarify how their hybrid system would be funded and maintained without creating second-class public care.** Its targeted questions pressed the students to propose concrete solutions rather than broad principles, deepening the analysis on both sides.  


&gt; **You&#39;ve suggested repurposing spending rather than raising taxes. What specific areas of government spending would you redirect to fund universal healthcare? The cost gap is substantial - how would you make the numbers work?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==f031d19ef0::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Reindustrialization
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807">
                                <ul>
<li><strong>Students initially clashed over whether bringing back manufacturing jobs or expanding education pathways best counters deaths of despair.</strong> Student 1 emphasized the displacement effects of automation and argued that reindustrialization offers low-barrier roles and career-building experience, while Student 2 countered that better-paying jobs through trade schools or two-year degrees could more effectively uplift affected workers.  </li>
<li><strong>Discussion evolved into a shared focus on government responsibility for funding entry-level positions and educational programs.</strong> Student 1 drew on personal restaurant-job experience to show how humble starts can lead to managerial roles, and Student 2 broadened the conversation to include medical assistant roles and community colleges, though both flagged funding cuts and imposter syndrome as barriers.  </li>
<li><strong>Guide consistently pressed for specifics, challenging assumptions about education vs. immediate job needs and urging students to tie their proposals back to the prompt’s “deaths of despair.”</strong> Its questions repeatedly pulled the group from abstract ideals toward concrete policies and regional considerations, ensuring the debate stayed grounded in the assignment’s central dilemma.  </li>
</ul>
<blockquote>
<p><strong>Student 2, you suggest government programs could help people gain experience and skills. But what about those who’ve already lost manufacturing jobs and face immediate economic hardship? How would your approach address the “deaths of despair” mentioned in our topic?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" class="form-control summary-markdown-editor">- **Students initially clashed over whether bringing back manufacturing jobs or expanding education pathways best counters deaths of despair.** Student 1 emphasized the displacement effects of automation and argued that reindustrialization offers low-barrier roles and career-building experience, while Student 2 countered that better-paying jobs through trade schools or two-year degrees could more effectively uplift affected workers.  
- **Discussion evolved into a shared focus on government responsibility for funding entry-level positions and educational programs.** Student 1 drew on personal restaurant-job experience to show how humble starts can lead to managerial roles, and Student 2 broadened the conversation to include medical assistant roles and community colleges, though both flagged funding cuts and imposter syndrome as barriers.  
- **Guide consistently pressed for specifics, challenging assumptions about education vs. immediate job needs and urging students to tie their proposals back to the prompt’s “deaths of despair.”** Its questions repeatedly pulled the group from abstract ideals toward concrete policies and regional considerations, ensuring the debate stayed grounded in the assignment’s central dilemma.  


&gt; **Student 2, you suggest government programs could help people gain experience and skills. But what about those who’ve already lost manufacturing jobs and face immediate economic hardship? How would your approach address the “deaths of despair” mentioned in our topic?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==cb401c60de::51c18dd447::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students weighed the fairness and fiscal impacts of universal healthcare, with Student 1 emphasizing cost savings through streamlined administration and preventive care, and Student 2 worrying about who foots the bill and potential inflation.</strong> The exchange unfolded as Student 1 argued universal coverage boosts overall health and fairness, while Student 2 pressed for details on funding and economic side effects.  </li>
<li><strong>They shifted to implementation strategies, debating a phased public option, targeted tax funding, drug price caps, and technological efficiencies that preserve jobs.</strong> Student 1 pushed gradual reforms and resource redistribution, whereas Student 2 warned about entrenched stakeholders and the challenge of overhauling a high-cost system.  </li>
<li><strong>Guide consistently probed for specifics—questioning assumptions about inflation, bankruptcies, and market failures—and steered students to ground their values in concrete policy measures.</strong> Its interventions sharpened the debate by pressing them to consider real-world financial burdens and stakeholder resistance when designing a balanced healthcare model.  </li>
</ul>
<blockquote>
<p><strong>Student 2, you've raised an important economic concern, but let's dig deeper. What specific economic consequences do you foresee beyond general inflation? Many countries with universal healthcare actually spend less per capita than the US while achieving better health outcomes. If we're concerned about economic impacts, shouldn't we also consider the current economic burden of medical bankruptcies, lost productivity due to untreated conditions, and emergency room use for preventable conditions?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students weighed the fairness and fiscal impacts of universal healthcare, with Student 1 emphasizing cost savings through streamlined administration and preventive care, and Student 2 worrying about who foots the bill and potential inflation.** The exchange unfolded as Student 1 argued universal coverage boosts overall health and fairness, while Student 2 pressed for details on funding and economic side effects.  
- **They shifted to implementation strategies, debating a phased public option, targeted tax funding, drug price caps, and technological efficiencies that preserve jobs.** Student 1 pushed gradual reforms and resource redistribution, whereas Student 2 warned about entrenched stakeholders and the challenge of overhauling a high-cost system.  
- **Guide consistently probed for specifics—questioning assumptions about inflation, bankruptcies, and market failures—and steered students to ground their values in concrete policy measures.** Its interventions sharpened the debate by pressing them to consider real-world financial burdens and stakeholder resistance when designing a balanced healthcare model.  


&gt; **Student 2, you&#39;ve raised an important economic concern, but let&#39;s dig deeper. What specific economic consequences do you foresee beyond general inflation? Many countries with universal healthcare actually spend less per capita than the US while achieving better health outcomes. If we&#39;re concerned about economic impacts, shouldn&#39;t we also consider the current economic burden of medical bankruptcies, lost productivity due to untreated conditions, and emergency room use for preventable conditions?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==bc0ebcb4e8::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students grappled with the trade-offs between tax-financed universal coverage and employment-based insurance.</strong> Student 1 (devil’s advocate) argued that job-based plans and tax aversion should limit government expansion, while Student 2 highlighted the burdens on part-time workers, gig employees, the elderly, and the disabled, stressing that existing programs like Medicare and Medicaid are underfunded and insufficient.  </li>
<li><strong>The discussion deepened through preventive care and overdiagnosis concerns, revealing nuanced tensions.</strong> Student 2 emphasized early detection as vital, whereas Student 1 pointed out risks of overdiagnosis, anxiety, and resource misallocation; their exchange showed a shift from blanket support/opposition to examining implementation challenges and potential misuses within a universal system.  </li>
<li><strong>Guide consistently pushed students to interrogate their assumptions and consider broader contexts.</strong> Its interventions steered them from surface tax and employment arguments toward questions about voluntary part-time work, chronic illness, funding oversight, preventive versus excessive care, and whether expanding targeted programs might be preferable to full universal coverage.  </li>
</ul>
<blockquote>
<p><strong>How would you respond to Student 1's claim that part-time workers are "choosing" their situation? Consider addressing whether all part-time work is truly voluntary, and what happens to people with chronic illnesses or disabilities who can't work full-time.</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students grappled with the trade-offs between tax-financed universal coverage and employment-based insurance.** Student 1 (devil’s advocate) argued that job-based plans and tax aversion should limit government expansion, while Student 2 highlighted the burdens on part-time workers, gig employees, the elderly, and the disabled, stressing that existing programs like Medicare and Medicaid are underfunded and insufficient.  
- **The discussion deepened through preventive care and overdiagnosis concerns, revealing nuanced tensions.** Student 2 emphasized early detection as vital, whereas Student 1 pointed out risks of overdiagnosis, anxiety, and resource misallocation; their exchange showed a shift from blanket support/opposition to examining implementation challenges and potential misuses within a universal system.  
- **Guide consistently pushed students to interrogate their assumptions and consider broader contexts.** Its interventions steered them from surface tax and employment arguments toward questions about voluntary part-time work, chronic illness, funding oversight, preventive versus excessive care, and whether expanding targeted programs might be preferable to full universal coverage.  


&gt; **How would you respond to Student 1&#39;s claim that part-time workers are &#34;choosing&#34; their situation? Consider addressing whether all part-time work is truly voluntary, and what happens to people with chronic illnesses or disabilities who can&#39;t work full-time.**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==98faa9a4dd::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807">
                                <ul>
<li><strong>Students coalesced around a moral argument for universal healthcare, viewing access as a basic human right regardless of legal status.</strong> They spent most of the chat emphasizing compassion for homeless and uninsured populations, with Student 1 arguing that treatment should not be denied and Student 2 echoing that citizenship shouldn't bar care.  </li>
<li><strong>Guide persistently nudged Student 2 to fulfill the devil’s advocate role by challenging assumptions on tax burdens, government efficiency, and quality concerns.</strong> It provided prompts on costs, wait times, and system design, but struggled to shift the students from consensus to genuine critique.  </li>
<li><strong>Role confusion led to underdeveloped policy debate and conflation of housing and healthcare issues, as Student 2 invoked Section 8 housing fairness in healthcare funding.</strong> This mix-up highlighted gaps in policy understanding and a reliance on broad moral appeals rather than concrete fiscal analyses.  </li>
</ul>
<blockquote>
<p><strong>What about the massive tax increases needed to fund universal healthcare? Is it fair to force taxpayers to cover others' healthcare costs?</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students coalesced around a moral argument for universal healthcare, viewing access as a basic human right regardless of legal status.** They spent most of the chat emphasizing compassion for homeless and uninsured populations, with Student 1 arguing that treatment should not be denied and Student 2 echoing that citizenship shouldn&#39;t bar care.  
- **Guide persistently nudged Student 2 to fulfill the devil’s advocate role by challenging assumptions on tax burdens, government efficiency, and quality concerns.** It provided prompts on costs, wait times, and system design, but struggled to shift the students from consensus to genuine critique.  
- **Role confusion led to underdeveloped policy debate and conflation of housing and healthcare issues, as Student 2 invoked Section 8 housing fairness in healthcare funding.** This mix-up highlighted gaps in policy understanding and a reliance on broad moral appeals rather than concrete fiscal analyses.  



&gt; **What about the massive tax increases needed to fund universal healthcare? Is it fair to force taxpayers to cover others&#39; healthcare costs?**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==b26105a6df::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="masonry-item">
                  <div class="card thread-card" id="thread-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807">
                    <div class="card-header d-flex justify-content-between align-items-center flex-nowrap">
                        <h6 class="mb-0 thread-heading" style="flex-shrink:1; min-width:0;">
                            
                                Universal Healthcare
                            
                        </h6>
                        
                        
                    </div>
                    <div class="card-body">
                        
                            <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807">
                                <ul>
<li>
<p><strong>Students role-played a debate on universal healthcare, with one arguing against it (citing tax hikes, bureaucratic waste, longer waits, and stifled innovation) and the other advocating for guaranteed coverage (highlighting uninsured workers, affordability, and social responsibility).</strong> The proponent emphasized how many full-time and unemployed people lack access, while the devil’s advocate gradually shifted from pure opposition to proposing targeted subsidies after considering access issues.</p>
</li>
<li>
<p><strong>Guide consistently challenged assumptions and prompted evidence-based replies, steering students to confront trade-offs in cost, efficiency, and innovation.</strong> By asking about per-capita spending, government inefficiencies, market competition, and alternative solutions, Guide deepened the exchange and ultimately guided the devil’s advocate toward a sliding-scale subsidy proposal.</p>
</li>
</ul>
<blockquote>
<p><strong>How do you respond to the fact that Americans already pay more per capita for healthcare than countries with universal systems The current fragmented system has high administrative costs and lacks bargaining power that centralized systems have</strong></p>
</blockquote>
                            </div>
                        
                        
                        <div class="status-message thread-status" id="status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" style="display: none;"></div>
                        <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" style="display: none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                        
                        <!-- Edit Summary Modal Content -->
                        <div id="summary-editor-container-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" class="summary-editor-container" style="display: none;">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                            </div>
                            <textarea id="summary-markdown-editor-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" class="form-control summary-markdown-editor">- **Students role-played a debate on universal healthcare, with one arguing against it (citing tax hikes, bureaucratic waste, longer waits, and stifled innovation) and the other advocating for guaranteed coverage (highlighting uninsured workers, affordability, and social responsibility).** The proponent emphasized how many full-time and unemployed people lack access, while the devil’s advocate gradually shifted from pure opposition to proposing targeted subsidies after considering access issues.

- **Guide consistently challenged assumptions and prompted evidence-based replies, steering students to confront trade-offs in cost, efficiency, and innovation.** By asking about per-capita spending, government inefficiencies, market competition, and alternative solutions, Guide deepened the exchange and ultimately guided the devil’s advocate toward a sliding-scale subsidy proposal.


&gt; **How do you respond to the fact that Americans already pay more per capita for healthcare than countries with universal systems The current fragmented system has high administrative costs and lacks bargaining power that centralized systems have**</textarea>
                            <div class="mt-3">
                                <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807">
                                    <i class="fas fa-save mr-1"></i> Save Changes
                                </button>
                                <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807">
                                    <i class="fas fa-times mr-1"></i> Cancel
                                </button>
                                <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" style="display: none;">
                                    <span class="sr-only">Saving...</span>
                                </div>
                            </div>
                            <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==7a4fd504de::0effe0e399::84d336a807" style="display: none;"></div>
                        </div>
                    </div>
                  </div>
                </div>
              
            </div>
          
        </div>
      </div>
    </div>
    
    <div style="clear:both; height:20px;"></div>
    
    <!-- Add Qualtrics Survey Data Card - if data exists -->
    
    <div class="row mb-4">
      <div class="col-12">
        <div class="py-4 mb-4">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Post-Chat Survey Data</div>
          </h5>
          <div class="card-body pt-0">
            <div class="row">
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>24</h3>
                <p class="text-muted">Total Survey Responses</p>
              </div>
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>12</h3>
                <p class="text-muted">Threads With Surveys</p>
              </div>
              <div class="col-md-4 d-flex flex-column align-items-center justify-content-center py-3">
                <h3>92.3%</h3>
                <p class="text-muted">Response Rate</p>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center text-muted small mb-0" style="gap: 1rem;">
              <span>Last updated: 2025-05-06T22:34:57.308108</span>
              
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Separate row for survey histogram charts floating on background -->
    <div class="row mb-4">
      <div class="col-12">
        
          <!-- Overall Rating and Guide Feedback -->
          <div class="row">
            
            <div class="col-md-6 mb-4">
              <div class="card h-100 thread-card">
                <div class="card-body p-0">
                  
                  
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">How was your chat?</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">🔥 Awesome</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">9 (37.5%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:37.5%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">👍 Good</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">11 (45.8%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:45.83333333333333%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">😐 It's OK</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">4 (16.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:16.666666666666664%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">👎 Not a fan</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">💩 Hated it</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.79 <span style="opacity:0.7;">(95% confidence interval: 1.49–2.10)</span></div>
    </div>
</div>
                </div>
              </div>
            </div>
            
            
            
            <div class="col-md-6 mb-4">
              <div class="card h-100 thread-card">
                <div class="card-body p-0">
                  
                  
                    
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">Guide contributed the right amount</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">21 (91.3%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:91.30434782608695%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">2 (8.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:8.695652173913043%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 0.91 <span style="opacity:0.7;">(95% confidence interval: 0.79–1.04)</span></div>
    </div>
</div>
                  
                </div>
              </div>
            </div>
            
          </div>
          
          <div style="height: 2rem;"></div>
          <div class="row">
            
            
              
            
              
            
              
            
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I felt comfortable sharing my honest opinions with my partner</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">2 (20.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:20.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">6 (60.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:60.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">2 (20.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:20.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.00 <span style="opacity:0.7;">(95% confidence interval: 0.52–1.48)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">I was not offended by my partner's perspective</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">8 (61.5%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:61.53846153846154%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">4 (30.8%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:30.76923076923077%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">1 (7.7%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:7.6923076923076925%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.54 <span style="opacity:0.7;">(95% confidence interval: 1.14–1.94)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card h-100 thread-card">
                    <div class="card-body p-0">
                      
                      
<div style="font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif; background:#1e1e2d; color:#e4e6eb; border-radius:10px; overflow:hidden; padding:0; height:100%;">
    <div style="background:#18182b; padding:20px 25px 10px 25px; border-bottom:1px solid #23233a;">
        <div style="font-size:1.1rem; font-weight:500; line-height:1.3; height:2.6em; max-height:2.6em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">It was valuable to chat with a student who did not share my perspective</div>
    </div>
    <div style="padding:25px;">
        <div style="position:relative; width:100%;">

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">4 (28.6%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:28.57142857142857%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Agree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">7 (50.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:50.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Neutral</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">3 (21.4%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:21.428571428571427%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>

            <div style="margin-bottom:12px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                    <span style="font-size:0.9rem; color:#e4e6eb;">Strongly disagree</span>
                    <span style="font-size:0.9rem; color:#a9adc1;">0 (0.0%)</span>
                </div>
                <div style="height:20px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden;">
                    <div style="height:100%; width:0.0%; background-color:#8a8aff; border-radius:4px;"></div>
                </div>
            </div>
        </div>
        <div style="text-align:center; color:#b0b3c7; font-size:13px; margin-top:10px; letter-spacing:0.01em;">mean = 1.07 <span style="opacity:0.7;">(95% confidence interval: 0.65–1.49)</span></div>
    </div>
</div>
                    </div>
                  </div>
                </div>
              
            
              
            
              
            
          </div>
          
          <!-- Opinion Changes Section -->
          
        
      </div>
    </div>
    
    <!-- End Qualtrics Survey Data Section -->
  </div>
  
<!-- Modal containers will be dynamically injected here by JS if needed -->
<div id="modal-container"></div> 
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
  

<!-- =====================
     Core Utilities
     ===================== -->
<script>
  // Debug logging utility
  function debug_log(message, level, details = null) {
    if (details) {
      console.log(`DEBUG[${level}]:`, message, details);
    } else {
      console.log(`DEBUG[${level}]:`, message);
    }
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- =====================
     Theme Toggle
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input'); // Fixed id to match the input in _header.html
    if (!themeToggle) return;
    // Determine initial theme from localStorage or template variable
    let initialTheme = localStorage.getItem('theme');
    if (!initialTheme) {
      initialTheme = 'dark-mode' === 'light-mode' ? 'light' : 'dark';
    }
    // Set initial toggle state and class
    themeToggle.checked = initialTheme === 'light';
    document.documentElement.className = initialTheme === 'light' ? 'light-mode' : 'dark-mode';
    // Add event listener for theme toggle
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.classList.remove('dark-mode');
        document.documentElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.classList.remove('light-mode');
        document.documentElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
  });
</script>

<!-- =====================
     Summary/Report Generation & Polling
     ===================== -->
<script>
  let pollingInterval = null;
  let cancelRequested = false;
  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    let hasSavedSummaries = "true" === "true";
    
    // Check directly if there are any thread summaries actually present on the page
    const allThreadSummaries = document.querySelectorAll('.thread-summary.markdown-content');
    const hasVisibleSummaries = Array.from(allThreadSummaries).some(el => 
      el.innerHTML.trim() !== '' && el.style.display !== 'none'
    );
    
    // If we have visible summaries on the page, allow generating the report regardless of server-side flag
    if (hasVisibleSummaries) {
      hasSavedSummaries = true;
      debug_log("Enabling report button because visible summaries were found on page", 1);
    }
    
    if (reportBtn && hasSavedSummaries) {
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    if (hasGeneratingThreads) {
      startPolling();
      if (generateBtn) generateBtn.style.display = 'none';
      if (cancelBtn) cancelBtn.style.display = 'inline-block';
    }
    // Generate summaries
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        generateBtn.style.display = 'none';
        if (cancelBtn) cancelBtn.style.display = 'inline-block';
        fetch('/assignment/84d336a807/generate_summaries', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1);
            startPolling();
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1);
          }
        })
        .catch(error => debug_log("Network error:", error, 1));
      });
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/84d336a807/cancel_generation', { method: 'POST' })
            .then(response => {
              if (response.ok) {
                stopPolling();
                document.querySelectorAll('.thread-status').forEach(status => {
                  if (status.textContent === 'Queued for generation...') status.style.display = 'none';
                });
                document.querySelectorAll('.spinner-border').forEach(spinner => spinner.style.display = 'none');
                generateBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'none';
              }
            });
        });
      }
    }
    // Report button
    if (reportBtn) {
      // Show/hide advanced thinking controls based on model selection
      const modelToggleGroup = document.getElementById('report-model-toggle-group');
      const advancedThinkingControls = document.getElementById('advanced-thinking-controls');
      function updateThinkingControlsVisibility() {
        const checked = modelToggleGroup.querySelector('input[type=radio]:checked');
        if (checked && checked.value === 'anthropic') {
          advancedThinkingControls.style.display = 'flex';
        } else {
          advancedThinkingControls.style.display = 'none';
        }
      }
      if (modelToggleGroup && advancedThinkingControls) {
        modelToggleGroup.addEventListener('change', updateThinkingControlsVisibility);
        updateThinkingControlsVisibility();
      }
      reportBtn.addEventListener('click', function() {
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        reportBtn.disabled = true;
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        // Collect all visible summaries from the UI
        const summaries = {};
        document.querySelectorAll('.thread-card').forEach(card => {
          const threadId = card.id.replace('thread-', '');
          const summaryEl = card.querySelector('.thread-summary');
          if (summaryEl && summaryEl.innerHTML.trim() !== '' && summaryEl.style.display !== 'none') {
            // Try to get the raw markdown if available
            let summaryContent = '';
            const editorEl = card.querySelector('.summary-markdown-editor');
            if (editorEl && editorEl.value.trim() !== '') {
              summaryContent = editorEl.value.trim();
            } else {
              // Otherwise use the HTML content
              summaryContent = summaryEl.innerHTML;
            }
            summaries[threadId] = {
              thread_id: threadId,
              assignment_id: '84d336a807',
              summary: summaryContent,
              content: summaryContent,
              status: 'completed'
            };
          }
        });
        debug_log(`Collected ${Object.keys(summaries).length} visible summaries from UI`, 1);
        // Get selected model provider
        let modelProvider = 'openai';
        const checked = document.querySelector('#report-model-toggle-group input[type=radio]:checked');
        if (checked) modelProvider = checked.value;
        // Get advanced thinking mode and budget if Anthropic
        let enableThinking = false;
        let thinkingBudgetTokens = 4096;
        if (modelProvider === 'anthropic') {
          const enableThinkingCheckbox = document.getElementById('enable-thinking-checkbox');
          const thinkingBudgetInput = document.getElementById('thinking-budget-input');
          if (enableThinkingCheckbox && enableThinkingCheckbox.checked) {
            enableThinking = true;
          }
          if (thinkingBudgetInput && thinkingBudgetInput.value) {
            thinkingBudgetTokens = parseInt(thinkingBudgetInput.value) || 4096;
          }
        }
        fetch('/assignment/84d336a807/generate_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            summaries: summaries,
            model_provider: modelProvider,
            enable_thinking: enableThinking,
            thinking_budget_tokens: thinkingBudgetTokens
          })
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1);
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1);
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    // Refresh data
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        refreshDataBtn.disabled = true;
        fetch('/assignment/84d336a807/refresh_data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    // Regenerate title
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        fetch('/assignment/84d336a807/regenerate_title', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) titleEl.textContent = data.title;
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
    
    // Final check to ensure report button is enabled if summaries exist
    setTimeout(function() {
      const reportBtn = document.getElementById('report-btn');
      if (reportBtn && reportBtn.disabled) {
        const visibleSummaries = document.querySelectorAll('.thread-summary.markdown-content');
        const hasContent = Array.from(visibleSummaries).some(el => 
          el.innerHTML.trim() !== '' && el.style.display !== 'none'
        );
        
        if (hasContent) {
          reportBtn.disabled = false;
          debug_log("Enabling report button in final check - summaries exist", 1);
        }
      }
    }, 500); // Short delay to ensure all content is processed
  });
  function startPolling() {
    if (pollingInterval) clearInterval(pollingInterval);
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    checkSummaryStatus();
  }
  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }
  function checkSummaryStatus() {
    fetch('/assignment/84d336a807/summary_status')
      .then(response => response.json())
      .then(data => {
        let activeGeneration = false;
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'inline-block';
          } else if (threadInfo.status === 'completed') {
            if (statusEl) statusEl.style.display = 'none';
            if (spinnerEl) spinnerEl.style.display = 'none';
            if (summaryEl && threadInfo.render_html) {
              summaryEl.innerHTML = threadInfo.render_html;
              summaryEl.style.display = 'block';
              // Update the markdown textarea value for this thread
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                // If threadInfo has markdown, use it; otherwise, fallback to extracting from HTML
                if (threadInfo.markdown) {
                  textarea.value = threadInfo.markdown;
                } else if (threadInfo.render_html) {
                  // Optionally, convert HTML back to markdown if needed (or leave blank)
                  textarea.value = '';
                }
                // If CodeMirror is open for this thread, update its value too
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(textarea.value);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              // If a summary was successfully displayed, enable the report button
              const reportBtn = document.getElementById('report-btn');
              if (reportBtn) {
                reportBtn.disabled = false;
                debug_log("Enabling report button because a summary was loaded", 1);
              }
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) spinnerEl.style.display = 'none';
          }
        });
        if (!activeGeneration) {
          stopPolling();
          const generateBtn = document.getElementById('generate-btn');
          const cancelBtn = document.getElementById('cancel-btn');
          if (generateBtn) generateBtn.style.display = 'inline-block';
          if (cancelBtn) cancelBtn.style.display = 'none';
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => debug_log('Error checking summary status:', error, 1));
  }
  function checkReportStatus() {
    fetch('/assignment/84d336a807/report_status')
      .then(response => response.json())
      .then(data => {
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        debug_log("Report status update:", data, 1);
        
        if (data.status === 'completed') {
          // Report generation completed
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Only update the UI if we have content
          if (data.content && reportSection) {
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            const styleTag = document.createElement('style');
            styleTag.textContent = `#report-content ul ul {margin-top:0.5em;margin-bottom:0.5em;padding-left:2em;}#report-content li > ul {margin-left:1em;}`;
            reportContent.appendChild(styleTag);
            
            // Check if render_html is available first, otherwise use content
            if (data.render_html) {
              reportContent.innerHTML += data.render_html;
            } else {
              reportContent.innerHTML += data.content;
            }
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2 d-flex justify-content-end align-items-center';
            
            // Create formatted date display
            const formattedDate = new Date(data.generated_at).toLocaleDateString('en-US', {
              month: 'short', 
              day: 'numeric', 
              year: 'numeric',
              hour: 'numeric',
              minute: '2-digit',
              hour12: true
            });
            
            generatedText.innerHTML = `
              <span class="text-right" style="flex:1; text-align:right;">Generated on: ${formattedDate}</span>
              ${!exportMode ? `
                <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-2" id="edit-report-btn" title="Edit report" style="vertical-align: baseline;">
                  <i class="fas fa-pencil-alt"></i>
                </button>
              ` : ''}
            `;
            
            // Clear existing content and append new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert UTC timestamps to local
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) { console.error('Error converting time:', e); }
            });
            
            debug_log("Updated report UI with new content", 1);
          } else {
            debug_log("Report completed but no content received", 2);
          }
        } else if (data.status === 'generating' || data.status === 'running') {
          // Report is still being generated
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          
          // Show elapsed time if available
          if (data.elapsed_seconds) {
            const elapsed = Math.round(data.elapsed_seconds);
            if (noReportMsg) {
              noReportMsg.textContent = `Generating instructor report... (${elapsed}s)`;
            }
          }
          
          // Continue polling
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        } else {
          // Unknown or not_started status
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (data.report_exists && reportSection) {
            // If report exists but no status, try refreshing the page after a timeout
            debug_log("Report exists but status not provided - will try to reload content", 2);
            setTimeout(checkReportStatus, 2000);
          }
        }
      })
      .catch(error => {
        debug_log("Error checking report status:", error, 2);
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- =====================
     CodeMirror for Editing
     ===================== -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Report editing
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        if (reportEditor) reportEditor.refresh();
      });
    }
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        const markdown = reportEditor.getValue();
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        editorSpinner.style.display = 'inline-block';
        fetch('/assignment/84d336a807/edit_report', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ markdown: markdown })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          if (data.success) {
            reportContent.innerHTML = data.content;
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusMessage.style.display = 'none'; }, 3000);
      }
    }
  });
</script>

<!-- =====================
     Summary Editing (CodeMirror)
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    const summaryEditors = {};
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          let markdownContent = textarea.value;
          if (!markdownContent) {
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          summaryEditors[sessionId].setValue(markdownContent);
          summaryEditors[sessionId].refresh();
        } else {
          summaryEditors[sessionId].refresh();
        }
      });
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          const markdown = summaryEditors[sessionId].getValue();
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          fetch('/assignment/84d336a807/edit_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId, markdown: markdown })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.render_html || data.content;
              summaryElement.style.display = 'block';
              // Update the markdown textarea value
              var textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
              if (textarea) {
                textarea.value = markdown;
                if (window.summaryEditors && window.summaryEditors[sessionId]) {
                  window.summaryEditors[sessionId].setValue(markdown);
                  window.summaryEditors[sessionId].refresh();
                }
              }
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      btn.addEventListener('click', function() {
        // Removed confirmation dialog for immediate regeneration
        const statusElement = document.getElementById(`status-${sessionId}`);
        const spinnerElement = document.getElementById(`spinner-${sessionId}`);
        if (statusElement && spinnerElement) {
          statusElement.textContent = 'Regenerating summary...';
          statusElement.className = 'status-message thread-status text-info';
          statusElement.style.display = 'block';
          spinnerElement.style.display = 'inline-block';
          summaryElement.style.opacity = '0.5';
          fetch('/assignment/84d336a807/regenerate_summary', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ session_id: sessionId })
          })
          .then(response => response.json())
          .then(data => {
            spinnerElement.style.display = 'none';
            if (data.success) {
              summaryElement.innerHTML = data.content;
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message;
              statusElement.className = 'status-message thread-status success';
              attachButtonListeners(sessionId);
              setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
            } else {
              summaryElement.style.opacity = '1';
              statusElement.textContent = data.message || 'Error regenerating summary';
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            }
          })
          .catch(error => {
            spinnerElement.style.display = 'none';
            summaryElement.style.opacity = '1';
            statusElement.textContent = 'Error regenerating summary: ' + error;
            statusElement.className = 'status-message thread-status error';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
          });
        }
      });
    });
    function attachButtonListeners(sessionId) {
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          // Removed confirmation dialog for immediate regeneration
          const summaryElement = document.getElementById(`summary-${sessionId}`);
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            summaryElement.style.opacity = '0.5';
            fetch('/assignment/84d336a807/regenerate_summary', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ session_id: sessionId })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              if (data.success) {
                summaryElement.innerHTML = data.content;
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                attachButtonListeners(sessionId);
                setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
            });
          }
        });
      }
    }
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      if (type === 'success') {
        setTimeout(() => { statusEl.style.display = 'none'; }, 3000);
      }
    }
  });
</script>

<!-- =====================
     Export/Share Functionality
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Export button
    const exportBtn = document.querySelector('a[href*="/export"]');
    if (exportBtn) {
      exportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        const exportUrl = new URL(this.href, window.location.origin);
        
        // Add selected histogram fields to export URL
        const selectedHistograms = getSelectedHistograms();
        if (selectedHistograms.length > 0) {
          exportUrl.searchParams.set('histograms', selectedHistograms.join(','));
        }
        
        exportUrl.searchParams.set('theme', currentTheme);
        window.location.href = exportUrl.toString();
      });
    }
    // Set theme class on HTML element for export mode
    if ('True' === 'True' && 'dark-mode') {
      document.documentElement.className = 'dark-mode';
    }
    // Share export button
    const shareExportBtn = document.getElementById('share-export-btn');
    if (shareExportBtn) {
      shareExportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        shareExportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
        shareExportBtn.disabled = true;
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        
        // Add selected histogram fields to share request
        const selectedHistograms = getSelectedHistograms();
        
        fetch('/assignment/84d336a807/share_export', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            theme: currentTheme,
            selected_histograms: selectedHistograms
          })
        })
        .then(response => response.json())
        .then(data => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          if (data.success) {
            const modalHtml = `
              <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content" style="background-color: var(--card-bg); color: var(--text-color);">
                    <div class="modal-header" style="border-color: var(--border-color);">
                      <h5 class="modal-title" id="shareModalLabel">Share Export</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: var(--text-color);">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Your export has been saved. Share this link:</p>
                      <div class="input-group mb-3">
                        <input type="text" id="share-link" class="form-control" value="${data.share_url}" readonly style="background-color: var(--input-bg); color: var(--text-color); border-color: var(--border-color);">
                        <div class="input-group-append">
                          <button class="btn btn-primary" type="button" id="copy-link-btn">
                            <i class="fas fa-copy"></i> Copy
                          </button>
                        </div>
                      </div>
                      <div id="copy-feedback" class="text-success" style="display: none;">Link copied to clipboard!</div>
                    </div>
                    <div class="modal-footer" style="border-color: var(--border-color);">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <a href="${data.share_url}" target="_blank" class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> Open
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            `;
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHtml;
            document.body.appendChild(modalContainer);
            $('#shareModal').modal('show');
            document.getElementById('copy-link-btn').addEventListener('click', function() {
              const shareLink = document.getElementById('share-link');
              shareLink.select();
              document.execCommand('copy');
              const copyFeedback = document.getElementById('copy-feedback');
              copyFeedback.style.display = 'block';
              setTimeout(() => { copyFeedback.style.display = 'none'; }, 3000);
            });
            $('#shareModal').on('hidden.bs.modal', function() {
              modalContainer.remove();
            });
          } else {
            alert('Error: ' + (data.message || 'Could not generate shared export'));
          }
        })
        .catch(error => {
          shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareExportBtn.disabled = false;
          alert('Error: Could not generate shared export');
          console.error('Error:', error);
        });
      });
    }
    
    // Helper function to get selected histograms
    function getSelectedHistograms() {
      const checkboxes = document.querySelectorAll('.export-histogram-checkbox:checked');
      return Array.from(checkboxes).map(cb => cb.getAttribute('data-field')).filter(Boolean);
    }
  });
</script>

<!-- =====================
     Histogram Selection for Export
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle the select/deselect all buttons
    const selectAllBtn = document.getElementById('select-all-histograms');
    const deselectAllBtn = document.getElementById('deselect-all-histograms');
    
    if (selectAllBtn) {
      selectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = true;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.color = '#8a8aff';
            setTimeout(() => {
              label.style.color = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = selectAllBtn.innerHTML;
        selectAllBtn.innerHTML = '<i class="fas fa-check mr-1"></i> All Selected';
        setTimeout(() => {
          selectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    if (deselectAllBtn) {
      deselectAllBtn.addEventListener('click', function() {
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          checkbox.checked = false;
          // Add a small animation to show the change
          const label = checkbox.nextElementSibling;
          if (label) {
            label.style.transition = 'color 0.3s ease';
            label.style.opacity = '0.7';
            setTimeout(() => {
              label.style.opacity = '';
            }, 500);
          }
        });
        // Show visual feedback
        const originalText = deselectAllBtn.innerHTML;
        deselectAllBtn.innerHTML = '<i class="fas fa-times mr-1"></i> All Deselected';
        setTimeout(() => {
          deselectAllBtn.innerHTML = originalText;
        }, 1000);
        // Save selections to localStorage
        saveHistogramSelections();
      });
    }
    
    // Initialize checkboxes from localStorage if available
    const savedSelections = localStorage.getItem('selected_histograms');
    if (savedSelections) {
      try {
        const selections = JSON.parse(savedSelections);
        document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
          const field = checkbox.getAttribute('data-field');
          if (field && selections.includes(field)) {
            checkbox.checked = true;
          }
        });
      } catch (e) {
        console.error('Error loading saved histogram selections:', e);
      }
    } else {
      // If no saved selections, select all by default
      document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
        checkbox.checked = true;
      });
      saveHistogramSelections();
    }
    
    // Save selections to localStorage when changed
    document.querySelectorAll('.export-histogram-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', saveHistogramSelections);
    });
    
    function saveHistogramSelections() {
      const selectedFields = Array.from(document.querySelectorAll('.export-histogram-checkbox:checked'))
        .map(cb => cb.getAttribute('data-field'))
        .filter(Boolean);
      
      localStorage.setItem('selected_histograms', JSON.stringify(selectedFields));
    }
  });
</script>

<!-- =====================
     Social Sharing Buttons
     ===================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('twitter-share')) {
      const pageUrl = encodeURIComponent(window.location.href);
      const shareMessage = encodeURIComponent("Check out the assignments my students just finished on Sway! The AI Guide killed it! 🤯");
      
      // X (formerly Twitter) sharing
      const xBtn = document.getElementById('twitter-share');
      xBtn.href = `https://x.com/intent/tweet?text=${shareMessage}&url=${pageUrl}`;
      xBtn.target = '_blank';
      xBtn.rel = 'noopener noreferrer';
      
      // Facebook sharing
      const facebookBtn = document.getElementById('facebook-share');
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}&quote=${shareMessage}`;
      facebookBtn.target = '_blank';
      facebookBtn.rel = 'noopener noreferrer';
      
      // LinkedIn sharing
      const linkedinBtn = document.getElementById('linkedin-share');
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
      linkedinBtn.target = '_blank';
      linkedinBtn.rel = 'noopener noreferrer';
      
      // Instagram sharing (requires copy to clipboard)
      const instagramBtn = document.getElementById('instagram-share');
      instagramBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const textarea = document.createElement('textarea');
        textarea.value = `${shareMessage}\n\n${window.location.href}`;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Link and message copied to clipboard. Paste this into Instagram to share!');
      });
    }
  });
</script>

<!-- =====================
     CSS for Status Messages and CodeMirror
     ===================== -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>
  <script src="/static/js/histogram-title-fixer.js"></script>
  
  <!-- Script for polished Show More/Fewer functionality in all modes -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Instructor Report Show More
      const setupReportShowMore = function() {
        const reportContent = document.getElementById('report-content');
        if (reportContent) {
          const headings = reportContent.querySelectorAll('h3');
          if (headings.length > 2) {
            const secondHeading = headings[1];
            const hiddenContentWrapper = document.createElement('div');
            hiddenContentWrapper.id = 'hidden-report-content';
            hiddenContentWrapper.className = 'collapsible-section collapsed';
            let currentNode = secondHeading.nextElementSibling;
            let nodesToMove = [];
            while (currentNode) {
              if (currentNode.tagName === 'H3' && currentNode !== secondHeading) {
                nodesToMove.push(currentNode);
              } else if (nodesToMove.length > 0) {
                nodesToMove.push(currentNode);
              }
              currentNode = currentNode.nextElementSibling;
            }
            nodesToMove.forEach(node => { hiddenContentWrapper.appendChild(node); });
            reportContent.appendChild(hiddenContentWrapper);
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'btn btn-thread-toggle show-toggle-btn';
            showMoreBtn.innerHTML = 'Show More <i class="fas fa-chevron-down"></i>';
            reportContent.insertBefore(showMoreBtn, hiddenContentWrapper);
            showMoreBtn.addEventListener('click', function() {
              const expanded = hiddenContentWrapper.classList.contains('collapsed');
              if (expanded) {
                hiddenContentWrapper.classList.remove('collapsed');
                showMoreBtn.classList.add('expanded');
                showMoreBtn.innerHTML = 'Show Less <i class="fas fa-chevron-up"></i>';
              } else {
                hiddenContentWrapper.classList.add('collapsed');
                showMoreBtn.classList.remove('expanded');
                showMoreBtn.innerHTML = 'Show More <i class="fas fa-chevron-down"></i>';
              }
            });
          }
        }
      };
      // Threads Masonry Show More (move nodes in/out of DOM for perfect layout)
      const setupThreadsShowMore = function() {
        const masonryGrid = document.querySelector('.masonry-grid');
        if (masonryGrid && masonryGrid.children.length > 2) {
          const masonryItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
          const extraItems = masonryItems.slice(2); // items to hide/show
          let removedItems = [];
          const showMoreThreadsBtn = document.createElement('button');
          showMoreThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          const updateShowMoreText = () => {
            const count = removedItems.length;
            showMoreThreadsBtn.innerHTML = `Show ${count} More Threads <i class="fas fa-chevron-down"></i>`;
          };
          removedItems = [...extraItems];
          updateShowMoreText();
          const showFewerThreadsBtn = document.createElement('button');
          showFewerThreadsBtn.className = 'btn btn-thread-toggle show-toggle-btn';
          showFewerThreadsBtn.innerHTML = 'Show Fewer Threads <i class="fas fa-chevron-up"></i>';
          showFewerThreadsBtn.style.display = 'none';
          const threadListSection = document.querySelector('.thread-list');
          if (threadListSection) {
            const spacerDiv = document.createElement('div');
            spacerDiv.style.height = '20px';
            spacerDiv.style.clear = 'both';
            spacerDiv.style.display = 'none';
            threadListSection.appendChild(spacerDiv);
            threadListSection.appendChild(showFewerThreadsBtn);
          }
          masonryGrid.parentNode.insertBefore(showMoreThreadsBtn, masonryGrid.nextSibling);
          // Initially remove extra items from the grid
          extraItems.forEach(item => {
            masonryGrid.removeChild(item);
          });
          // Force reflow after initial removal
          masonryGrid.offsetHeight;
          showMoreThreadsBtn.addEventListener('click', function() {
            // Add extra items back to the grid
            removedItems.forEach(item => {
              masonryGrid.appendChild(item);
            });
            removedItems = [];
            updateShowMoreText();
            // Force reflow after adding
            masonryGrid.offsetHeight;
            showMoreThreadsBtn.style.display = 'none';
            showFewerThreadsBtn.style.display = 'block';
            if (threadListSection && threadListSection.lastChild.previousSibling) threadListSection.lastChild.previousSibling.style.display = 'block';
          });
          showFewerThreadsBtn.addEventListener('click', function() {
            // Remove extra items from the grid again
            const allItems = Array.from(masonryGrid.querySelectorAll('.masonry-item'));
            const toRemove = allItems.slice(2);
            toRemove.forEach(item => {
              removedItems.push(item);
              masonryGrid.removeChild(item);
            });
            updateShowMoreText();
            // Force reflow after removal
            masonryGrid.offsetHeight;
            showMoreThreadsBtn.style.display = 'block';
            showFewerThreadsBtn.style.display = 'none';
            if (threadListSection && threadListSection.lastChild.previousSibling) threadListSection.lastChild.previousSibling.style.display = 'none';
            masonryGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
          });
        }
      };
      setupReportShowMore();
      setupThreadsShowMore();
    });
  </script>
  
  <!-- Script to disable hover animations -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create a style element
      var style = document.createElement('style');
      
      // Add CSS rules to disable hover animations
      style.innerHTML = `
        .card:hover, 
        .thread-item:hover, 
        .histogram-container:hover, 
        .histogram-bar:hover, 
        .histogram-card:hover {
          transform: none !important;
        }
      `;
      
      // Append the style element to the head
      document.head.appendChild(style);
    });
  </script>
</body>
</html>