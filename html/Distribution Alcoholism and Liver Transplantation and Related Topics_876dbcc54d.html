
<!doctype html>
<html lang="en" class="light-mode">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Distribution, Alcoholism and Liver Transplantation and Related Topics</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    :root {
      /* Dark mode theme variables (default) */
      --bg-color: #121212;
      --card-bg: #1e1e2d;
      --card-header-bg: #252538;
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #2d2d43;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #252538;
      --message-right-bg: #1a1a2e;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple theme */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    body { 
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.9em;
      padding: 6px 12px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
      transform: rotate(180deg);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: rotate(180deg) scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 30px;
      column-count: 1;
      column-gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        column-count: 2;
      }
    }
    .thread-item {
      display: inline-block; /* Required for column layout */
      width: 100%;
      margin-bottom: 15px;
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 12px;
      transition: all 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      break-inside: avoid; /* Prevents items from breaking across columns */
      transform: translateY(0);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      transform: translateY(-5px);
      box-shadow: 0 10px 16px rgba(0,0,0,0.25);
      border: 2px solid #ff851b;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .thread-header .thread-actions {
      display: flex;
      align-items: center;
      margin-left: 30px;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to not expand beyond the left column's Info container */
    #topics-container {
        max-height: 345px;
        min-height: 345px;
        overflow-y: auto;
    }
    
    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }
  </style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>
</head>
<body>
<div class="dashboard-container">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <div class="title-text"><i class="fas fa-tasks mr-2"></i> Assignment Details</div>
        
        
        
        
      </div>
      
    </div>
    <div class="card-body">
      <div class="row">
        <!-- Left column: General Information & Timelines -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
          </h5>
          
            <div id="timelines-container" class="info-box">
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Completion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-03-24 04:59:00+00:00">2025-03-24 04:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Opinion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-03-20 04:59:00+00:00">2025-03-20 04:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
            </div>
          

          <h5 class="section-title mt-4">
            <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
          </h5>
          <div id="info-container" class="info-box">
            <div class="row mb-3">
              <div class="col-5 col-label">Instructor:</div>
              <div class="col-7 col-value">[redacted]</div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Min. chat time:</div>
              <div class="col-7 col-value">
                
                  25 minutes
                
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Created on:</div>
              <div class="col-7 col-value">
                <span class="utc-time" data-utc-time="2025-03-18T16:11:51.180775+00:00">2025-03-18T16:11:51.180775+00:00</span>
                <span class="local-time"></span>
              </div>
            </div>
            
            
            <div class="row mb-3">
              <div class="col-5 col-label">Chat threads:</div>
              <div class="col-7 col-value">14 (13 disagree)</div>
            </div>
          </div>
        </div>

        <!-- Right column: Topics and Chat Threads -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
          </h5>
          
            <div id="topics-container" class="info-box">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Distribution</div>
                  <div>The right way to distribute healthcare resources is ability to pay. If you can pay, then you can get treatment. If you can&#39;t, then you shouldn&#39;t get treatment.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Alcoholism and Liver Transplantation</div>
                  <div>Alcoholics should not compete for livers on equal terms with non-alcoholics.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Disability Discrimination</div>
                  <div>When a person with a disability and a person without a disability need identical medical treatment, and we can only provide treatment to one of them, we should provide treatment to the person without the disability.</div>
                </div>
                
              
              <!-- Removed toggle link; topics will scroll if content overflows -->
            </div>
          
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i>Opinion scale: -3 Strongly Disagree to +3 Strongly Agree
          </div>
          <div class="info-box">
            
              <div class="row">
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Distribution" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Alcoholism and Liver Transplantation" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Disability Discrimination" class="img-fluid" />
                    </div>
                  </div>
                
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text">
              <i class="fas fa-file-alt mr-1"></i> Instructor Report
            </div>
            
          </h5>
          <div class="info-box" id="report-section">
            
              <div id="report-content" class="markdown-content"><p>This assignment asked students to debate controversial healthcare resource allocation strategies, including whether treatment should be provided based on ability to pay, if alcoholics should compete equally for liver transplants, and how to approach treatment when disability is involved. The discussions, guided by Guides incisive prompts, covered both practical and ethical dimensions as students explored fairness, responsibility, and the consequences of applying rigid criteria in life-or-death situations.</p>
<h3>Themes</h3>
<ul>
<li><strong>Healthcare distribution sparked debates on fairness versus pragmatism.</strong> Many students contrasted the idea of care being a universal right with arguments that paying for care could prevent crippling debt and ensure sustainability.  </li>
<li><strong>Ethical dilemmas in liver transplant eligibility for alcoholics emerged prominently.</strong> Discussions weighed personal responsibility against the complexity of addiction, with some students stressing measurable sobriety while others argued for compassionate, need-based treatment.  </li>
<li><strong>The challenge of disability discrimination in medical allocation was a recurring point.</strong> Students discussed whether objective criteria or fairness should govern decisions, with insightful comments noting that strict quality-of-life metrics might unjustly disadvantage people with disabilities.  </li>
<li><strong>Underlying tensions between utilitarian and deontological approaches were evident.</strong> Participants grappled with whether maximizing outcomes or upholding equal rights should guide these critical healthcare decisions.</li>
</ul>
<h3>Common Ground</h3>
<ul>
<li><strong>Students commonly acknowledged the multifaceted nature of ethical decision-making.</strong> Despite differing opinions, many agreed that resource scarcity requires a delicate balance between practical outcomes and moral imperatives.  </li>
<li><strong>There was shared recognition that no single metric can resolve allocation challenges.</strong> Several discussions concluded that blending multiple criteriasuch as urgency, expected success, and fairnessoffers a more ethically sound approach than binary decision-making.</li>
</ul>
<h3>Persistent Disagreement</h3>
<ul>
<li><strong>Deep divisions remained on whether ability to pay should determine access to healthcare.</strong> Some argued that linking care to payment was a pragmatic necessity, while others maintained it undermined the principle of universal access, with Guide intensifying the debate through targeted questions.  </li>
<li><strong>Contentious views on accountability in liver transplantation and the role of disability status persisted.</strong> Students clashed over if personal responsibility should influence eligibility and whether incorporating disability factors inherently devalues equal treatment, prompting Guide to continuously challenge assumptions and demand clearer, more nuanced criteria.</li>
</ul>
<h3>Guide's Role</h3>
<ul>
<li><strong>Guide consistently challenged students to scrutinize their assumptions.</strong> By posing incisive, targeted questions, Guide prompted students to articulate and refine their reasoning, helping reveal underlying tensions in their arguments.  </li>
<li><strong>Guide fostered a deeper exploration of ethical nuances and practical challenges.</strong> Its interventions pushed students to consider complex interdependenciessuch as balancing compassion with accountabilityand to move beyond simplistic, binary positions in their debates.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Students positions evolved dynamically under Guides probing questions.</strong> In several discussions, initial hardline stances softened into more nuanced perspectives as students reconsidered the interplay between fairness and practicality.  </li>
<li><strong>The dialogues revealed a clear appetite for multi-dimensional frameworks.</strong> The evolving debates suggest that further exploration into composite decision-making models may provide valuable lessons on how to integrate ethical theory with real-world constraints.</li>
</ul></div>
              <div class="text-muted mt-2">
                Generated on: <span class="utc-time" data-utc-time="2025-03-30T21:59:19.868000+00:00">2025-03-30T21:59:19.868000+00:00</span><span class="local-time"></span>
                
              </div>
              <!-- Add the editor container here -->
              <div id="report-editor-container" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
                </div>
                <textarea id="report-markdown-editor" class="form-control">This assignment asked students to debate controversial healthcare resource allocation strategies, including whether treatment should be provided based on ability to pay, if alcoholics should compete equally for liver transplants, and how to approach treatment when disability is involved. The discussions, guided by Guides incisive prompts, covered both practical and ethical dimensions as students explored fairness, responsibility, and the consequences of applying rigid criteria in life-or-death situations.

### Themes
- **Healthcare distribution sparked debates on fairness versus pragmatism.** Many students contrasted the idea of care being a universal right with arguments that paying for care could prevent crippling debt and ensure sustainability.  
- **Ethical dilemmas in liver transplant eligibility for alcoholics emerged prominently.** Discussions weighed personal responsibility against the complexity of addiction, with some students stressing measurable sobriety while others argued for compassionate, need-based treatment.  
- **The challenge of disability discrimination in medical allocation was a recurring point.** Students discussed whether objective criteria or fairness should govern decisions, with insightful comments noting that strict quality-of-life metrics might unjustly disadvantage people with disabilities.  
- **Underlying tensions between utilitarian and deontological approaches were evident.** Participants grappled with whether maximizing outcomes or upholding equal rights should guide these critical healthcare decisions.

### Common Ground
- **Students commonly acknowledged the multifaceted nature of ethical decision-making.** Despite differing opinions, many agreed that resource scarcity requires a delicate balance between practical outcomes and moral imperatives.  
- **There was shared recognition that no single metric can resolve allocation challenges.** Several discussions concluded that blending multiple criteriasuch as urgency, expected success, and fairnessoffers a more ethically sound approach than binary decision-making.

### Persistent Disagreement
- **Deep divisions remained on whether ability to pay should determine access to healthcare.** Some argued that linking care to payment was a pragmatic necessity, while others maintained it undermined the principle of universal access, with Guide intensifying the debate through targeted questions.  
- **Contentious views on accountability in liver transplantation and the role of disability status persisted.** Students clashed over if personal responsibility should influence eligibility and whether incorporating disability factors inherently devalues equal treatment, prompting Guide to continuously challenge assumptions and demand clearer, more nuanced criteria.

### Guide&#39;s Role
- **Guide consistently challenged students to scrutinize their assumptions.** By posing incisive, targeted questions, Guide prompted students to articulate and refine their reasoning, helping reveal underlying tensions in their arguments.  
- **Guide fostered a deeper exploration of ethical nuances and practical challenges.** Its interventions pushed students to consider complex interdependenciessuch as balancing compassion with accountabilityand to move beyond simplistic, binary positions in their debates.

### Insights
- **Students positions evolved dynamically under Guides probing questions.** In several discussions, initial hardline stances softened into more nuanced perspectives as students reconsidered the interplay between fairness and practicality.  
- **The dialogues revealed a clear appetite for multi-dimensional frameworks.** The evolving debates suggest that further exploration into composite decision-making models may provide valuable lessons on how to integrate ethical theory with real-world constraints.</textarea>
                <div class="mt-3">
                  <button id="save-report-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-1"></i> Save Changes
                  </button>
                  <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
                    <i class="fas fa-times mr-1"></i> Cancel
                  </button>
                  <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
                </div>
                <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
          <div class="info-box thread-list" id="thread-list">
            
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students debated whether alcoholics should receive equal consideration for liver transplants.</strong> Student 1 argued that medical prioritization should focus on recovery potential and compassion rather than stigmatizing a diagnosable disease, while Student 2 stressed personal responsibility and the need for adjusted urgency based on self-inflicted conditions.  </li>
<li><strong>Guide actively challenged the students to examine the implications of their views.</strong> Guide questioned if denying equal access for alcoholics on the basis of self-inflicted conditions might also apply to other health issues driven by personal choices, prompting the group to consider how to balance medical urgency with accountability.</li>
</ul>
<blockquote>
<p><strong>Student 1, I'd like to challenge your characterization of alcoholism as "purely selfish" behavior. The medical community recognizes alcoholism as a complex disease with genetic, psychological, and social components. How would you respond to Student 2's point about the high comorbidity between alcoholism and mental illness? This suggests that many alcoholics aren't simply making poor choices, but are struggling with underlying conditions that complicate their decision-making.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated whether alcoholics should receive equal consideration for liver transplants.** Student 1 argued that medical prioritization should focus on recovery potential and compassion rather than stigmatizing a diagnosable disease, while Student 2 stressed personal responsibility and the need for adjusted urgency based on self-inflicted conditions.  
- **Guide actively challenged the students to examine the implications of their views.** Guide questioned if denying equal access for alcoholics on the basis of self-inflicted conditions might also apply to other health issues driven by personal choices, prompting the group to consider how to balance medical urgency with accountability.

&gt; **Student 1, I&#39;d like to challenge your characterization of alcoholism as &#34;purely selfish&#34; behavior. The medical community recognizes alcoholism as a complex disease with genetic, psychological, and social components. How would you respond to Student 2&#39;s point about the high comorbidity between alcoholism and mental illness? This suggests that many alcoholics aren&#39;t simply making poor choices, but are struggling with underlying conditions that complicate their decision-making.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==5e19875cdd::student-dwfilmvkdq==cb401c60de::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students debated the ethics of pre-treatment requirements for liver transplants, contending that conditions like alcoholism and obesityconsidered diseases rather than moral failingswarrant tailored interventions.</strong> The discussion focused on mandating pre-medical therapy to optimize outcomes and increase post-transplant quality of life, while acknowledging concerns that patients might relapse and "waste" a donated organ.  </li>
<li><strong>Guide challenged the students by questioning the validity of the claim that alcoholics risk wasting a transplant and probed for a balanced middle ground.</strong> One participant responded with a structured three-point argument rebutting common moral double standards, citing research on comparable transplant success rates, and stressing that similar risks exist for other health conditions, even as minor technical glitches with the survey briefly interrupted the flow.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated the ethics of pre-treatment requirements for liver transplants, contending that conditions like alcoholism and obesityconsidered diseases rather than moral failingswarrant tailored interventions.** The discussion focused on mandating pre-medical therapy to optimize outcomes and increase post-transplant quality of life, while acknowledging concerns that patients might relapse and &#34;waste&#34; a donated organ.  
- **Guide challenged the students by questioning the validity of the claim that alcoholics risk wasting a transplant and probed for a balanced middle ground.** One participant responded with a structured three-point argument rebutting common moral double standards, citing research on comparable transplant success rates, and stressing that similar risks exist for other health conditions, even as minor technical glitches with the survey briefly interrupted the flow.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==ca3117b8dd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d"><ul>
<li>
<p><strong>Students explored the ethical dilemma of allocating medical treatment when both patients have identical clinical needs.</strong> Student 1 argued for absolute equality based on immediate danger and fairness, while Student 2 supported considering quality of life as a potential deciding factor in scenarios that leave little room for other distinctions.</p>
</li>
<li>
<p><strong>Students debated whether factors like urgency, time of arrival, or quality of life should determine who receives treatment.</strong> One perspective emphasized that prioritizing treatment based on immediate need and arrival order minimizes moral biases in the decision, whereas another viewpoint saw some merit in valuing the patient with the higher quality of life when all else is equal.</p>
</li>
<li>
<p><strong>Guide actively deepened the discussion by asking targeted questions that challenged assumptions and probed for specific criteria in resource allocation decisions.</strong> Guide's progressive inquiries helped reveal shifts in student reasoning about how disability status might factor into the decision-making process if quality-of-life arguments are considered.  </p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, your position seems to have shifted. Earlier you suggested that disability status should affect assessments of quality of life, but now you seem to favor leaving the decision solely to more objective factors. Do you still believe that disability status should ever be considered when allocating scarce medical resources, or has your view changed?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" class="form-control summary-markdown-editor">- **Students explored the ethical dilemma of allocating medical treatment when both patients have identical clinical needs.** Student 1 argued for absolute equality based on immediate danger and fairness, while Student 2 supported considering quality of life as a potential deciding factor in scenarios that leave little room for other distinctions.

- **Students debated whether factors like urgency, time of arrival, or quality of life should determine who receives treatment.** One perspective emphasized that prioritizing treatment based on immediate need and arrival order minimizes moral biases in the decision, whereas another viewpoint saw some merit in valuing the patient with the higher quality of life when all else is equal.

- **Guide actively deepened the discussion by asking targeted questions that challenged assumptions and probed for specific criteria in resource allocation decisions.** Guide&#39;s progressive inquiries helped reveal shifts in student reasoning about how disability status might factor into the decision-making process if quality-of-life arguments are considered.  

&gt; **Student 2, your position seems to have shifted. Earlier you suggested that disability status should affect assessments of quality of life, but now you seem to favor leaving the decision solely to more objective factors. Do you still believe that disability status should ever be considered when allocating scarce medical resources, or has your view changed?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==fc78c33cdf::e7f4f90b1d::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students initially focused on resolving quiz status discrepancies.</strong> One participant remarked on differing progress percentages while both confirmed completing the quiz, showing that early interactions centered on technical or progress issues rather than the ethical topic.</li>
<li><strong>Guides challenging inquiry on liver transplant allocation remained largely unaddressed.</strong> Despite Guide asking whether recovered alcoholics should be treated differently and what factors matter most, the students diverted attention back to quiz updates and brief comments, missing an opportunity for a deeper ethical analysis.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students initially focused on resolving quiz status discrepancies.** One participant remarked on differing progress percentages while both confirmed completing the quiz, showing that early interactions centered on technical or progress issues rather than the ethical topic.
- **Guides challenging inquiry on liver transplant allocation remained largely unaddressed.** Despite Guide asking whether recovered alcoholics should be treated differently and what factors matter most, the students diverted attention back to quiz updates and brief comments, missing an opportunity for a deeper ethical analysis.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==90422b2edd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d"><ul>
<li>
<p><strong>Students discussed the ethics of patient prioritization by debating quantitative versus qualitative measures.</strong> One student argued that care is inherently qualitative and tied to personal experiences, while another suggested that a calculated measure of how much patients care for their health could be considered.</p>
</li>
<li>
<p><strong>Students examined the limitations of numeric metrics in capturing personal behavior.</strong> They explored how relying solely on percentages (such as reoccurrence rates among alcoholics) might overlook the nuanced, qualitative observations that inform ethical medical decisions.</p>
</li>
<li>
<p><strong>Guide effectively ignited a deeper exploration of decision-making criteria.</strong> Its probing question challenged the students to critically evaluate the assumptions behind clinical resource allocation, thereby enhancing the overall substance of the discussion.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students discussed the ethics of patient prioritization by debating quantitative versus qualitative measures.** One student argued that care is inherently qualitative and tied to personal experiences, while another suggested that a calculated measure of how much patients care for their health could be considered.

- **Students examined the limitations of numeric metrics in capturing personal behavior.** They explored how relying solely on percentages (such as reoccurrence rates among alcoholics) might overlook the nuanced, qualitative observations that inform ethical medical decisions.

- **Guide effectively ignited a deeper exploration of decision-making criteria.** Its probing question challenged the students to critically evaluate the assumptions behind clinical resource allocation, thereby enhancing the overall substance of the discussion.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==91f27098df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students discussed liver transplant allocation fairness based on medical viability rather than the cause of the disease.</strong> One student argued that treatment decisions should focus solely on measurable medical outcomes, while the other emphasized that alcoholism introduces distinct behavioral risks affecting long-term transplant success.  </li>
<li><strong>Guide effectively challenged assumptions by asking if identical medical profiles should override past behaviors.</strong> This prompt led to a deeper exploration where both students refined their positions, highlighting the tension between ethical fairness and practical health considerations.  </li>
<li><strong>Students wrapped up with mutual appreciation for the robust dialogue and clarification of misunderstandings.</strong> Their final remarks stressed satisfaction with the discussion's depth and cooperative learning, celebrating a successful and engaging exchange.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students discussed liver transplant allocation fairness based on medical viability rather than the cause of the disease.** One student argued that treatment decisions should focus solely on measurable medical outcomes, while the other emphasized that alcoholism introduces distinct behavioral risks affecting long-term transplant success.  
- **Guide effectively challenged assumptions by asking if identical medical profiles should override past behaviors.** This prompt led to a deeper exploration where both students refined their positions, highlighting the tension between ethical fairness and practical health considerations.  
- **Students wrapped up with mutual appreciation for the robust dialogue and clarification of misunderstandings.** Their final remarks stressed satisfaction with the discussion&#39;s depth and cooperative learning, celebrating a successful and engaging exchange.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8a97a1c8dd::student-dwfilmvkdq==e4d9f16cdf::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students debated ethical conditions for alcohol transplants, centering on a 6-month abstinence requirement and evaluations of disease severity and relapse risk.</strong> The discussion probed whether these criteria could balance fairness with effective organ allocation, challenging assumptions about both equity and medical outcomes.</li>
<li><strong>Guide maintained focus by repeatedly prompting for deeper analysis and clarifications.</strong> Its incisive questions pushed the students to elaborate on their proposals and address potential counterarguments, even as brief off-topic remarks momentarily shifted the conversations flow.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated ethical conditions for alcohol transplants, centering on a 6-month abstinence requirement and evaluations of disease severity and relapse risk.** The discussion probed whether these criteria could balance fairness with effective organ allocation, challenging assumptions about both equity and medical outcomes.
- **Guide maintained focus by repeatedly prompting for deeper analysis and clarifications.** Its incisive questions pushed the students to elaborate on their proposals and address potential counterarguments, even as brief off-topic remarks momentarily shifted the conversations flow.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==f031d19ef0::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d"><ul>
<li>
<p><strong>Students debated whether alcoholism should impact liver transplant eligibility.</strong> Student 1 argued that alcoholics should be held accountable through measurable sobriety or recovery standards, while Student 2 maintained that strict eligibility rules might lead to missed opportunities for life-saving treatment, highlighting the tension between accountability and compassion in medical resource allocation.</p>
</li>
<li>
<p><strong>Guide played a proactive role in deepening the discussion on policy implications.</strong> It interjected with probing questions about the feasibility of enforcing post-transplant sobriety and the ethical implications of denying transplants, which helped steer the conversation toward an exploration of how compassion and practical medical criteria might be balanced in the decision-making process.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated whether alcoholism should impact liver transplant eligibility.** Student 1 argued that alcoholics should be held accountable through measurable sobriety or recovery standards, while Student 2 maintained that strict eligibility rules might lead to missed opportunities for life-saving treatment, highlighting the tension between accountability and compassion in medical resource allocation.

- **Guide played a proactive role in deepening the discussion on policy implications.** It interjected with probing questions about the feasibility of enforcing post-transplant sobriety and the ethical implications of denying transplants, which helped steer the conversation toward an exploration of how compassion and practical medical criteria might be balanced in the decision-making process.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==d1381236df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students discussed the fairness of liver transplant prioritization.</strong> Student 1 argued that life-saving treatment should not be denied to alcoholics regardless of the cause, while Student 2 maintained that personal responsibility and risk-taking should influence prioritization decisions, especially given long-term outcomes and potential relapse.</li>
<li><strong>The discussion evolved to consider broader ethical criteria and practical factors.</strong> Both participants weighed issues like age, quality of life, and the fairness of imposing sobriety requirements before transplant eligibility, highlighting the complexity of balancing equal treatment with outcome predictions.</li>
<li><strong>Guide effectively prompted deeper analysis and clarification.</strong> Guide asked targeted questions to help each student elaborate on their positions, ensuring the conversation explored nuances such as genetic factors versus personal choice and the implications of transplant risks, which helped keep the discussion focused and balanced.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students discussed the fairness of liver transplant prioritization.** Student 1 argued that life-saving treatment should not be denied to alcoholics regardless of the cause, while Student 2 maintained that personal responsibility and risk-taking should influence prioritization decisions, especially given long-term outcomes and potential relapse.
- **The discussion evolved to consider broader ethical criteria and practical factors.** Both participants weighed issues like age, quality of life, and the fairness of imposing sobriety requirements before transplant eligibility, highlighting the complexity of balancing equal treatment with outcome predictions.
- **Guide effectively prompted deeper analysis and clarification.** Guide asked targeted questions to help each student elaborate on their positions, ensuring the conversation explored nuances such as genetic factors versus personal choice and the implications of transplant risks, which helped keep the discussion focused and balanced.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==4ec2b458df::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d"><ul>
<li>
<p><strong>Students debated the ethical and practical implications of allocating liver transplants to alcoholic patients.</strong> Student 1 highlighted the influence of mental health conditions and the limitations of current exclusion policies, while Student 2 stressed the need for objective criteria like demonstrated sobriety and support systems, with both ultimately leaning toward individualized evaluation over categorical exclusion.</p>
</li>
<li>
<p><strong>Guide played a pivotal role in deepening the discussion and clarifying key points.</strong> Guides interventions prompted the students to explore underlying tensionsbalancing personal responsibility with medical urgencyand encouraged them to consider concrete criteria, such as appropriate sobriety periods and support networks, to fairly allocate scarce medical resources.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated the ethical and practical implications of allocating liver transplants to alcoholic patients.** Student 1 highlighted the influence of mental health conditions and the limitations of current exclusion policies, while Student 2 stressed the need for objective criteria like demonstrated sobriety and support systems, with both ultimately leaning toward individualized evaluation over categorical exclusion.

- **Guide played a pivotal role in deepening the discussion and clarifying key points.** Guides interventions prompted the students to explore underlying tensionsbalancing personal responsibility with medical urgencyand encouraged them to consider concrete criteria, such as appropriate sobriety periods and support networks, to fairly allocate scarce medical resources.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==be35ecf6de::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Distribution
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d"><ul>
<li>
<p><strong>Students debated whether healthcare should be allocated based on ability to pay versus being a universal right.</strong> Student 1 stressed that insured patients might benefit from prioritized treatment to avoid crippling debt, while Student 2 maintained that even expensive procedures should remain available to everyone, emphasizing patient choice and the ethical pitfalls of unequal care.</p>
</li>
<li>
<p><strong>Guide played a pivotal role by prompting students to examine both practical and moral dimensions of healthcare distribution.</strong> It steered the discussion through targeted questionssuch as contrasting emergency versus preventative care and probing the implications of limited resourceswhich helped students articulate the complex trade-offs inherent in the topic.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated whether healthcare should be allocated based on ability to pay versus being a universal right.** Student 1 stressed that insured patients might benefit from prioritized treatment to avoid crippling debt, while Student 2 maintained that even expensive procedures should remain available to everyone, emphasizing patient choice and the ethical pitfalls of unequal care.

- **Guide played a pivotal role by prompting students to examine both practical and moral dimensions of healthcare distribution.** It steered the discussion through targeted questionssuch as contrasting emergency versus preventative care and probing the implications of limited resourceswhich helped students articulate the complex trade-offs inherent in the topic.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==51405a0edd::da86d48d2b::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplantation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d"><ul>
<li><strong>Students engaged in a nuanced debate on liver transplant allocation.</strong> Student 1 argued for prioritizing non-alcoholic patients or those demonstrating commitment to sobriety to maximize long-term success, while Student 2 maintained that all patients deserve equal treatment but later acknowledged the need to factor in outcomes and accountability.  </li>
<li><strong>Guide drove the discussion with incisive questions about balancing justice and utility in scarce medical resource allocation.</strong> Guides intervention prompted both students to consider how personal responsibility and measurable success rates should influence transplant eligibility, deepening the ethical exploration:  </li>
</ul>
<blockquote>
<p><strong>Student 2, you mentioned that "everyone has the right to the utmost medical treatment regardless of prior conditions," but I'd like to push you on this. In a world of scarce medical resources like donor organs, how do we balance equal access with the reality that some recipients may have a higher likelihood of long-term success?</strong> The question isn't about denying care entirely, but rather how we prioritize when not everyone can receive a transplant.</p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" class="form-control summary-markdown-editor">- **Students engaged in a nuanced debate on liver transplant allocation.** Student 1 argued for prioritizing non-alcoholic patients or those demonstrating commitment to sobriety to maximize long-term success, while Student 2 maintained that all patients deserve equal treatment but later acknowledged the need to factor in outcomes and accountability.  
- **Guide drove the discussion with incisive questions about balancing justice and utility in scarce medical resource allocation.** Guides intervention prompted both students to consider how personal responsibility and measurable success rates should influence transplant eligibility, deepening the ethical exploration:  

&gt; **Student 2, you mentioned that &#34;everyone has the right to the utmost medical treatment regardless of prior conditions,&#34; but I&#39;d like to push you on this. In a world of scarce medical resources like donor organs, how do we balance equal access with the reality that some recipients may have a higher likelihood of long-term success?** The question isn&#39;t about denying care entirely, but rather how we prioritize when not everyone can receive a transplant.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==43f73032dd::7ce8bcd9ee::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Distribution
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d"><ul>
<li>
<p><strong>Students debated whether healthcare access should be determined by ability to pay or by need, with clear concerns about fairness and practical logistics.</strong> Student 1 argued passionately that withholding care based on financial limitations is unjust, while Student 2 compared the situation to systems in other countries and Student 3 sought a balanced, need-based approach, highlighting the complexity of objectively determining need.</p>
</li>
<li>
<p><strong>Guide played a pivotal role in deepening the discussion by posing incisive questions about the criteria for distributing healthcare resources.</strong> Guides targeted prompts encouraged students to critically reflect on the ethical dilemmas involved and consider alternative perspectives beyond a simple pay-for-care model, thereby adding clarity and focus to an otherwise multifaceted debate.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated whether healthcare access should be determined by ability to pay or by need, with clear concerns about fairness and practical logistics.** Student 1 argued passionately that withholding care based on financial limitations is unjust, while Student 2 compared the situation to systems in other countries and Student 3 sought a balanced, need-based approach, highlighting the complexity of objectively determining need.

- **Guide played a pivotal role in deepening the discussion by posing incisive questions about the criteria for distributing healthcare resources.** Guides targeted prompts encouraged students to critically reflect on the ethical dilemmas involved and consider alternative perspectives beyond a simple pay-for-care model, thereby adding clarity and focus to an otherwise multifaceted debate.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::da86d48d2b::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d"><ul>
<li><strong>Students debated the ethical complexity of medical resource allocation under disability discrimination.</strong> They initially differed on whether urgency should favor non-disabled patients but later converged on a treatment approach based on effectiveness, emphasizing the need for fair criteria and further research to improve outcomes for patients with disabilities.</li>
<li><strong>Guide's probing questions enriched the discussion by challenging students to reconsider assumptions about fairness in medical decisions.</strong> Guide asked incisive, deeper questions about whether an outcome-based prioritization could inadvertently disadvantage people with disabilities, as illustrated below:</li>
</ul>
<blockquote>
<p><strong>Student 2, you and Student 1 seem to agree on prioritizing treatment based on effectiveness. But this raises a challenging question: Does this approach potentially discriminate against people with disabilities if their predicted outcomes are statistically worse? How do we balance medical utility with equal rights to healthcare?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" class="form-control summary-markdown-editor">- **Students debated the ethical complexity of medical resource allocation under disability discrimination.** They initially differed on whether urgency should favor non-disabled patients but later converged on a treatment approach based on effectiveness, emphasizing the need for fair criteria and further research to improve outcomes for patients with disabilities.
- **Guide&#39;s probing questions enriched the discussion by challenging students to reconsider assumptions about fairness in medical decisions.** Guide asked incisive, deeper questions about whether an outcome-based prioritization could inadvertently disadvantage people with disabilities, as illustrated below:

&gt; **Student 2, you and Student 1 seem to agree on prioritizing treatment based on effectiveness. But this raises a challenging question: Does this approach potentially discriminate against people with disabilities if their predicted outcomes are statistically worse? How do we balance medical utility with equal rights to healthcare?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==515f6094dd::student-dwfilmvkdq==dbc8e3acdf::e7f4f90b1d::876dbcc54d" style="display: none;"></div>
                  </div>
                </div>
              
            
          </div>

          <!-- Removing the button row since we moved it to the header -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function debug_log(message, level) {
    console.log('DEBUG:', message);
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Theme toggling functionality
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      htmlElement.classList.remove('dark-mode');
      htmlElement.classList.add('light-mode');
      themeToggle.checked = true;
    } else {
      // Set dark mode as default if no preference found
      htmlElement.classList.add('dark-mode');
      htmlElement.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
      themeToggle.checked = false;
    }
    
    // Handle toggle changes
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        // Switch to light mode
        htmlElement.classList.remove('dark-mode');
        htmlElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        // Switch to dark mode
        htmlElement.classList.remove('light-mode');
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Handle refresh button click
    const refreshBtn = document.getElementById('refresh-cache-btn');
    if (refreshBtn) {
      refreshBtn.addEventListener('click', function() {
        // Add a spinning animation while refreshing
        const icon = refreshBtn.querySelector('i');
        icon.classList.add('fa-spin');
        
        // Reload the page with bypass_cache=true parameter
        const currentUrl = window.location.href;
        const url = new URL(currentUrl);
        url.searchParams.set('bypass_cache', 'true');
        window.location.href = url.toString();
      });
    }
    
    // Convert UTC timestamps to local timezone
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
  
  // Original convert UTC timestamps function (duplicated in script block below) can be removed
</script>

<script>
  // New code for summary generation progress
  let pollingInterval;
  let cancelRequested = false;

  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    
    // Initialize the report button state based on whether summaries already exist
    const hasSavedSummaries = true;
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      console.log("Enabling report button because saved summaries exist");
    }
    
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    
    if (hasGeneratingThreads) {
      // Start polling if there are already generating threads
      startPolling();
      generateBtn.style.display = 'none';
      cancelBtn.style.display = 'inline-block';
    }
    
    // Handle generate button click
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        // Show all spinners and status messages
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        
        generateBtn.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        
        // Make AJAX call to queue summaries instead of form submission
        fetch('/assignment/876dbcc54d/generate_summaries', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1)
            // Start polling for updates
            startPolling();
            // Enable report button when summaries are being generated
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1)
          }
        })
        .catch(error => {
          debug_log("Network error:", error, 1)
        });
      });
      
      // Handle cancel button
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/876dbcc54d/cancel_generation', {
            method: 'POST'
          }).then(response => {
            if (response.ok) {
              stopPolling();
              // Reset UI
              document.querySelectorAll('.thread-status').forEach(status => {
                if (status.textContent === 'Queued for generation...') {
                  status.style.display = 'none';
                }
              });
              document.querySelectorAll('.spinner-border').forEach(spinner => {
                spinner.style.display = 'none';
              });
              generateBtn.style.display = 'inline-block';
              cancelBtn.style.display = 'none';
            }
          });
        });
      }
    }
    
    // Handle report button click
    if (reportBtn) {
      reportBtn.addEventListener('click', function() {
        // Show spinner
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        
        // Disable button while generating
        reportBtn.disabled = true;
        
        // Change message in report section
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        
        // Make AJAX call to generate the report
        fetch('/assignment/876dbcc54d/generate_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1)
          
          // Start polling for report status
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1)
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    
    // Handle refresh data button click
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        // Show spinner
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        
        // Disable button while refreshing
        refreshDataBtn.disabled = true;
        
        // Make AJAX call to refresh data
        fetch('/assignment/876dbcc54d/refresh_data', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          
          // Reload the page to show refreshed data
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    
    // Handle regenerate title button click
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        // Disable the button and show a spinner icon
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        
        // Call the regenerate title endpoint
        fetch('/assignment/876dbcc54d/regenerate_title', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update the title text directly
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) {
              titleEl.textContent = data.title;
            }
            // Show success message
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
  });

  function startPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
    }
    
    // Poll every 2 seconds
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    
    // Do an immediate check to start the process
    checkSummaryStatus();
  }

  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }

  function checkSummaryStatus() {
    console.log("Checking summary status...");
    fetch('/assignment/876dbcc54d/summary_status')
      .then(response => response.json())
      .then(data => {
        console.log("Status data:", data);
        let activeGeneration = false;
        
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'inline-block';
            }
          } else if (threadInfo.status === 'completed') {
            if (statusEl) {
              statusEl.style.display = 'none';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
            if (summaryEl && threadInfo.summary) {
              summaryEl.innerHTML = threadInfo.summary;
              summaryEl.style.display = 'block';
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          }
        });
        
        // If no thread is still queued or generating, stop polling and reset UI
        if (!activeGeneration) {
          stopPolling();
          document.getElementById('generate-btn').style.display = 'inline-block';
          document.getElementById('cancel-btn').style.display = 'none';
          
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => {
        debug_log('Error checking summary status:', error, 1)
      });
  }
  
  // Function to check the report generation status
  function checkReportStatus() {
    fetch('/assignment/876dbcc54d/report_status')
      .then(response => response.json())
      .then(data => {
        debug_log("Report status:", data, 1)
        
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        if (data.status === 'completed') {
          // Report is ready, update the UI
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Display the report
          if (reportSection) {
            // Use safe assignment of innerHTML to preserve nested HTML structure
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            
            // Add custom CSS to ensure proper nested list rendering
            const styleTag = document.createElement('style');
            styleTag.textContent = `
              #report-content ul ul { 
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                padding-left: 2em;
              }
              #report-content li > ul {
                margin-left: 1em;
              }
            `;
            reportContent.appendChild(styleTag);
            
            // Add the content
            reportContent.innerHTML += data.content;
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2';
            generatedText.innerHTML = `Generated on: <span class="utc-time" data-utc-time="${data.generated_at}">${data.generated_at}</span><span class="local-time"></span>`;
            
            // Clear the report section and append the new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert the timestamp to local time
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true
                  };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  
                  // Find the next sibling with class local-time and set its content
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) {
                console.error('Error converting time:', e);
              }
            });
          }
        } else if (data.status === 'generating') {
          // Report is still being generated, check again in 2 seconds
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        }
      })
      .catch(error => {
        debug_log('Error checking report status:', error, 1)
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- Add CodeMirror for report editing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">

<script>
  // Report editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');

    // Initialize CodeMirror if report editor exists
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }

    // Edit button handler
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        // Refresh CodeMirror to ensure proper rendering
        if (reportEditor) reportEditor.refresh();
      });
    }

    // Cancel button handler
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }

    // Save button handler
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        // Get the edited markdown
        const markdown = reportEditor.getValue();
        
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        editorSpinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/876dbcc54d/edit_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            reportContent.innerHTML = data.content;
            
            // Show success message and close editor
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    
    // Helper to show status messages
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<!-- Add CSS for the editor status messages -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>

<!-- New export button update script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const exportBtn = document.querySelector('a[href*="/export"]');
  if (exportBtn) {
    exportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      const exportUrl = new URL(this.href, window.location.origin);
      exportUrl.searchParams.set('theme', currentTheme);
      window.location.href = exportUrl.toString();
    });
  }
  
  // Set theme class on HTML element for export mode
  if ('True' === 'True' && 'light-mode') {
    document.documentElement.className = 'light-mode';
  }
});
</script>

<script>
  // Summary editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryButtons = document.querySelectorAll('.edit-summary-btn');
    const summaryContainers = document.querySelectorAll('.summary-editor-container');
    const saveSummaryButtons = document.querySelectorAll('.save-summary-btn');
    const cancelSummaryEditButtons = document.querySelectorAll('.cancel-summary-edit-btn');
    const summaryEditors = document.querySelectorAll('.summary-markdown-editor');
    const summaryStatusMessages = document.querySelectorAll('.summary-editor-status');

    editSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'block';
          }
        });
        summaryEditors.forEach(editor => {
          if (editor.id === `summary-markdown-editor-${sessionId}`) {
            editor.focus();
          }
        });
      });
    });

    saveSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        const markdown = this.previousElementSibling.value;
        
        if (!markdown.trim()) {
          showSummaryStatus('Summary content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
        spinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/876dbcc54d/edit_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            session_id: sessionId,
            summary_markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          spinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            const summaryContainer = document.getElementById(`summary-editor-container-${sessionId}`);
            summaryContainer.innerHTML = data.content;
            
            // Show success message and close editor
            showSummaryStatus(data.message, 'success');
            setTimeout(() => {
              summaryContainer.style.display = 'none';
              summaryStatusMessages.forEach(status => {
                status.style.display = 'none';
              });
            }, 1500);
          } else {
            showSummaryStatus(data.message, 'error');
          }
        })
        .catch(error => {
          spinner.style.display = 'none';
          showSummaryStatus('Error saving summary: ' + error, 'error');
        });
      });
    });

    cancelSummaryEditButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'none';
          }
        });
        summaryStatusMessages.forEach(status => {
          status.style.display = 'none';
        });
      });
    });

    // Helper to show status messages
    function showSummaryStatus(message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 5000);
    }
  });
</script>

<!-- Add JavaScript for thread summary editing -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all edit buttons for summaries
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    // Get all regenerate buttons for summaries
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    
    // Initialize CodeMirror editors object to store all editors
    const summaryEditors = {};
    
    // Add click handlers to all edit buttons
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      
      // Create CodeMirror editor when edit button is clicked (lazy initialization)
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        
        // Initialize CodeMirror if not already done
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          // Get original markdown content from data attribute or use HTML content as fallback
          let markdownContent = textarea.value;
          if (!markdownContent) {
            // This is a simple fallback that won't be perfect - ideally the backend would provide the markdown
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          
          summaryEditors[sessionId].setValue(markdownContent);
          // Refresh to ensure proper rendering
          summaryEditors[sessionId].refresh();
        } else {
          // Just refresh if already initialized
          summaryEditors[sessionId].refresh();
        }
      });
      
      // Add handler for cancel button
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      
      // Add handler for save button
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          // Get the edited markdown
          const markdown = summaryEditors[sessionId].getValue();
          
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          
          // Show spinner
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          
          // Make API call to save
          fetch(`/assignment/876dbcc54d/edit_summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              session_id: sessionId,
              markdown: markdown
            })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            
            if (data.success) {
              // Update the displayed content with the HTML returned from the server
              summaryElement.innerHTML = data.content + 
                `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                   <i class="fas fa-sync"></i>
                 </button>
                 <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                   <i class="fas fa-pencil-alt"></i>
                 </button>`;
              
              // Show success message and close editor
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                summaryElement.style.display = 'block';
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    
    // Add click handlers to all regenerate buttons
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      
      btn.addEventListener('click', function() {
        if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
          // Show a spinner in the summary area
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            
            // Hide the summary while it's regenerating
            summaryElement.style.opacity = '0.5';
            
            // Make API call to regenerate
            fetch(`/assignment/876dbcc54d/regenerate_summary`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                session_id: sessionId
              })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              
              if (data.success) {
                // Update the displayed content with the HTML returned from the server
                summaryElement.innerHTML = data.content + 
                  `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                     <i class="fas fa-sync"></i>
                   </button>
                   <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                     <i class="fas fa-pencil-alt"></i>
                   </button>`;
                
                // Reset styles and show success message
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
                
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => {
                statusElement.style.display = 'none';
              }, 5000);
            });
          }
        }
      });
    });
    
    // Function to reattach event listeners after content is updated
    function attachButtonListeners(sessionId) {
      // Find the newly created buttons
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      
      // Reattach edit button listener
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          
          // Reinitialize or refresh CodeMirror
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      
      // Reattach regenerate button listener
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            const statusElement = document.getElementById(`status-${sessionId}`);
            const spinnerElement = document.getElementById(`spinner-${sessionId}`);
            
            if (statusElement && spinnerElement) {
              statusElement.textContent = 'Regenerating summary...';
              statusElement.className = 'status-message thread-status text-info';
              statusElement.style.display = 'block';
              spinnerElement.style.display = 'inline-block';
              
              summaryElement.style.opacity = '0.5';
              
              fetch(`/assignment/876dbcc54d/regenerate_summary`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  session_id: sessionId
                })
              })
              .then(response => response.json())
              .then(data => {
                spinnerElement.style.display = 'none';
                
                if (data.success) {
                  summaryElement.innerHTML = data.content + 
                    `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                       <i class="fas fa-sync"></i>
                     </button>
                     <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                       <i class="fas fa-pencil-alt"></i>
                     </button>`;
                  
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message;
                  statusElement.className = 'status-message thread-status success';
                  
                  attachButtonListeners(sessionId);
                  
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 3000);
                } else {
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message || 'Error regenerating summary';
                  statusElement.className = 'status-message thread-status error';
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 5000);
                }
              })
              .catch(error => {
                spinnerElement.style.display = 'none';
                summaryElement.style.opacity = '1';
                statusElement.textContent = 'Error regenerating summary: ' + error;
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              });
            }
          }
        });
      }
    }
    
    // Helper to show status messages for summary editing
    function showSummaryStatus(sessionId, message, type) {
      const statusElement = document.getElementById(`summary-editor-status-${sessionId}`);
      statusElement.textContent = message;
      statusElement.className = `status-message summary-editor-status ${type}`;
      statusElement.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusElement.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<script>
  // Handle regenerate title button click
  const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
  if (regenerateTitleBtn) {
    regenerateTitleBtn.addEventListener('click', function() {
      // Disable the button and show a spinner icon
      regenerateTitleBtn.disabled = true;
      const icon = regenerateTitleBtn.querySelector('i');
      const originalIcon = icon.className;
      icon.className = 'fas fa-spinner fa-spin';
      
      // Call the regenerate title endpoint
      fetch('/assignment/876dbcc54d/regenerate_title', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Update the title text directly
          const titleEl = document.querySelector('.generated-title');
          if (titleEl) {
            titleEl.textContent = data.title;
          }
          // Show success message
          console.log("Title regenerated:", data.title);
        } else {
          console.error("Error regenerating title:", data.message);
          alert("Error regenerating title: " + data.message);
        }
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Error regenerating title. Please try again.");
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      });
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let pollingInterval = null;

    // Debug logging function
    function debug_log(message, level, details = null) {
      if (details) {
        console.log(`DEBUG[${level}]: ${message}`, details);
      } else {
        console.log(`DEBUG[${level}]: ${message}`);
      }
    }
    
    // Initialize the report button state based on saved summaries status
    const reportBtn = document.getElementById('report-btn');
    const hasSavedSummaries = true;
    
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
  });
</script>

<script>
  // This script handles dark mode parameter in URL
  document.addEventListener('DOMContentLoaded', function() {
    // Check for darkmode parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('darkmode') === 'true') {
      // Create and append dark mode styles
      const darkModeStyle = document.createElement('style');
      darkModeStyle.textContent = `
        body { background-color: #1a1a1a !important; }
        body, div, section, article, aside, header, footer, main, p, span, h1, h2, h3, h4, h5, h6, li, td, th {
          color: #e6e6e6 !important;
        }
        .answer-card, .question-card, .card, .container, .container-fluid, .row {
          background-color: #2a2a2a !important;
          color: #e6e6e6 !important;
        }
        a { color: #88afd3 !important; }
        pre, code { background-color: #333 !important; color: #f8f8f8 !important; }
        table, tr, td, th { border-color: #444 !important; background-color: #2a2a2a !important; }
        input, textarea, select { background-color: #333 !important; color: #e6e6e6 !important; }
        blockquote { background-color: #333 !important; border-left-color: #666 !important; }
        .panel, .panel-default, .panel-body, .panel-heading { 
          background-color: #2a2a2a !important; 
          color: #e6e6e6 !important;
          border-color: #444 !important;
        }
        .text-muted, .text-secondary { color: #aaa !important; }
        .bg-light, .bg-white { background-color: #2a2a2a !important; }
        .border { border-color: #444 !important; }
      `;
      document.head.appendChild(darkModeStyle);
    }
  });
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        color: #e6e6e6 !important;
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>
</body>
</html>