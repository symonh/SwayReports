
<!doctype html>
<html lang="en" class="light-mode">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Apotemnophilia, Medical Paternalism and Related Topics</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    :root {
      /* Dark mode theme variables (default) */
      --bg-color: #121212;
      --card-bg: #1e1e2d;
      --card-header-bg: #252538;
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #2d2d43;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #252538;
      --message-right-bg: #1a1a2e;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple theme */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    body { 
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.9em;
      padding: 6px 12px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
      transform: rotate(180deg);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: rotate(180deg) scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 30px;
      column-count: 1;
      column-gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        column-count: 2;
      }
    }
    .thread-item {
      display: inline-block; /* Required for column layout */
      width: 100%;
      margin-bottom: 15px;
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 12px;
      transition: all 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      break-inside: avoid; /* Prevents items from breaking across columns */
      transform: translateY(0);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      transform: translateY(-5px);
      box-shadow: 0 10px 16px rgba(0,0,0,0.25);
      border: 2px solid #ff851b;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .thread-header .thread-actions {
      display: flex;
      align-items: center;
      margin-left: 30px;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to not expand beyond the left column's Info container */
    #topics-container {
        max-height: 345px;
        min-height: 345px;
        overflow-y: auto;
    }
    
    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }
  </style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>
</head>
<body>
<div class="dashboard-container">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <div class="title-text"><i class="fas fa-tasks mr-2"></i> Assignment Details</div>
        
        
        
        
      </div>
      
    </div>
    <div class="card-body">
      <div class="row">
        <!-- Left column: General Information & Timelines -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
          </h5>
          
            <div id="timelines-container" class="info-box">
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Completion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-13 05:59:00+00:00">2025-02-13 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Opinion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-12 05:59:00+00:00">2025-02-12 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
            </div>
          

          <h5 class="section-title mt-4">
            <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
          </h5>
          <div id="info-container" class="info-box">
            <div class="row mb-3">
              <div class="col-5 col-label">Instructor:</div>
              <div class="col-7 col-value">[redacted]</div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Min. chat time:</div>
              <div class="col-7 col-value">
                
                  25 minutes
                
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Created on:</div>
              <div class="col-7 col-value">
                <span class="utc-time" data-utc-time="2025-02-05 19:09:29.190361+00:00">2025-02-05 19:09:29.190361+00:00</span>
                <span class="local-time"></span>
              </div>
            </div>
            
            
            <div class="row mb-3">
              <div class="col-5 col-label">Chat threads:</div>
              <div class="col-7 col-value">17 (16 disagree)</div>
            </div>
          </div>
        </div>

        <!-- Right column: Topics and Chat Threads -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
          </h5>
          
            <div id="topics-container" class="info-box">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Apotemnophilia</div>
                  <div>Physicians should use amputation as a treatment for apotemnophilia.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Medical Paternalism</div>
                  <div>Medical paternalism can be justified if the expected gain to patient welfare is sufficiently high.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Patient Autonomy</div>
                  <div>The right to patient autonomy entails that physicians act wrongly if they mislead their patients about or nudge their patients toward any treatment option.</div>
                </div>
                
              
              <!-- Removed toggle link; topics will scroll if content overflows -->
            </div>
          
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i>Opinion scale: -3 Strongly Disagree to +3 Strongly Agree
          </div>
          <div class="info-box">
            
              <div class="row">
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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PhYvXnrSbed9shCoevHUyFHDGHDxRRX/btIkhj//5V4cDjvvvP1exTm9d/73Hl6vj2t/cRX9+vWtNMaU639B77N7kpWVzfJlX1QsL3WXfUwmLq7yrOnNN98B4P6/3EurVi0rljscDu753Z1069aF2NgmZGYcrs2vIazq0ne5m2+5gTZtWlf8u02b1tx+xy0AvPXWu+Et/Cfk5ecD0H/AhZWWd+jQjr/89b6Kf7uidNGUBE+HlCVijRo9HIfDwZov15JXw6HcefMWctPN19O+fTt69T6rYnlOzhH+8c8H+eab78g9kkuvXmdVfHnEK7PfqNhu69btTHtiBnfdPZX/TvsX33+3kcOHs+ncpSNt2rQmP7+AP933QKVvpzqwv+yCrOum/IIzzjydeZ8s4PPPV/L2/+ZwxhndGTpsMK++9gKbN2+loKCQHj260Tw1hdzcXP58/0Mh/m3VTV36Luf3+3n5ledYt/ZrMAz69OlNVJSLWS/MrvRxITO99ea79Op1FjfeNIX+Ay7k0MEMUlNT6HF6d9xuNwcPHqJVq5YkJyWxk12W1CiNlwJXItboMSMAWLBgcQ1bQnZ2DuvWradfv76MHz8Ot6ds9vnSrFeIaxrHZeMvoVvXLhw4cJDZs9/gnbfnVPmYzTtvv8f2bTv4+TVXcOZZZ9C5S2eys7J58413eP31/5GTnVNp+zlzPqRTp470H3Ah55/fjz279/L55ysJBAL8+f6HWLnyS8aNG0Onzh1wOBxkZh5m8Ruf8dqrb1W6etdqwfZd7r4//IVLxo3m4oH9cbmcbNq4mTfeeJsVJ74JzArLln7OXXf8jsnXXUP7Du1o3boVhw9n88nc+bz6yptccOG53HHnrVzY/3zWrLHmsLc0XkabNmfqS0FFfqT8O4Uf+fu/K30LlNTfu++9Tnp6Cyb+7NpKX2cpEul0DldERMQEClwRERETKHBFRERMoHO4IiIiJtAMV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBApcEREREyhwRURETKDAFRERMYECV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBA6rCwiV+PgUwCAQ8FtdioiInEIMwwYEKCzMOel2ERO4YPzovw2P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" alt="Opinion distribution for Apotemnophilia" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Medical Paternalism" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Patient Autonomy" class="img-fluid" />
                    </div>
                  </div>
                
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text">
              <i class="fas fa-file-alt mr-1"></i> Instructor Report
            </div>
            
          </h5>
          <div class="info-box" id="report-section">
            
              <div id="report-content" class="markdown-content"><p>This assignment explores the ethical implications of controversial medical practices by examining whether physicians should perform irreversible proceduressuch as amputation for apotemnophiliain cases of severe psychological distress, while also questioning the justification for medical paternalism and the limits of patient autonomy. Across the multiple Sway discussions, students engaged in deep debates about informed consent, cultural influences, and the balance between respecting patient choice and ensuring patient welfare, all under the probing moderation of Guide.</p>
<h3>Themes</h3>
<ul>
<li><strong>Common ground identified: Students concurred on the need for rigorous psychiatric evaluation and ethical safeguards.</strong> Many participants emphasized that comprehensive patient assessments and strong informed consent protocols are essential regardless of their differing stances on irreversible interventions or paternalistic measures.  </li>
<li><strong>Persistent disagreements emerged: Students remain divided over the legitimacy and timing of irreversible procedures and paternalistic approaches.</strong> Debates centered on whether treatments like amputation can ever be ethically justified and how to weigh patient autonomy against decisive medical intervention in high-risk situations.  </li>
<li><strong>Guides role was pivotal: The AI moderator consistently challenged students to clarify their positions and examine underlying ethical tensions.</strong> Its incisive questionsprompting clarifications on the boundaries between ethical nudging and undue influencehelped deepen the conversation and ensured a balanced exploration of complex medical ethics.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Insight on ethical frameworks: Students effectively connected theoretical models to real-world dilemmas.</strong> Discussions incorporated concepts such as patient capacity, cultural sensitivity, and the interplay between autonomy and paternalism, offering rich material for further academic exploration.  </li>
<li><strong>Insight on debate dynamics: Targeted interventions by Guide facilitated a more nuanced understanding of contentious issues.</strong> By highlighting both areas of agreement and persistent tensionssuch as defining acceptable nudgingthese interactions provide valuable perspectives on how ethical debates can evolve with focused questioning.</li>
</ul>
<h3>Misconceptions</h3>
<ul>
<li><strong>Misconception regarding disclosure: Some participants assumed that any tailored communication or nudging automatically breaches ethical standards.</strong> This oversimplification dismisses the nuanced reality where clinical uncertainty and context can justify strategic guidance without compromising integrity.  </li>
<li><strong>Misconception about mental capacity: A few discussions reflected a binary view of patient capacity instead of recognizing it as a continuum.</strong> This simplification may overlook the complexity of evaluating decision-making capabilities, especially in contexts involving mental health assessments.</li>
</ul>
<h3>Lessons</h3>
<ul>
<li><strong>Lesson on topic complexity: The debates underscored the inherent controversy of irreversible interventions like amputation for apotemnophilia.</strong> Professors might consider emphasizing the need for exhaustive evaluations and clear ethical boundaries before irreversible treatments are pursued.  </li>
<li><strong>Lesson on facilitation effectiveness: Guides incisive questioning significantly enhanced student engagement and critical reasoning.</strong> The AIs structured prompts encouraged clearer articulation of assumptions and deeper exploration of ethical tensions, illustrating the potential benefits of using targeted AI facilitation in complex discussions.</li>
</ul></div>
              <div class="text-muted mt-2">
                Generated on: <span class="utc-time" data-utc-time="2025-03-30T09:52:14.212000+00:00">2025-03-30T09:52:14.212000+00:00</span><span class="local-time"></span>
                
              </div>
              <!-- Add the editor container here -->
              <div id="report-editor-container" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
                </div>
                <textarea id="report-markdown-editor" class="form-control">This assignment explores the ethical implications of controversial medical practices by examining whether physicians should perform irreversible proceduressuch as amputation for apotemnophiliain cases of severe psychological distress, while also questioning the justification for medical paternalism and the limits of patient autonomy. Across the multiple Sway discussions, students engaged in deep debates about informed consent, cultural influences, and the balance between respecting patient choice and ensuring patient welfare, all under the probing moderation of Guide.

### Themes
- **Common ground identified: Students concurred on the need for rigorous psychiatric evaluation and ethical safeguards.** Many participants emphasized that comprehensive patient assessments and strong informed consent protocols are essential regardless of their differing stances on irreversible interventions or paternalistic measures.  
- **Persistent disagreements emerged: Students remain divided over the legitimacy and timing of irreversible procedures and paternalistic approaches.** Debates centered on whether treatments like amputation can ever be ethically justified and how to weigh patient autonomy against decisive medical intervention in high-risk situations.  
- **Guides role was pivotal: The AI moderator consistently challenged students to clarify their positions and examine underlying ethical tensions.** Its incisive questionsprompting clarifications on the boundaries between ethical nudging and undue influencehelped deepen the conversation and ensured a balanced exploration of complex medical ethics.

### Insights
- **Insight on ethical frameworks: Students effectively connected theoretical models to real-world dilemmas.** Discussions incorporated concepts such as patient capacity, cultural sensitivity, and the interplay between autonomy and paternalism, offering rich material for further academic exploration.  
- **Insight on debate dynamics: Targeted interventions by Guide facilitated a more nuanced understanding of contentious issues.** By highlighting both areas of agreement and persistent tensionssuch as defining acceptable nudgingthese interactions provide valuable perspectives on how ethical debates can evolve with focused questioning.

### Misconceptions
- **Misconception regarding disclosure: Some participants assumed that any tailored communication or nudging automatically breaches ethical standards.** This oversimplification dismisses the nuanced reality where clinical uncertainty and context can justify strategic guidance without compromising integrity.  
- **Misconception about mental capacity: A few discussions reflected a binary view of patient capacity instead of recognizing it as a continuum.** This simplification may overlook the complexity of evaluating decision-making capabilities, especially in contexts involving mental health assessments.

### Lessons
- **Lesson on topic complexity: The debates underscored the inherent controversy of irreversible interventions like amputation for apotemnophilia.** Professors might consider emphasizing the need for exhaustive evaluations and clear ethical boundaries before irreversible treatments are pursued.  
- **Lesson on facilitation effectiveness: Guides incisive questioning significantly enhanced student engagement and critical reasoning.** The AIs structured prompts encouraged clearer articulation of assumptions and deeper exploration of ethical tensions, illustrating the potential benefits of using targeted AI facilitation in complex discussions.</textarea>
                <div class="mt-3">
                  <button id="save-report-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-1"></i> Save Changes
                  </button>
                  <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
                    <i class="fas fa-times mr-1"></i> Cancel
                  </button>
                  <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
                </div>
                <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
          <div class="info-box thread-list" id="thread-list">
            
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556"><ul>
<li>
<p><strong>Students debated the ethical nuances of patient autonomy in the context of physician nudging.</strong> They contrasted the idea that withholding information undermines patient rights with the perspective that carefully guiding patients can actually empower them to make better-informed decisions.</p>
</li>
<li>
<p><strong>Students delved into the role of communication, potential biases, and cultural sensitivity in healthcare decision-making.</strong> Their discussion evolved to recognize that factors such as clear dialogue, ethical safeguards like training, and acknowledging diverse patient backgrounds are key in ensuring that guidance does not cross into undue influence.</p>
</li>
<li>
<p><strong>Guide played a pivotal role in deepening the conversation by posing targeted, thought-provoking questions.</strong> Its interventions helped the students explore multiple dimensions of the topicfrom balancing autonomy and guidance to addressing ethical concernswhich progressively led to a richer and more nuanced discussion.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethical nuances of patient autonomy in the context of physician nudging.** They contrasted the idea that withholding information undermines patient rights with the perspective that carefully guiding patients can actually empower them to make better-informed decisions.

- **Students delved into the role of communication, potential biases, and cultural sensitivity in healthcare decision-making.** Their discussion evolved to recognize that factors such as clear dialogue, ethical safeguards like training, and acknowledging diverse patient backgrounds are key in ensuring that guidance does not cross into undue influence.

- **Guide played a pivotal role in deepening the conversation by posing targeted, thought-provoking questions.** Its interventions helped the students explore multiple dimensions of the topicfrom balancing autonomy and guidance to addressing ethical concernswhich progressively led to a richer and more nuanced discussion.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==2f766320dd::4c71986d1b::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556"><ul>
<li><strong>Students discussed the ethics of patient autonomy and the boundaries of medical paternalism.</strong> Student 1 argued for a strict separation between objective medical expertise and personal biases, emphasizing the historic and ongoing mistrust stemming from unethical practices, while Student 2 accepted that, in nuanced cases, downplaying discomfort might help patients make life-improving decisions.</li>
<li><strong>Guide actively stimulated deeper inquiry and nuanced debate throughout the discussion.</strong> It posed a series of targeted questions prompting both students to clarify their positions on honest communication, ethical nudging, and safeguards against bias, ultimately sharpening the focus on balancing patient autonomy with necessary medical intervention.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" class="form-control summary-markdown-editor">- **Students discussed the ethics of patient autonomy and the boundaries of medical paternalism.** Student 1 argued for a strict separation between objective medical expertise and personal biases, emphasizing the historic and ongoing mistrust stemming from unethical practices, while Student 2 accepted that, in nuanced cases, downplaying discomfort might help patients make life-improving decisions.
- **Guide actively stimulated deeper inquiry and nuanced debate throughout the discussion.** It posed a series of targeted questions prompting both students to clarify their positions on honest communication, ethical nudging, and safeguards against bias, ultimately sharpening the focus on balancing patient autonomy with necessary medical intervention.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==8793533cdd::4c71986d1b::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556"><ul>
<li><strong>Students debated whether physicians mislead by withholding information or subtly nudge patient decisions.</strong> The discussion oscillated between emphasizing objective, unbiased facts and the realities of clinical uncertainty, with one student arguing that deviation from objective truth erodes trust and another contending that full disclosureeven if overwhelmingis essential for genuine patient autonomy.</li>
<li><strong>Guide facilitated the conversation with incisive, clarifying questions that encouraged deeper exploration of ethical nuances.</strong> For example, Guide challenged the participants on how doctors should approach uncertainties and balance professional judgment with patient autonomy, prompting a philosophically rich dialogue.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you've raised an interesting philosophical point about objective truth vs. known facts. How should doctors approach uncertainty in medical knowledge?  Consider cases where the best treatment isn't clear-cut. How can doctors communicate this uncertainty without undermining patient trust or their own expertise?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" class="form-control summary-markdown-editor">- **Students debated whether physicians mislead by withholding information or subtly nudge patient decisions.** The discussion oscillated between emphasizing objective, unbiased facts and the realities of clinical uncertainty, with one student arguing that deviation from objective truth erodes trust and another contending that full disclosureeven if overwhelmingis essential for genuine patient autonomy.
- **Guide facilitated the conversation with incisive, clarifying questions that encouraged deeper exploration of ethical nuances.** For example, Guide challenged the participants on how doctors should approach uncertainties and balance professional judgment with patient autonomy, prompting a philosophically rich dialogue.  

&gt; **Student 1, you&#39;ve raised an interesting philosophical point about objective truth vs. known facts. How should doctors approach uncertainty in medical knowledge?  Consider cases where the best treatment isn&#39;t clear-cut. How can doctors communicate this uncertainty without undermining patient trust or their own expertise?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==a15461fcdf::student-dwfilmvkdq==fa671a3cdf::4c71986d1b::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556"><ul>
<li><strong>Students discussed the ethics and practicalities of using amputation to treat apotemnophilia.</strong> Student 1 argued that in severe cases, amputation might alleviate debilitating mental distress and defended patient autonomy, while Student 2 emphasized that alternative psychological interventions and long-term evidence are crucial, especially given the irreversible nature of removing a healthy limb.  </li>
<li><strong>Guide effectively deepened the discussion by prompting the students to evaluate analogies and examine ethical, procedural, and bias-related considerations.</strong> Guides interventions, such as asking about the comparison between amputation and other body-modifying procedures and urging exploration of screening protocols, helped the students clarify their positions and consider how standardized guidelines could balance patient autonomy with medical responsibility.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students discussed the ethics and practicalities of using amputation to treat apotemnophilia.** Student 1 argued that in severe cases, amputation might alleviate debilitating mental distress and defended patient autonomy, while Student 2 emphasized that alternative psychological interventions and long-term evidence are crucial, especially given the irreversible nature of removing a healthy limb.  
- **Guide effectively deepened the discussion by prompting the students to evaluate analogies and examine ethical, procedural, and bias-related considerations.** Guides interventions, such as asking about the comparison between amputation and other body-modifying procedures and urging exploration of screening protocols, helped the students clarify their positions and consider how standardized guidelines could balance patient autonomy with medical responsibility.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==f340be7edd::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556"><ul>
<li>
<p><strong>Students debated the ethics of using amputation to treat apotemnophilia.</strong> One participant emphasized the need for extensive psychological assessments and alternative treatments before considering irreversible surgery, while the other noted that a carefully evaluated amputation could sometimes be justified if no other interventions provided relief from severe mental distress.  </p>
</li>
<li>
<p><strong>Guide profoundly advanced the dialogue by challenging the students to rigorously examine both measurable outcomes and ethical issues.</strong> It prompted them to consider objective metrics for improvement, long-term monitoring, and the complex balance between individual autonomy and protecting vulnerable patients, leading to a multi-faceted exploration of this controversial medical approach.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethics of using amputation to treat apotemnophilia.** One participant emphasized the need for extensive psychological assessments and alternative treatments before considering irreversible surgery, while the other noted that a carefully evaluated amputation could sometimes be justified if no other interventions provided relief from severe mental distress.  

- **Guide profoundly advanced the dialogue by challenging the students to rigorously examine both measurable outcomes and ethical issues.** It prompted them to consider objective metrics for improvement, long-term monitoring, and the complex balance between individual autonomy and protecting vulnerable patients, leading to a multi-faceted exploration of this controversial medical approach.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==be8e2cdede::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556"><ul>
<li>
<p><strong>Students discussed the ethical complexities of patient autonomy and medical paternalism.</strong> Student 1 argued that physicians must fully disclose treatment options to ensure informed consent, while Student 2 maintained that any form of manipulationeven with good intentionsis unacceptable, emphasizing a firm ethical stance against misguiding patients.</p>
</li>
<li>
<p><strong>Guide played an active role in deepening the discussion and prompting further reflection.</strong> It asked probing questions to help the students distinguish between acceptable intervention and unethical manipulation, and later challenged them to consider how full disclosure might affect patient decision-making in emergency situations.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" class="form-control summary-markdown-editor">- **Students discussed the ethical complexities of patient autonomy and medical paternalism.** Student 1 argued that physicians must fully disclose treatment options to ensure informed consent, while Student 2 maintained that any form of manipulationeven with good intentionsis unacceptable, emphasizing a firm ethical stance against misguiding patients.

- **Guide played an active role in deepening the discussion and prompting further reflection.** It asked probing questions to help the students distinguish between acceptable intervention and unethical manipulation, and later challenged them to consider how full disclosure might affect patient decision-making in emergency situations.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==54f3bcccde::student-z21hawwuy29t727419eee7::4c71986d1b::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556"><ul>
<li>
<p><strong>Students debated the ethical boundaries of medical paternalism.</strong> Student 1 argued for preserving maximum patient autonomy even in challenging situations, while Student 2 acknowledged that in extreme life-threatening scenarios, some level of paternalism might be necessary; both explored nuances such as patient capacity and impairment using frameworks like Ackerman's constraints.</p>
</li>
<li>
<p><strong>Guide stimulated deeper reflection with targeted follow-up questions.</strong> Guide consistently probed the students to consider why trust is vital in doctorpatient relationships and how to balance urgent interventions with respect for autonomy, ultimately challenging them to think about improvements in medical education and policy to navigate these ethical complexities.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethical boundaries of medical paternalism.** Student 1 argued for preserving maximum patient autonomy even in challenging situations, while Student 2 acknowledged that in extreme life-threatening scenarios, some level of paternalism might be necessary; both explored nuances such as patient capacity and impairment using frameworks like Ackerman&#39;s constraints.

- **Guide stimulated deeper reflection with targeted follow-up questions.** Guide consistently probed the students to consider why trust is vital in doctorpatient relationships and how to balance urgent interventions with respect for autonomy, ultimately challenging them to think about improvements in medical education and policy to navigate these ethical complexities.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==ed832820df::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556"><ul>
<li>
<p><strong>Students debated the ethics of medical paternalism versus patient autonomy.</strong> Student 1 argued that patients must be fully involved in decision-making, emphasizing the need for clear communication and respect for bodily autonomy, while Student 2 supported a more interventionist role for doctors, especially when patients appear at risk.</p>
</li>
<li>
<p><strong>Students explored the influence of contextual factors on ethical decision-making.</strong> They considered how family involvement, mental health status, and conflicting cultural or religious beliefs complicate the balance between respecting autonomy and ensuring patient welfare, with each perspective evolving throughout the discussion. These nuanced discussions demonstrated a growing awareness of the real-world challenges in applying ethical principles to medical practice.</p>
</li>
<li>
<p><strong>Guide catalyzed deeper ethical analysis with incisive questions.</strong> Guide prompted the students to consider complex scenarios around patient harm and autonomy, asking for clarity on when it is ethically justifiable for doctors to override a patient's wishes.  </p>
</li>
</ul>
<blockquote>
<p><strong>Student 1, you've raised an important point about bodily autonomy. How do you reconcile this principle with cases where a patient's decision might lead to severe harm or death, even when they've been fully informed? Consider a scenario where a patient refuses a life-saving treatment due to unfounded fears. Does the doctor have any ethical obligation to intervene beyond just providing information?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethics of medical paternalism versus patient autonomy.** Student 1 argued that patients must be fully involved in decision-making, emphasizing the need for clear communication and respect for bodily autonomy, while Student 2 supported a more interventionist role for doctors, especially when patients appear at risk.

- **Students explored the influence of contextual factors on ethical decision-making.** They considered how family involvement, mental health status, and conflicting cultural or religious beliefs complicate the balance between respecting autonomy and ensuring patient welfare, with each perspective evolving throughout the discussion. These nuanced discussions demonstrated a growing awareness of the real-world challenges in applying ethical principles to medical practice.

- **Guide catalyzed deeper ethical analysis with incisive questions.** Guide prompted the students to consider complex scenarios around patient harm and autonomy, asking for clarity on when it is ethically justifiable for doctors to override a patient&#39;s wishes.  

&gt; **Student 1, you&#39;ve raised an important point about bodily autonomy. How do you reconcile this principle with cases where a patient&#39;s decision might lead to severe harm or death, even when they&#39;ve been fully informed? Consider a scenario where a patient refuses a life-saving treatment due to unfounded fears. Does the doctor have any ethical obligation to intervene beyond just providing information?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b47c4be4df::student-dwfilmvkdq==f0dad5d2dd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556"><ul>
<li><strong>Students debated the ethical implications of using amputation as treatment for apotemnophilia.</strong> One participant argued that unnecessary surgical interventions should be avoided in favor of psychotherapy and medication, while the other maintained that extreme cases might justify considering amputation after thorough evaluations.</li>
<li><strong>Students presented nuanced arguments emphasizing both individual well-being and potential societal risks.</strong> They discussed the importance of extensive psychiatric screening, the possibility of self-harm when treatments are denied, and long-term concerns such as social media influence and normalization of extreme procedures.</li>
<li><strong>Guide played an active role in deepening the discussion through targeted, incisive questions.</strong> It highlighted key dilemmas and invited further exploration from both sides, as shown below:  </li>
</ul>
<blockquote>
<p><strong>Student 2, you've raised important points about treatment alternatives and the rarity of BIID. How do you weigh the potential risks of denying amputation against the risks of allowing it?</strong></p>
<p><strong>Student 1, your concern about increased visibility leading to mimicry is intriguing. Can you expand on how this risk might be balanced against potential benefits of increased awareness and research?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethical implications of using amputation as treatment for apotemnophilia.** One participant argued that unnecessary surgical interventions should be avoided in favor of psychotherapy and medication, while the other maintained that extreme cases might justify considering amputation after thorough evaluations.
- **Students presented nuanced arguments emphasizing both individual well-being and potential societal risks.** They discussed the importance of extensive psychiatric screening, the possibility of self-harm when treatments are denied, and long-term concerns such as social media influence and normalization of extreme procedures.
- **Guide played an active role in deepening the discussion through targeted, incisive questions.** It highlighted key dilemmas and invited further exploration from both sides, as shown below:  

&gt; **Student 2, you&#39;ve raised important points about treatment alternatives and the rarity of BIID. How do you weigh the potential risks of denying amputation against the risks of allowing it?**
&gt;
&gt; **Student 1, your concern about increased visibility leading to mimicry is intriguing. Can you expand on how this risk might be balanced against potential benefits of increased awareness and research?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==334ea102df::student-dwfilmvkdq==b03ab1d0df::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556"><ul>
<li>
<p><strong>Students debated the justification of medical paternalism, focusing on balancing patient autonomy with the need for decisive medical intervention.</strong> They extensively discussed scenarios ranging from unconscious patients and impaired decision-making to those influenced by strong cultural or religious beliefs, proposing frameworks like quantitative thresholds (e.g., less than 50% control) and the essential role of patient advocates to safeguard against potential misuse.</p>
</li>
<li>
<p><strong>Guide actively challenged and expanded the discussion by posing incisive ethical questions that deepened students' critical analysis.</strong> It prompted the students to consider measurement methods for patient welfare gains, safeguard protocols when patient advocates conflict with patient wishes, and the impact of cultural differences on medical decision-making, thereby enriching their debates with significant ethical and practical dimensions.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the justification of medical paternalism, focusing on balancing patient autonomy with the need for decisive medical intervention.** They extensively discussed scenarios ranging from unconscious patients and impaired decision-making to those influenced by strong cultural or religious beliefs, proposing frameworks like quantitative thresholds (e.g., less than 50% control) and the essential role of patient advocates to safeguard against potential misuse.

- **Guide actively challenged and expanded the discussion by posing incisive ethical questions that deepened students&#39; critical analysis.** It prompted the students to consider measurement methods for patient welfare gains, safeguard protocols when patient advocates conflict with patient wishes, and the impact of cultural differences on medical decision-making, thereby enriching their debates with significant ethical and practical dimensions.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==612b4322df::student-z21hawwuy29t7abc1642dd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556"><ul>
<li><strong>Students discussed the ethical complexity of using amputation as a treatment for apotemnophilia.</strong> They debated the balance between patient autonomy and the duty to prevent harm, with one participant emphasizing a right-to-choose approach while the other stressed the necessity for comprehensive psychiatric evaluation before irreversible procedures.</li>
<li><strong>Students refined their positions by considering both immediate and long-term ethical, clinical, and legal implications.</strong> One student argued that, in extreme cases, amputation could be justified to prevent self-harm, while the other contended that all non-surgical options must be exhausted and decisions made on a strict case-by-case basis.</li>
<li><strong>Guide played a key role in deepening the analysis and clarifying the discussions ethical tensions.</strong> It prompted the participants to critically examine the influence of cultural biases on perceptions of "normal" and the challenges of informed consent in cases of mental illness, thereby significantly enhancing the overall quality of the dialogue.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students discussed the ethical complexity of using amputation as a treatment for apotemnophilia.** They debated the balance between patient autonomy and the duty to prevent harm, with one participant emphasizing a right-to-choose approach while the other stressed the necessity for comprehensive psychiatric evaluation before irreversible procedures.
- **Students refined their positions by considering both immediate and long-term ethical, clinical, and legal implications.** One student argued that, in extreme cases, amputation could be justified to prevent self-harm, while the other contended that all non-surgical options must be exhausted and decisions made on a strict case-by-case basis.
- **Guide played a key role in deepening the analysis and clarifying the discussions ethical tensions.** It prompted the participants to critically examine the influence of cultural biases on perceptions of &#34;normal&#34; and the challenges of informed consent in cases of mental illness, thereby significantly enhancing the overall quality of the dialogue.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==209c3410dd::student-z21hawwuy29t344c4094df::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556"><ul>
<li>
<p><strong>Students debated the ethical limits of "nudging" in patient autonomy.</strong> Student 1 argued that while misleading patients is unethical, a doctors nudging based on professional expertise can be acceptable if it aligns with the patient's understanding, whereas Student 2 underscored the need for transparency and ethical limits to avoid undue influence. Their discussion evolved from defining the roles of medical opinion and factual information to questioning at what point nudging becomes overbearing, particularly for patients with limited capacity.</p>
</li>
<li>
<p><strong>Guide played a proactive role in deepening the conversation.</strong> It interjected several probing questionsasking for distinctions between ethical guidance and unethical nudging, and for criteria to know when to dial back on nudgingwhich pushed the students to reconsider their stances and explore real-world implications. The Guides targeted questions helped refocus the discussion on balancing clear communication with respect for patient autonomy.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethical limits of &#34;nudging&#34; in patient autonomy.** Student 1 argued that while misleading patients is unethical, a doctors nudging based on professional expertise can be acceptable if it aligns with the patient&#39;s understanding, whereas Student 2 underscored the need for transparency and ethical limits to avoid undue influence. Their discussion evolved from defining the roles of medical opinion and factual information to questioning at what point nudging becomes overbearing, particularly for patients with limited capacity.

- **Guide played a proactive role in deepening the conversation.** It interjected several probing questionsasking for distinctions between ethical guidance and unethical nudging, and for criteria to know when to dial back on nudgingwhich pushed the students to reconsider their stances and explore real-world implications. The Guides targeted questions helped refocus the discussion on balancing clear communication with respect for patient autonomy.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2cdff190df::student-dwfilmvkdq==c0f33c0ade::4c71986d1b::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556"><ul>
<li><strong>Students debated the ethical implications of using amputation as treatment for apotemnophilia/BIID.</strong> They began by contrasting perspectives, with one student arguing that amputation could relieve long-standing psychological distress and the other cautioning against irreversible decisions made in a moment of crisis, ultimately converging on the necessity for rigorous psychological evaluation and alternative treatments.</li>
<li><strong>Guide structured the conversation with targeted questions that deepened the discussion.</strong> It prompted the students to clarify key distinctions between medically necessary amputations and those driven by psychological conditions, and later encouraged them to consider broader societal issues such as body autonomy and mental health, which contributed to a notable shift in perspective.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethical implications of using amputation as treatment for apotemnophilia/BIID.** They began by contrasting perspectives, with one student arguing that amputation could relieve long-standing psychological distress and the other cautioning against irreversible decisions made in a moment of crisis, ultimately converging on the necessity for rigorous psychological evaluation and alternative treatments.
- **Guide structured the conversation with targeted questions that deepened the discussion.** It prompted the students to clarify key distinctions between medically necessary amputations and those driven by psychological conditions, and later encouraged them to consider broader societal issues such as body autonomy and mental health, which contributed to a notable shift in perspective.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1329257edf::student-dwfilmvkdq==1ac01fe0df::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556"><ul>
<li><strong>Students debated when medical paternalism is ethically justified.</strong> They discussed scenarios in which doctors should intervene based on patients mental capacity, with one student emphasizing the need for psychiatric evaluations in emergencies while still upholding patient autonomy when feasible.</li>
<li><strong>Students analyzed potential pitfalls of relying solely on psychiatric assessments and the impact of cultural or language barriers.</strong> Their discussion covered how limited information in urgent cases and misunderstandings due to cultural differences could lead to prolonged paternalism, with concrete examples such as challenges in treating Jehovahs Witnesses.</li>
<li><strong>Guide consistently deepened the discussion by asking incisive, exploratory questions.</strong> It steered the conversation toward examining ethical dilemmas and systemic biases, ensuring that both students considered the practical issues surrounding informed consent and patient-centered care.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" class="form-control summary-markdown-editor">- **Students debated when medical paternalism is ethically justified.** They discussed scenarios in which doctors should intervene based on patients mental capacity, with one student emphasizing the need for psychiatric evaluations in emergencies while still upholding patient autonomy when feasible.
- **Students analyzed potential pitfalls of relying solely on psychiatric assessments and the impact of cultural or language barriers.** Their discussion covered how limited information in urgent cases and misunderstandings due to cultural differences could lead to prolonged paternalism, with concrete examples such as challenges in treating Jehovahs Witnesses.
- **Guide consistently deepened the discussion by asking incisive, exploratory questions.** It steered the conversation toward examining ethical dilemmas and systemic biases, ensuring that both students considered the practical issues surrounding informed consent and patient-centered care.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==00e8d13cdf::student-dwfilmvkdq==144d2402de::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556"><ul>
<li><strong>Students debated the ethics of performing elective amputation for apotemnophilia.</strong> One student advocated that irreversible procedures should only occur as a last resort given the inherent risks of harm and the physicians duty to ensure treatments are genuinely necessary, while the other defended patient autonomy by arguing that individuals have the right to determine whats best for their own bodies.</li>
<li><strong>Guide stimulated deeper analysis by prompting students to define key concepts and explore the balance between physical and mental health.</strong> Guides targeted questions encouraged the participants to clarify what constitutes medically necessary treatment and to consider safeguards against irreversible decisions, thereby enriching the ethical dimensions of the discussion.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students debated the ethics of performing elective amputation for apotemnophilia.** One student advocated that irreversible procedures should only occur as a last resort given the inherent risks of harm and the physicians duty to ensure treatments are genuinely necessary, while the other defended patient autonomy by arguing that individuals have the right to determine whats best for their own bodies.
- **Guide stimulated deeper analysis by prompting students to define key concepts and explore the balance between physical and mental health.** Guides targeted questions encouraged the participants to clarify what constitutes medically necessary treatment and to consider safeguards against irreversible decisions, thereby enriching the ethical dimensions of the discussion.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7208e4c4df::student-dwfilmvkdq==988dab6ade::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556"><ul>
<li>
<p><strong>Students explored the complex ethics and medical considerations of using amputation to treat apotemnophilia.</strong> They debated whether amputation should be a last resort and examined non-surgical alternatives, including therapy, medication, and the role of mental health evaluations, while also considering issues like informed consent, insurance coverage, and the broader societal implications related to disability rights.</p>
</li>
<li>
<p><strong>Guide played a pivotal role in deepening and balancing the discussion.</strong> Its targeted questions encouraged both students to expand on their initial ideas, exploring not only the immediate ethical concerns but also long-term impacts such as financial burden and societal attitudes, which significantly enriched the overall debate.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" class="form-control summary-markdown-editor">- **Students explored the complex ethics and medical considerations of using amputation to treat apotemnophilia.** They debated whether amputation should be a last resort and examined non-surgical alternatives, including therapy, medication, and the role of mental health evaluations, while also considering issues like informed consent, insurance coverage, and the broader societal implications related to disability rights.

- **Guide played a pivotal role in deepening and balancing the discussion.** Its targeted questions encouraged both students to expand on their initial ideas, exploring not only the immediate ethical concerns but also long-term impacts such as financial burden and societal attitudes, which significantly enriched the overall debate.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7c87150edd::student-dwfilmvkdq==ed70a0f2dd::28be27b370::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556"><ul>
<li>
<p><strong>Students discussed the ethical boundaries of medical paternalism by contrasting the justification of overriding patient wishes when mental capacity is compromised versus respecting patient autonomy even in the face of unconventional priorities.</strong> One student argued that paternalism is justifiable only when a patient's judgment is clearly impaired, while the other maintained that even in borderline cases, evaluations should be standard to protect patient autonomy, as exemplified by debates over DNR scenarios and patients prioritizing personal projects over treatment.</p>
</li>
<li>
<p><strong>Guide played an active role by posing incisive questions that deepened the inquiry into mental health assessments and patient decision-making.</strong> Its targeted prompts encouraged the students to clarify definitions and examine real-world implications, which significantly enriched the discussion and ensured a balanced exploration of when medical paternalism might be ethically justified.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" class="form-control summary-markdown-editor">- **Students discussed the ethical boundaries of medical paternalism by contrasting the justification of overriding patient wishes when mental capacity is compromised versus respecting patient autonomy even in the face of unconventional priorities.** One student argued that paternalism is justifiable only when a patient&#39;s judgment is clearly impaired, while the other maintained that even in borderline cases, evaluations should be standard to protect patient autonomy, as exemplified by debates over DNR scenarios and patients prioritizing personal projects over treatment.

- **Guide played an active role by posing incisive questions that deepened the inquiry into mental health assessments and patient decision-making.** Its targeted prompts encouraged the students to clarify definitions and examine real-world implications, which significantly enriched the discussion and ensured a balanced exploration of when medical paternalism might be ethically justified.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==23bacef2dd::student-dwfilmvkdq==a8cfc07edd::5b9ce1e246::b774c6f556" style="display: none;"></div>
                  </div>
                </div>
              
            
          </div>

          <!-- Removing the button row since we moved it to the header -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function debug_log(message, level) {
    console.log('DEBUG:', message);
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Theme toggling functionality
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      htmlElement.classList.remove('dark-mode');
      htmlElement.classList.add('light-mode');
      themeToggle.checked = true;
    } else {
      // Set dark mode as default if no preference found
      htmlElement.classList.add('dark-mode');
      htmlElement.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
      themeToggle.checked = false;
    }
    
    // Handle toggle changes
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        // Switch to light mode
        htmlElement.classList.remove('dark-mode');
        htmlElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        // Switch to dark mode
        htmlElement.classList.remove('light-mode');
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Handle refresh button click
    const refreshBtn = document.getElementById('refresh-cache-btn');
    if (refreshBtn) {
      refreshBtn.addEventListener('click', function() {
        // Add a spinning animation while refreshing
        const icon = refreshBtn.querySelector('i');
        icon.classList.add('fa-spin');
        
        // Reload the page with bypass_cache=true parameter
        const currentUrl = window.location.href;
        const url = new URL(currentUrl);
        url.searchParams.set('bypass_cache', 'true');
        window.location.href = url.toString();
      });
    }
    
    // Convert UTC timestamps to local timezone
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
  
  // Original convert UTC timestamps function (duplicated in script block below) can be removed
</script>

<script>
  // New code for summary generation progress
  let pollingInterval;
  let cancelRequested = false;

  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    
    // Initialize the report button state based on whether summaries already exist
    const hasSavedSummaries = true;
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      console.log("Enabling report button because saved summaries exist");
    }
    
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    
    if (hasGeneratingThreads) {
      // Start polling if there are already generating threads
      startPolling();
      generateBtn.style.display = 'none';
      cancelBtn.style.display = 'inline-block';
    }
    
    // Handle generate button click
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        // Show all spinners and status messages
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        
        generateBtn.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        
        // Make AJAX call to queue summaries instead of form submission
        fetch('/assignment/b774c6f556/generate_summaries', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1)
            // Start polling for updates
            startPolling();
            // Enable report button when summaries are being generated
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1)
          }
        })
        .catch(error => {
          debug_log("Network error:", error, 1)
        });
      });
      
      // Handle cancel button
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/b774c6f556/cancel_generation', {
            method: 'POST'
          }).then(response => {
            if (response.ok) {
              stopPolling();
              // Reset UI
              document.querySelectorAll('.thread-status').forEach(status => {
                if (status.textContent === 'Queued for generation...') {
                  status.style.display = 'none';
                }
              });
              document.querySelectorAll('.spinner-border').forEach(spinner => {
                spinner.style.display = 'none';
              });
              generateBtn.style.display = 'inline-block';
              cancelBtn.style.display = 'none';
            }
          });
        });
      }
    }
    
    // Handle report button click
    if (reportBtn) {
      reportBtn.addEventListener('click', function() {
        // Show spinner
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        
        // Disable button while generating
        reportBtn.disabled = true;
        
        // Change message in report section
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        
        // Make AJAX call to generate the report
        fetch('/assignment/b774c6f556/generate_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1)
          
          // Start polling for report status
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1)
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    
    // Handle refresh data button click
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        // Show spinner
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        
        // Disable button while refreshing
        refreshDataBtn.disabled = true;
        
        // Make AJAX call to refresh data
        fetch('/assignment/b774c6f556/refresh_data', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          
          // Reload the page to show refreshed data
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    
    // Handle regenerate title button click
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        // Disable the button and show a spinner icon
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        
        // Call the regenerate title endpoint
        fetch('/assignment/b774c6f556/regenerate_title', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update the title text directly
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) {
              titleEl.textContent = data.title;
            }
            // Show success message
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
  });

  function startPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
    }
    
    // Poll every 2 seconds
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    
    // Do an immediate check to start the process
    checkSummaryStatus();
  }

  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }

  function checkSummaryStatus() {
    console.log("Checking summary status...");
    fetch('/assignment/b774c6f556/summary_status')
      .then(response => response.json())
      .then(data => {
        console.log("Status data:", data);
        let activeGeneration = false;
        
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'inline-block';
            }
          } else if (threadInfo.status === 'completed') {
            if (statusEl) {
              statusEl.style.display = 'none';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
            if (summaryEl && threadInfo.summary) {
              summaryEl.innerHTML = threadInfo.summary;
              summaryEl.style.display = 'block';
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          }
        });
        
        // If no thread is still queued or generating, stop polling and reset UI
        if (!activeGeneration) {
          stopPolling();
          document.getElementById('generate-btn').style.display = 'inline-block';
          document.getElementById('cancel-btn').style.display = 'none';
          
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => {
        debug_log('Error checking summary status:', error, 1)
      });
  }
  
  // Function to check the report generation status
  function checkReportStatus() {
    fetch('/assignment/b774c6f556/report_status')
      .then(response => response.json())
      .then(data => {
        debug_log("Report status:", data, 1)
        
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        if (data.status === 'completed') {
          // Report is ready, update the UI
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Display the report
          if (reportSection) {
            // Use safe assignment of innerHTML to preserve nested HTML structure
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            
            // Add custom CSS to ensure proper nested list rendering
            const styleTag = document.createElement('style');
            styleTag.textContent = `
              #report-content ul ul { 
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                padding-left: 2em;
              }
              #report-content li > ul {
                margin-left: 1em;
              }
            `;
            reportContent.appendChild(styleTag);
            
            // Add the content
            reportContent.innerHTML += data.content;
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2';
            generatedText.innerHTML = `Generated on: <span class="utc-time" data-utc-time="${data.generated_at}">${data.generated_at}</span><span class="local-time"></span>`;
            
            // Clear the report section and append the new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert the timestamp to local time
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true
                  };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  
                  // Find the next sibling with class local-time and set its content
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) {
                console.error('Error converting time:', e);
              }
            });
          }
        } else if (data.status === 'generating') {
          // Report is still being generated, check again in 2 seconds
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        }
      })
      .catch(error => {
        debug_log('Error checking report status:', error, 1)
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- Add CodeMirror for report editing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">

<script>
  // Report editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');

    // Initialize CodeMirror if report editor exists
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }

    // Edit button handler
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        // Refresh CodeMirror to ensure proper rendering
        if (reportEditor) reportEditor.refresh();
      });
    }

    // Cancel button handler
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }

    // Save button handler
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        // Get the edited markdown
        const markdown = reportEditor.getValue();
        
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        editorSpinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/b774c6f556/edit_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            reportContent.innerHTML = data.content;
            
            // Show success message and close editor
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    
    // Helper to show status messages
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<!-- Add CSS for the editor status messages -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>

<!-- New export button update script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const exportBtn = document.querySelector('a[href*="/export"]');
  if (exportBtn) {
    exportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      const exportUrl = new URL(this.href, window.location.origin);
      exportUrl.searchParams.set('theme', currentTheme);
      window.location.href = exportUrl.toString();
    });
  }
  
  // Set theme class on HTML element for export mode
  if ('True' === 'True' && 'light-mode') {
    document.documentElement.className = 'light-mode';
  }
});
</script>

<script>
  // Summary editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryButtons = document.querySelectorAll('.edit-summary-btn');
    const summaryContainers = document.querySelectorAll('.summary-editor-container');
    const saveSummaryButtons = document.querySelectorAll('.save-summary-btn');
    const cancelSummaryEditButtons = document.querySelectorAll('.cancel-summary-edit-btn');
    const summaryEditors = document.querySelectorAll('.summary-markdown-editor');
    const summaryStatusMessages = document.querySelectorAll('.summary-editor-status');

    editSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'block';
          }
        });
        summaryEditors.forEach(editor => {
          if (editor.id === `summary-markdown-editor-${sessionId}`) {
            editor.focus();
          }
        });
      });
    });

    saveSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        const markdown = this.previousElementSibling.value;
        
        if (!markdown.trim()) {
          showSummaryStatus('Summary content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
        spinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/b774c6f556/edit_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            session_id: sessionId,
            summary_markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          spinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            const summaryContainer = document.getElementById(`summary-editor-container-${sessionId}`);
            summaryContainer.innerHTML = data.content;
            
            // Show success message and close editor
            showSummaryStatus(data.message, 'success');
            setTimeout(() => {
              summaryContainer.style.display = 'none';
              summaryStatusMessages.forEach(status => {
                status.style.display = 'none';
              });
            }, 1500);
          } else {
            showSummaryStatus(data.message, 'error');
          }
        })
        .catch(error => {
          spinner.style.display = 'none';
          showSummaryStatus('Error saving summary: ' + error, 'error');
        });
      });
    });

    cancelSummaryEditButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'none';
          }
        });
        summaryStatusMessages.forEach(status => {
          status.style.display = 'none';
        });
      });
    });

    // Helper to show status messages
    function showSummaryStatus(message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 5000);
    }
  });
</script>

<!-- Add JavaScript for thread summary editing -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all edit buttons for summaries
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    // Get all regenerate buttons for summaries
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    
    // Initialize CodeMirror editors object to store all editors
    const summaryEditors = {};
    
    // Add click handlers to all edit buttons
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      
      // Create CodeMirror editor when edit button is clicked (lazy initialization)
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        
        // Initialize CodeMirror if not already done
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          // Get original markdown content from data attribute or use HTML content as fallback
          let markdownContent = textarea.value;
          if (!markdownContent) {
            // This is a simple fallback that won't be perfect - ideally the backend would provide the markdown
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          
          summaryEditors[sessionId].setValue(markdownContent);
          // Refresh to ensure proper rendering
          summaryEditors[sessionId].refresh();
        } else {
          // Just refresh if already initialized
          summaryEditors[sessionId].refresh();
        }
      });
      
      // Add handler for cancel button
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      
      // Add handler for save button
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          // Get the edited markdown
          const markdown = summaryEditors[sessionId].getValue();
          
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          
          // Show spinner
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          
          // Make API call to save
          fetch(`/assignment/b774c6f556/edit_summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              session_id: sessionId,
              markdown: markdown
            })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            
            if (data.success) {
              // Update the displayed content with the HTML returned from the server
              summaryElement.innerHTML = data.content + 
                `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                   <i class="fas fa-sync"></i>
                 </button>
                 <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                   <i class="fas fa-pencil-alt"></i>
                 </button>`;
              
              // Show success message and close editor
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                summaryElement.style.display = 'block';
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    
    // Add click handlers to all regenerate buttons
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      
      btn.addEventListener('click', function() {
        if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
          // Show a spinner in the summary area
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            
            // Hide the summary while it's regenerating
            summaryElement.style.opacity = '0.5';
            
            // Make API call to regenerate
            fetch(`/assignment/b774c6f556/regenerate_summary`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                session_id: sessionId
              })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              
              if (data.success) {
                // Update the displayed content with the HTML returned from the server
                summaryElement.innerHTML = data.content + 
                  `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                     <i class="fas fa-sync"></i>
                   </button>
                   <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                     <i class="fas fa-pencil-alt"></i>
                   </button>`;
                
                // Reset styles and show success message
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
                
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => {
                statusElement.style.display = 'none';
              }, 5000);
            });
          }
        }
      });
    });
    
    // Function to reattach event listeners after content is updated
    function attachButtonListeners(sessionId) {
      // Find the newly created buttons
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      
      // Reattach edit button listener
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          
          // Reinitialize or refresh CodeMirror
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      
      // Reattach regenerate button listener
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            const statusElement = document.getElementById(`status-${sessionId}`);
            const spinnerElement = document.getElementById(`spinner-${sessionId}`);
            
            if (statusElement && spinnerElement) {
              statusElement.textContent = 'Regenerating summary...';
              statusElement.className = 'status-message thread-status text-info';
              statusElement.style.display = 'block';
              spinnerElement.style.display = 'inline-block';
              
              summaryElement.style.opacity = '0.5';
              
              fetch(`/assignment/b774c6f556/regenerate_summary`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  session_id: sessionId
                })
              })
              .then(response => response.json())
              .then(data => {
                spinnerElement.style.display = 'none';
                
                if (data.success) {
                  summaryElement.innerHTML = data.content + 
                    `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                       <i class="fas fa-sync"></i>
                     </button>
                     <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                       <i class="fas fa-pencil-alt"></i>
                     </button>`;
                  
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message;
                  statusElement.className = 'status-message thread-status success';
                  
                  attachButtonListeners(sessionId);
                  
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 3000);
                } else {
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message || 'Error regenerating summary';
                  statusElement.className = 'status-message thread-status error';
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 5000);
                }
              })
              .catch(error => {
                spinnerElement.style.display = 'none';
                summaryElement.style.opacity = '1';
                statusElement.textContent = 'Error regenerating summary: ' + error;
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              });
            }
          }
        });
      }
    }
    
    // Helper to show status messages for summary editing
    function showSummaryStatus(sessionId, message, type) {
      const statusElement = document.getElementById(`summary-editor-status-${sessionId}`);
      statusElement.textContent = message;
      statusElement.className = `status-message summary-editor-status ${type}`;
      statusElement.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusElement.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<script>
  // Handle regenerate title button click
  const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
  if (regenerateTitleBtn) {
    regenerateTitleBtn.addEventListener('click', function() {
      // Disable the button and show a spinner icon
      regenerateTitleBtn.disabled = true;
      const icon = regenerateTitleBtn.querySelector('i');
      const originalIcon = icon.className;
      icon.className = 'fas fa-spinner fa-spin';
      
      // Call the regenerate title endpoint
      fetch('/assignment/b774c6f556/regenerate_title', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Update the title text directly
          const titleEl = document.querySelector('.generated-title');
          if (titleEl) {
            titleEl.textContent = data.title;
          }
          // Show success message
          console.log("Title regenerated:", data.title);
        } else {
          console.error("Error regenerating title:", data.message);
          alert("Error regenerating title: " + data.message);
        }
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Error regenerating title. Please try again.");
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      });
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let pollingInterval = null;

    // Debug logging function
    function debug_log(message, level, details = null) {
      if (details) {
        console.log(`DEBUG[${level}]: ${message}`, details);
      } else {
        console.log(`DEBUG[${level}]: ${message}`);
      }
    }
    
    // Initialize the report button state based on saved summaries status
    const reportBtn = document.getElementById('report-btn');
    const hasSavedSummaries = true;
    
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
  });
</script>

<script>
  // This script handles dark mode parameter in URL
  document.addEventListener('DOMContentLoaded', function() {
    // Check for darkmode parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('darkmode') === 'true') {
      // Create and append dark mode styles
      const darkModeStyle = document.createElement('style');
      darkModeStyle.textContent = `
        body { background-color: #1a1a1a !important; }
        body, div, section, article, aside, header, footer, main, p, span, h1, h2, h3, h4, h5, h6, li, td, th {
          color: #e6e6e6 !important;
        }
        .answer-card, .question-card, .card, .container, .container-fluid, .row {
          background-color: #2a2a2a !important;
          color: #e6e6e6 !important;
        }
        a { color: #88afd3 !important; }
        pre, code { background-color: #333 !important; color: #f8f8f8 !important; }
        table, tr, td, th { border-color: #444 !important; background-color: #2a2a2a !important; }
        input, textarea, select { background-color: #333 !important; color: #e6e6e6 !important; }
        blockquote { background-color: #333 !important; border-left-color: #666 !important; }
        .panel, .panel-default, .panel-body, .panel-heading { 
          background-color: #2a2a2a !important; 
          color: #e6e6e6 !important;
          border-color: #444 !important;
        }
        .text-muted, .text-secondary { color: #aaa !important; }
        .bg-light, .bg-white { background-color: #2a2a2a !important; }
        .border { border-color: #444 !important; }
      `;
      document.head.appendChild(darkModeStyle);
    }
  });
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        color: #e6e6e6 !important;
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>
</body>
</html>