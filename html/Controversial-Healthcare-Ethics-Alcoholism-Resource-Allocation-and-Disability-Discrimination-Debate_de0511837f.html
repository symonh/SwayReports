
<!doctype html>
<html lang="en" class="light-mode">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Controversial Healthcare Ethics: Alcoholism, Resource Allocation, and Disability Discrimination Debate</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    :root {
      /* Dark mode theme variables (default) */
      --bg-color: #121212;
      --card-bg: #1e1e2d;
      --card-header-bg: #252538;
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #2d2d43;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #252538;
      --message-right-bg: #1a1a2e;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple theme */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    body { 
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.9em;
      padding: 6px 12px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
      transform: rotate(180deg);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: rotate(180deg) scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 30px;
      column-count: 1;
      column-gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        column-count: 2;
      }
    }
    .thread-item {
      display: inline-block; /* Required for column layout */
      width: 100%;
      margin-bottom: 15px;
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 12px;
      transition: all 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      break-inside: avoid; /* Prevents items from breaking across columns */
      transform: translateY(0);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      transform: translateY(-5px);
      box-shadow: 0 10px 16px rgba(0,0,0,0.25);
      border: 2px solid #ff851b;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .thread-header .thread-actions {
      display: flex;
      align-items: center;
      margin-left: 30px;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to not expand beyond the left column's Info container */
    #topics-container {
        max-height: 345px;
        min-height: 345px;
        overflow-y: auto;
    }
    
    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }

    /* Add social sharing buttons styling */
    .social-share-container {
      background-color: var(--card-header-bg);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .social-share-title {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary-color);
    }
    .social-share-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: opacity 0.2s;
      font-size: 0.9rem;
    }
    .social-btn:hover {
      opacity: 0.85;
      text-decoration: none;
      color: white;
    }
    .social-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    .btn-twitter {
      background-color: #1DA1F2;
    }
    .btn-facebook {
      background-color: #4267B2;
    }
    .btn-linkedin {
      background-color: #0077B5;
    }
    .btn-instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }
    @media (max-width: 576px) {
      .social-btn {
        padding: 4px 9px;
        font-size: 0.8rem;
      }
      .social-btn i {
        margin-right: 4px;
      }
    }
  </style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the logo and Sway Discussion Assignment header in individual reports */
    .container > .row:first-child img[src*="sway-logo"],
    .container > .row:first-child .generated-title,
    .container > .row:first-child .text-info,
    .container > .row:first-child .mb-1,
    .container > .row:first-child .text-center {
        display: none !important;
    }
    
    /* Hide the entire first row if it only contains the logo and title */
    .container > .row:first-child:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    
    /* Adjust spacing at the top of the report */
    .container > .row:first-child {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }

    /* Style the report title container */
    .report-assignment-title {
        display: flex !important;
        align-items: center !important;
        min-height: 60px !important;
    }

    /* Style the report title */
    .report-assignment-title h3 {
        margin: 0 !important;
        padding: 10px 0 !important;
        font-size: 24px !important;
        line-height: 1.3 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding: 0 !important;
        display: flex !important;
        align-items: center !important;
        min-height: 80px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }

    /* Style the main title container */
    .card-header h3 {
        margin: 0 !important;
        padding: 20px !important;
        font-size: 24px !important;
        line-height: 1.3 !important;
        width: 100% !important;
    }

    /* Ensure the card title takes full width */
    .card-header .card-title {
        width: 100% !important;
        margin: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding: 0 !important;
        display: flex !important;
        align-items: center !important;
        min-height: 80px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }

    /* Style the main title container */
    .card-header h3 {
        margin: 0 !important;
        padding: 20px !important;
        font-size: 24px !important;
        line-height: 1.3 !important;
        width: 100% !important;
    }

    /* Ensure the card title takes full width */
    .card-header .card-title {
        width: 100% !important;
        margin: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    
    /* Hide the empty div before the social share container */
    .social-share-container:before,
    .social-share-container:empty,
    .social-share-container > div:empty {
        display: none !important;
    }
    
    /* Also hide any empty divs that might appear before the social share text */
    .social-share-title:before,
    div:empty + .social-share-container {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    
    /* Hide the empty div before the social share container */
    .social-share-container:before,
    .social-share-container:empty,
    .social-share-container > div:empty {
        display: none !important;
    }
    
    /* Also hide any empty divs that might appear before the social share text */
    .social-share-title:before,
    div:empty + .social-share-container {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    
    /* Hide the empty div before the social share container */
    .social-share-container:before,
    .social-share-container:empty,
    .social-share-container > div:empty {
        display: none !important;
    }
    
    /* Also hide any empty divs that might appear before the social share text */
    .social-share-title:before,
    div:empty + .social-share-container {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Adjust spacing in the card header */
    .card-header {
        padding-top: 5px !important;
    }
    
    /* Hide any empty card titles */
    .card-header .card-title:empty,
    .card-header .card-title:not(:has(*:not([style*="display: none"]))) {
        display: none !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Hide any empty divs or spaces in the card header */
    .card-header .card-title > div:empty,
    .card-header .card-title > div:not(:has(*)) {
        display: none !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Completely remove the entire card-header to eliminate all spacing issues */
    .card-header {
        display: none !important;
        height: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
    }
    
    /* Adjust the container to eliminate any extra spacing at the top */
    .container-fluid {
        padding-top: 0 !important;
        margin-top: 0 !important;
    }
    
    /* Remove any margin/padding from the top social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 10px !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the generated title */
    .card-header .card-title .generated-title {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Hide any empty divs or spaces in the card header */
    .card-header .card-title > div:empty,
    .card-header .card-title > div:not(:has(*)) {
        display: none !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Completely remove the entire card-header to eliminate all spacing issues */
    .card-header {
        display: none !important;
        height: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
    }
    
    /* Adjust the container to eliminate any extra spacing at the top */
    .container-fluid {
        padding-top: 0 !important;
        margin-top: 0 !important;
    }
    
    /* Remove any margin/padding from the top social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 10px !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Style the generated title to look nice at the top */
    .card-header .card-title .generated-title {
        display: block !important;
        font-size: 1.75rem !important;
        font-weight: 600 !important;
        margin: 15px 0 10px !important;
        padding: 0 !important;
        color: #23004D !important;
    }
    
    /* Hide any empty divs in the card header */
    .card-header .card-title > div:empty,
    .card-header .card-title > div:not(:has(*)) {
        display: none !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Style the card header to be minimal */
    .card-header {
        padding: 0 15px !important;
        background: transparent !important;
        border: none !important;
        margin: 0 !important;
    }
    
    /* Remove any margin/padding from the top social sharing section */
    .social-sharing {
        margin-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Hide any empty divs in the card header */
    .card-header .card-title > div:empty,
    .card-header .card-title > div:not(:has(*)) {
        display: none !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Style the card header to be minimal */
    .card-header {
        padding: 0 15px !important;
        background: transparent !important;
        border: none !important;
        margin: 0 !important;
    }
    
    /* Remove any margin/padding from the top social sharing section */
    .social-sharing {
        margin-top: 10px !important;
    }
    
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 15px 0 10px;
        padding: 0;
        line-height: 1.3;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Hide the Sway logo and link */
    .card-header .card-title a[href*="swaybeta.ai"],
    .card-header .card-title img[src*="sway-logo"] {
        display: none !important;
    }
    
    /* Hide the "Sway Discussion Assignment Instructor Report" text */
    .card-header .card-title .title-text {
        display: none !important;
    }
    
    /* Hide any empty divs in the card header */
    .card-header .card-title > div:empty,
    .card-header .card-title > div:not(:has(*)) {
        display: none !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Style the card header to be minimal */
    .card-header {
        padding: 0 15px !important;
        background: transparent !important;
        border: none !important;
        margin: 0 !important;
    }
    
    /* Remove any margin/padding from the top social sharing section */
    .social-sharing {
        margin-top: 10px !important;
    }
    
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 15px 0 10px;
        padding: 0;
        line-height: 1.3;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

    <style>
    /* Style for our custom title */
    .custom-report-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #23004D;
        margin: 0 0 15px;
        padding: 15px 15px 0;
        line-height: 1.3;
    }
    
    /* Style for social sharing section */
    .social-sharing {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }
    </style>
    
<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>
</head>
<body>
<div class="dashboard-container">
  <div class="card">
    <!-- Social Sharing Buttons - only visible in shared mode -->
    <div class="social-share-container">
      <div class="social-share-title">
        <i class="fas fa-share-alt mr-2"></i> Share this assignment with your colleagues
      </div>
      <div class="social-share-buttons">
        <a href="#" class="social-btn btn-twitter" id="twitter-share">
          <i class="fab fa-twitter"></i> X
        </a>
        <a href="#" class="social-btn btn-facebook" id="facebook-share">
          <i class="fab fa-facebook-f"></i> Facebook
        </a>
        <a href="#" class="social-btn btn-linkedin" id="linkedin-share">
          <i class="fab fa-linkedin-in"></i> LinkedIn
        </a>
        <a href="#" class="social-btn btn-instagram" id="instagram-share">
          <i class="fab fa-instagram"></i> Instagram
        </a>
      </div>
    </div>
    
    
    <div class="card-body">
      <div class="row">
        <!-- Left column: General Information & Timelines -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
          </h5>
          
            <div id="timelines-container" class="info-box">
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Completion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-03-24 04:59:00+00:00">2025-03-24 04:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Opinion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-03-20 04:59:00+00:00">2025-03-20 04:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
            </div>
          

          <h5 class="section-title mt-4">
            <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
          </h5>
          <div id="info-container" class="info-box">
            <div class="row mb-3">
              <div class="col-5 col-label">Instructor:</div>
              <div class="col-7 col-value">[redacted]</div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Min. chat time:</div>
              <div class="col-7 col-value">
                
                  25 minutes
                
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Created on:</div>
              <div class="col-7 col-value">
                <span class="utc-time" data-utc-time="2025-03-18T16:09:26.233990+00:00">2025-03-18T16:09:26.233990+00:00</span>
                <span class="local-time"></span>
              </div>
            </div>
            
            
            <div class="row mb-3">
              <div class="col-5 col-label">Chat threads:</div>
              <div class="col-7 col-value">15 (15 disagree)</div>
            </div>
          </div>
        </div>

        <!-- Right column: Topics and Chat Threads -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
          </h5>
          
            <div id="topics-container" class="info-box">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Alcoholism and Liver Transplanation</div>
                  <div>Alcoholics should not compete for livers on equal terms with non-alcoholics.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Disability Discrimination</div>
                  <div>When a person with a disability and a person without a disability need identical medical treatment, and we can only provide treatment to one of them, we should provide treatment to the person without the disability.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Distribution</div>
                  <div>The right way to distribute healthcare resources is ability to pay.  If you can pay, then you can get treatment.  If you can&#39;t, then you shouldn&#39;t get treatment.</div>
                </div>
                
              
              <!-- Removed toggle link; topics will scroll if content overflows -->
            </div>
          
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i>Opinion scale: -3 Strongly Disagree to +3 Strongly Agree
          </div>
          <div class="info-box">
            
              <div class="row">
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdwAAAEUCAYAAACBGIcsAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjcuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8pXeV/AAAACXBIWXMAAA9hAAAPYQGoP6dpAAA9jElEQVR4nO3dd3wTdR8H8M9dRidt05YOShmFUjalhbL3XiooiIoIioKgAq7H+SjOx4mgoAgIoiKggILIroDIhrKhlJZRoJOmg0Kb+fwRGi0JNGmTXFo/79fLFy/vrr/7/u6S+9zMCfXqtTKCiIiInEqUugAiIqJ/AwYuERGRCzBwiYiIXICBS0RE5AIMXCIiIhdg4BIREbkAA5eIiMgFGLhEREQuwMAlIiJyAQauC4WGhmDnri3YtScRU56aeNvpvpj7KXbtSUS79nEuqSssPBS79iTilzXLnTaPxyY8gl17EvHExEfNwwYPGYBdexLxxpsvO22+1Z215XY7Zetx155Em9tfuXopdu1JRETdOlUp02n+2Sdb/3tswiNSl+10rt5GVEXfvr3w1tuvlRvWNq4Ndu1JxJfzZklUlTTkUhfwbzJk6ECIooiSkhIMGToQX8/7BlqtVuqyiNzWjes3sHHDZovh3bp3hbe3F/btOwB1nrrcuLNn01xVHlUgNrY13nrndRw5ckzqUtwCA9eFBg8ZgLy8PGzduh0jRw5H7z49sHHDFqnLksz2bTtx4vhJXLtWLHUp/1rPPPU85HIZMjOypC7FqoKCQsx4832L4StXL4W3txe+XfwDkg4dkaAysoUgClaHnzxxGg/c/whKSkpdXJG0eErZReLbtUWdOuHYt/cgNm/cCgC4Z/gwiauSVnFxMS5cSMfVq3lSl/KvdfnyFVy4kA69Xi91KfQvUlpaigsX0pGVlS11KS7FI1wXGTp0IABg9669OH78JC5eTEebNq0Q1agh0lLP2dzOkKEDMXTYIDRs2AAwGnH+wkX8tGIVtm7ZZjHtgIF9cfc9QxEd3QhymRyXLl3Gli1/YNmPP6O01PqeZXDtYDz++Dh07tIRvj4+uHwlA2vX/I4Vy1fCaCz/YikPDw888OBI9OnTE3XrRkCn1yElJRW/rF6LTTd3Ku5k8JABeO31/2Djhs3ljmJatmyOMQ+PRnSTxggKCkRBQSGOHT2BH35YjlMnT5unaxvXBnPmzsTSH1bg93UbMHHSY2gT2xoymQynTydj7pz5OHXyNFq3aYnHHx+PZs2bovhaMfbvP4g5X8yDWp1v0zKvVcsXo+6/F527dERkZAQ8PDxu1nQc339fvqaw8FCsWv0jdmzfiY8/moWJkx5Dx04J8PX1xeXLV/Db2t+xYvkqGAyGcvMICgrEI+PGoGvXTlCpApB27jy+W7LUpvqqYuXqpQgPD8PI+8Yg40omVv+6DLVrB2PkvWNw+fIVi+k//uQ9dO7SEc8/9wp2/bUHACCKIu66ewiGDB2IBg3qQxAEpKWmYfXqtVj/+6Zyf1+2zj+bOQcqlT+Gj7gbMpkMO//8y+qRbGXZMp+YmGjcP/o+tG7TEkFBQTAY9MjKysbOP3dhybdLy515eWzCI3hswiN46cXXodFqMXbsg4hu0hhGowEnjp/CN98swbGjJ8rVULt2MB6b8Ahat2mJ8LAwlJaW4syZs1i75nds3lz+OvuuPYlISz2HKZOn46lnJqFLl05QKORISz2PZT/+hD/+2GFTv4ODgzD6gZHo0KEdwsLDoFDIkZenxqGDh7Hk26W4eDHdPG3Z92f5spVYvWoNJk56FG3jYuHl6Ylz5y9g5U+/YN26DRbzsHW5vfr6ixgyxLTda9OmFXbtScShQ4fx1ORnzfM+cuQYnpw4tVz7LVu1wEMP3Y/WbVrC19cHV3PzsGv3XixZ/AOys3PKTbty9VL4+vpi6OB7MfaRBzFgQF+EhNaGWp2PHdt3YuGCJSgsLLRp2bkCA9cFfHx80KNnNxQXF+PPP3cBAH5ftxGTnpyA4cOH4ZOPZ1fYhiiKeP9/M9Ctexdcv34Dh5NMp9Hi4mPx9jv/RXR0Y3z15QIAgCAIeOPNV9B/QB+UlmpwOOkIbpSUIDa2NSZOegy9enXHM0+/YPFB9PHxxsKFc+Hp5YnDSUfg4+uD2NjWmDptMkJDQzB71lzztH5+fpj75UxENWqI/PwC7NmzH56eHoht2waxsa2RkNAO77z9gd3LqkWLZpj9xcdQKBQ4dvQETp1MRkTdOujdpwe6de+M6VP/g0OHDpf7m5iYaAwfMQwFBYU4dOgwoqIaID6+LT7/4hPMnjUXz78wDRcvpmPfvgOIjW2NwUMGoHF0I4wb+0SF9ahUAZj39eeoGxmBS+mXcfDAYSgUcsQ0bYJevXugS9dOmPTEMzh9+ky5vwsKDsKCb+bCy8sLx46dgIdSidi2rfHM1MkIrxOOmZ98bp42LDwUc7/8DGFhoUhPv4S//tqDhlH18d77M5CWdt7uZVhZBoMBmzcl4sGHRqFvv174dvEP5cb7+fmhfUI81Hlq7N2zDwAgk8nwwUfvoHPnDrh27RpOHD8JrVaL2LZt8Pp/X0JcfCzefftDi3kNH3EXIiLqYP/+A6jl64sLF9ItpnGE282nV+8emPHWaxAE4Pjxkzh96gwCA1Vo2ao5xjz8AOLj22LCY1MsdjIHDu6Pnj274eLFdOzffxBRUQ3QoWN7xMXHYvKkaThx4pR5WX0+5xPUqxeJ1LNp2LVrD/z8/BDbtg3atY9DRN06WLzo+3Jte3h6YM7cmagbGYGDB5MgE2Wm5ff+m1i44FssXPDtHftar14kvvzqM6gCVUhLPYd9+w7A28sLzZo3xeAhA9Ctexc8/NBjFqEV1agBFi6ai9LSUhw7dgIB/v5o1boFXn39Rfj518KPS38yT2vPcjt+9ARq1w5GQkI7qPPU2LfvAM6fv3jHPoy4925Mf/YpyGQyHD9+EtlZOYhu0ggjRtyFPn164NlpL+HUqeRyfyOKAj765F3ExcXi+LGTOHfuPOLi22LkqBFo06YVHnv0Sej1htvM0bUYuC7Qr39veHp6Ys2v61BSUgIA+P33TXj8ifEYMLAv5nzxtXn47YwcNQLdunfB2bOpeHbaS8jNvQoAqFMnHF8v+BxjH3kQW7f8gZSUVNw38h70H9AHly9dwbSpL5qPVLy9vTDjrdfQpWsn/OflZ/Hqy2+Wm4ePjw9SUlLx4vOvmvdSe/XugXffewPDR9yFeV8tNB8Zv/TKc4hq1BA7d+7GG6+/jRs3TPVH1K2Dzz77EIOHDMDp02fw80+r7VpWEyc9Bk9PT0x75kXs23fAPPz+0fdh6rTJeGT8QxaBG9+uLTZvSsRbM96HXq+HXC7HvK9no1nzpnjp5efwzcIlWDB/MQBAFajCjz8uQpMmjdGiRTPzBvJ2xo0fg7qREVixfCU+mznHPFypVODtd/6Lbt274J7hw/C/9z8p93ctWjTD4aSjeOXlN5CfXwAA6NK1Ez76+F0MHz4M8+d9Y17Gzz73DMLCQrF61Rp88vFs89HvhMfH4dHHxtq1/Kpq/fpNpsDtaxm4vfv0gEKhwJYtf5g3YOMffRidO3fAwYNJeP3Vt8x9VQWq8OnM/2HIkIE4euQ41q75vVxb9etH4rVXZyBx63YApp1EZ7A2H7lcjudfmAqDQY+nJj+L48dPlpt+/sI5aNa8KVq2am5x1NqzZzfM+WIefvh+ubm9t95+HX369sSDD43Cq6/MAACMuPcu1KsXiW8X/4B5Xy00/32z5k3x1bxZGPPwA/jh++XlbpqMiKiDvLw8PDpuknlHq1nzppg1+0OMf/Rh7Nq1t9zZlFtNeXoiVIEqzJ41F8t+/Nk83MfHB7Nmf4TmLZpi0OD+Fuu1fft4JG7djnff+cD8Pb5v5HA8+9zTGDNmtDlw7V1uv/66DhfTLyEhoR0upl+q8AxGdHQjTH/2Kei0Orzw/KvYs3ufeRmPf/RhTHh8HN773wzcP2osNKWacv1r1CgKj46bZL5hLiwsFIu+/QpNYqLRoWOC+WyM1HgN1wWGDh0EAPjtt79Pz+Tm5GLfvgPw9fVF/wF9Kmxj+AjT9d733/vEHLYAcOVKBpYsXoqzZ1PRoEF9AMCo+++9Oe3H5U4LXr9+A2++8R6Kiq6hV6/uVh8F+fTj2eVOpf2RuB2ZGVnw8FCifv1IAKYPc8+e3XDt2jXMeOM985cUAC5fuoL33vsIAPDQmPsr7NetgoIDAQBZ2eWv7az8+Rd8NnMOlv6wwuJvDAYDZn76ufk6pE6nQ2KiaQObnZ2DRd8sMU+rzlOb75isGxlRYT2FhUXYvXuvObDLaDRa/LZ2PQAgvE6Y1b/99JPZ5gACgL927sbly1cgl8tRv349AKbTjl27dkJeXh4+mzmn3KnmBfMX40xySoU1OlLq2TSkpKSiUeMo02WLf+jf3/Q5LTtNLJfLMXLUCGg0Gsx48/1yfVXnqfHBzZ2QBx8cZTGf7OwccwgCsDiSdBRr8wkKCsS+vfvx49KfyoUGAFy4kI6DBw4DMO3M3upMcoo5bMvaW/nzLwCAqKiG5uHBwUHm+f/TqZOn8f67H+P99z6CKFpufmd9NrfcWY1TJ09j8aIfIIoihldwz0d2Vja2b9uJFctXlRteXFyMTRtNN2da+6zqdDp8+MHMct/jX1avRWmpBqpAFQIDVQBQpeVmi5GjRkAmk+H775eZwxYwLeNvFi7BwYNJCA0NMX8O/+m7b5eWuzs9MzMLf+4wnU1s9I/1IjUGrpM1bNgAzVs0xYXzF3H8WPm95XU3A7iim6eCawejXr1IXL2aZ3UPd8WKVRg75nFs3pyIkJDaiIioA7U63+JIEDB9+cpOB7Zt26bcuBs3blh9pKIs/Hx9fQGYbvUHgH17D6K42PIO46RDR5CbexWhoSGIiLDv+c6kpKMAgK/mzcKTkx9HbFvTNVmdTocVy1di7579Fn9z+fKVcht7AMhXm/4/LfWcxemkoqJrAAClUllhPQsXfIvnpr9cbifEx8cHrdu0RIeO7QEACoXC4u9utyzLdpY8PT0BmK6jAcCB/UlWHxHbvn1nhTU62ob1pkDt26+XeVjt2sFo3aYlzp+/YD593rRpE9SqZTpNm5uTa9HO6dNnkJeXh/oN6pk32mVSU13z6I61+WRlZWPGm++XO/IETM/Jd+/R1RxK1tbrrUEDADm5pr57eHqYhyXdvOQz/dmn8cqrL6B7j67w9vYGAGzYsBlbt2yzuI9Co9Fg2x9/WrS/fbtpWFx87G37CQCffDwbL7/033I7bX5+fohv1xatWrcEACgVlp/59PRLFpeXdDodCgpM36Gyz2pVlpstyrZH/9xB+qey+1Ti4mItxh2zsl7Kvmv/XC9S4yllJxs6zHTTgI+vD76Y+2m5cQq56YPZtGkTNGve9Lani4KDbh71ZVZ8R19wbdOedWZG5m2nuXLFNK5sL7zM7R7PKTtyFGViuXlk3GEemRmZCA4OQlBwoNWbb25n7hdfIzw8FJ06dcDDYx/Aw2MfQHHxdezbux8b1m82XwP/p8LCIothRpiOmMo2GtbG2So8PAwj7r0brVu3RN3ICKhUAQBg3rBZOx16rejOy7LscYng4GAAQHZOjtXpM67cfhk7y8YNW/Dk5CfQp29PzP96EQCgX/8+EEURG9b//UxsSGhtAKZTgRX92EZoaAjy/vG8bFHhNSdUbulO8+nYKQGDB/dHVFRD1IkINwfLndZrUZHlZ838/fjHEevWLdsQExON0Q+MwtBhgzB02CDodDocPXociVu34be166HRlN/Bys7KsbrTlZ1l+mzc+n21JqpRQ4wYcReaNYtBRN0I+PnVuqVPln9TtgN6u37d+mhPZZabLcr6d7vtSsaVDAB/nwX7J1vXi9QYuE4kk8kwYGBfAKYP052+MMOHD7tt4MpkMpvnKcD0Yb/TGbqyL8StX3hbT+uZ53Gn4Lo5D63Gvh/2uH79Op6b/jKioxuhR89uSOjQDk2bxqBX7x7o1bsHtmxOxH9ff6fc3+h0OrvmYY9+/Xrj9TdeglwuR3r6JRw6eBjnz1/AqVPJEEURH370jtW/szXUK1rmUjyuk5enxoH9B9GxUwJiYqKRnJyCfv17w2AwlHtuXCaaPpeZGVk4cuToHdu8fv16uf83Gl1zE4u1+QiCgP99+Da6desMjUaD5NMp2LhhC9LSzuH4sZO4b+RwDBrc/zbt2T7vuXPm46cVq9GrV3d06NQebdq0RlxcLOLiYnHvffdg0sSpKPrHzqLeYH2ZlOVXRZ+FBx+6H089bfoFu9Szadi9ey/OpZ3HqVPJqFs3Ai+8OO02fbLxe1+F5WbjDO5czx22Kc66JOFoDFwn6tK1EwIDA3Hs6AlMfOJpq9M0axaDhYu+RJ++PTF71lyrR5llz6nWDgm22oYqUIXu3TrjTEqq+TTK7a4rAn9fY8nLq9zzr2Wn0OqE3/5aTYR5HurbTnMnKSmpSElJxYL5i+Hj44M+fXti2vQp6NuvN5YvW1nhzU6O4OXliRdfmg4AePGF17DzlqPr7j26VnkeOTev8YWHWV9fZWcTXG39+k3o2CkBvfv0xPXrNxATE42DB5PKPTeZe9X0WcvKznboIz3ONnBQP3Tr1hlnzpzFc9NfsngO3NfXx2HzysnJxYoVq7BixSrIZDK0ax+H5557Bg0bNsA9dw/Fd9/9aJ422MqRGwCE3fxslB3pWhMeHoYnJ09AUdE1PDf9JYtT31EOuI7p7OWWm5uLiIg6qFMnHOfOnbcYHxFRtW2KO3CfY+0aaMjNZ29vfebun06dSsa5c+fh5eV1273DzMwsZGVlo3btYDRuHGUxvmfPbvjPy8+hT5+eyMrKRkZGJlSqAMS2bW0xrY+PDzp0bAcAOJx056OS2zly+BgMBgMSOsSbr0v9U1xcLFSBKly+fMWuB9t9fX2wcNGX+O77BeWGFxcXY82v67B3j+mu5ZDQkErVba+oqIbw8fFBWuo5i7AFgIQOpuUoCpX/Gh08mAS9Xo/2CfHw8vK0GN+5c8dKt10V27fvRHFxMbp174zefXoAQLnTyQBw6mQySkpKEB1tel76VsHBQVi6bBE+m/2h1b5JpWXL5gCA33/bYBEaXl6eaNmqBQBArMKd02/OeBXr1q9CWFioeZher8fePfvNd+6XnZIv4+PjY/U72+Pmjt0eK/cvlGnRohlkMhkOHTxs9TpzQod4AIBQhc9qZZabPUeehw+btke9ene3Or5PH9M9BdbuTakuGLhOEhioQqdOCdDp9Ni6ddsdp93wu2lDdqebp8q+pP95+TnUunldBjAdrY5/9GHo9Xps3mT6sYnlNx8JePmV5xEe/veRk5eXJ96Y8Qp8fX3x55+7kJlZuZ/zy8jIxJ87dsHX1xdvvPmy+RpOWT0vv/I8AJjv3rTVtWvFkIkiGjWOwv2j7ys3Liw8FK1bt4Ber0fyLc+8OkvZjVj16keiXr3IcuPuGT4Md989BACg9Kj45qvbUavzsXlTIvz8auHlV18od8PJyFHDEd+ubaXbrgpNqekGngYN6uOe4cNQUlKCPxLL//hCSUkJfv1lHby9vfDGm6+Yr20Dps/aa6//Bw0a1MeN6yXl7oCVWtl67dS5A2SyvzeBfn5+ePud/5r7UZX1mpenhkoVgClPTSy3TpUeSvTo2Q0AcNLKJaTnX5hW7gazli2bY+y4B1FaqsGqlb/edn7q/HwAQIuWzcqtB5lMhsefGI9OnTpUuU+VWW4ajenxHV+fio9+f16xGjqdHmMeHo2EhHblxo1/9GG0jWuD7Owc7Nj+V6X7IDWeUnaSQYP7Qy6XY99eyx9Xv9WGDZvxxKRH0bBhA6t7uADw49Kf0Ca2Nbp27YSfV/6Aw0lHoFQqERvbGh6eHvhy7nwk33yE5KefVqNl6xbo27cXlv64CElJR1BSWoo2bVpBpQrAmTNn8f67H1Wpfx9+8Cki69VFt+5dsHL1Uhw5cgyeHh5oGxcLDw8lNm7YXO5ZQJvb/XAm5sz9DFOnTcZddw/G+fMX4ePjjTatW8HD0wOLF32PKzdvnnC2y5ev4M8df6Fb9y74dsnXOJR0GJpSLWJiohEWHoq0tPOIimqAQJWq4sbuYNZncxAd3Qh9+/ZCq1YtcOL4KUTUrYOYmGgcO3oCrVq3sLvNtetuv+zT0s5h6tMvVNjG+t83YcjQgQgNDcHmTYkW12EB4Msv56NJk8Zo1z4OK37+DqdOJuNGSQlat24Bf39/XLiQjg8/nGl3/c60du3vGDlqODp0bI8VP3+P06fPwMfHG61bt4Snp+ff6zXQ+ileWyxa9B26du2EPn17ok1sK/OPNbRo0RSBgYE4eDDJ6q+x+fh4Y/lPS3DwQBK8vL3Qtm0sBAH46MPPkJ5+6bbzSzp0BMnJKYiJicayFUtw5MgxGI1G8/zSUs8hqlFDBFWhT5VZbhlXMqHT6dGocRRmf/4xzp5NK/cDOv+UnJyC2bPmYtr0Kfhs9oc4fuwEsm7+8EW9epHIzy/Aa6/MsPo5rC54hOskg4cMAABs2lTxTxzm5OTi4MEkAMDw4XdZncZgMOClF1/Hxx/NwqVLl9GufRzaxLbCmTNn8dqrM/Ddkr+vBRmNRvz3tbfxztsf4HTyGbRq3RIJCe2Qk52DLz6fhycmTLF4jMZeanU+npgwBQvmL4ZanY9OHRPQrHkMjh87gddenVHpa3onT5zGkxOfwR+J21GrVi1069YZTWOa4MjRY3jl5Tfw9bxvqlS3vV5//W18Pe8bXMnIQNu2bdCyVXPkXr2KuXO+xqPjJuLs2VTUDglGTEx0pedRUFCISROnYsm3S6HT6tClaycolQq8/97HWLXq9kc1dxIUFHjb//z9/W1q49Chw+aXGtx6OrmMplSDqc+8gJmffo4L59PRvEUzxMXFIicnFwvmL8bjj02ucIfT1TIzsjDh0SnYumUbRFFE504dEFGnDg4cSMLUZ17AWzNMn92uXTtVeh5FhUV4ctJUrPz5F5SWlKJDh3aIj2+L7OxcfD77S0yf+h+rN0E9OWkqdu/ai7ZxsYhpEo19+w7gqcnPYs2v6+44P4PBgGeeeg4/Ll2B/Px8tG8Xh5iYaFy8eAkf/O9TPDL2CRQWFqFZ86ZQBVZuB7Eyy02tzsf7732Ey5evoE1sqwqX6c8/rcaUJ6fjzx1/oW5kXXTt1hmiIGLZjz9j7MOPWz1dXp0I9eq1qh63dxER1VBlj1V169LXbX6GkByPR7hEREQuwMAlIiJyAQYuERGRC/AaLhERkQvwCJeIiMgFGLhEREQuwMAlIiJyAQYuERGRCzBwiYiIXICBS0RE5AIMXCIiIhdg4BIREbkAA5eIiMgFGLhEREQuwMAlIiJyAQYuERGRCzBwiYiIXICBS0RE5AIMXCIiIhdg4BIREbkAA5eIiMgFGLhEREQuwMAlIiJyAQYuERGRCzBwiYiIXEAudQGu5ucXDECA0WiQuhQiIqoBBEEEYERhYe4dp/vXBS4g3PKvexEEQCaTQ6/XwWiUuhrHqql9Y7+qF/ar+qkefas4U/51gWs6shWg0dyQuhSrFAoFgoIDkZOdDa1WK3U5DlVT+8Z+VS/sV/Xj7n1TKr0AVLwnwGu4RERELsDAJSIicgEGLhERkQswcImIiFyAgUtEROQCDFwiIiIX+Nc9FkRE1Ut4eChUKn+HtSeXK6AKVCE4KAA6nWMfMVGrC5CRkeXQNqnmYOASkdsKDw/Fhg3L4OXlKXUpNrlxowQDB45m6JJVDFwiclsqlT+8vDyxeHEyMjOvO6RNURSgUCih1WpgMDjuZ4vCwrwxblwMVCp/Bi5ZxcAlIreXmXkdly4VO6QtURSgVOqg0ZQ6NHCJKsKbpoiIiFyAgUtEROQCDFwiIiIXYOASERG5AAOXiIjIBRi4RERELuAWjwX16tMf3br3xFtvvGIxTqFUov+AQWgTGw8fX19kXLmMDb+vxdmUMxJUSkREVDmSH+HGNG2O/gMH33b8Qw+PR7cevXH8+BH89usqiDIZJkycgqhGjV1YJRERUdVIGridu3bHuMeegFxu/UA7uklTtGjZCuvW/oI1q1di966d+PKLz5CvzsPQu0e4uFoiIqLKkyxwn5r6HIbfOwpnkk8hPf2i1Wli4+Kh0+mwZ/df5mFajQb79u5GZGQ9BAfXdlW5REREVSJZ4PoHBGD50u+waME8aEpLrU5Tt24kcrKzoNVoyg2/lJ5uGh9Zz+l1EhEROYJkN0397503odfr7ziNv38ALl68YDG8sLAAABCgUlVq3oIAKBSKSv2ts8kVCsjlcsjdtL6qqKl9Y7+cWIPcNG9RFCCKgkPaFAQRgihAEESIosEhbQIw1yeXKyTZvrjD+nIWd++bIAgwGiv+XW7JAreisAUAD08PaLUai+Flw5RKj0rNWyaTIyg4sFJ/62xyuRyqmzsSOp1O4mocq6b2jf1yHlWgaf4KhRJKpWNqEETBHIhGB768QKFQAjDVXDskxGHt2sod1pezuHvf8tWF0Okq3nlzi8eCbu82ew03B9myR2GNXq9DTnZ2FepynrI9uJycHOi0jn05ttRqat/YL+cJDgoAYNrJ1misX3qylyCYrqRpSjUwGh13hKvVmjan6jy1JNsXd1hfzuLufRNF24683TpwNaWlUCqVFsMVN4eVlpRUql2jEdC64Uoro9PpoNNq3brGyqqpfWO/nDV/03wNBqPDXqUnigYYDUYYjQaHvp6vrC2dTsrlVTM/h4B7902ptC1KJX8O907U6jzU8vO3GO53c1hBQb6LKyIiIqoctw7cS5fSERoaZvGcbt3ISACwekMVERGRO3LrwD16OAkKhQIdOnUxD1MolUjo0AkXzp+DOu+qhNURERHZzq2v4Z5JPoXTp05g6F3DoVIFIjcnGwmdusA/IADLln4ndXlEREQ2c+vABYDvFi/EwCHDENeuPZRKD2RcuYT5X83F+XNpUpdGRERkM7cI3K/mzLrtOI1GgzWrV2LN6pUurIiIiMix3PoaLhERUU3BwCUiInIBBi4REZELMHCJiIhcgIFLRETkAgxcIiIiF2DgEhERuQADl4iIyAUYuERERC7AwCUiInIBBi4REZELMHCJiIhcgIFLRETkAgxcIiIiF2DgEhERuQADl4iIyAUYuERERC4gl7oAW9SpE4FBQ+9Cg4aNIAoCLlw4h99/W4NL6RelLo2IiMgmbn+EGxxcG08+PQ2RkfXxx9bN2LhhHWrXDsWTU6YiLLyO1OURERHZxO0Dt1uPXvD09MKiBfOQuGUjdmxLxLy5syHKZOjbf6DU5REREdnE7QM3KLg2SkpKcOHCOfOw3Nwc5ObmIJxHuEREVE24feDmZGfB09MTtfz8zMPkCgX8avmhsLBQwsqIiIhs5/Y3TW1L3ILmLVvhwTHjsPbXVdBqtRgwaAg8vbywLXFLpdoUBEChUDi4UseQKxSQy+WQu2l9VVFT+8Z+ObEGuWneoihAFAWHtCkIIgRRgCCIEEWDQ9oEYK5PLldIsn1xh/XlLO7eN0EQYDQaK5zO7QO3oCAfWzZtwIj77sf0518yD1/10zIknz5ZqTZlMjmCggMdVaJDyeVyqFQqAIBOp5O4GseqqX1jv5xHFWiav0KhhFLpmBoEUTAHotFQ8UbSVgqFEoCp5tohIQ5r11busL6cxd37lq8uhE5X8c6b2wdu/4FD0G/AIFw4fw67/toBg96Adu074J57RwGCgN1//Wl3m3q9DjnZ2U6oturK9uBycnKg02olrsaxamrf2C/nCQ4KAABotRpoNKUOaVMQTFfSNKUaGI2OO8LVak2bU3WeWpLtizusL2dx976Jom1H3m4duJ6enujZqw8yrlzBl198Br1eDwA4nHQQjz3xJO66ZwROHD+KwoICu9o1GgGtG660MjqdDjqt1q1rrKya2jf2y1nzN83XYDDC4KCjUVE0wGgwwmg0OKxNAOa2dDopl1fN/BwC7t03pdK2KHXrm6aCa4dAoVTicNJBc9iW2b9vD+RyBRo2bCRRdURERLZz68AtO1cvCpY3SwgwDROsjCMiInI3bh24WZkZyM9XI759ByiUynLjEjp2hk6nQ1raWYmqIyIisp1bX8M1Go1Y/fMKjB0/AVOnv4B9e3ZDb9CjTWwcGkY1wvp1a+2+fktERCQFtw5cADh54hjmzZ2NfgMGod/AwZDJZMjMuIIfvluMw4cOSF0eERGRTdw+cAHgXFoqvv7yC6nLICIiqjS3voZLRERUUzBwiYiIXICBS0RE5AIMXCIiIhdg4BIREbkAA5eIiMgFGLhEREQuwMAlIiJyAQYuERGRCzgscD08PB3VFBERUY1jd+DOeOcDq8NffeOtKhdDRERUU9n0W8pBwcG4d+QDEATAw9MTEyc/XW68h6cXbty44ZQCiYiIagKbAvdqbi6OHT0MX19fNGgYhbTU8u+g1Wq1OHniuFMKJCIiqglsflvQ7r/+BADkXb2Kgwf2Oa0gIiKimsju1/MdPLAPkfXqo3btEAiCYDGOiIiILNkduAMHD0OvPv1QWFgAg15vHm4EA5eIiOh27A7c+HYJ+Gb+V0g+fdIZ9VilUCjQp99AxMW3h4+vL67m5mD7tkQc3L/XZTUQERFVhd2Bq/TwcGnYCoKA8RMmIapRY+z+609kZ2WiTdt4jH7wYSjkcuzZ/ZfLaiEiIqosu5/DPXXyONrGtXNGLVbFt++A6CYx+HX1z/h19c/YvWsn5s2djcuX0tF/4BCX1UFERFQVdh/hyuVy3P/gw+jTbwCKigrLjZs393OHFVamfUJHXM3NwZ5dO83DjEYj1q9bi8h69aBUKqHRaBw+XyIiIkeyO3CzMjOQlZnhjFosiKKIevUbYP++PTAajQBgDtjk0yddemqbiIioKuwO3M0b1zujDqsCg4Ihl8uhzstD1+490aNXHwQEqFBcXIwd27YiccumSrUrCKYbsdyRXKGAXC6H3E3rq4qa2jf2y4k1yE3zFkUBoihUMLVtBEGEIAoQBBGiaHBImwDM9cnlCkm2L+6wvpzF3fsmCIL5oPBO7A7ckaMfuu24n5b9YG9zd+Tl5QUAaJfQAd7e3ti6eSMKCwoQ374DBg25Cx4enli/bo3d7cpkcgQFBzq0VkeRy+VQqVQAAJ1OJ3E1jlVT+8Z+OY8q0DR/hUIJpdIxNQiiYA5Eo6HijaStFAolAFPNtUNCHNaurdxhfTmLu/ctX10Ina7inTe7A1dA+b1MH18fNG7cBPv27bG3qQrJ5abygoKCMeuTD5CRcQUAcPRIEiZNmYruPXtj544/UFRUZFe7er0OOdnZDq/XEcr24HJycqDTaiWuxrFqat/YL+cJDgoAAGi1Gmg0pQ5pUxBM94pqSjUwGh13hKvVmrZX6jy1JNsXd1hfzuLufRNF24687Q7cFcu+txgW3SQGnbp0s7epCpV9wS5cOGcO2zIH9u1Bo8bRaBDVCMeOHLarXaPR9PvP7kqn00Gn1bp1jZVVU/vGfjlr/qb5GgxGGBx0NCqKBhgNRhiNBoe1CcDclk4n5fKqmZ9DwL37plTaFqUOeR9uyplkNI5u4oimyinILwAAFBUWWowrO6r1UHo4fL5ERESOZvcR7q1EUURsXDyuXbvmiHrKuXatCGp1HkLDwi3GBQYFAQDUarXD50tERORodgfuB5/MthhmMOjx6+qVDinoVkmHDqB3n/5o3qIVTp44BsB001Pnrt1xragI59LOVtACERGR9OwO3HlzyweuwWDA1dwcu29cslXi5k1o0bI1xowdj7927oBanYf4dgkICQnF0u+/hcHguJseiIiInMXuwE1LPQtBEFA3sh5UgYEoKix0yunkMqWlJZg7eyYGDh6K+HYJ8PD0RGbGFSxe+DVOneRL74mIqHqwO3Br1aqF8RMmoU5EXVwvLoa3jw9yc7Ix/6s5KCjId0KJwPXrxVj183Ks+nm5U9onIiJyNrsDd+hdw5GTk42v5syCRqOBp6cnRtw3GsPuGYHvv/3GGTUSERFVe3Y/FtQoOgarflpufmFASUkJVv28DNHRMQ4vjoiIqKawO3BFUbD4dRajEdDr9Q4rioiIqKaxO3BTU1IwYuRoKJSm3w1VKpUYcd8opJ5NcXhxRERENYXd13DXrf0FTzz5NN5690MUFxfDx8cH2VmZWDj/S2fUR0REVCPYHbgymQwff/AOGkY1gm8tP6hUKmz/Y6tNryYiIiL6t7I5cBVKJZ6YNAVFRUVYsmgBUs+mwMfXF6++/haatWiJBfPmQnvzRioiIrqz8PBQqFT+DmtPLldAFahCcFCA+aUPjqJWFyAjI8umaR3dL8B5fbOnX45gc+D27TcQOp0eK39aZh5WfO0a3n37vxj/2ET07tMfG9f/5pQiiYhqkvDwUGzYsAxeXp5Sl2KTGzdKMHDg6ArDqab2y1FsDtxWbWKx8Ou5KL7lV6WKr13Dqp+WYcwjjzFwiYhsoFL5w8vLE4sXJyMz87pD2hRFAQqFElqtxqGvHQwL88a4cTFQqfwrDCZn9AtwTt/s6Zej2By4vr61cDU31+q4K1cuo5ZfLYcVRUT0b5CZeR2XLhU7pC1RFKBU6qDRlDo0cCvDkf0C3KtvVWHzY0GlJSXw9vaxOs7L2xtajfu9FJiIiMhd2By4Z1OS0blrN6vjOnfphgvnzzmsKCIioprG5lPKW7dswrTn/gMf31o4knQQRYWFqOXnhzZt45GQ0BFzv/jMiWUSERFVbzYHrumNQF/g3pEPoHOXv490MzOuYMHXc3H5UrpTCiQiIqoJ7Prhiwvnz+HTj95DYFAQfHx8UVRYiPx8tbNqIyIiqjHs/qUpAMi7ehV5V686uhYiIqIay+6XFxAREZH9qlXg1omoi/99PAv9BgyWuhQiIiK7VJvAFUUR9z8wBjKZTOpSiIiI7FZtArdPv4EICQ2VugwiIqJKqRaBGx5eB7379sfWTRulLoWIiKhS3D5wRVHEqAfG4PTJEzhyJEnqcoiIiCqlUo8FuVKvPv0QGBSMbxZ8BU9PL4e0KQiAQqFwSFuOJlcoIJfLIXfT+qrCHfoWHh6CgIAAh7Ypk8uhUgUgNDQYep3OYe3m5+cjIyPbYe3Zyx3Wl1xumrcoChBFwSFtCoIIQRQgCCJE0eCQNgGY65PLFRVuX9gv+zijb/b0qyKCIMBorPilCm4duKFh4ejbfyBW/bQcRYWFDgtcmUyOoOBAh7TlaHK5HCqVCgCgc+DG2x1I3beQkGAs+XYWPD09XD7vyigpKcXYR6YiO9v6W7qcTer1BQCqQNP8FQollErH1CCIgnkDa3Tgm2cUCiUAU821Q0LuOC37ZR9n9M2eflUkX10Ina7iHQG3DVxBEHD/A2OQlpqK/fv2OLRtvV6HnGzpjhzupOxoIicnBzptzXoDk9R9Cw4KgKenB5YsOePQd3UKggiFUg6tRgej0TF732Fh3hg7tgkMEn5WpV5fgGmdAYBWq4FGU+qQNgXBdCVNU6px2PoCAK3WtDlV56krXGfsl32c0Td7+lURUbTtCNltA7dn774Ir1MHc2bPhLeP6bWAXl6mI1ylUgFvHx+UlpRCr7d/L8poBLRuHGY6nQ46rdata6wsKfum05nmeeVKsRPe1enh0Hd1lrWj00n7OZD6s1i2zgwGo8OWrSgaYDQYYTQaHPpuVXvWGftlH2f0zZHfMaXStih128CNadoccrkCU5990WJcz9790LN3Pyxf+h0O7N8rQXVERET2cdvAXfvrKnh7e5cb5h+gwv0PjMHB/Xtx8MA+ZGZmSFQdERGRfdw2cK297q92iOmHL65evYqUM8muLomIiKjS3P45XCIiopqAgUtEROQCbntK2Zqc7Cy8MP0pqcsgIiKyG49wiYiIXICBS0RE5AIMXCIiIhdg4BIREbkAA5eIiMgFGLhEREQuUK0eCyLXCQ8PhUrl79A25XIFVIEqBAcFmH/k3BHU6gJkZGQ5rL3qqDqtL4DrjP6dGLhkITw8FBs2LIOXl6fUpdjkxo0SDBw4+l+7Aa9u6wvgOqN/JwYuWVCp/OHl5YnFi5Md+t5YURSgUCih1Woc9oqtsDBvjBsXA5XK/1+78a5O6wvgOqN/LwYu3VZm5nUnvDdW59D3xtLfuL6I3BtvmiIiInIBBi4REZELMHCJiIhcgIFLRETkAgxcIiIiF2DgEhERuYDbPxZUN7Ie+g8cggYNoyCXy5GdlYkd2xNx6MB+qUsjIiKymVsHbkhIKJ58ahquXy/GtsTNKC0tRZvYODzw0CPw9amFHdsTpS6RiIjIJm4duEPvHg6DwYDPZ36MwsICAMCunTsw+elp6D9oCPbs3gmNRiNxlURERBVz22u4giCgYVRjJJ8+aQ5bADAajThyOAkeHh6IqBspYYVERES2c9sjXKPRiE8/eh8wWv6knI+PLwDAoDe4uiwiIqJKcdvABQB13lWLYQqlEgkdO6Gk5AYuX06vVLuCACgUiqqW5xRyhQJyuRxyCeuTy03zFkUBoig4rF1BECGIAgRBhCg6ZmeprD65XFHhOmW/7OOMfgHS9439so/U/QKk/45VRBAEGK0cHN7KrQPXmpH3Pwg/P39s2rAOOp2uUm3IZHIEBQc6uDLHkMvlUKlUAFDp/lWVKtA0f4VCCaXScTUIomD+YBsd9GP4CoUSgKnm2iEhd5yW/bKPM/oFSN839ss+UvcLkP47VpF8dSF0uop3BKpV4I4YORpt49oh9WwKtm7eWOl29HodcrKzHViZ45Qd2ebk5ECndexLv20VHBQAANBqNdBoSh3WriCYbhnQlGpgNDpmL1WrNX2E1XnqCtcp+2UfZ/QLkL5v7Jd9pO4XIP13rCKiaNsRcrUIXJlMhtEPjkVsXDwuXjiPRQvmwWCo/EI3GgGtRGFmC51OB51WK1mNOp1pvgaD0aGvZRNFA4wGI4xGg8PaLWtHp6t4ebFf9nFGvwDp+8Z+2UfqfgHSf8cqolTaFqVuH7gKhQKPjH8cMc2aIy31LL6Z/yVKSx2350REROQKbh24oihi7PgJiGnWHCdPHMd33y6U7DQrERFRVbh14PYbMBhNm7XAiWNHsWTxgiqdRiYiIpKS2wauj68vevTqA71ejzPJpxHbNt5impSUZBQVFkpQHRERkX3cNnAbNIgy3wY+/L5RVqdZMG8Okhm4RERUDbht4J44fhQvTH9K6jKIiIgcwm1/S5mIiKgmYeASERG5AAOXiIjIBRi4RERELsDAJSIicgEGLhERkQu47WNB1UV4eChUKn+HtSeXK6AKVCE4KMD8Q+COolYXICMjy6FtEhGRbRi4VRAeHooNG5bBy8tT6lJscuNGCQYOHM3QJSKSAAO3ClQqf3h5eWLx4mRkZl53SJuiKEChUEKr1Tj09VZhYd4YNy4GKpU/A5eISAIMXAfIzLyOS5eKHdKWKApQKnXQaEodGrhERCQt3jRFRETkAgxcIiIiF2DgEhERuQADl4iIyAUYuERERC7AwCUiInIBBi4REZELVIvncFWqQAy56x40ahwNmUyO1JQzWPPrKqjzrkpdGhERkU3c/gjX29sHk6Y8g0aNo7FzxzZs3bQB9Rs0xJSnp8PHx1fq8oiIiGzi9oHbvWdvBKgCsWDeXGzdvBHbt23FvC8/h2+tWujVp5/U5REREdnE7QM3Ni4eFy+cx+VL6eZhWZkZSD17BrFt4yWsjIiIyHZuHbheXl4ICgrGpfSLFuMupafDPyAAtfz8JKiMiIjIPkK9eq3c9hfyQ8PC8fx/XsW6tb9gW+KWcuO6dOuBe0aMxOyZHyH94gWb2/Tzq+2w+pRKBUJCgnHtmhZ6vQMXoyAARseuFplMgK+vAtnZudBo7vyeXaf1C3B439iv6tUvwE36xn7ZzC36BUj6HbNVYWHOHce79V3Knh6m98xqNBqLcdqbw5RKDztbNQIQYDQaqlgdUFpaivT0y1Vux1XUatumY7/cQ03tF1Bz+8Z+1cx+VUQQRJiy5c7cOnAh3PzXSj/KBhnt3OMpLMytUklERESV4dbXcDWlpQAAhVJhMU6pVAIASktvuLQmIiKiynDrwFWr8wAAfn7+FuPKhhXkF7i0JiIiospw68AtKSlBbk4OIupGWoyrGxkJdV4erl0rkqAyIiIi+7h14ALA0SNJaBjVCOF1IszDQsPC0ahxEyQdOiBhZURERLZz68eCAMDL2xvPvfAKRJmI7X9sBYxA9169odPpMOvTD3G9uFjqEomIiCrk9oELAIFBQRh29wg0jo6BXq9H2tkUrF2zmi8vICKiaqNaBC4REVF15/bXcImIiGoCBi4REZELMHCJiIhcgIFLRETkAgxcIiIiF3DvlxcQ2iV0RLfuPRFcOwRFhQXYt3cPtiVuhsFQ9bcdSSm2bTy69+yNsLBw6A16XLxwHht+/82uVy26uwlPTMaNGzfww3eLpC7FbipVIIbcdQ8aNY6GTCZHasoZrPl1VY15FK9Xn/7o1r0n3nrjFalLcYi6kfXQf+AQNGgYBblcjuysTOzYnohDB/ZLXVqVNGgYhQGDhiKibiR0Oi1OnjiO9b+tQXHxNalLqxQe4bqxnr374v4HxiA/X421v65CyplkDBg0BKMfGit1aVXSrn0HPDR2PAwGA9b99isSt2xC7ZBQTH56GurVbyB1eQ4xcPAwxDRrLnUZleLt7YNJU55Bo8bR2LljG7Zu2oD6DRpiytPT4ePjK3V5VRbTtDn6DxwsdRkOExISiiefmobwOnWwLXEz1q39BRqNBg889Ai69+gtdXmVVr9BQ0yaMhU+Pr7YuP437P7rT7Ru0xZTnnkWHh72vpbVPfAI1015eHig/8AhOH3qBBYtmGceXlpaih69+uCPrZuRcaX6vHeyjCiKuGv4vbh44TzmzP7U/HrFA/v24PmXXsfgoXfjqzmzJK6y8hQKBe4ZMRIJHTtLXUqlde/ZGwGqQMye+REuX0oHAJw+fRLTn38Jvfr0w29rVktcYeV17todw+4eAbm85mz6ht49HAaDAZ/P/BiFhaaXuezauQOTn56G/oOGYM/unVbfKe7uht41HMXF1zD3809RUlICALiUno5HH5+Edgkd8def2yWu0H48wnVTgYFBuJR+EXt27Sw3PPVsCgCgzj9+W7o6iagbCS8vbxzcv6/cu4yLioqQdjYFDRpGSVhd1QQFB+PFl/+LdgkdsWXTeqnLqbTYuHhcvHDeHLYAkJWZgdSzZxDbNl7CyqrmqanPYfi9o3Am+RTS0y9KXY5DCIKAhlGNkXz6pDlsAdN7wo8cToKHh4fVl7+4O5lMhhs3rmP/3j3msAWA1LNnAAB1IupKVVqV1JzdvBomI+MK5n4+02J4nQhT0Obnq11dkkNcuXwZH77/NoqvWV6D8fH1rdbXpv39VSgqKsQP3y3C+XNp6Nt/kNQl2c3LywtBQcE4deK4xbhL6eloEtMMtfz8UFRYKEF1VeMfEIDlS7/Dgf17MWnKVKnLcQij0YhPP3ofMFr+YGDZ6X+Dvvp9p/R6Pb6Z/5XF8LKgLaim2z8GbjUgiiJUqkC0aNkaffsPROrZFPORbnWj1+uQk51lMbxuZD3Ub9AQZ1POSFCVY1w4n4bZMz+Suowq8fMPAAAUFORbjCs7ggoIUFXLwP3fO29Cr9dLXYbDWbuRTaFUIqFjJ5SU3MDly+lW/qp68fP3R4MGURh693AUFRZiz66/pC6pUhi41UDDqEbmPfKiokL8uvpniStyLC8vL/ONYFs3b5S4msqrCRtzTw9PALB6zU97c5hSWT1vWKkJ68dWI+9/EH5+/ti0YR10Op3U5VSJKIp45fW3IJPJoNfrsWLZ9+VOn1cnDFwX+2jmF3ccf/jQQYvHSPLz1fj2m/nw9fVFz9598fTU57Bw/lfm6xnuoDL9AgBPTy9MmDgFoaFh2Lp5I9JS3evIvbL9qraEm/9aeaVJ2SCjldOX5D5GjByNtnHtkHo2pVrvwJYRZTIsX/odjEYjEjp2xgMPPYKAABUSt2ySujS7MXBdbNOG3+84PjPzisWwq7m5uJqbCwA4ceIYXnjpNQwZdrdbnb6sTL/8/P0x4YkpCK9TB7t37cSG39c6q7xKq0y/qjNNaSkAQKFUWIxTKpUAgNLSGy6tiWwjk8kw+sGx5pveFi2YV63viSij02qRdOgAAODI4UOY/PR09O0/CHt2/YXr16vX+9AZuC62eeOdN+AVKSosRNrZs4hp1hyCILjN0Ya9/QoKCsYTTz6FwKBg7NieiLW/rHJSZVVT1fVV3ajVeQAAPz9/i3Flwwryq+fpvJpMoVDgkfGPI6ZZc6SlnsU3879E6c2dp5rEaDTi6JEkNGgYhZDQUJw/lyZ1SXbhY0FuKrZtPF6f8S7q129oMc7D0wM6nc5twtZefn7+mDj5GQQGBWPj+t/cNmz/jUpKSpCbk2P1UZK6kZFQ5+Xh2rUiCSqj2xFFEWPHT0BMs+Y4eeI45s+bU+3DNig4GC+99iZ69u5rMa7sRy+0Wq2ry6oyBq6bysrMgJ+fP7p271lueGS9+mgY1djqYxvVxUNjx0MVGIh1a3/Blk0bpC6HbnH0SBIaRjVC+D+e9Q4NC0ejxk3Mp/bIffQbMBhNm7XAiWNH8e03X0NXDYPoVnlXr8LDwwMdO3WBQvH35Q0vLy8kdOyMfLUaVy5fkrDCyuEpZTeVkXEFO3dsQ9fuPSGXy5F8+iSCgoPRuUt3FBUVYt3aX6QusVJatGyFqEaNoVbnobCgAHHx7S2mSTp0oNoevdcE2/7Ygvh2CXh80hRs/2MrYAS69+qNgoJ8bN+2Very6B98fH3Ro1cf6PV6nEk+bfWHSVJSkqvdY1xGoxGrflqOseMnYMozz2L/vj1QKpXo2LkratXyw6IF86rlNoKB68bW/LIS+Wo1OnTqgqbNW+DG9es4nHQQG9evq7a3xTdq3ASA6cfxHxjziNVpjh5JqvaPMlRnN65fx9wvZmLY3SPQt/8g6PV6pJ1Nwdo1q3G9uHrdpFLTNWgQZT4CHH7fKKvTLJg3B8nVLHAB4NjRw1i0YB569+2PIcPugV6vw7m0NHz/7TfV9iUnQr16rarfbgIREVE1w2u4RERELsDAJSIicgEGLhERkQswcImIiFyAgUtEROQCDFwiIiIXYOASERG5AAOXiIjIBRi4RERELsDAJSIicgEGLhERkQswcImIiFzg/yfEy9OMougbAAAAAElFTkSuQmCC" alt="Opinion distribution for Alcoholism and Liver Transplanation" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Distribution" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Disability Discrimination" class="img-fluid" />
                    </div>
                  </div>
                
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text">
              <i class="fas fa-file-alt mr-1"></i> Instructor Report
            </div>
            
          </h5>
          <div class="info-box" id="report-section">
            
              <div id="report-content" class="markdown-content"><p>In this assignment, students grappled with ethically charged healthcare dilemmas: whether alcoholics should compete equally for liver transplants, if treatment should be distributed solely on the ability to pay, and whether disability status should factor into emergency care decisions. Their discussionswith Guide pushing them to challenge assumptions, specify criteria, and uncover biasesrevealed deep tensions between fairness ideals and practical resource constraints.</p>
<h3>Themes</h3>
<ul>
<li><strong>Common ground: Students recognized the need to balance equality and outcomes.</strong> Many groups acknowledged that fairness in healthcare must integrate both practical survival benefits and non-discriminatory treatment, even if opinions on the mix varied.  </li>
<li><strong>Disagreements persisted: Sharp divisions emerged over ethical priorities.</strong> Some students defended strict utilitarian logic while others insisted on an unwavering commitment to equal access, leading to persistent debates around whose lives are valued and how.  </li>
<li><strong>Nuanced evaluation: Multi-criteria discussions took shape.</strong> Many participants moved beyond one-dimensional solutions by considering survival odds, quality of life, and personal accountability in evaluating medical resource allocation.  </li>
<li><strong>Guides scrutiny: Guide consistently pushed for clarity and self-reflection.</strong> Guides targeted questions forced students to unpack assumptions, challenge over-simplified metrics, and think critically about the ethical frameworks underpinning their arguments.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Deep ethical probing emerged as a core takeaway.</strong> Students were urged to look beyond surface-level positions and critically analyze the moral trade-offs embedded in life-and-death decisions.  </li>
<li><strong>Policy implications were raised throughout discussions.</strong> Some conversations naturally shifted toward exploring safeguardslike ethical review panels or second opinionsthat might balance practical realities with fairness in real-world healthcare systems.</li>
</ul>
<h3>Possible Misconceptions</h3>
<ul>
<li><strong>Quantitative measures were sometimes taken at face value.</strong> Several groups assumed metrics such as QALY provided objective fairness, neglecting how such numbers can mask biases against disabled individuals.  </li>
<li><strong>Personal responsibility was occasionally oversimplified.</strong> Some arguments reduced complex medical and socio-economic factors to a simple matter of self-inflicted harm, disregarding the broader context of addiction and disability.</li>
</ul>
<h3>Lessons</h3>
<ul>
<li><strong>Early clarification of ethical frameworks can guide richer debate.</strong> Instructors might consider setting clear definitions of fairness, need, and responsibility to help students avoid binary thinking in complex medical allocation decisions.  </li>
<li><strong>Encouraging deep introspection on subjective biases is key.</strong> Professors may benefit from follow-up sessions that focus on how personal and systemic biases shape ethical decision-making, thereby enriching students understanding of real-world challenges in healthcare.</li>
</ul></div>
              <div class="text-muted mt-2">
                Generated on: <span class="utc-time" data-utc-time="2025-04-02T23:36:59.206000+00:00">2025-04-02T23:36:59.206000+00:00</span><span class="local-time"></span>
                
              </div>
              <!-- Add the editor container here -->
              <div id="report-editor-container" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
                </div>
                <textarea id="report-markdown-editor" class="form-control">In this assignment, students grappled with ethically charged healthcare dilemmas: whether alcoholics should compete equally for liver transplants, if treatment should be distributed solely on the ability to pay, and whether disability status should factor into emergency care decisions. Their discussionswith Guide pushing them to challenge assumptions, specify criteria, and uncover biasesrevealed deep tensions between fairness ideals and practical resource constraints.

### Themes
- **Common ground: Students recognized the need to balance equality and outcomes.** Many groups acknowledged that fairness in healthcare must integrate both practical survival benefits and non-discriminatory treatment, even if opinions on the mix varied.  
- **Disagreements persisted: Sharp divisions emerged over ethical priorities.** Some students defended strict utilitarian logic while others insisted on an unwavering commitment to equal access, leading to persistent debates around whose lives are valued and how.  
- **Nuanced evaluation: Multi-criteria discussions took shape.** Many participants moved beyond one-dimensional solutions by considering survival odds, quality of life, and personal accountability in evaluating medical resource allocation.  
- **Guides scrutiny: Guide consistently pushed for clarity and self-reflection.** Guides targeted questions forced students to unpack assumptions, challenge over-simplified metrics, and think critically about the ethical frameworks underpinning their arguments.

### Insights
- **Deep ethical probing emerged as a core takeaway.** Students were urged to look beyond surface-level positions and critically analyze the moral trade-offs embedded in life-and-death decisions.  
- **Policy implications were raised throughout discussions.** Some conversations naturally shifted toward exploring safeguardslike ethical review panels or second opinionsthat might balance practical realities with fairness in real-world healthcare systems.

### Possible Misconceptions
- **Quantitative measures were sometimes taken at face value.** Several groups assumed metrics such as QALY provided objective fairness, neglecting how such numbers can mask biases against disabled individuals.  
- **Personal responsibility was occasionally oversimplified.** Some arguments reduced complex medical and socio-economic factors to a simple matter of self-inflicted harm, disregarding the broader context of addiction and disability.

### Lessons
- **Early clarification of ethical frameworks can guide richer debate.** Instructors might consider setting clear definitions of fairness, need, and responsibility to help students avoid binary thinking in complex medical allocation decisions.  
- **Encouraging deep introspection on subjective biases is key.** Professors may benefit from follow-up sessions that focus on how personal and systemic biases shape ethical decision-making, thereby enriching students understanding of real-world challenges in healthcare.</textarea>
                <div class="mt-3">
                  <button id="save-report-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-1"></i> Save Changes
                  </button>
                  <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
                    <i class="fas fa-times mr-1"></i> Cancel
                  </button>
                  <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
                </div></div>
            
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
          <div class="info-box thread-list" id="thread-list">
            
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Distribution
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f"><ul>
<li><strong>Students discussed the ethical and practical challenges of distributing healthcare based on ability to pay.</strong> Student 1 argued that while universal healthcare is ideal, limited resources and high costs demand a system where those who contribute more or have means receive priority, whereas Student 2 pushed for equal access despite potential delays and reduced specialist care.  </li>
<li><strong>Students unpacked trade-offs and systemic inequities in US healthcare.</strong> They examined how private hospitals reinforce class disparities and debated whether criteria like need and urgency might offer a fairer basis than simple ability to pay, highlighting the complex moral dilemmas involved.  </li>
<li><strong>Guide actively challenged assumptions and deepened the discussion.</strong> It pressed the students to consider the ethical implications of denying care to those who cannot afford it, pushing them to evaluate if factors such as medical urgency or potential benefit should override ability to pay.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you've touched on a key moral dilemma - the tension between limited resources and letting people die seems unbearable. What principles beyond ability to pay might guide healthcare distribution when resources are scarce? Would factors like medical urgency, potential benefit, or age be more ethical considerations?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" class="form-control summary-markdown-editor">- **Students discussed the ethical and practical challenges of distributing healthcare based on ability to pay.** Student 1 argued that while universal healthcare is ideal, limited resources and high costs demand a system where those who contribute more or have means receive priority, whereas Student 2 pushed for equal access despite potential delays and reduced specialist care.  
- **Students unpacked trade-offs and systemic inequities in US healthcare.** They examined how private hospitals reinforce class disparities and debated whether criteria like need and urgency might offer a fairer basis than simple ability to pay, highlighting the complex moral dilemmas involved.  
- **Guide actively challenged assumptions and deepened the discussion.** It pressed the students to consider the ethical implications of denying care to those who cannot afford it, pushing them to evaluate if factors such as medical urgency or potential benefit should override ability to pay.  

&gt; **Student 1, you&#39;ve touched on a key moral dilemma - the tension between limited resources and letting people die seems unbearable. What principles beyond ability to pay might guide healthcare distribution when resources are scarce? Would factors like medical urgency, potential benefit, or age be more ethical considerations?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==3692c9d0df::student-dwfilmvkdq==a15461fcdf::94ade63a31::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f"><ul>
<li>
<p><strong>Students debated the fairness of giving alcoholics equal access to liver transplants.</strong> Student 1 argued for equal access to treatment regardless of lifestyle, stressing that everyone deserves a chance at health care, while Student 2 maintained that scarce resources should go to those less responsible for their condition and might better adhere to post-transplant protocols.</p>
</li>
<li>
<p><strong>Guide effectively drove the conversation with targeted, clarifying questions.</strong> Guide prompted the students to unpack ethical nuances and consider policy solutions like sobriety requirements and case-by-case evaluations, ensuring that both fairness and practical resource allocation were thoroughly examined.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students debated the fairness of giving alcoholics equal access to liver transplants.** Student 1 argued for equal access to treatment regardless of lifestyle, stressing that everyone deserves a chance at health care, while Student 2 maintained that scarce resources should go to those less responsible for their condition and might better adhere to post-transplant protocols.

- **Guide effectively drove the conversation with targeted, clarifying questions.** Guide prompted the students to unpack ethical nuances and consider policy solutions like sobriety requirements and case-by-case evaluations, ensuring that both fairness and practical resource allocation were thoroughly examined.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==24cd2638dd::student-dwfilmvkdq==f0dad5d2dd::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f"><ul>
<li><strong>Students debated a controversial medical triage scenario using the lens of quality of life as a key factor.</strong> They weighed whether treatment should prioritize the non-disabled patient due to better projected outcomes, while questioning if such an approach could inadvertently marginalize disabled individuals, showing a nuanced grasp of ethical tradeoffs.</li>
<li><strong>Guide played an active role in challenging assumptions and deepening the discussion.</strong> It prompted the students to consider how subjective judgments and potential biases could corrupt medical decision-making and to explore safeguards like documentation and second opinions to ensure fairness in treatment.</li>
</ul>
<blockquote>
<p><strong>Student 2, you mentioned a preference for prioritizing quality of life, but how do you reconcile this with concerns regarding medical professionals making inherently subjective judgments about whose life carries more value?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students debated a controversial medical triage scenario using the lens of quality of life as a key factor.** They weighed whether treatment should prioritize the non-disabled patient due to better projected outcomes, while questioning if such an approach could inadvertently marginalize disabled individuals, showing a nuanced grasp of ethical tradeoffs.
- **Guide played an active role in challenging assumptions and deepening the discussion.** It prompted the students to consider how subjective judgments and potential biases could corrupt medical decision-making and to explore safeguards like documentation and second opinions to ensure fairness in treatment.

&gt; **Student 2, you mentioned a preference for prioritizing quality of life, but how do you reconcile this with concerns regarding medical professionals making inherently subjective judgments about whose life carries more value?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1484d00edd::student-dwfilmvkdq==23bacef2dd::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f"><ul>
<li><strong>Students tackled the ethical dilemmas of applying a one-size-fits-all QALY system to disability in healthcare.</strong> They debated whether quantitative measures could fairly assess the quality of life for disabled individuals, with one student drawing on personal experience to contest assumptions while both acknowledged the challenges of case-by-case decision making in a system with inherent biases.  </li>
<li><strong>Students critiqued the potential for discrimination if distinct standards were applied to abled and disabled populations.</strong> They examined the slippery slope of using separate QALY systems and considered the risks of reinforcing ableist biases, prompting Guide to step in with incisive questions that pushed them to clarify the criteria for evaluating fairness in medical treatment.  </li>
</ul>
<blockquote>
<p><strong>What specific criteria would you use in these individual cases to determine who receives treatment? When you mention QALYs, consider what assumptions this metric makes about the value of life with a disability. Does this approach inherently devalue certain lives, or is it truly an objective measure of medical outcomes?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students tackled the ethical dilemmas of applying a one-size-fits-all QALY system to disability in healthcare.** They debated whether quantitative measures could fairly assess the quality of life for disabled individuals, with one student drawing on personal experience to contest assumptions while both acknowledged the challenges of case-by-case decision making in a system with inherent biases.  
- **Students critiqued the potential for discrimination if distinct standards were applied to abled and disabled populations.** They examined the slippery slope of using separate QALY systems and considered the risks of reinforcing ableist biases, prompting Guide to step in with incisive questions that pushed them to clarify the criteria for evaluating fairness in medical treatment.  

  
&gt; **What specific criteria would you use in these individual cases to determine who receives treatment? When you mention QALYs, consider what assumptions this metric makes about the value of life with a disability. Does this approach inherently devalue certain lives, or is it truly an objective measure of medical outcomes?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==54f3bcccde::student-dwfilmvkdq==f340be7edd::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f"><ul>
<li><strong>Students debated whether liver transplant allocation should factor in personal responsibility.</strong> They argued over fairness, with one student defending a strict first-come, first-served principle while the other proposed modifying the MELD system to include responsibility and potential utility in post-transplant survival.  </li>
<li><strong>Students explored the challenge of balancing fairness with practical medical outcomes.</strong> Guide inserted probing questions that pushed them to clarify the ethical and logistical implications of penalizing certain lifestyle choices in transplant systems.</li>
</ul>
<blockquote>
<p><strong>Student 1, Student 2 raises an important starting point about treating alcoholism as a medical condition like any other. What's your reasoning for why alcoholics should have lower priority for liver transplants? Is it about personal responsibility, medical outcomes, or something else?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students debated whether liver transplant allocation should factor in personal responsibility.** They argued over fairness, with one student defending a strict first-come, first-served principle while the other proposed modifying the MELD system to include responsibility and potential utility in post-transplant survival.  
- **Students explored the challenge of balancing fairness with practical medical outcomes.** Guide inserted probing questions that pushed them to clarify the ethical and logistical implications of penalizing certain lifestyle choices in transplant systems.

  
&gt; **Student 1, Student 2 raises an important starting point about treating alcoholism as a medical condition like any other. What&#39;s your reasoning for why alcoholics should have lower priority for liver transplants? Is it about personal responsibility, medical outcomes, or something else?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==988dab6ade::student-dwfilmvkdq==ed832820df::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f"><ul>
<li><strong>Students debated whether scarce healthcare resources should be allocated based on potential benefit or equal access.</strong> Student 1 argued for optimizing outcomes by favoring those who would gain more life years, while Student 2 held that fairness demands equal treatment regardless of disability.</li>
<li><strong>Guide pushed students to critically assess the ethical implications of valuing utility over equality.</strong> It questioned whether maximizing benefits justifies a system that could systematically disadvantage people with disabilities, forcing both students to confront the deeper moral trade-offs in healthcare allocation.  </li>
</ul>
<blockquote>
<p><strong>Student 1, you're making a pragmatic argument about maximizing outcomes with scarce resources. But what are the broader implications of this approach? If we consistently prioritize those who will get more use out of treatment, aren't we implicitly valuing certain lives more than others? Consider how this might create a system where people with disabilities systematically receive lower priority for care, regardless of their individual circumstances or potential.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students debated whether scarce healthcare resources should be allocated based on potential benefit or equal access.** Student 1 argued for optimizing outcomes by favoring those who would gain more life years, while Student 2 held that fairness demands equal treatment regardless of disability.
- **Guide pushed students to critically assess the ethical implications of valuing utility over equality.** It questioned whether maximizing benefits justifies a system that could systematically disadvantage people with disabilities, forcing both students to confront the deeper moral trade-offs in healthcare allocation.  

&gt; **Student 1, you&#39;re making a pragmatic argument about maximizing outcomes with scarce resources. But what are the broader implications of this approach? If we consistently prioritize those who will get more use out of treatment, aren&#39;t we implicitly valuing certain lives more than others? Consider how this might create a system where people with disabilities systematically receive lower priority for care, regardless of their individual circumstances or potential.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-awnsb3vklmnvbq==1ec9a7b4df::student-dwfilmvkdq==fa671a3cdf::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f"><ul>
<li><strong>Students discussed the ethical implications of liver allocation for alcoholics versus non-alcoholics.</strong> They explored whether fairness lies in giving priority to non-alcoholics based on self-inflicted liver failure or basing decisions on treatment success and overall patient outlook, with Student 1 stressing equal human worth and Student 2 focusing on realistic criteria like financial stability and post-treatment commitment.</li>
<li><strong>Guide actively steered the discussion by probing deeper into core assumptions such as the role of addiction treatment and the potential delay of critical care.</strong> Its pointed questions challenged students to critically evaluate whether factors like personal responsibility or treatment plans should govern scarce medical resource allocation.</li>
</ul>
<blockquote>
<p><strong>Student 1, how would you respond to critics who might say that requiring alcoholics to complete addiction treatment before transplant eligibility could delay critical care too long for those with advanced liver disease? This raises questions about timing and whether some patients might die waiting for both treatment and a liver.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students discussed the ethical implications of liver allocation for alcoholics versus non-alcoholics.** They explored whether fairness lies in giving priority to non-alcoholics based on self-inflicted liver failure or basing decisions on treatment success and overall patient outlook, with Student 1 stressing equal human worth and Student 2 focusing on realistic criteria like financial stability and post-treatment commitment.
- **Guide actively steered the discussion by probing deeper into core assumptions such as the role of addiction treatment and the potential delay of critical care.** Its pointed questions challenged students to critically evaluate whether factors like personal responsibility or treatment plans should govern scarce medical resource allocation.

  
&gt; **Student 1, how would you respond to critics who might say that requiring alcoholics to complete addiction treatment before transplant eligibility could delay critical care too long for those with advanced liver disease? This raises questions about timing and whether some patients might die waiting for both treatment and a liver.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==a8cfc07edd::student-dwfilmvkdq==be8e2cdede::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f"><ul>
<li><strong>Students discussed the ethics of prioritizing liver transplants.</strong> Student 1 argued that non-alcoholics should have priority because alcoholism is self-inflicted and carries a higher relapse risk, while Student 2 stressed that personal struggles can lead to addiction and that fairness demands a more nuanced view.</li>
<li><strong>Students evolved their debate toward a multi-criteria perspective.</strong> They began to explore how factors like medical urgency, expected post-transplant survival, and rehabilitation status could inform a fairer allocation system in the face of limited resources.</li>
<li><strong>Guide played a critical role in enhancing the discussion.</strong> Guide frequently challenged the students to clarify and refine their positions by asking probing questions about survival likelihood and balancing fairness with resource scarcity.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students discussed the ethics of prioritizing liver transplants.** Student 1 argued that non-alcoholics should have priority because alcoholism is self-inflicted and carries a higher relapse risk, while Student 2 stressed that personal struggles can lead to addiction and that fairness demands a more nuanced view.
- **Students evolved their debate toward a multi-criteria perspective.** They began to explore how factors like medical urgency, expected post-transplant survival, and rehabilitation status could inform a fairer allocation system in the face of limited resources.
- **Guide played a critical role in enhancing the discussion.** Guide frequently challenged the students to clarify and refine their positions by asking probing questions about survival likelihood and balancing fairness with resource scarcity.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7208e4c4df::student-z21hawwuy29t344c4094df::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f"><ul>
<li><strong>Students debated a tough case of medical prioritization under resource constraints.</strong> One argued for prioritizing treatment based on better projected quality of life without disability, while the other maintained that disability might signal greater need and the potential for broader social benefits.</li>
<li><strong>Guide challenged the students to sharpen their ethical reasoning and clearly define priority criteria.</strong> It repeatedly pressed for specifics on how functional capacity, psychological harm, and economic realities should interact in treatment decisions, pushing the conversation toward tangible ethical frameworks.</li>
</ul>
<blockquote>
<p><strong>Student 2, you've raised an important psychological impact of medical prioritization. How should we weigh potential psychological harm against utilitarian outcomes when making these difficult decisions? And now you've both mentioned age - does this suggest disability shouldn't be the primary factor?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students debated a tough case of medical prioritization under resource constraints.** One argued for prioritizing treatment based on better projected quality of life without disability, while the other maintained that disability might signal greater need and the potential for broader social benefits.
- **Guide challenged the students to sharpen their ethical reasoning and clearly define priority criteria.** It repeatedly pressed for specifics on how functional capacity, psychological harm, and economic realities should interact in treatment decisions, pushing the conversation toward tangible ethical frameworks.

  
&gt; **Student 2, you&#39;ve raised an important psychological impact of medical prioritization. How should we weigh potential psychological harm against utilitarian outcomes when making these difficult decisions? And now you&#39;ve both mentioned age - does this suggest disability shouldn&#39;t be the primary factor?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1043f13adf::student-z21hawwuy29t4a1dddeade::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f"><ul>
<li><strong>Students discussed the ethical dilemma of balancing fairness, personal responsibility, and patient health needs in liver transplant allocation.</strong> They weighed whether individuals suffering from alcoholism should be treated equally with non-alcoholics, examining factors like personal choice, access to treatment, and the impact of socioeconomic status on health outcomes.</li>
<li><strong>Guide challenged the students to probe the assumptions behind their positions and to consider the broader implications of their arguments.</strong> It pushed them to reflect on how strict prioritization criteria might reinforce stigma and discourage patients from seeking help while balancing ethical concerns with the harsh reality of scarce resources.</li>
</ul>
<blockquote>
<p><strong>Student 1, you've highlighted the unavoidable need to prioritize when resources are scarce. What do you think about the argument that focusing too much on "deserving" patients might reinforce stigma against addiction? Some worry this approach could discourage individuals from seeking help.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students discussed the ethical dilemma of balancing fairness, personal responsibility, and patient health needs in liver transplant allocation.** They weighed whether individuals suffering from alcoholism should be treated equally with non-alcoholics, examining factors like personal choice, access to treatment, and the impact of socioeconomic status on health outcomes.
- **Guide challenged the students to probe the assumptions behind their positions and to consider the broader implications of their arguments.** It pushed them to reflect on how strict prioritization criteria might reinforce stigma and discourage patients from seeking help while balancing ethical concerns with the harsh reality of scarce resources.

  
&gt; **Student 1, you&#39;ve highlighted the unavoidable need to prioritize when resources are scarce. What do you think about the argument that focusing too much on &#34;deserving&#34; patients might reinforce stigma against addiction? Some worry this approach could discourage individuals from seeking help.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2092d9aee9::student-z21hawwuy29t7abc1642dd::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f"><ul>
<li>
<p><strong>Students debated ethical medical prioritization in scenarios involving disability discrimination.</strong> Student 1 argued for prioritizing treatment for disabled patients based on everyday societal inclusion and individual need, while Student 2 weighed principles of justice and benefit, gradually shifting toward a need-based approach that goes beyond disability status alone.</p>
</li>
<li>
<p><strong>Guide pushed for clarity and consistency in ethical reasoning throughout the discussion.</strong> It challenged the students to reconcile conflicting positions by continuously asking how to prioritize between ethical fairness and medical urgency, probing for practical safeguards and real-world implications as their views evolved.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students debated ethical medical prioritization in scenarios involving disability discrimination.** Student 1 argued for prioritizing treatment for disabled patients based on everyday societal inclusion and individual need, while Student 2 weighed principles of justice and benefit, gradually shifting toward a need-based approach that goes beyond disability status alone.

- **Guide pushed for clarity and consistency in ethical reasoning throughout the discussion.** It challenged the students to reconcile conflicting positions by continuously asking how to prioritize between ethical fairness and medical urgency, probing for practical safeguards and real-world implications as their views evolved.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==144d2402de::student-dwfilmvkdq==7c87150edd::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Distribution
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f"><ul>
<li><strong>Students debated the fairness of a market-based healthcare system.</strong> They weighed the tension between the ideal of free healthcare and a reality where those who can pay receive prioritized treatment, using analogies like buying a book to frame the ethical dilemma.  </li>
<li><strong>Students evolved their views on whether healthcare is a fundamental right or merely a commodity.</strong> One argued passionately for universal free care despite current inequities, while the other highlighted practical issues like quality of service and the role of insurance in a debt-based system.  </li>
<li><strong>Guide played a pivotal role in challenging assumptions and sharpening the debate.</strong> It pushed the students to reconcile contradictions in their arguments and scrutinize the implications of treating healthcare as a market commodity.  </li>
</ul>
<blockquote>
<p><strong>Student 1, your book analogy raises a critical question: Is healthcare a consumer product like books, or a fundamental right? Books aren't essential to survival, but healthcare often is. Should life-saving care follow market principles? Student 2, what specific barriers do you see as most difficult to overcome?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" class="form-control summary-markdown-editor">- **Students debated the fairness of a market-based healthcare system.** They weighed the tension between the ideal of free healthcare and a reality where those who can pay receive prioritized treatment, using analogies like buying a book to frame the ethical dilemma.  
- **Students evolved their views on whether healthcare is a fundamental right or merely a commodity.** One argued passionately for universal free care despite current inequities, while the other highlighted practical issues like quality of service and the role of insurance in a debt-based system.  
- **Guide played a pivotal role in challenging assumptions and sharpening the debate.** It pushed the students to reconcile contradictions in their arguments and scrutinize the implications of treating healthcare as a market commodity.  

  
&gt; **Student 1, your book analogy raises a critical question: Is healthcare a consumer product like books, or a fundamental right? Books aren&#39;t essential to survival, but healthcare often is. Should life-saving care follow market principles? Student 2, what specific barriers do you see as most difficult to overcome?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b47c4be4df::student-z21hawwuy29t727419eee7::94ade63a31::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Disability Discrimination
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f"><ul>
<li><strong>Students debated the ethics of prioritizing patients in triage situations.</strong> One argued that disability should not diminish care deservingness while the other pointed to practical challenges in real-world settings, emphasizing established triage methods and the need for measured safeguards.  </li>
<li><strong>Guide pushed the conversation deeper by challenging the students assumptions and urging them to specify ethical criteria.</strong> It repeatedly probed how metrics like survival rates, treatment effectiveness, and baseline health could still risk discrimination and forced a re-evaluation of whether these criteria inherently favor or disadvantage patients.</li>
</ul>
<blockquote>
<p><strong>You've both identified a key challenge: medical criteria that seem objective (survival rates, treatment effectiveness) can still embed discrimination. Student 2, how would you respond to situations where data shows that even accounting for baseline health, certain disabilities statistically reduce treatment effectiveness? This gets at whether we should prioritize individual assessment or rely on population-level statistics.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" class="form-control summary-markdown-editor">- **Students debated the ethics of prioritizing patients in triage situations.** One argued that disability should not diminish care deservingness while the other pointed to practical challenges in real-world settings, emphasizing established triage methods and the need for measured safeguards.  
- **Guide pushed the conversation deeper by challenging the students assumptions and urging them to specify ethical criteria.** It repeatedly probed how metrics like survival rates, treatment effectiveness, and baseline health could still risk discrimination and forced a re-evaluation of whether these criteria inherently favor or disadvantage patients.

&gt; **You&#39;ve both identified a key challenge: medical criteria that seem objective (survival rates, treatment effectiveness) can still embed discrimination. Student 2, how would you respond to situations where data shows that even accounting for baseline health, certain disabilities statistically reduce treatment effectiveness? This gets at whether we should prioritize individual assessment or rely on population-level statistics.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==349f5f32df::student-dwfilmvkdq==b03ab1d0df::4debf3e369::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f"><ul>
<li>
<p><strong>Students grappled with the fairness of liver transplant eligibility.</strong> They debated whether factors like documented sobriety, underlying health, and personal accountability should affect allocation, with one student arguing for empathy while the other stressed the need for measurable criteria.</p>
</li>
<li>
<p><strong>Students examined the role of patient autonomy and ethical oversight in resource allocation.</strong> They introduced ideas about involving ethical committees to balance individual responsibility with compassion, weighing whether past behavior truly predicts future outcomes.</p>
</li>
<li>
<p><strong>Guide actively prompted deeper analysis and challenged assumptions throughout the discussion.</strong> Its questions about balancing empathy with practical concerns and the role of addiction treatment funding spurred the students to clarify their positions on fairness, responsibility, and the stewardship of scarce medical resources.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students grappled with the fairness of liver transplant eligibility.** They debated whether factors like documented sobriety, underlying health, and personal accountability should affect allocation, with one student arguing for empathy while the other stressed the need for measurable criteria.

- **Students examined the role of patient autonomy and ethical oversight in resource allocation.** They introduced ideas about involving ethical committees to balance individual responsibility with compassion, weighing whether past behavior truly predicts future outcomes.

- **Guide actively prompted deeper analysis and challenged assumptions throughout the discussion.** Its questions about balancing empathy with practical concerns and the role of addiction treatment funding spurred the students to clarify their positions on fairness, responsibility, and the stewardship of scarce medical resources.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==2f766320dd::student-dwfilmvkdq==c0f33c0ade::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Alcoholism and Liver Transplanation
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f"><ul>
<li>
<p><strong>Students debated criteria for liver transplant allocation</strong> One student argued for treating patients based on potential outcomes and fairness, while the other maintained that personal responsibility should guide prioritization given the scarcity of organs. Their views evolved as they questioned whether behavioral factors or medical efficacy should dictate waiting lists.</p>
</li>
<li>
<p><strong>Guide probed the complexities of fairness and medical need</strong> It pressed the students on how to weigh personal responsibility against survival chances, challenging them to justify why one group's choices should limit their access to life-saving care. Its interventions pushed the dialogue deeper into the ethical nuances of treatment allocation.</p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, what if no living donor is available? Your answer avoids the hard ethical choice. Healthcare systems must make these decisions daily. The playing God argument is interesting - but isn't any allocation system making life-or-death judgments? Even a first-come-first-served approach would privilege some lives over others.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" class="form-control summary-markdown-editor">- **Students debated criteria for liver transplant allocation** One student argued for treating patients based on potential outcomes and fairness, while the other maintained that personal responsibility should guide prioritization given the scarcity of organs. Their views evolved as they questioned whether behavioral factors or medical efficacy should dictate waiting lists.

- **Guide probed the complexities of fairness and medical need** It pressed the students on how to weigh personal responsibility against survival chances, challenging them to justify why one group&#39;s choices should limit their access to life-saving care. Its interventions pushed the dialogue deeper into the ethical nuances of treatment allocation.

  
&gt; **Student 2, what if no living donor is available? Your answer avoids the hard ethical choice. Healthcare systems must make these decisions daily. The playing God argument is interesting - but isn&#39;t any allocation system making life-or-death judgments? Even a first-come-first-served approach would privilege some lives over others.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==209c3410dd::student-dwfilmvkdq==8793533cdd::96694e6ccd::de0511837f" style="display: none;"></div>
                  </div>
                </div>
              
            
          </div>

          <!-- Removing the button row since we moved it to the header -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function debug_log(message, level) {
    console.log('DEBUG:', message);
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Theme toggling functionality
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      htmlElement.classList.remove('dark-mode');
      htmlElement.classList.add('light-mode');
      themeToggle.checked = true;
    } else {
      // Set dark mode as default if no preference found
      htmlElement.classList.add('dark-mode');
      htmlElement.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
      themeToggle.checked = false;
    }
    
    // Handle toggle changes
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        // Switch to light mode
        htmlElement.classList.remove('dark-mode');
        htmlElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        // Switch to dark mode
        htmlElement.classList.remove('light-mode');
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Handle refresh button click
    const refreshBtn = document.getElementById('refresh-cache-btn');
    if (refreshBtn) {
      refreshBtn.addEventListener('click', function() {
        // Add a spinning animation while refreshing
        const icon = refreshBtn.querySelector('i');
        icon.classList.add('fa-spin');
        
        // Reload the page with bypass_cache=true parameter
        const currentUrl = window.location.href;
        const url = new URL(currentUrl);
        url.searchParams.set('bypass_cache', 'true');
        window.location.href = url.toString();
      });
    }
    
    // Convert UTC timestamps to local timezone
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
  
  // Original convert UTC timestamps function (duplicated in script block below) can be removed
</script>

<script>
  // New code for summary generation progress
  let pollingInterval;
  let cancelRequested = false;

  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    
    // Initialize the report button state based on whether summaries already exist
    const hasSavedSummaries = true;
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      console.log("Enabling report button because saved summaries exist");
    }
    
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    
    if (hasGeneratingThreads) {
      // Start polling if there are already generating threads
      startPolling();
      generateBtn.style.display = 'none';
      cancelBtn.style.display = 'inline-block';
    }
    
    // Handle generate button click
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        // Show all spinners and status messages
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        
        generateBtn.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        
        // Make AJAX call to queue summaries instead of form submission
        fetch('/assignment/de0511837f/generate_summaries', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1)
            // Start polling for updates
            startPolling();
            // Enable report button when summaries are being generated
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1)
          }
        })
        .catch(error => {
          debug_log("Network error:", error, 1)
        });
      });
      
      // Handle cancel button
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/de0511837f/cancel_generation', {
            method: 'POST'
          }).then(response => {
            if (response.ok) {
              stopPolling();
              // Reset UI
              document.querySelectorAll('.thread-status').forEach(status => {
                if (status.textContent === 'Queued for generation...') {
                  status.style.display = 'none';
                }
              });
              document.querySelectorAll('.spinner-border').forEach(spinner => {
                spinner.style.display = 'none';
              });
              generateBtn.style.display = 'inline-block';
              cancelBtn.style.display = 'none';
            }
          });
        });
      }
    }
    
    // Handle report button click
    if (reportBtn) {
      reportBtn.addEventListener('click', function() {
        // Show spinner
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        
        // Disable button while generating
        reportBtn.disabled = true;
        
        // Change message in report section
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        
        // Make AJAX call to generate the report
        fetch('/assignment/de0511837f/generate_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1)
          
          // Start polling for report status
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1)
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    
    // Handle refresh data button click
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        // Show spinner
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        
        // Disable button while refreshing
        refreshDataBtn.disabled = true;
        
        // Make AJAX call to refresh data
        fetch('/assignment/de0511837f/refresh_data', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          
          // Reload the page to show refreshed data
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    
    // Handle regenerate title button click
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        // Disable the button and show a spinner icon
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        
        // Call the regenerate title endpoint
        fetch('/assignment/de0511837f/regenerate_title', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update the title text directly
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) {
              titleEl.textContent = data.title;
            }
            // Show success message
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
  });

  function startPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
    }
    
    // Poll every 2 seconds
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    
    // Do an immediate check to start the process
    checkSummaryStatus();
  }

  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }

  function checkSummaryStatus() {
    console.log("Checking summary status...");
    fetch('/assignment/de0511837f/summary_status')
      .then(response => response.json())
      .then(data => {
        console.log("Status data:", data);
        let activeGeneration = false;
        
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'inline-block';
            }
          } else if (threadInfo.status === 'completed') {
            if (statusEl) {
              statusEl.style.display = 'none';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
            if (summaryEl && threadInfo.render_html) {
              summaryEl.innerHTML = threadInfo.render_html;
              summaryEl.style.display = 'block';
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          }
        });
        
        // If no thread is still queued or generating, stop polling and reset UI
        if (!activeGeneration) {
          stopPolling();
          document.getElementById('generate-btn').style.display = 'inline-block';
          document.getElementById('cancel-btn').style.display = 'none';
          
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => {
        debug_log('Error checking summary status:', error, 1)
      });
  }
  
  // Function to check the report generation status
  function checkReportStatus() {
    fetch('/assignment/de0511837f/report_status')
      .then(response => response.json())
      .then(data => {
        debug_log("Report status:", data, 1)
        
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        if (data.status === 'completed') {
          // Report is ready, update the UI
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Display the report
          if (reportSection) {
            // Use safe assignment of innerHTML to preserve nested HTML structure
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            
            // Add custom CSS to ensure proper nested list rendering
            const styleTag = document.createElement('style');
            styleTag.textContent = `
              #report-content ul ul { 
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                padding-left: 2em;
              }
              #report-content li > ul {
                margin-left: 1em;
              }
            `;
            reportContent.appendChild(styleTag);
            
            // Add the content
            reportContent.innerHTML += data.content;
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2';
            generatedText.innerHTML = `Generated on: <span class="utc-time" data-utc-time="${data.generated_at}">${data.generated_at}</span><span class="local-time"></span>`;
            
            // Clear the report section and append the new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert the timestamp to local time
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true
                  };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  
                  // Find the next sibling with class local-time and set its content
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) {
                console.error('Error converting time:', e);
              }
            });
          }
        } else if (data.status === 'generating') {
          // Report is still being generated, check again in 2 seconds
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        }
      })
      .catch(error => {
        debug_log('Error checking report status:', error, 1)
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- Add CodeMirror for report editing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">

<script>
  // Report editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');

    // Initialize CodeMirror if report editor exists
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }

    // Edit button handler
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        // Refresh CodeMirror to ensure proper rendering
        if (reportEditor) reportEditor.refresh();
      });
    }

    // Cancel button handler
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }

    // Save button handler
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        // Get the edited markdown
        const markdown = reportEditor.getValue();
        
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        editorSpinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/de0511837f/edit_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            reportContent.innerHTML = data.content;
            
            // Show success message and close editor
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    
    // Helper to show status messages
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<!-- Add CSS for the editor status messages -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>

<!-- New export button update script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const exportBtn = document.querySelector('a[href*="/export"]');
  if (exportBtn) {
    exportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      const exportUrl = new URL(this.href, window.location.origin);
      exportUrl.searchParams.set('theme', currentTheme);
      window.location.href = exportUrl.toString();
    });
  }
  
  // Set theme class on HTML element for export mode
  if ('True' === 'True' && 'light-mode') {
    document.documentElement.className = 'light-mode';
  }
});
</script>

<script>
  // Summary editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryButtons = document.querySelectorAll('.edit-summary-btn');
    const summaryContainers = document.querySelectorAll('.summary-editor-container');
    const saveSummaryButtons = document.querySelectorAll('.save-summary-btn');
    const cancelSummaryEditButtons = document.querySelectorAll('.cancel-summary-edit-btn');
    const summaryEditors = document.querySelectorAll('.summary-markdown-editor');
    const summaryStatusMessages = document.querySelectorAll('.summary-editor-status');

    editSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'block';
          }
        });
        summaryEditors.forEach(editor => {
          if (editor.id === `summary-markdown-editor-${sessionId}`) {
            editor.focus();
          }
        });
      });
    });

    saveSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        const markdown = document.getElementById(`summary-markdown-editor-${sessionId}`).value;
        
        if (!markdown.trim()) {
          showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
        spinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/de0511837f/edit_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            session_id: sessionId,
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          spinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            summaryElement.innerHTML = data.render_html || data.content;
            summaryElement.style.display = 'block';
            
            // Close editor and update display
            const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
            editorContainer.style.display = 'none';
            
            // Show success message
            showSummaryStatus(sessionId, data.message, 'success');
          } else {
            showSummaryStatus(sessionId, data.message, 'error');
          }
        })
        .catch(error => {
          spinner.style.display = 'none';
          showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
        });
      });
    });

    cancelSummaryEditButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'none';
          }
        });
        summaryStatusMessages.forEach(status => {
          status.style.display = 'none';
        });
      });
    });

    // Helper to show status messages
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 5000);
    }
  });
</script>

<!-- Add JavaScript for thread summary editing -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all edit buttons for summaries
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    // Get all regenerate buttons for summaries
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    
    // Initialize CodeMirror editors object to store all editors
    const summaryEditors = {};
    
    // Add click handlers to all edit buttons
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      
      // Create CodeMirror editor when edit button is clicked (lazy initialization)
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        
        // Initialize CodeMirror if not already done
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          // Get original markdown content from data attribute or use HTML content as fallback
          let markdownContent = textarea.value;
          if (!markdownContent) {
            // This is a simple fallback that won't be perfect - ideally the backend would provide the markdown
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          
          summaryEditors[sessionId].setValue(markdownContent);
          // Refresh to ensure proper rendering
          summaryEditors[sessionId].refresh();
        } else {
          // Just refresh if already initialized
          summaryEditors[sessionId].refresh();
        }
      });
      
      // Add handler for cancel button
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      
      // Add handler for save button
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          // Get the edited markdown
          const markdown = summaryEditors[sessionId].getValue();
          
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          
          // Show spinner
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          
          // Make API call to save
          fetch(`/assignment/de0511837f/edit_summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              session_id: sessionId,
              markdown: markdown
            })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            
            if (data.success) {
              // Update the displayed content with the HTML returned from the server
              summaryElement.innerHTML = data.render_html || data.content;
              summaryElement.style.display = 'block';
              
              // Show success message and close editor
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    
    // Add click handlers to all regenerate buttons
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      
      btn.addEventListener('click', function() {
        if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
          // Show a spinner in the summary area
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            
            // Hide the summary while it's regenerating
            summaryElement.style.opacity = '0.5';
            
            // Make API call to regenerate
            fetch(`/assignment/de0511837f/regenerate_summary`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                session_id: sessionId
              })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              
              if (data.success) {
                // Update the displayed content with the HTML returned from the server
                summaryElement.innerHTML = data.content + 
                  `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                     <i class="fas fa-sync"></i>
                   </button>
                   <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                     <i class="fas fa-pencil-alt"></i>
                   </button>`;
                
                // Reset styles and show success message
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
                
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => {
                statusElement.style.display = 'none';
              }, 5000);
            });
          }
        }
      });
    });
    
    // Function to reattach event listeners after content is updated
    function attachButtonListeners(sessionId) {
      // Find the newly created buttons
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      
      // Reattach edit button listener
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          
          // Reinitialize or refresh CodeMirror
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      
      // Reattach regenerate button listener
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            const statusElement = document.getElementById(`status-${sessionId}`);
            const spinnerElement = document.getElementById(`spinner-${sessionId}`);
            
            if (statusElement && spinnerElement) {
              statusElement.textContent = 'Regenerating summary...';
              statusElement.className = 'status-message thread-status text-info';
              statusElement.style.display = 'block';
              spinnerElement.style.display = 'inline-block';
              
              summaryElement.style.opacity = '0.5';
              
              fetch(`/assignment/de0511837f/regenerate_summary`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  session_id: sessionId
                })
              })
              .then(response => response.json())
              .then(data => {
                spinnerElement.style.display = 'none';
                
                if (data.success) {
                  summaryElement.innerHTML = data.content + 
                    `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                       <i class="fas fa-sync"></i>
                     </button>
                     <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                       <i class="fas fa-pencil-alt"></i>
                     </button>`;
                  
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message;
                  statusElement.className = 'status-message thread-status success';
                  
                  attachButtonListeners(sessionId);
                  
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 3000);
                } else {
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message || 'Error regenerating summary';
                  statusElement.className = 'status-message thread-status error';
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 5000);
                }
              })
              .catch(error => {
                spinnerElement.style.display = 'none';
                summaryElement.style.opacity = '1';
                statusElement.textContent = 'Error regenerating summary: ' + error;
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              });
            }
          }
        });
      }
    }
    
    // Helper to show status messages for summary editing
    function showSummaryStatus(sessionId, message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusEl.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<script>
  // Handle regenerate title button click
  const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
  if (regenerateTitleBtn) {
    regenerateTitleBtn.addEventListener('click', function() {
      // Disable the button and show a spinner icon
      regenerateTitleBtn.disabled = true;
      const icon = regenerateTitleBtn.querySelector('i');
      const originalIcon = icon.className;
      icon.className = 'fas fa-spinner fa-spin';
      
      // Call the regenerate title endpoint
      fetch('/assignment/de0511837f/regenerate_title', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Update the title text directly
          const titleEl = document.querySelector('.generated-title');
          if (titleEl) {
            titleEl.textContent = data.title;
          }
          // Show success message
          console.log("Title regenerated:", data.title);
        } else {
          console.error("Error regenerating title:", data.message);
          alert("Error regenerating title: " + data.message);
        }
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Error regenerating title. Please try again.");
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      });
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let pollingInterval = null;

    // Debug logging function
    function debug_log(message, level, details = null) {
      if (details) {
        console.log(`DEBUG[${level}]: ${message}`, details);
      } else {
        console.log(`DEBUG[${level}]: ${message}`);
      }
    }
    
    // Initialize the report button state based on saved summaries status
    const reportBtn = document.getElementById('report-btn');
    const hasSavedSummaries = true;
    
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
  });
</script>

<!-- Add Share Export functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const shareExportBtn = document.getElementById('share-export-btn');
  
  if (shareExportBtn) {
    shareExportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      
      // Show loading state
      shareExportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
      shareExportBtn.disabled = true;
      
      // Read the current theme from localStorage
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      
      // Make POST request to share_export endpoint
      fetch('/assignment/de0511837f/share_export', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          theme: currentTheme
        })
      })
      .then(response => response.json())
      .then(data => {
        // Reset button state
        shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
        shareExportBtn.disabled = false;
        
        if (data.success) {
          // Create a simple modal to show the share link
          const modalHtml = `
            <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content" style="background-color: var(--card-bg); color: var(--text-color);">
                  <div class="modal-header" style="border-color: var(--border-color);">
                    <h5 class="modal-title" id="shareModalLabel">Share Export</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: var(--text-color);">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>Your export has been saved. Share this link:</p>
                    <div class="input-group mb-3">
                      <input type="text" id="share-link" class="form-control" value="${data.share_url}" readonly style="background-color: var(--input-bg); color: var(--text-color); border-color: var(--border-color);">
                      <div class="input-group-append">
                        <button class="btn btn-primary" type="button" id="copy-link-btn">
                          <i class="fas fa-copy"></i> Copy
                        </button>
                      </div>
                    </div>
                    <div id="copy-feedback" class="text-success" style="display: none;">Link copied to clipboard!</div>
                  </div>
                  <div class="modal-footer" style="border-color: var(--border-color);">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <a href="${data.share_url}" target="_blank" class="btn btn-primary">
                      <i class="fas fa-external-link-alt"></i> Open
                    </a>
                  </div>
                </div>
              </div>
            </div>
          `;
          
          // Append modal to body
          const modalContainer = document.createElement('div');
          modalContainer.innerHTML = modalHtml;
          document.body.appendChild(modalContainer);
          
          // Show the modal
          $('#shareModal').modal('show');
          
          // Add copy functionality
          document.getElementById('copy-link-btn').addEventListener('click', function() {
            const shareLink = document.getElementById('share-link');
            shareLink.select();
            document.execCommand('copy');
            
            // Show feedback
            const copyFeedback = document.getElementById('copy-feedback');
            copyFeedback.style.display = 'block';
            setTimeout(() => {
              copyFeedback.style.display = 'none';
            }, 3000);
          });
          
          // Remove modal from DOM when hidden
          $('#shareModal').on('hidden.bs.modal', function() {
            modalContainer.remove();
          });
        } else {
          alert('Error: ' + (data.message || 'Could not generate shared export'));
        }
      })
      .catch(error => {
        // Reset button state
        shareExportBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
        shareExportBtn.disabled = false;
        
        alert('Error: Could not generate shared export');
        console.error('Error:', error);
      });
    });
  }
});
</script>

<!-- Social Sharing Buttons Functionality -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Only run this code when in shared mode (when social buttons exist)
    if (document.getElementById('twitter-share')) {
      // Get the current page URL
      const pageUrl = encodeURIComponent(window.location.href);
      // Customize the share message
      const shareMessage = encodeURIComponent("Check out the assignments my students just finished on Sway! The AI Guide killed it! ");
      
      // Set up Twitter sharing
      const twitterBtn = document.getElementById('twitter-share');
      twitterBtn.href = `https://twitter.com/intent/tweet?text=${shareMessage}&url=${pageUrl}`;
      twitterBtn.target = '_blank';
      twitterBtn.rel = 'noopener noreferrer';
      
      // Set up Facebook sharing
      const facebookBtn = document.getElementById('facebook-share');
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}&quote=${shareMessage}`;
      facebookBtn.target = '_blank';
      facebookBtn.rel = 'noopener noreferrer';
      
      // Set up LinkedIn sharing
      const linkedinBtn = document.getElementById('linkedin-share');
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
      linkedinBtn.target = '_blank';
      linkedinBtn.rel = 'noopener noreferrer';
      
      // Instagram doesn't have a direct sharing URL API, so we'll use a clipboard approach
      const instagramBtn = document.getElementById('instagram-share');
      instagramBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Create a temporary textarea element to copy the text
        const textarea = document.createElement('textarea');
        textarea.value = `${shareMessage}

${window.location.href}`;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        
        // Alert the user
        alert('Link and message copied to clipboard. Paste this into Instagram to share!');
      });
    }
  });
</script>

<!-- Share Export Button functionality -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const exportBtn = document.querySelector('a[href*="/export"]');
    if (exportBtn) {
      exportBtn.addEventListener('click', function(e) {
        e.preventDefault();
        // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
        const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
        const exportUrl = new URL(this.href, window.location.origin);
        exportUrl.searchParams.set('theme', currentTheme);
        window.location.href = exportUrl.toString();
      });
    }
    
    // Set theme class on HTML element for export mode
    if ('True' === 'True' && 'light-mode') {
      document.documentElement.className = 'light-mode';
    }
  });
</script>

<!-- Refresh CodeMirror editors after init -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (window.CodeMirror && document.getElementById('report-markdown-editor')) {
      const reportMarkdownEditor = CodeMirror.fromTextArea(
        document.getElementById('report-markdown-editor'),
        {
          lineNumbers: true,
          theme: 'material-darker',
          mode: 'markdown',
          lineWrapping: true
        }
      );
      reportMarkdownEditor.refresh();
    }
  });
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>
</body>
</html>