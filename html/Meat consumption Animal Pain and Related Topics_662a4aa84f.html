
<!doctype html>
<html lang="en" class="light-mode">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Meat consumption, Animal Pain and Related Topics</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    :root {
      /* Dark mode theme variables (default) */
      --bg-color: #121212;
      --card-bg: #1e1e2d;
      --card-header-bg: #252538;
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #2d2d43;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #252538;
      --message-right-bg: #1a1a2e;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple theme */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    body { 
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.9em;
      padding: 6px 12px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
      transform: rotate(180deg);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: rotate(180deg) scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 30px;
      column-count: 1;
      column-gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        column-count: 2;
      }
    }
    .thread-item {
      display: inline-block; /* Required for column layout */
      width: 100%;
      margin-bottom: 15px;
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 12px;
      transition: all 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      break-inside: avoid; /* Prevents items from breaking across columns */
      transform: translateY(0);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      transform: translateY(-5px);
      box-shadow: 0 10px 16px rgba(0,0,0,0.25);
      border: 2px solid #ff851b;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .thread-header .thread-actions {
      display: flex;
      align-items: center;
      margin-left: 30px;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to not expand beyond the left column's Info container */
    #topics-container {
        max-height: 345px;
        min-height: 345px;
        overflow-y: auto;
    }
    
    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }
  </style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>
</head>
<body>
<div class="dashboard-container">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <div class="title-text"><i class="fas fa-tasks mr-2"></i> Assignment Details</div>
        
        
        
        
      </div>
      
    </div>
    <div class="card-body">
      <div class="row">
        <!-- Left column: General Information & Timelines -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
          </h5>
          
            <div id="timelines-container" class="info-box">
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Completion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-23 05:59:00+00:00">2025-02-23 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Opinion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-21 05:59:00+00:00">2025-02-21 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
            </div>
          

          <h5 class="section-title mt-4">
            <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
          </h5>
          <div id="info-container" class="info-box">
            <div class="row mb-3">
              <div class="col-5 col-label">Instructor:</div>
              <div class="col-7 col-value">[redacted]</div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Min. chat time:</div>
              <div class="col-7 col-value">
                
                  25 minutes
                
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Created on:</div>
              <div class="col-7 col-value">
                <span class="utc-time" data-utc-time="2025-02-17 18:05:42.566279+00:00">2025-02-17 18:05:42.566279+00:00</span>
                <span class="local-time"></span>
              </div>
            </div>
            
            
            <div class="row mb-3">
              <div class="col-5 col-label">Chat threads:</div>
              <div class="col-7 col-value">15 (14 disagree)</div>
            </div>
          </div>
        </div>

        <!-- Right column: Topics and Chat Threads -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
          </h5>
          
            <div id="topics-container" class="info-box">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Meat consumption</div>
                  <div>It is morally wrong to purchase and consume factory-farmed meat products.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Animal Pain</div>
                  <div>All animal pain matters less, morally speaking, than experientially similar human pain.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Marginal Cases</div>
                  <div>If it is morally permissible to perform medical experiments on an animal, then it must be morally permissible to perform medical experiments on a cognitively-similar human being.</div>
                </div>
                
              
              <!-- Removed toggle link; topics will scroll if content overflows -->
            </div>
          
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i>Opinion scale: -3 Strongly Disagree to +3 Strongly Agree
          </div>
          <div class="info-box">
            
              <div class="row">
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Meat consumption" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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r/vRaCTExhl9rsdgNAAAtFoddDr5PnwEUaibWJez6clxl1arA1BTd4v4+OuuGx8fhyWLZ0OvD5Pt/ZVQXW3B5CkzUVhYfN31gm3ugNCfP84d6tapfU0wjC8QxgYExviaUmYyw25vemNA1cDVaDSYeP9kdOuRgfPnzuLdRQvgdHq/BeNw2FFU2PSWdFPiYmMAADabFVarxef+aglCzTlqVosVLpd8W2o2W800mkpNTY4/LjYGen0Yliw5iYKCKtlqAGrGp9VJsFntso4vMTECkyd3gNON+Q22uQMCY/44d97xdO5qXhMc4wuEsQGBMb6miKJ7e8iqBa5Wq8WUqY8ivVNnnD6Vh3cWvgGLxbeJcrkAm83mc212e00fTqcLThm3qETRCZfTBZfLKWu/tX3Z7bYmx187tsuXK3HxYqVsNQA1h2h0ujBYrRbVxxcscwcExvxx7rwTyuMLhLEBgTG+puh07kWpKoEriiImT30E6Z0649jRI3h/8duwyxCUREREgUqVwB02fCQ6duqCo4e/x5L3Fvl0GJmIiCgYKB64kVFRuHPQEDgcDpzMOYFu3TMarJObm4MKs1np0oiIiPxG8cBNTk6tO+Ns3D33NrrOogXzkMPAJSKiEKJ44B498j1eePYppd+WiIhIVXweLhERkQIYuERERApg4BIRESmAgUtERKQABi4REZECGLhEREQKYOASEREpgIFLRESkAAYuERGRAhi4RERECmDgEhERKYCBS0REpAAGLhERkQIYuERERApg4BIRESmAgUtERKQABi4REZECGLhEREQKYOASEREpgIFLRESkAAYuERGRAhi4RERECmDgEhERKYCBS0REpAAGLhERkQIYuERERApg4BIRESmAgUtERKQABi4REZECJLXe2GAwInvMWKS1aw+NRsKp3JNYtXI5TKUlapVERETkN6rs4UZERGLa9KeR1q49tm/bgk3r1+Km5BRMn/EsIiOj1CiJiIjIr1QJ3AEDByPGYMSiBfOxacM6bN2yCQveeB1RzZph0JBhapRERETkV6oEbrceGTh/7iwuXbxQ13alIB+n8k6iW/cMNUoiIiLyK8UDNzw8HLGxcbh44XyDZRcvXEDzmBg0i45WuiwiIiK/Etq2vcWl5BsmJCbhV7/5Hdas/hxbNm+st+z2/ndi7PgJmDPrVVw4f86jfqOjW8hWo06nRXx8HK5etcHhkPnHIwiAS94+NRoBUVFaFBYWw2q1XXddv44NCO3x+WFsQGiPL5THBoT2+AJmbIDq43OX2Vx03eWKn6WsD9MDAKxWa4Nlth/adLowL3p2ARDgcjl9qK6GxWLBhQuXfO5HSSaTe+sF49gAjq9WMI4vlMcGhPb4QnlsgPvja4ogiKjJoOtT/rIg4Yf/N1JbbZPLiy0Zs7nY65KIiIj8TfHvcK0WCwBAq9M2WKbT6QAAFss1RWsiIiLyN8UD12QqBQBERzdvsKy2rbysXNGaiIiI/E3xwK2urkZxURFatW7TYFnrNm1gKi3F1asVSpdFRETkV6pch/v9oQNISU1DUstWdW0JiUlIa9cBB/bvVaMkIiIiv1L8siAACI+IwPMv/BaiRsTWrzcBLmDAoMGw2+2Y/do/UVVZqXRJREREfqVK4AKAMTYWo+8aj3bt0+FwOHA6LxerV63gwwuIiCgkqRa4RERENxI+D5eIiEgBDFwiIiIFMHCJiIgUwMAlIiJSAAOXiIhIAco/vIDq9OzVB/0HDERci3hUmMux+7td2LJ5A5xO3594pLZu3TMwYOBgJCYmweF04Py5s1j75RceP3YxGDzy2JO4du0aPnj/XbVL8YrBYET2mLFIa9ceGo2EU7knsWrl8pC6RG/QkEz0HzAQf/nTb9UuRVat27RFZlY2klNSIUkSCq8UYNvWzdi/d4/apfksOSUVw0eMQqvWbWC323Ds6BF89cUqVFZeVbs0r3EPVyUDBw/FfZMeRFmZCatXLkfuyRwMH5GNiQ9MVrs0n/W8rTcemDwVTqcTa75Yic0b16NFfAKenPEM2t6UrHZ5ssoaORrpnTqrXYbXIiIiMW3600hr1x7bt23BpvVrcVNyCqbPeBaRkVFqlyeL9I6dkZk1Uu0yZBcfn4AnnnoGSS1bYsvmDViz+nNYrVZMemAKBtw5WO3yfHJTcgqmTZ+JyMgorPvqC+z89hvc2rU7pj/9HMLCvHl8a2DgHq4KwsLCkJmVjRPHj+LdRQvq2i0WC+4cNARfb9qA/MvB92xJABBFEWPG3Y3z585i3pzX6h61uHf3LvzqxT9g5Ki78Oa82SpX6TutVoux4yegV59+apfikwEDByPGYMScWa/i0sULAIATJ47h2V+9iEFDhuGLVStUrtA3/e4YgNF3jYckhd5H3ai7xsHpdOL1Wf+C2VzzwJcd27fhyRnPIHNENnbt3N7oc8eDwagx41BZeRXzX38N1dXVAICLFy7gF49OQ89effDtN1tVrtA73MNVgdEYi4sXzmPXju312k/l5QIAWv7oHtPBplXrNggPj8C+PbvrPde4oqICp/NykZySqmJ18oiNi8OvX/ojevbqg43rv1K7HJ9065GB8+fO1oUtAFwpyMepvJPo1j1Dxcp899TM5zHu7ntxMuc4Llw4r3Y5shIEASmp7ZBz4lhd2AI1zxI/dPAAwsLCGn1ATDDQaDS4dq0Ke77bVRe2AHAq7yQAoGWr1mqV5rPQ2+wLAvn5lzH/9VkN2lu2qgnasjKT0iXJ5vKlS/jnK39F5dWG37NERkWFxPfTzZsbUFFhxgfvv4uzZ05jaOYItUvySnh4OGJj43D86JEGyy5euIAO6Z3QLDoaFWazCtX5rnlMDD5a+j727vkO06bPVLscWblcLrz26iuAq+GNAmu/CnA6gvNvzeFw4J2FbzZorw3a8iD+fGTgqkwURRgMRnS5+VYMzczCqbzcuj3dYORw2FFUeKVBe+s2bXFTcgryck+qUJW8zp09jTmzXlW7DJ9FN48BAJSXlzVYVrvXFBNjCNrA/d+//RkOh0PtMvymsZPatDodevXpi+rqa7h06UIjrwo+0c2bIzk5FaPuGocKsxm7dnyrdkleY+CqLCU1rW7ru6LCjJUrPlW5IvmFh4fXnQy2acM6lavxXah8iOvD9ADQ6Pd8th/adLrgPUElVObJExPuux/R0c2xfu0a2O12tcvxmSiK+O0f/gKNRgOHw4GPl/2n3iH0YMPAldGrs+Zed/nB/fsaXDpSVmbC4ncWIioqCgMHD8WMmc/j7YVv1n1fESi8GRsA6PXheOTx6UhISMSmDetw+lRg7r17O76gJvzw/0YeX1Lb5GrkkCUFpvETJqJ7j544lZcbEhu2ACBqNPho6ftwuVzo1acfJj0wBTExBmzeuF7t0rzCwJXR+rVfXnd5QcHlBm0lxcUoKS4GABw9ehgvvPh7ZI++K+AOWXoztujmzfHIY9OR1LIldu7YjrVfrvZXeT7zZnzBzmqxAAC0Om2DZTqdDgBgsVxTtCbynEajwcT7J9edAPfuogUhca4EANhtNhzYvxcAcOjgfjw541kMzRyBXTu+RVVV8D03nYErow3rrv+h3ZQKsxmn8/KQ3qkzBEEIqL0LT8cWGxuHx554CsbYOGzbuhmrP1/up8rk4evcBSOTqRQAEB3dvMGy2rbysuA9fHcj0Gq1mDL1UaR36ozTp/LwzsI3YPlhQyrUuFwufH/oAJJTUhGfkICzZ06rXZLHeFmQCrp1z8AfXv47broppcGyMH0Y7HZ7QIWtp6Kjm+PxJ5+GMTYO6776IuDD9kZVXV2N4qKiRi8fad2mDUylpbh6tUKFysgdoihi8tRHkN6pM44dPYKFC+aFRNjGxsXhxd//GQMHD22wrPamFzabTemyZMHAVcGVgnxERzfHHQMG1mtv0/YmpKS2a/QyjWDywOSpMBiNWLP6c2xcv1btcug6vj90ACmpaUj60bXfCYlJSGvXoe5QHgWmYcNHomOnLjh6+Hssfuct2IM0hH6qtKQEYWFh6NP3dmi1//26Izw8HL369EOZyYTLly6qWKH3eEhZBfn5l7F92xbcMWAgJElCzoljiI2LQ7/bB6Ciwow1qz9Xu0Svdbn5FqSmtYPJVApzeTl6ZNzWYJ0D+/cG9R58KNny9UZk9OyFR6dNx9avNwEuYMCgwSgvL8PWLZvULo9+RmRUFO4cNAQOhwMnc040epOS3NycoLyky+VyYfknH2Hy1Ecw/ennsGf3Luh0OvTpdweaNYvGu4sWBO3nBwNXJas+/wxlJhN6970dHTt3wbWqKhw8sA/rvloT1Ke9p7XrAKDmhviTHpzS6DrfHzoQEpcshIJrVVWYP3cWRt81HkMzR8DhcOB0Xi5Wr1qBqsrgOynlRpGcnFq39zfunnsbXWfRgnnICcLABYDD3x/Eu4sWYPDQTGSPHguHw44zp0/jP4vfCeoHoAht294SnJsKREREQYTf4RIRESmAgUtERKQABi4REZECGLhEREQKYOASEREpgIFLRESkAAYuERGRAhi4RERECmDgEhERKYCBS0REpAAGLhERkQIYuERERAr4f4Ww7FS/qunAAAAAAElFTkSuQmCC" alt="Opinion distribution for Animal Pain" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdwAAAEUCAYAAACBGIcsAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjcuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8pXeV/AAAACXBIWXMAAA9hAAAPYQGoP6dpAAAv8UlEQVR4nO3dd3wUdf7H8ddsdjcJKaSREJDeBKRXqaFKExXFiqh3dlT07jz9eefd6RW9s50NRREVPc8KKnKCFOm9N+lFSkICpBFItv7+iMldTIBs2J1NlvfTP3w8Zma/8/nsLHnvd2Z212jYsJ0XERERCShLsAsQERG5GChwRURETKDAFRERMYECV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETWINdgEigjBh5Bb9/8jEAsk9mc+WosXg8nrNu37Zta95+53UANm3awn33TDSlzsp4bdKLdO7ckYce/A1r16w3ZZ91U1OYPuPfZGZmcfXoG3x6bJ06SYwcNYw+fXpRNzWZmJgYTp7MZsvmrcyYMZMN6zcFqGqR6kszXLkoxCfE06lzh3NuM3jIQJOqCW1XXT2KTz/7gLvv+QVJdRLZs2cfK5avovBMIYOHDOT1SS8x4YF7gl2miOk0w5WQl5eXT2xsDAMH9mfd2g0VbmMYBgMH9sfhcGC3202u8Pz+/NSzRESEk5GRGexSzumWcTcw4YF7yM3N5emnn2Xh94vxev/7de09enTlqT8/yS3jbuDMmTNMfWdaEKsVMZdmuBLy1q1dT0FBAWlpfbFYKn7Jd+jYjjrJSaxaucbk6irn2LFMDh48RFFRUbBLOasWLZpx9z2/oKiwiAcm/JrvFywqE7YAq1at5cnfPw3ArbfeRHx8XBAqFQkOzXAl5DkcDpYuXcEVVwymU6cOrFtXfpY7eMhA3G438+Z9T99+vSscp0vXTowZM5q2l7UhLq42TqeLI0eO8v2CRXz0r09xOp2l2/7uyd8ycuQw7r/vYcZeP4Zel/fg9JkzvDv1Az7/bAYA7dq35bbbx9G6dSvsdjtbt2zjzTemcM21oxk9eiQT7n+k9FpnRddwS5ZdMfQqhg8bwuirRlL/kvoUFJxixfLVTHn7PY4dKzsjtofbGTNmNGkD+tG4UUNqRdUiP/8UP/ywk08//oLVq9dW+Xm+buw12Gw2Pv78c/bu2XfW7dasXsfiRUtxu90kJ9chOzundF2rVi244cbraN/hMhITE/F43Bw7lsnSJcuZ9v5HnDpVUGasXr16MPb6MTRt2oTacbGcPJHNunUb+PCDf3Pw4KFy+27duhXjbr2Rjh3bExUdRVbWcZYsXsb77/2L3Ny8MtvGxERzxy9upVu3LtSrn4rb7Wb/voPMnj2Xr7785pz3A4hURIErF4UF8xZyxRWDGTCof7nAtVgsDEjry6ZNWzh+/ESFj7/xput4aOL9OBwOtmzextYt20lOqUObNpfSsmVzWl3akice/2O5xz32+K9JSIhn5co1NG3WmD279wIwYGB/nnr6d1itVjZt2kJ2dg4dO7bnzcmv8OOhwz719n9P/Ia0tL5s3bqdFStW0bFje0aOGkbXbp0Zd/MvKSgoDim73cbrk16ibdvWZGUeZ9PmreD10rxFM3r16kHPnt34v8f+wJIly33aPxQ/h2kD+gEwd+6C827/+GN/KLes+Dn5PYYBW7duZ8cPu0hIiOeydm0Yd+tNdOnSiTt/OaF01tyvX2/++syfcLvdbNq0hVNbT9GkaWNGjhpG2oC+3PXLBzhw4GDp+MNHDOX/nngUi8Vg587dZGzMoEWL5tx401j6p/Vlwv2PkJF+rPS5ev6FZ2jXvi2HDx1h1aq1RISH06lTB9q1b0urS1vw7N9e8Pl5koubAlcuCitXriE//xRpaX148flXysxOunbtTHxCPG+99W6Fj01MTODe++4kNzeXu+58gMOHjpSu69ChHa++/gJpaX2pUyeJrKzjZR6blJTIbbfexdGj6RiGgdfrJTY2lsce/xUAj/7mdyxbugKAqKgo/vHcX857c9fP9ejRlQcn/Lr0jURMbAxT3nmdBg0uYdjwIXzx+ZcAjLn2Ktq2bc3ChUt48ndP4XYXPwcWi4VHfvUA1153NdeOvbpKgZuYmEBMTDQul4udO3b5/Hir1cpvHp2Ix+Pmgft/xdat20vXNWrUgLffeZ3WbS7lsnZt2LJ5GwAPPnQfXq+X28ffUyZYJz48gRtuvJYbb76uNBQbNW7IY4//iqKiIh7/7ZOlz5VhGNx19x3cfsc4/vinJ0rvTB84MI127dsyZ/ZcnvrTM6Vj169fj3emTmLUqOFMnTKNzMwsn3uVi5eu4cpFwel0snTJchISEujYsX2ZdYMGp+FyuVj4/eIKH5uYmMDiRUt5950PyoQtFH98aN/e/QCk1qtb7rFLlyzj6NF0gNKZ2fARQ4mNjeHrr2aVhi1AQUEBTz/1DC6X26fevvpyVplZe35ePrO/nQtA06aNS5c7nS6WL1vJm5OmlIYtgMfj4asvvwGgXmqqT/sukZSUCEBubl6VTrUmJiawetUa/v3RZ2XCFuDgwUOsW7uxuL56/60vMSkBl8vFyZPZZbaf9v6/eOH5V/h21nely8ZePwa73c7Ud6aVea68Xi9vTZ7Knj176dChHW3bti4dGyj3BurIkaP87a/P8eenn6WwsPpeT5fqSTNcuWjMn7+Q4SOGMnBQf9av3wgUz6z69+/D6tXryl3DK7Fr1x7+8ORfyiwzDIN69VNp0/pSYmNjAbDZbOUeu/enMP5f3bp1BmDJ4mXl1h07lskP23fQrn3bSve1deu2cstKTo1HRESULvvi8y9LZ7slwsPDadqsCb169SjuwV6+h8pwu4vfJISFhVXp8ceOZZaZSZZISUmm1aUtS9/M/O9zvGHDJi6/vAfvTZvMNzO/ZcWK1ez4YSfZ2Tnl+uzSpRNQfANdRVauXEPz5s3o3Lkj27b9wMYNmwEYd+tN1K9fj4ULl7Bm9TpycnJZXMFxE6kMBa5cNFavWkteXj790/rywvOv4PV66dGzG7G1Y5l3nuuOFouFAQP7MXjwQBo3aURqakrpx4dKZnSGYZR7XH5efrllKSnJAGQcq/gjPhkZx3wK3Pz8U+WWlQSgxVK2pviEeMaMGU3nzh25pEF9EhMTsFgs5+yhMkoCPiYmmrAwS5kZtC96Xt6dESOG0rRpE+rVTy19w1BRfc/+7QWeefZp2rS9lDvvup0777qd3Nxcli9bxcyZ/ykNTYCUlDoAvDftrXPuP/mn7bZt+4F/vvga991/FwMG9mfAwP54PB52/LCL779fxFdfflPuBi6R81HgykXD5XKxZPEyRo4aRqdOHVi/fiODB6dRVFjE4kVnn7VERETw6usv0LZta06fPsOOHTtZu2Yde/fuZ/OmLfz6NxPPet3V87OPxUDxrBrAYlR8RcfXzPv5R2/OplPnDjz3/N+oVSuSjIxjbN+2gwMHDrJr527S0zOY+t6bvu34f5w8mU1mZhbJyXVo3frScqeFf65X7540atSAFctXc+DAQQzD4Nl//Jm+fXvhcDjYuWM3c2bPY9++/Wzdsp3rxl7D8BFDy4yRlXWcO395P+3at6Vfvz50696F5s2bMnzEUIaPGMoH0/7NG5PeBij9ONjc7xbg8Zz9lH3JTW0An346nTlz5tE/rS89L+9O584dadP2Utq0vZTrb7iW++6ZWHq5QKQyFLhyUZk/fyEjRw1j4KD+bN26jT59e7F8xSpOnz591sfcfMv1tG3bmtWr1/LE438qt210TLRPNWRmZdGocUOSU+qwf/+BcuvrJNfxabzKeuKJR6lVK5Ln/vFPZkz/usy6li2bX/D4S5csZ8y1VzFgYL/zBm7JR3Pq1EnilZffYNjwIfTt24tdu/bw60ce58SJk2W2j46OOutYWzZvK72RKj4+jpGjhnHPvb/k5luu57PPZnA86zgnTpwkNbUub701lSOHj1a6p9zcPL7+ahZffzULwzBo3/4yHpp4H63bXMot427guX/8s9JjieimKbmorFm9jtzcXPr170Ov3j2Jiopi3tzvz/mYyy5rA8AXn31ZLmyT6iTRpEkj4Owz1p9bv24jAL17X15uXXxCPG3aXFqpcXyRkBBP/UvqkZeXXy5sAbr36ApU/ZQywGefTsfpdDLm2qtp1LjhWbfr178P7dtfhsvl5ssZxTdrlTzH//lmdrmwjYyM4LJ2xafYLT/V17BhA6Z9+DYvvFT2um92dg4ffvAxe/fsIywsjDo/3cxV8nnmkmvVP/fkHx7nrSmv0btP8TGZ8MA9fP3NZ2VusPN6vWzatIX33v0Q+O+lAZHKUuDKRcXtdrNo0VKSkhK5+55fUFBwmmXLVpzzMTk5uQD07ls2IFNSknnm2adKTxHbwyv3lZDfzPyWgoLTjL5qBD1+CjoovoHpd7//bemNQZU9VVwZpwoKcDgcxMbGlLtLu39aX+74xa3FNVzA11oePHiID6b9m/BwO5Pe+Cd9+vYqt03agL48+YfHsVgs/OvDj/nxx+Ivpyh5ji/v1YOwsP/+WYqNjeXPf/lD6TdSlTzHhw8fITEhgR49ujHgp8//lmjVqgWNGjeioKCAgwd/BIrfDLhcbu66+w66dO1UZvurrh7F8BFDadGiOdu37wAgKzOLpKRE7rnvl9SqVat027AwC4MGDwAo3VaksnRKWS46C+YtYvTokTRu3Ig5s+fiKHKcc/vPP5/BoMFpjB49kvbtL2Pf3gPEx8f9dGOTwcEDP9KocUMSE+Irtf8TJ07ywvMv8/snH+OFl55l86atZGdn075DOyIiIjh58iQJCQk+fzzoXBxFDr6cMZPrb7iWV157gY0bNpF/6hRNmzSmUeOGpKdn4PF4iYqOwh5uP+9zcjZT3n4Pi8XC7XeM4x/P/YWM9GPs3bsPh9NJy5bNqV+/HgCffPwFb02eWvq4mTP/w9jrr6FHz258+vmH7Nixi6ioWrRvfxkRERHs23eApk0bk5BQ/HEdj8fD3//+En975k/89Zk/sWPHLo4eSScuvjbt27fDag3jpRdf5fTpMwDs3Lmbl//5Oo/86gFefe0Fdu7czdGj6TRq2ICmzZrgcrl5+k9/I/unjxjNmDGTwUMH0qFDO6bP+Iit237A6XDSqlUL6qamsG/fAT75+IsLOSRyEdIMVy4669atL/06wbnnOZ0MsH3bDu69+yGWL19FTEwMl/fqTkJiAgsXLuGeux7gzTffAaB3BTO6s5n97VweefgxNqzfRIuWzenRszu7du3m3nseIiur+I7fAj/fBfvKy2/w/HMvs3//Adq0bU2nTh04U1jI++99yG233sX69RsJCws762nXynpr8lTuvutBZn0zG4fTQdeunenT53LCwsKYM2ce99z9IC//8/UyM/iM9GPc+YsJzJ+3EIvFQq/Le1C/Xj3Wrt3AxIce5emnik8d9+nz37MMixct5ZGHH2P58lWkpCTTr39vmjRuxIoVq5hw/yN8/dWsMnV98fmX3HfvRBYuXEJynSR69+5JRGQE8+Z9z52/uI/v/+dz2E6nk0cmPsa09z/iZHY2XTp3pEfPrpw+fZqp70zj7jsnlH6Dl0hlGQ0btvPfeSsROa/k5DqEh4eTnp6By+Uqsy4szMLMWV8QExPNkEFXUlhYGKQqRcTfNMMVMVmPnt345LNpPPmHx8ut+8UvbyMurjarV69V2IqEGM1wRUwWFRXF+x+8Rb16qWSkH2Pnzt0YBjRv0Yx69VI5diyT++6dWPpF+iISGhS4IkFQu3Ys1429hv5pfUhJScFqDePYsUyWLF7Ovz78hLy8ir9mUkRqLgWuiIiICXQNV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBApcEREREyhwRURETKDAFRERMYECV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBNZgF+AvsbFJgIHX6wl2KSIichExDAvgJS/v+Dm3C5nABeNn/69+DAPCwqy43S683mBX43+h3F8o9wah3V8o9wbqr/o4f/aETOAWz2wNHI4zwS7lrGw2G4lJCWRlZuJ0OoNdjt+Fcn+h3BuEdn+h3Buov+rAbo8Ezv9uQNdwRURETKDAFRERMYECV0RExAQKXBERERMocEVEREygwBURETFByHwsSCovNTWF+Pjafh/XarURnxBPUmIcLpd/b9/Pzs4lPf2YX8cUETGTAvcik5qawuzZHxMZGRHsUnxy5kwhw4bdqNAVkRpLgXuRiY+vTWRkBO+9t5OMjNN+HdtiMbDZ7DidDjwe/30lTN26tbj99lbEx9dW4IpIjaXAvUhlZJzm8OECv45psRjY7S4cjiK/Bq6ISCjQTVMiIiImUOCKiIiYQIErIiJiAgWuiIiICRS4IiIiJlDgioiImECBKyIiYgIFroiIiAkUuCIiIiZQ4IqIiJggaF/tWK9efYaPGk3jJs2wGAYHD+7nP998zeFDPwarJBERkYAJygw3KakO9z34MA0aNOL7+XOZM3sWdeqkcN+EidRNrReMkkRERAIqKIHbt/8AIiIieXfKZBbMm8PihQuYPOkVLGFhDB46LBgliYiIBFRQAjcxqQ6FhYUcPLi/dNnx41kcP55Fqma4IiISgoISuFmZx4iIiCAmNrZ0mdVmIzYmlry8vGCUJCIiElBBuWlq4YJ5tLmsHTePu52ZX03H6XRyxfCRRERGsnDBvCqPaxhgs9n8WKl/WW02rFYr1iDWaLUW79tiMbBYDL+ObRgWDIuBYViwWDx+G7ekTqvVFrTjWx2OXSCFcn+h3Buov+rAMAy83vP/BnhQAjc3N4d5381mzHU38MhvHi9dPv2zj9m5Y3uVxw0Ls5KYlOCPEgPCarUSHx8PgMvlCkoN8QnF+7fZ7Njt/q3BsBilgej14w/Q22x2oLj2OsnJfhvXF9Xh2AVSKPcXyr2B+qsOcrLzcLnOP8kISuAOHTaSIVcM5+CB/SxfthiP20PXbj24+trrwTBYsWxJlcZ1u11kZWb6uVr/KXmHlpWVhcvpDEoNSYlxADidDhyOIr+ObRjFVygcRQ68Xv/NcJ3O4pdp9snsoB3f6nDsAimU+wvl3kD9VQcWS+Vm36YHbkREBGkDBpF+9ChvvPZP3G43ABs3rOOXd9/H6KvHsG3rZvJyc30e2+sFZzU9ICVcLhcupzNodbpcxfv1eLx4/DgLBbBYPHg9Xrxej1/HLhnL5Qre81a8/+Aeu0AL5f5CuTdQf8Fmt1cuSk2/aSqpTjI2u52NG9aVhm2JNatXYrXaaNKkmdlliYiIBJTpgVtyDt5ilL9hx6B4mVHBOhERkZrM9MA9lpFOTk42Xbr1wGa3l1nXvWcvXC4X+/btMbssERGRgDL9Gq7X62XG558y/o47mfjIo6xeuQK3x02Hjp1p0rQZ386aWaXrtyIiItVZUO5S3r5tC5MnvcKQK4YzZNgIwsLCyEg/yr8+eI+N69cGoyQREZGACtqvBe3ft5e33ngtWLsXERExlX4PV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBApcEREREyhwRURETKDAFRERMYECV0RExAQKXBERERMocEVEREygwBURETGBAldERMQEClwRERETKHBFRERMoMAVERExgQJXRETEBApcEREREyhwRURETGAN1o5tNhuDhgyjc5duREVHc+J4FosWLmDdmlXBKklERCRgghK4hmFwx5330rRZc1YsW0LmsQw6dOrCjTffis1qZeWKZcEoS0REJGCCckq5S7cetGjZiq9mfM5XMz5nxfKlTJ70CkcOH2LosJHBKElERCSggjLD7da9JyeOZ7Fy+dLSZV6vl29nzaRBw4bY7XYcDkcwShMREQkI0wPXYrHQsFFj1qxeidfrBSgN2J07trNzx3azSxIREQk40wM3ITEJq9VK9smT9OmXRv8Bg4iLi6egoIDFC+ezYN53VR7bMIpvxqqurDYbVqsVaxBrtFqL922xGFgshl/HNgwLhsXAMCxYLB6/jVtSp9Vqq9TxTU1NJi4uzm/7BwizWomPjyMlJQm3y+XXsQFycnJIT8/0+7iVVR1em6BjVxXV5dgFSk3ozzCM0gnkuZgeuJGRkQB07d6DWrVqMX/uHPJyc+nSrQfDR44mPDyCb2d9XaWxw8KsJCYl+LNcv7JarcTHxwPgCsA//MqITyjev81mx273bw2GxSgNRK/n/C++yrLZ7EBx7XWSk8+5bXJyEtPef5mIiHC/7d8MhYVFjL9tIpmZx4Oy/+rw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" alt="Opinion distribution for Marginal Cases" class="img-fluid" />
                    </div>
                  </div>
                
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text">
              <i class="fas fa-file-alt mr-1"></i> Instructor Report
            </div>
            
          </h5>
          <div class="info-box" id="report-section">
            
              <div id="report-content" class="markdown-content"><p>This assignment invited students to critically engage with ethical debates surrounding meat consumption, animal pain, and the moral permissibility of extending medical experiments from animals to cognitively similar humans. Participants deliberated over whether factory-farmed meat should be condemned, if animal pain is inherently less significant than human pain, and how species membership and cognitive capacities factor into ethical decision-making.</p>
<h3>Themes</h3>
<ul>
<li><strong>Diverse ethical frameworks informed the evaluations.</strong> Students applied a range of perspectives—including utilitarian, deontological, and rights-based approaches—to analyze animal versus human pain.</li>
<li><strong>Moral consistency and internal tension surfaced repeatedly.</strong> Many discussions revealed conflicts between participants’ stated ethical ideals and the practical implications they encountered, prompting reexamination of their positions.</li>
<li><strong>Theory and practice intertwined in debates on testing and consumption.</strong> Participants navigated the tension between abstract ethical principles and the pragmatic realities of animal testing, meat production, and potential medical benefits.</li>
</ul>
<h3>Common ground</h3>
<ul>
<li><strong>Acknowledgment of animal suffering as ethically significant emerged widely.</strong> Across discussions, students largely agreed that pain, regardless of the species experiencing it, merits ethical consideration.</li>
<li><strong>There was shared openness to exploring alternative solutions.</strong> Many groups recognized the value of technological or regulatory changes—like in vitro methods or humane farming practices—to mitigate ethical dilemmas without dismissing practical needs.</li>
</ul>
<h3>Persistent disagreement</h3>
<ul>
<li><strong>The role of cognitive capacity in determining moral worth remained contentious.</strong> While some argued that cognitive abilities should dictate moral status, others maintained that suffering itself is the core ethical concern, leaving the issue unresolved.</li>
<li><strong>Ethical justification for animal testing continued to provoke discord.</strong> Despite probing by Guide, debates persisted over whether potential human benefits could ever outweigh the moral costs of inflicting animal pain.</li>
</ul>
<h3>Guide's role</h3>
<ul>
<li><strong>Guide consistently pushed students to articulate and refine their assumptions.</strong> By raising incisive questions—such as challenging overreliance on species membership—Guide ensured that participants examined the foundations of their reasoning.</li>
<li><strong>Guide intervened to spotlight internal contradictions.</strong> The AI moderator’s targeted interventions compelled students to confront disparities between their ideal ethical frameworks and the practical implications of their arguments.</li>
<li><strong>Guide fostered deep inquiry through thought-provoking hypotheticals.</strong> By introducing scenarios involving cognitive disabilities or altered pain tolerances, Guide expanded the scope of discussion to reveal overlooked moral complexities.</li>
<li><strong>Guide excelled at challenging simplistic or biased claims.</strong> Its persistent questioning of unchallenged assertions—such as equating economic benefits with ethical justification—helped sharpen students’ debates and encouraged more nuanced positions.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Creative analogies enriched the discussions.</strong> Students employed compelling examples—such as comparing humans to machines with different capabilities or invoking a child’s pain—to illuminate the ethical stakes involved.</li>
<li><strong>Personal experiences intertwined with abstract reasoning.</strong> References to firsthand encounters with farming practices and medical research provided concrete grounding for otherwise theoretical discussions, making the debates more relatable and impactful.</li>
</ul>
<h3>Lessons</h3>
<ul>
<li><strong>Guide’s role as a critical interlocutor was instrumental to deeper inquiry.</strong> Instructors may note that the AI’s method of probing contradictory claims and demanding clearer justifications significantly advanced the quality of ethical discussion.</li>
<li><strong>Structured prompts and hypothetical scenarios effectively exposed complexities.</strong> The detailed exploration of marginal cases and ethical tradeoffs suggests that future sessions could benefit from further emphasis on connecting abstract ethical theory with tangible real-world examples.</li>
</ul></div>
              <div class="text-muted mt-2">
                Generated on: <span class="utc-time" data-utc-time="2025-03-30T09:53:54.528000+00:00">2025-03-30T09:53:54.528000+00:00</span><span class="local-time"></span>
                
              </div>
              <!-- Add the editor container here -->
              <div id="report-editor-container" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
                </div>
                <textarea id="report-markdown-editor" class="form-control">This assignment invited students to critically engage with ethical debates surrounding meat consumption, animal pain, and the moral permissibility of extending medical experiments from animals to cognitively similar humans. Participants deliberated over whether factory-farmed meat should be condemned, if animal pain is inherently less significant than human pain, and how species membership and cognitive capacities factor into ethical decision-making.

### Themes
- **Diverse ethical frameworks informed the evaluations.** Students applied a range of perspectives—including utilitarian, deontological, and rights-based approaches—to analyze animal versus human pain.
- **Moral consistency and internal tension surfaced repeatedly.** Many discussions revealed conflicts between participants’ stated ethical ideals and the practical implications they encountered, prompting reexamination of their positions.
- **Theory and practice intertwined in debates on testing and consumption.** Participants navigated the tension between abstract ethical principles and the pragmatic realities of animal testing, meat production, and potential medical benefits.

### Common ground
- **Acknowledgment of animal suffering as ethically significant emerged widely.** Across discussions, students largely agreed that pain, regardless of the species experiencing it, merits ethical consideration.
- **There was shared openness to exploring alternative solutions.** Many groups recognized the value of technological or regulatory changes—like in vitro methods or humane farming practices—to mitigate ethical dilemmas without dismissing practical needs.

### Persistent disagreement
- **The role of cognitive capacity in determining moral worth remained contentious.** While some argued that cognitive abilities should dictate moral status, others maintained that suffering itself is the core ethical concern, leaving the issue unresolved.
- **Ethical justification for animal testing continued to provoke discord.** Despite probing by Guide, debates persisted over whether potential human benefits could ever outweigh the moral costs of inflicting animal pain.

### Guide&#39;s role
- **Guide consistently pushed students to articulate and refine their assumptions.** By raising incisive questions—such as challenging overreliance on species membership—Guide ensured that participants examined the foundations of their reasoning.
- **Guide intervened to spotlight internal contradictions.** The AI moderator’s targeted interventions compelled students to confront disparities between their ideal ethical frameworks and the practical implications of their arguments.
- **Guide fostered deep inquiry through thought-provoking hypotheticals.** By introducing scenarios involving cognitive disabilities or altered pain tolerances, Guide expanded the scope of discussion to reveal overlooked moral complexities.
- **Guide excelled at challenging simplistic or biased claims.** Its persistent questioning of unchallenged assertions—such as equating economic benefits with ethical justification—helped sharpen students’ debates and encouraged more nuanced positions.

### Insights
- **Creative analogies enriched the discussions.** Students employed compelling examples—such as comparing humans to machines with different capabilities or invoking a child’s pain—to illuminate the ethical stakes involved.
- **Personal experiences intertwined with abstract reasoning.** References to firsthand encounters with farming practices and medical research provided concrete grounding for otherwise theoretical discussions, making the debates more relatable and impactful.

### Lessons
- **Guide’s role as a critical interlocutor was instrumental to deeper inquiry.** Instructors may note that the AI’s method of probing contradictory claims and demanding clearer justifications significantly advanced the quality of ethical discussion.
- **Structured prompts and hypothetical scenarios effectively exposed complexities.** The detailed exploration of marginal cases and ethical tradeoffs suggests that future sessions could benefit from further emphasis on connecting abstract ethical theory with tangible real-world examples.</textarea>
                <div class="mt-3">
                  <button id="save-report-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-1"></i> Save Changes
                  </button>
                  <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
                    <i class="fas fa-times mr-1"></i> Cancel
                  </button>
                  <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
                </div>
                <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
          <div class="info-box thread-list" id="thread-list">
            
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f"><ul>
<li>
<p><strong>Students discussed whether moral consideration for pain should be determined by cognitive capacity or the immediate experience of pain.</strong> Student 1 argued that humans experience an added layer of psychological suffering due to abstract reasoning and future anticipation, while Student 2 maintained that the shared ability to feel pain should warrant equal compassion regardless of cognitive differences.</p>
</li>
<li>
<p><strong>Guide facilitated the discussion by posing incisive follow-up questions that honed in on the nuances between reflexive pain and complex psychological suffering.</strong> Guide’s targeted interventions encouraged the students to delve into the distinctions between immediate physical reactions and the longer-term impacts of trauma, thereby deepening the analysis of this challenging ethical issue.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students discussed whether moral consideration for pain should be determined by cognitive capacity or the immediate experience of pain.** Student 1 argued that humans experience an added layer of psychological suffering due to abstract reasoning and future anticipation, while Student 2 maintained that the shared ability to feel pain should warrant equal compassion regardless of cognitive differences.

- **Guide facilitated the discussion by posing incisive follow-up questions that honed in on the nuances between reflexive pain and complex psychological suffering.** Guide’s targeted interventions encouraged the students to delve into the distinctions between immediate physical reactions and the longer-term impacts of trauma, thereby deepening the analysis of this challenging ethical issue.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==48c11aa6dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated whether animal pain should be considered morally less significant than human pain.</strong> Student 1 drew on personal farm experiences to stress that animals clearly express pain, while Student 2 argued that human capacities for self-reflection and broader social impact justify a higher moral weight for human suffering; over time, both recognized that all suffering deserves earnest ethical consideration.</li>
<li><strong>Guide significantly deepened the discussion with incisive, probing questions that bridged personal experience with philosophical inquiry.</strong> Guide challenged the students to reconsider the criteria for moral worth and even prompted them to reflect on analogies involving a child's pain, as illustrated below: </li>
</ul>
<blockquote>
<p><strong>Student 2, your child analogy raises a crucial point—do you believe a young child's pain matters less because they can't philosophically reflect on their suffering?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated whether animal pain should be considered morally less significant than human pain.** Student 1 drew on personal farm experiences to stress that animals clearly express pain, while Student 2 argued that human capacities for self-reflection and broader social impact justify a higher moral weight for human suffering; over time, both recognized that all suffering deserves earnest ethical consideration.
- **Guide significantly deepened the discussion with incisive, probing questions that bridged personal experience with philosophical inquiry.** Guide challenged the students to reconsider the criteria for moral worth and even prompted them to reflect on analogies involving a child&#39;s pain, as illustrated below: 

&gt; **Student 2, your child analogy raises a crucial point—do you believe a young child&#39;s pain matters less because they can&#39;t philosophically reflect on their suffering?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4373d88edd::student-dwfilmvkdq==51405a0edd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Marginal Cases
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f"><ul>
<li><strong>Students discussed whether moral permissions for animal testing logically extend to humans with similar cognitive capacities.</strong> They debated the role of cognitive capacity, moral agency, and social relationships in justifying differential treatment, while also questioning inherent species biases and the ethics of drawing strict lines between animals and humans.  </li>
<li><strong>Students gradually shifted towards considering technological alternatives to animal testing.</strong> They explored ideas such as in vitro methods and computer simulations as potential ways to bypass the ethical dilemmas currently inherent in both animal and human experiments.</li>
<li><strong>Guide played a pivotal role in refocusing and deepening the discussion.</strong> In one incisive intervention, Guide asked:  </li>
</ul>
<blockquote>
<p><strong>Student 2, you mentioned potential impact on the world as justification. But what about humans who, due to severe disability, will never have that potential? Your position seems to shift between different justifications (cognitive capacity, social relationships, potential impact). Can you clarify which is most fundamental?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" class="form-control summary-markdown-editor">- **Students discussed whether moral permissions for animal testing logically extend to humans with similar cognitive capacities.** They debated the role of cognitive capacity, moral agency, and social relationships in justifying differential treatment, while also questioning inherent species biases and the ethics of drawing strict lines between animals and humans.  
- **Students gradually shifted towards considering technological alternatives to animal testing.** They explored ideas such as in vitro methods and computer simulations as potential ways to bypass the ethical dilemmas currently inherent in both animal and human experiments.
- **Guide played a pivotal role in refocusing and deepening the discussion.** In one incisive intervention, Guide asked:  
  
  &gt; **Student 2, you mentioned potential impact on the world as justification. But what about humans who, due to severe disability, will never have that potential? Your position seems to shift between different justifications (cognitive capacity, social relationships, potential impact). Can you clarify which is most fundamental?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==273581dadf::a231d29fca::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated the moral weighting of animal pain versus human pain.</strong> Student 1 argued that the pain tolerance differences between species indicate that animals experience pain differently, while Student 2 maintained that animal testing is justifiable for the greater benefit of human medical advancement, provided pain is minimized through regulation.</li>
<li><strong>Guide played a key role in deepening the ethical analysis.</strong> Guide challenged the students by asking how their reasoning would extend to humans with severe cognitive disabilities, prompting them to consider whether cognitive capacities should affect moral worth.  </li>
</ul>
<blockquote>
<p><strong>You've both agreed that human pain matters more than animal pain, but I want to challenge this: Student 2, if cognitive ability and social complexity determine moral worth, how would you apply this reasoning to humans with severe cognitive disabilities who may have similar cognitive abilities to some animals? Does their pain matter less too?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated the moral weighting of animal pain versus human pain.** Student 1 argued that the pain tolerance differences between species indicate that animals experience pain differently, while Student 2 maintained that animal testing is justifiable for the greater benefit of human medical advancement, provided pain is minimized through regulation.
- **Guide played a key role in deepening the ethical analysis.** Guide challenged the students by asking how their reasoning would extend to humans with severe cognitive disabilities, prompting them to consider whether cognitive capacities should affect moral worth.  

&gt; **You&#39;ve both agreed that human pain matters more than animal pain, but I want to challenge this: Student 2, if cognitive ability and social complexity determine moral worth, how would you apply this reasoning to humans with severe cognitive disabilities who may have similar cognitive abilities to some animals? Does their pain matter less too?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==7a4fd504de::student-dwfilmvkdq==8a97a1c8dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f"><ul>
<li>
<p><strong>Students discussed the ethical hierarchy of pain by contrasting species membership with moral reasoning.</strong> Student 1 maintained that human pain matters more due to our shared species and utilitarian benefits, while Student 2 argued that moral values require minimizing unnecessary animal suffering even in pursuit of scientific progress.</p>
</li>
<li>
<p><strong>Students evolved their positions through critical challenges and clarifying questions.</strong> Over the discussion, Student 1 consistently supported the greater moral status of human pain, whereas Student 2 urged caution by emphasizing that scientific curiosity should not justify inflicting extra, unwarranted pain on animals.</p>
</li>
<li>
<p><strong>Guide played a vital role in deepening the ethical inquiry.</strong> Guide interjected with probing questions that pushed both participants to re-examine their assumptions about tribal instincts, moral capacity, and acceptable limits in animal testing, thereby fostering a more nuanced discussion without aligning with any single viewpoint.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students discussed the ethical hierarchy of pain by contrasting species membership with moral reasoning.** Student 1 maintained that human pain matters more due to our shared species and utilitarian benefits, while Student 2 argued that moral values require minimizing unnecessary animal suffering even in pursuit of scientific progress.

- **Students evolved their positions through critical challenges and clarifying questions.** Over the discussion, Student 1 consistently supported the greater moral status of human pain, whereas Student 2 urged caution by emphasizing that scientific curiosity should not justify inflicting extra, unwarranted pain on animals.

- **Guide played a vital role in deepening the ethical inquiry.** Guide interjected with probing questions that pushed both participants to re-examine their assumptions about tribal instincts, moral capacity, and acceptable limits in animal testing, thereby fostering a more nuanced discussion without aligning with any single viewpoint.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==91f27098df::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Marginal Cases
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f"><ul>
<li>
<p><strong>Students debated whether the ethical principles protecting human subjects should categorically prevent medical experiments on cognitively similar humans.</strong> One student argued that humans possess inherent rights—such as informed consent and legal protections—that set them apart from animals, while the other contended that, in practice, testing on cognitively similar subjects might be justified for efficient medical research, albeit with strict restrictions.</p>
</li>
<li>
<p><strong>Guide played a strong role by challenging the students to clarify and justify their positions on moral status and cognitive capacity.</strong> Guide asked incisively, prompting them to consider whether current capacities or species membership should determine ethical treatment, as illustrated by its intervention below:  </p>
</li>
</ul>
<blockquote>
<p><strong>Student 1, you raise an interesting point about the efficiency of testing on cognitively similar humans. But what would this mean in practice? Consider a human with severe cognitive disabilities who has roughly the cognitive capacity of a pig - would you support running the same painful experiments on both? If not, what morally relevant difference justifies treating them differently?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated whether the ethical principles protecting human subjects should categorically prevent medical experiments on cognitively similar humans.** One student argued that humans possess inherent rights—such as informed consent and legal protections—that set them apart from animals, while the other contended that, in practice, testing on cognitively similar subjects might be justified for efficient medical research, albeit with strict restrictions.

- **Guide played a strong role by challenging the students to clarify and justify their positions on moral status and cognitive capacity.** Guide asked incisively, prompting them to consider whether current capacities or species membership should determine ethical treatment, as illustrated by its intervention below:  

&gt; **Student 1, you raise an interesting point about the efficiency of testing on cognitively similar humans. But what would this mean in practice? Consider a human with severe cognitive disabilities who has roughly the cognitive capacity of a pig - would you support running the same painful experiments on both? If not, what morally relevant difference justifies treating them differently?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==d1381236df::a231d29fca::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Marginal Cases
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f"><ul>
<li>
<p><strong>Students debated the moral weighting of animal pain versus human pain.</strong> Student 1 argued that the pain tolerance differences between species indicate that animals experience pain differently, while Student 2 maintained that animal testing is justifiable for the greater benefit of human medical advancement, provided pain is minimized through regulation.</p>
</li>
<li>
<p><strong>Guide played a key role in deepening the ethical analysis.</strong> Guide challenged the students by asking how their reasoning would extend to humans with severe cognitive disabilities, prompting them to consider whether cognitive capacities should affect moral worth. </p>
</li>
</ul>
<blockquote>
<p><strong>You've both agreed that human pain matters more than animal pain, but I want to challenge this: Student 2, if cognitive ability and social complexity determine moral worth, how would you apply this reasoning to humans with severe cognitive disabilities who may have similar cognitive abilities to some animals? Does their pain matter less too?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated the moral weighting of animal pain versus human pain.** Student 1 argued that the pain tolerance differences between species indicate that animals experience pain differently, while Student 2 maintained that animal testing is justifiable for the greater benefit of human medical advancement, provided pain is minimized through regulation.

- **Guide played a key role in deepening the ethical analysis.** Guide challenged the students by asking how their reasoning would extend to humans with severe cognitive disabilities, prompting them to consider whether cognitive capacities should affect moral worth. 

&gt; **You&#39;ve both agreed that human pain matters more than animal pain, but I want to challenge this: Student 2, if cognitive ability and social complexity determine moral worth, how would you apply this reasoning to humans with severe cognitive disabilities who may have similar cognitive abilities to some animals? Does their pain matter less too?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==ca3117b8dd::a231d29fca::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f"><ul>
<li>
<p><strong>Students discussed the moral comparison of animal and human pain through contrasting ethical and pragmatic viewpoints.</strong> Student 1 argued for consistent and compassionate treatment of all sentient beings, while Student 2 focused on the potential benefits of prioritizing human pain in contexts such as research and public health.</p>
</li>
<li>
<p><strong>Guide played a pivotal role by challenging students to explore how pain tolerance factors into moral weight.</strong> Below is Guide's intervention that spurred deeper reflection:</p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, you raise an interesting point about pain tolerance, but I want to push you on this: How does an organism's ability to tolerate pain affect its moral weight?</strong> </p>
<p><strong>Consider this: Some humans (like those with congenital insensitivity to pain) have extremely high pain tolerance, while others are hypersensitive to pain. Does this mean that causing pain to someone with high tolerance is more morally acceptable? This might help us understand whether pain tolerance is really relevant to the moral consideration we give to different beings' suffering.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students discussed the moral comparison of animal and human pain through contrasting ethical and pragmatic viewpoints.** Student 1 argued for consistent and compassionate treatment of all sentient beings, while Student 2 focused on the potential benefits of prioritizing human pain in contexts such as research and public health.

- **Guide played a pivotal role by challenging students to explore how pain tolerance factors into moral weight.** Below is Guide&#39;s intervention that spurred deeper reflection:
  
&gt; **Student 2, you raise an interesting point about pain tolerance, but I want to push you on this: How does an organism&#39;s ability to tolerate pain affect its moral weight?** 
&gt;
&gt; **Consider this: Some humans (like those with congenital insensitivity to pain) have extremely high pain tolerance, while others are hypersensitive to pain. Does this mean that causing pain to someone with high tolerance is more morally acceptable? This might help us understand whether pain tolerance is really relevant to the moral consideration we give to different beings&#39; suffering.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==38c18ef6e0::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Marginal Cases
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f"><ul>
<li>
<p><strong>Students debated the ethical implications of using animal testing as a basis for human trials.</strong> They explored whether the scientific validity of animal tests could justify similar procedures on cognitively-matched humans, with one participant emphasizing the importance of consent and humane treatment while the other stressed the natural distinctions between species.</p>
</li>
<li>
<p><strong>Guide played an active role in refocusing and deepening the discussion.</strong> It interjected at key moments to clarify the underlying moral tensions—especially the perceived double standard in testing practices—and helped the participants examine the balance between practical scientific benefits and ethical considerations.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated the ethical implications of using animal testing as a basis for human trials.** They explored whether the scientific validity of animal tests could justify similar procedures on cognitively-matched humans, with one participant emphasizing the importance of consent and humane treatment while the other stressed the natural distinctions between species.

- **Guide played an active role in refocusing and deepening the discussion.** It interjected at key moments to clarify the underlying moral tensions—especially the perceived double standard in testing practices—and helped the participants examine the balance between practical scientific benefits and ethical considerations.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==b26105a6df::student-dwfilmvkdq==be35ecf6de::a231d29fca::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated whether animal pain holds the same moral weight as human pain.</strong> They compared contexts like animal testing for life-saving research versus non-medical scenarios and gradually moved toward stressing the ethical equivalence of pain across species.</li>
<li><strong>Students' positions evolved during the discussion, with initial claims shifting through reflective probing.</strong> One student, despite a declared baseline of moral equality, expressed personal biases when forced to choose in a hypothetical scenario, highlighting an internal contradiction that spurred further reflection.</li>
<li><strong>Guide played a pivotal role in deepening the inquiry by challenging inconsistencies and prompting clearer justifications.</strong> With incisive prompts, Guide repeatedly asked students to articulate why personal preference might conflict with stated ethical principles, thereby driving the discussion toward a more nuanced exploration of moral tradeoffs.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated whether animal pain holds the same moral weight as human pain.** They compared contexts like animal testing for life-saving research versus non-medical scenarios and gradually moved toward stressing the ethical equivalence of pain across species.
- **Students&#39; positions evolved during the discussion, with initial claims shifting through reflective probing.** One student, despite a declared baseline of moral equality, expressed personal biases when forced to choose in a hypothetical scenario, highlighting an internal contradiction that spurred further reflection.
- **Guide played a pivotal role in deepening the inquiry by challenging inconsistencies and prompting clearer justifications.** With incisive prompts, Guide repeatedly asked students to articulate why personal preference might conflict with stated ethical principles, thereby driving the discussion toward a more nuanced exploration of moral tradeoffs.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==dbc8e3acdf::student-dwfilmvkdq==fc78c33cdf::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f"><ul>
<li><strong>Students discussed the moral weighting of animal versus human pain.</strong> They examined whether pain should be considered equally across species, with one student arguing for a species-agnostic, suffering-based approach and the other justifying animal testing on grounds of human benefit and economic practicality.</li>
<li><strong>Students evolved their positions to address the ethical, utilitarian, and economic dimensions of animal testing.</strong> They debated the legitimacy of causing animal suffering even for potential human gains, and explored pragmatic alternatives such as advanced testing technologies and phased-out bans to reduce animal harm.</li>
<li><strong>Guide intervened to deepen the inquiry and focus the discussion on core ethical principles.</strong> It challenged the students to reconcile the tension between acknowledging animal suffering and prioritizing human interests.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students discussed the moral weighting of animal versus human pain.** They examined whether pain should be considered equally across species, with one student arguing for a species-agnostic, suffering-based approach and the other justifying animal testing on grounds of human benefit and economic practicality.
- **Students evolved their positions to address the ethical, utilitarian, and economic dimensions of animal testing.** They debated the legitimacy of causing animal suffering even for potential human gains, and explored pragmatic alternatives such as advanced testing technologies and phased-out bans to reduce animal harm.
- **Guide intervened to deepen the inquiry and focus the discussion on core ethical principles.** It challenged the students to reconcile the tension between acknowledging animal suffering and prioritizing human interests.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==cb401c60de::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated the ethical weight of animal pain and the justification of animal testing.</strong> Student 1 maintained that suffering is morally equivalent regardless of species, while Student 2 argued that human benefits sometimes justify animal experimentation given current practical constraints and cost considerations.</li>
<li><strong>Guide provided incisive challenges that prompted students to reassess their positions.</strong> It questioned whether human attributes like intelligence or consent under coercive conditions truly justify different ethical standards, thereby deepening the discussion on the tradeoffs between animal suffering and human benefit.</li>
</ul>
<blockquote>
<p><strong>Student 2, you suggest offering reduced sentences in exchange for participating in medical experiments. But doesn't this raise concerns about coercion? How voluntary is consent when someone faces death or life imprisonment as the alternative?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated the ethical weight of animal pain and the justification of animal testing.** Student 1 maintained that suffering is morally equivalent regardless of species, while Student 2 argued that human benefits sometimes justify animal experimentation given current practical constraints and cost considerations.
- **Guide provided incisive challenges that prompted students to reassess their positions.** It questioned whether human attributes like intelligence or consent under coercive conditions truly justify different ethical standards, thereby deepening the discussion on the tradeoffs between animal suffering and human benefit.

&gt; **Student 2, you suggest offering reduced sentences in exchange for participating in medical experiments. But doesn&#39;t this raise concerns about coercion? How voluntary is consent when someone faces death or life imprisonment as the alternative?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4982f31edf::student-dwfilmvkdq==e4d9f16cdf::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated whether animal pain holds different moral weight than human pain.</strong> They explored the ethical tradeoffs of animal testing versus human benefit, with one student emphasizing that animal testing is sometimes necessary for critical medical research while still advocating for reduced harm in other areas.</li>
<li><strong>Students challenged each other’s reliance on mental capacity as a measure of moral worth.</strong> One student questioned the justification of prioritizing human lives by drawing parallels with historical biases, whereas the other focused on the practical necessities of medical research and the limitations of alternatives like in vitro testing.</li>
<li><strong>Guide played a pivotal role by asking incisive questions that deepened the discussion.</strong> Its intervention prompted the students to critically examine their stances on the ethics of using living subjects in research, as shown below:</li>
</ul>
<blockquote>
<p><strong>Student 2, how would you respond to this challenge: If mental capacity determines moral worth, would it be ethically acceptable to use humans with severe cognitive disabilities in painful medical research to benefit humans with higher cognitive abilities?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated whether animal pain holds different moral weight than human pain.** They explored the ethical tradeoffs of animal testing versus human benefit, with one student emphasizing that animal testing is sometimes necessary for critical medical research while still advocating for reduced harm in other areas.
- **Students challenged each other’s reliance on mental capacity as a measure of moral worth.** One student questioned the justification of prioritizing human lives by drawing parallels with historical biases, whereas the other focused on the practical necessities of medical research and the limitations of alternatives like in vitro testing.
- **Guide played a pivotal role by asking incisive questions that deepened the discussion.** Its intervention prompted the students to critically examine their stances on the ethics of using living subjects in research, as shown below:

&gt; **Student 2, how would you respond to this challenge: If mental capacity determines moral worth, would it be ethically acceptable to use humans with severe cognitive disabilities in painful medical research to benefit humans with higher cognitive abilities?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==3ef5ff40dd::student-dwfilmvkdq==98faa9a4dd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Meat consumption
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f"><ul>
<li>
<p><strong>Students explored the ethical and practical dimensions of factory-farmed meat consumption.</strong> They debated the balance between economic benefits, nutritional accessibility, and animal welfare, expressing varied opinions regarding the viability of improving conditions for the animals while meeting human dietary needs.</p>
</li>
<li>
<p><strong>Students provided culturally informed perspectives and practical solutions for ethical meat production.</strong> They discussed the merits of cage-free farming and rotational grazing while considering regulations to curb potential health risks, with one student drawing from a vegetarian cultural background and another highlighting firsthand farming experiences.</p>
</li>
<li>
<p><strong>Guide played a proactive role in deepening the discussion through targeted, clarifying questions.</strong> It steered the conversation by probing for detailed reasoning behind each stance, ensuring that economic, regulatory, and ethical aspects were thoroughly examined without overshadowing the diversity of viewpoints.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" class="form-control summary-markdown-editor">- **Students explored the ethical and practical dimensions of factory-farmed meat consumption.** They debated the balance between economic benefits, nutritional accessibility, and animal welfare, expressing varied opinions regarding the viability of improving conditions for the animals while meeting human dietary needs.

- **Students provided culturally informed perspectives and practical solutions for ethical meat production.** They discussed the merits of cage-free farming and rotational grazing while considering regulations to curb potential health risks, with one student drawing from a vegetarian cultural background and another highlighting firsthand farming experiences.

- **Guide played a proactive role in deepening the discussion through targeted, clarifying questions.** It steered the conversation by probing for detailed reasoning behind each stance, ensuring that economic, regulatory, and ethical aspects were thoroughly examined without overshadowing the diversity of viewpoints.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==90422b2edd::student-dwfilmvkdq==fc6a14cadf::28d91ed7f7::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Animal Pain
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f"><ul>
<li><strong>Students debated the moral worth of animal pain through contrasting views.</strong> Student 1 argued that moral significance hinges on our emotional attachment and the type of animal involved (pet versus non-pet), while Student 2 brought in religious beliefs and external research on the utility of animal testing to support their perspective.  </li>
<li><strong>Guide skillfully intervened to resolve contradictions and refocus the discussion.</strong> It pointed out inconsistencies in the students' stances and asked probing questions about whether emotional attachments or scientific usefulness should determine an animal's moral worth, helping to deepen the conversation without taking sides.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" class="form-control summary-markdown-editor">- **Students debated the moral worth of animal pain through contrasting views.** Student 1 argued that moral significance hinges on our emotional attachment and the type of animal involved (pet versus non-pet), while Student 2 brought in religious beliefs and external research on the utility of animal testing to support their perspective.  
- **Guide skillfully intervened to resolve contradictions and refocus the discussion.** It pointed out inconsistencies in the students&#39; stances and asked probing questions about whether emotional attachments or scientific usefulness should determine an animal&#39;s moral worth, helping to deepen the conversation without taking sides.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==5e19875cdd::033a2465b8::662a4aa84f" style="display: none;"></div>
                  </div>
                </div>
              
            
          </div>

          <!-- Removing the button row since we moved it to the header -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function debug_log(message, level) {
    console.log('DEBUG:', message);
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Theme toggling functionality
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      htmlElement.classList.remove('dark-mode');
      htmlElement.classList.add('light-mode');
      themeToggle.checked = true;
    } else {
      // Set dark mode as default if no preference found
      htmlElement.classList.add('dark-mode');
      htmlElement.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
      themeToggle.checked = false;
    }
    
    // Handle toggle changes
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        // Switch to light mode
        htmlElement.classList.remove('dark-mode');
        htmlElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        // Switch to dark mode
        htmlElement.classList.remove('light-mode');
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Handle refresh button click
    const refreshBtn = document.getElementById('refresh-cache-btn');
    if (refreshBtn) {
      refreshBtn.addEventListener('click', function() {
        // Add a spinning animation while refreshing
        const icon = refreshBtn.querySelector('i');
        icon.classList.add('fa-spin');
        
        // Reload the page with bypass_cache=true parameter
        const currentUrl = window.location.href;
        const url = new URL(currentUrl);
        url.searchParams.set('bypass_cache', 'true');
        window.location.href = url.toString();
      });
    }
    
    // Convert UTC timestamps to local timezone
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
  
  // Original convert UTC timestamps function (duplicated in script block below) can be removed
</script>

<script>
  // New code for summary generation progress
  let pollingInterval;
  let cancelRequested = false;

  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    
    // Initialize the report button state based on whether summaries already exist
    const hasSavedSummaries = true;
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      console.log("Enabling report button because saved summaries exist");
    }
    
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    
    if (hasGeneratingThreads) {
      // Start polling if there are already generating threads
      startPolling();
      generateBtn.style.display = 'none';
      cancelBtn.style.display = 'inline-block';
    }
    
    // Handle generate button click
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        // Show all spinners and status messages
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        
        generateBtn.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        
        // Make AJAX call to queue summaries instead of form submission
        fetch('/assignment/662a4aa84f/generate_summaries', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1)
            // Start polling for updates
            startPolling();
            // Enable report button when summaries are being generated
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1)
          }
        })
        .catch(error => {
          debug_log("Network error:", error, 1)
        });
      });
      
      // Handle cancel button
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/662a4aa84f/cancel_generation', {
            method: 'POST'
          }).then(response => {
            if (response.ok) {
              stopPolling();
              // Reset UI
              document.querySelectorAll('.thread-status').forEach(status => {
                if (status.textContent === 'Queued for generation...') {
                  status.style.display = 'none';
                }
              });
              document.querySelectorAll('.spinner-border').forEach(spinner => {
                spinner.style.display = 'none';
              });
              generateBtn.style.display = 'inline-block';
              cancelBtn.style.display = 'none';
            }
          });
        });
      }
    }
    
    // Handle report button click
    if (reportBtn) {
      reportBtn.addEventListener('click', function() {
        // Show spinner
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        
        // Disable button while generating
        reportBtn.disabled = true;
        
        // Change message in report section
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        
        // Make AJAX call to generate the report
        fetch('/assignment/662a4aa84f/generate_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1)
          
          // Start polling for report status
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1)
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    
    // Handle refresh data button click
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        // Show spinner
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        
        // Disable button while refreshing
        refreshDataBtn.disabled = true;
        
        // Make AJAX call to refresh data
        fetch('/assignment/662a4aa84f/refresh_data', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          
          // Reload the page to show refreshed data
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    
    // Handle regenerate title button click
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        // Disable the button and show a spinner icon
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        
        // Call the regenerate title endpoint
        fetch('/assignment/662a4aa84f/regenerate_title', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update the title text directly
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) {
              titleEl.textContent = data.title;
            }
            // Show success message
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
  });

  function startPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
    }
    
    // Poll every 2 seconds
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    
    // Do an immediate check to start the process
    checkSummaryStatus();
  }

  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }

  function checkSummaryStatus() {
    console.log("Checking summary status...");
    fetch('/assignment/662a4aa84f/summary_status')
      .then(response => response.json())
      .then(data => {
        console.log("Status data:", data);
        let activeGeneration = false;
        
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'inline-block';
            }
          } else if (threadInfo.status === 'completed') {
            if (statusEl) {
              statusEl.style.display = 'none';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
            if (summaryEl && threadInfo.summary) {
              summaryEl.innerHTML = threadInfo.summary;
              summaryEl.style.display = 'block';
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          }
        });
        
        // If no thread is still queued or generating, stop polling and reset UI
        if (!activeGeneration) {
          stopPolling();
          document.getElementById('generate-btn').style.display = 'inline-block';
          document.getElementById('cancel-btn').style.display = 'none';
          
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => {
        debug_log('Error checking summary status:', error, 1)
      });
  }
  
  // Function to check the report generation status
  function checkReportStatus() {
    fetch('/assignment/662a4aa84f/report_status')
      .then(response => response.json())
      .then(data => {
        debug_log("Report status:", data, 1)
        
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        if (data.status === 'completed') {
          // Report is ready, update the UI
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Display the report
          if (reportSection) {
            // Use safe assignment of innerHTML to preserve nested HTML structure
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            
            // Add custom CSS to ensure proper nested list rendering
            const styleTag = document.createElement('style');
            styleTag.textContent = `
              #report-content ul ul { 
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                padding-left: 2em;
              }
              #report-content li > ul {
                margin-left: 1em;
              }
            `;
            reportContent.appendChild(styleTag);
            
            // Add the content
            reportContent.innerHTML += data.content;
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2';
            generatedText.innerHTML = `Generated on: <span class="utc-time" data-utc-time="${data.generated_at}">${data.generated_at}</span><span class="local-time"></span>`;
            
            // Clear the report section and append the new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert the timestamp to local time
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true
                  };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  
                  // Find the next sibling with class local-time and set its content
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) {
                console.error('Error converting time:', e);
              }
            });
          }
        } else if (data.status === 'generating') {
          // Report is still being generated, check again in 2 seconds
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        }
      })
      .catch(error => {
        debug_log('Error checking report status:', error, 1)
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- Add CodeMirror for report editing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">

<script>
  // Report editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');

    // Initialize CodeMirror if report editor exists
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }

    // Edit button handler
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        // Refresh CodeMirror to ensure proper rendering
        if (reportEditor) reportEditor.refresh();
      });
    }

    // Cancel button handler
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }

    // Save button handler
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        // Get the edited markdown
        const markdown = reportEditor.getValue();
        
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        editorSpinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/662a4aa84f/edit_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            reportContent.innerHTML = data.content;
            
            // Show success message and close editor
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    
    // Helper to show status messages
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<!-- Add CSS for the editor status messages -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>

<!-- New export button update script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const exportBtn = document.querySelector('a[href*="/export"]');
  if (exportBtn) {
    exportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      const exportUrl = new URL(this.href, window.location.origin);
      exportUrl.searchParams.set('theme', currentTheme);
      window.location.href = exportUrl.toString();
    });
  }
  
  // Set theme class on HTML element for export mode
  if ('True' === 'True' && 'light-mode') {
    document.documentElement.className = 'light-mode';
  }
});
</script>

<script>
  // Summary editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryButtons = document.querySelectorAll('.edit-summary-btn');
    const summaryContainers = document.querySelectorAll('.summary-editor-container');
    const saveSummaryButtons = document.querySelectorAll('.save-summary-btn');
    const cancelSummaryEditButtons = document.querySelectorAll('.cancel-summary-edit-btn');
    const summaryEditors = document.querySelectorAll('.summary-markdown-editor');
    const summaryStatusMessages = document.querySelectorAll('.summary-editor-status');

    editSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'block';
          }
        });
        summaryEditors.forEach(editor => {
          if (editor.id === `summary-markdown-editor-${sessionId}`) {
            editor.focus();
          }
        });
      });
    });

    saveSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        const markdown = this.previousElementSibling.value;
        
        if (!markdown.trim()) {
          showSummaryStatus('Summary content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
        spinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/662a4aa84f/edit_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            session_id: sessionId,
            summary_markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          spinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            const summaryContainer = document.getElementById(`summary-editor-container-${sessionId}`);
            summaryContainer.innerHTML = data.content;
            
            // Show success message and close editor
            showSummaryStatus(data.message, 'success');
            setTimeout(() => {
              summaryContainer.style.display = 'none';
              summaryStatusMessages.forEach(status => {
                status.style.display = 'none';
              });
            }, 1500);
          } else {
            showSummaryStatus(data.message, 'error');
          }
        })
        .catch(error => {
          spinner.style.display = 'none';
          showSummaryStatus('Error saving summary: ' + error, 'error');
        });
      });
    });

    cancelSummaryEditButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'none';
          }
        });
        summaryStatusMessages.forEach(status => {
          status.style.display = 'none';
        });
      });
    });

    // Helper to show status messages
    function showSummaryStatus(message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 5000);
    }
  });
</script>

<!-- Add JavaScript for thread summary editing -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all edit buttons for summaries
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    // Get all regenerate buttons for summaries
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    
    // Initialize CodeMirror editors object to store all editors
    const summaryEditors = {};
    
    // Add click handlers to all edit buttons
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      
      // Create CodeMirror editor when edit button is clicked (lazy initialization)
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        
        // Initialize CodeMirror if not already done
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          // Get original markdown content from data attribute or use HTML content as fallback
          let markdownContent = textarea.value;
          if (!markdownContent) {
            // This is a simple fallback that won't be perfect - ideally the backend would provide the markdown
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          
          summaryEditors[sessionId].setValue(markdownContent);
          // Refresh to ensure proper rendering
          summaryEditors[sessionId].refresh();
        } else {
          // Just refresh if already initialized
          summaryEditors[sessionId].refresh();
        }
      });
      
      // Add handler for cancel button
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      
      // Add handler for save button
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          // Get the edited markdown
          const markdown = summaryEditors[sessionId].getValue();
          
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          
          // Show spinner
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          
          // Make API call to save
          fetch(`/assignment/662a4aa84f/edit_summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              session_id: sessionId,
              markdown: markdown
            })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            
            if (data.success) {
              // Update the displayed content with the HTML returned from the server
              summaryElement.innerHTML = data.content + 
                `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                   <i class="fas fa-sync"></i>
                 </button>
                 <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                   <i class="fas fa-pencil-alt"></i>
                 </button>`;
              
              // Show success message and close editor
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                summaryElement.style.display = 'block';
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    
    // Add click handlers to all regenerate buttons
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      
      btn.addEventListener('click', function() {
        if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
          // Show a spinner in the summary area
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            
            // Hide the summary while it's regenerating
            summaryElement.style.opacity = '0.5';
            
            // Make API call to regenerate
            fetch(`/assignment/662a4aa84f/regenerate_summary`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                session_id: sessionId
              })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              
              if (data.success) {
                // Update the displayed content with the HTML returned from the server
                summaryElement.innerHTML = data.content + 
                  `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                     <i class="fas fa-sync"></i>
                   </button>
                   <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                     <i class="fas fa-pencil-alt"></i>
                   </button>`;
                
                // Reset styles and show success message
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
                
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => {
                statusElement.style.display = 'none';
              }, 5000);
            });
          }
        }
      });
    });
    
    // Function to reattach event listeners after content is updated
    function attachButtonListeners(sessionId) {
      // Find the newly created buttons
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      
      // Reattach edit button listener
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          
          // Reinitialize or refresh CodeMirror
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      
      // Reattach regenerate button listener
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            const statusElement = document.getElementById(`status-${sessionId}`);
            const spinnerElement = document.getElementById(`spinner-${sessionId}`);
            
            if (statusElement && spinnerElement) {
              statusElement.textContent = 'Regenerating summary...';
              statusElement.className = 'status-message thread-status text-info';
              statusElement.style.display = 'block';
              spinnerElement.style.display = 'inline-block';
              
              summaryElement.style.opacity = '0.5';
              
              fetch(`/assignment/662a4aa84f/regenerate_summary`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  session_id: sessionId
                })
              })
              .then(response => response.json())
              .then(data => {
                spinnerElement.style.display = 'none';
                
                if (data.success) {
                  summaryElement.innerHTML = data.content + 
                    `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                       <i class="fas fa-sync"></i>
                     </button>
                     <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                       <i class="fas fa-pencil-alt"></i>
                     </button>`;
                  
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message;
                  statusElement.className = 'status-message thread-status success';
                  
                  attachButtonListeners(sessionId);
                  
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 3000);
                } else {
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message || 'Error regenerating summary';
                  statusElement.className = 'status-message thread-status error';
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 5000);
                }
              })
              .catch(error => {
                spinnerElement.style.display = 'none';
                summaryElement.style.opacity = '1';
                statusElement.textContent = 'Error regenerating summary: ' + error;
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              });
            }
          }
        });
      }
    }
    
    // Helper to show status messages for summary editing
    function showSummaryStatus(sessionId, message, type) {
      const statusElement = document.getElementById(`summary-editor-status-${sessionId}`);
      statusElement.textContent = message;
      statusElement.className = `status-message summary-editor-status ${type}`;
      statusElement.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusElement.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<script>
  // Handle regenerate title button click
  const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
  if (regenerateTitleBtn) {
    regenerateTitleBtn.addEventListener('click', function() {
      // Disable the button and show a spinner icon
      regenerateTitleBtn.disabled = true;
      const icon = regenerateTitleBtn.querySelector('i');
      const originalIcon = icon.className;
      icon.className = 'fas fa-spinner fa-spin';
      
      // Call the regenerate title endpoint
      fetch('/assignment/662a4aa84f/regenerate_title', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Update the title text directly
          const titleEl = document.querySelector('.generated-title');
          if (titleEl) {
            titleEl.textContent = data.title;
          }
          // Show success message
          console.log("Title regenerated:", data.title);
        } else {
          console.error("Error regenerating title:", data.message);
          alert("Error regenerating title: " + data.message);
        }
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Error regenerating title. Please try again.");
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      });
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let pollingInterval = null;

    // Debug logging function
    function debug_log(message, level, details = null) {
      if (details) {
        console.log(`DEBUG[${level}]: ${message}`, details);
      } else {
        console.log(`DEBUG[${level}]: ${message}`);
      }
    }
    
    // Initialize the report button state based on saved summaries status
    const reportBtn = document.getElementById('report-btn');
    const hasSavedSummaries = true;
    
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
  });
</script>

<script>
  // This script handles dark mode parameter in URL
  document.addEventListener('DOMContentLoaded', function() {
    // Check for darkmode parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('darkmode') === 'true') {
      // Create and append dark mode styles
      const darkModeStyle = document.createElement('style');
      darkModeStyle.textContent = `
        body { background-color: #1a1a1a !important; }
        body, div, section, article, aside, header, footer, main, p, span, h1, h2, h3, h4, h5, h6, li, td, th {
          color: #e6e6e6 !important;
        }
        .answer-card, .question-card, .card, .container, .container-fluid, .row {
          background-color: #2a2a2a !important;
          color: #e6e6e6 !important;
        }
        a { color: #88afd3 !important; }
        pre, code { background-color: #333 !important; color: #f8f8f8 !important; }
        table, tr, td, th { border-color: #444 !important; background-color: #2a2a2a !important; }
        input, textarea, select { background-color: #333 !important; color: #e6e6e6 !important; }
        blockquote { background-color: #333 !important; border-left-color: #666 !important; }
        .panel, .panel-default, .panel-body, .panel-heading { 
          background-color: #2a2a2a !important; 
          color: #e6e6e6 !important;
          border-color: #444 !important;
        }
        .text-muted, .text-secondary { color: #aaa !important; }
        .bg-light, .bg-white { background-color: #2a2a2a !important; }
        .border { border-color: #444 !important; }
      `;
      document.head.appendChild(darkModeStyle);
    }
  });
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        color: #e6e6e6 !important;
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>
</body>
</html>