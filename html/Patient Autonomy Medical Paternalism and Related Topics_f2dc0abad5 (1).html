
<!doctype html>
<html lang="en" class="light-mode">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Patient Autonomy, Medical Paternalism and Related Topics</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/darkly/bootstrap.min.css" id="theme-css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    :root {
      /* Dark mode theme variables (default) */
      --bg-color: #121212;
      --card-bg: #1e1e2d;
      --card-header-bg: #252538;
      --text-color: #e4e6eb;
      --muted-text-color: #a9adc1;
      --border-color: #2d2d43;
      --button-bg: #252538;
      --button-hover-bg: #3a3a59; 
      --primary-color: #8a8aff;
      --input-bg: #252538;
      --message-left-bg: #252538;
      --message-right-bg: #1a1a2e;
    }

    /* Light mode theme variables */
    html.light-mode {
      /* Base colors */
      --bg-color: #f5f7fa;
      --card-bg: #ffffff;
      --card-header-bg: #f0f5fc;
      --text-color: #2c3e50;
      --muted-text-color: #5a6a7e;
      --border-color: #d1d9e6;
      
      /* UI elements - using purple theme */
      --button-bg: #eef2f7; /* keeping grey for basic buttons */
      --button-hover-bg: #d9e2ec; /* keeping grey hover for basic buttons */
      --primary-color: #23004D; /* new purple theme color */
      --input-bg: #ffffff;
      
      /* Message colors */
      --message-left-bg: #eef2f7;
      --message-right-bg: #e6f0ff;
    }

    /* Additional light mode specific overrides for purple theme */
    html.light-mode .card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    html.light-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    html.light-mode .card-header {
      border-bottom: 1px solid var(--border-color);
    }

    /* Purple theme for headings and section titles */
    html.light-mode .section-title {
      border-bottom: 1px solid #23004D;
      color: #23004D;
    }

    html.light-mode .section-title i {
      color: #23004D;
    }

    html.light-mode .markdown-content h1,
    html.light-mode .markdown-content h2,
    html.light-mode .markdown-content h3,
    html.light-mode .markdown-content h4,
    html.light-mode .markdown-content h5,
    html.light-mode .markdown-content h6 {
      color: #23004D;
    }

    /* Purple theme for icons */
    html.light-mode .fas,
    html.light-mode .far,
    html.light-mode .fab {
      color: #23004D;
    }

    /* Keep header buttons grey */
    html.light-mode .header-actions .back-btn i,
    html.light-mode .header-actions .nav-btn i {
      color: inherit;
    }

    /* Thread items */
    html.light-mode .thread-item {
      background-color: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    html.light-mode .thread-item:hover {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border: 2px solid #23004D;
    }

    html.light-mode .thread-item a {
      color: #23004D;
    }

    /* Badges and info elements */
    html.light-mode .badge-info {
      background-color: #e6e0f0;
      color: #23004D;
    }

    html.light-mode .text-info {
      color: #23004D !important;
    }

    /* Buttons with purple theme */
    html.light-mode .btn-primary {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .btn-primary:hover {
      background-color: #380080;
      border-color: #380080;
    }

    /* Content elements */
    html.light-mode .markdown-content code,
    html.light-mode .markdown-content pre {
      background-color: #f0f3f8;
      border: 1px solid #e0e5ee;
    }

    html.light-mode .markdown-content blockquote {
      background-color: #f0f3f8;
      border-left: 4px solid #23004D;
    }

    html.light-mode .markdown-content a {
      color: #23004D;
    }

    /* Info boxes and containers */
    html.light-mode .info-box {
      background-color: #f8fafd;
      border: 1px solid var(--border-color);
    }

    /* Topic labels and special text */
    html.light-mode .text-info {
      color: #23004D !important;
    }

    html.light-mode .col-label {
      color: #23004D;
    }

    /* Thread summary section styling */
    html.light-mode .thread-summary strong {
      color: #23004D;
    }

    /* Keep the orange buttons distinct */
    html.light-mode .btn-orange {
      background-color: #ff7200;
      border-color: #ff7200;
    }

    html.light-mode .btn-orange:hover {
      background-color: #e66800;
      border-color: #e66800;
    }

    /* Theme toggle styling */
    html.light-mode .theme-toggle-slider {
      background-color: #d9e2ec;
    }

    html.light-mode .theme-toggle-slider:before {
      background-color: #ffffff;
    }

    html.light-mode input:checked + .theme-toggle-slider {
      background-color: #23004D;
    }

    /* Pagination with purple theme */
    html.light-mode .page-item.active .page-link {
      background-color: #23004D;
      border-color: #23004D;
    }

    html.light-mode .page-link:hover {
      color: #23004D;
    }

    /* Apply theme variables to elements */
    body { 
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease;
    }
    .dashboard-container {
      padding: 10px;
      max-width: 100%;
      margin: 0 auto;
    }
    @media (min-width: 576px) {
      .dashboard-container {
        padding: 15px;
      }
    }
    @media (min-width: 768px) {
      .dashboard-container {
        padding: 25px;
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    @media (min-width: 1200px) {
      .dashboard-container {
        margin-left: 10px;
        margin-right: 10px;
      }
    }
    .card {
      background-color: var(--card-bg);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    .card-header {
      font-size: 1.2rem;
      font-weight: 500;
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--border-color);
      border-radius: 10px 10px 0 0 !important;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-header {
        font-size: 1.4rem;
        padding: 15px 20px;
      }
    }
    .card-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 10px;
      width: 100%;
    }
    
    .card-title .title-text {
      display: flex;
      align-items: center;
    }
    
    .card-title .badge {
      margin-left: 10px;
    }
    
    .generated-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 5px;
      font-style: italic;
      margin-bottom: 5px;
      color: var(--primary-color) !important;
    }
    
    @media (min-width: 768px) {
      .card-title {
        margin-bottom: 0;
        width: auto;
      }
    }
    .card-body {
      padding: 15px;
      transition: background-color 0.3s ease;
    }
    @media (min-width: 576px) {
      .card-body {
        padding: 20px 25px;
      }
    }
    .section-title {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 500;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .section-title i {
      margin-right: 10px;
    }
    .section-title .title-text {
      display: flex;
      align-items: center;
    }
    .section-title .actions {
      margin-left: auto;
      margin-top: 10px;
      width: 100%;
      text-align: right;
    }
    @media (min-width: 768px) {
      .section-title .actions {
        margin-top: 0;
        width: auto;
      }
    }
    .detail-item {
      margin-bottom: 15px;
      padding: 10px 15px;
      background-color: var(--card-header-bg);
      border-radius: 6px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      transition: background-color 0.3s ease;
    }
    .detail-item strong {
      min-width: 140px;
      color: var(--muted-text-color);
    }
    .list-group-item {
      background-color: var(--card-header-bg);
      color: var(--text-color);
      border: none;
      border-radius: 6px;
      margin-bottom: 8px;
      transition: background-color 0.2s, color 0.3s ease;
    }
    .list-group-item:hover {
      background-color: var(--button-hover-bg);
    }
    .badge {
      font-size: 0.9em;
      padding: 6px 12px;
      border-radius: 50px;
      font-weight: 500;
      margin-left: 10px;
    }
    .badge-available {
      background-color: #28a745;
      color: #fff;
    }
    .badge-active {
      background-color: #007bff;
      color: #fff;
    }
    .badge-completed {
      background-color: #6c757d;
      color: #fff;
    }
    .badge-cancelled {
      background-color: #dc3545;
      color: #fff;
    }
    .back-btn {
      background-color: var(--button-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s, color 0.3s ease;
      color: var(--text-color);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    @media (min-width: 768px) {
      .back-btn {
        margin-bottom: 0;
      }
    }
    .back-btn i {
      margin-right: 8px;
    }
    .back-btn:hover {
      background-color: var(--button-hover-bg);
      color: var(--text-color);
      text-decoration: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
      width: 100%;
    }
    @media (min-width: 768px) {
      .header-actions {
        width: auto;
      }
    }
    .refresh-button {
      margin-right: 16px;
      display: flex;
      align-items: center;
    }
    .icon-btn {
      background: none;
      border: none;
      color: #8a8aff;
      font-size: 1.2rem;
      cursor: pointer;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    .icon-btn:hover {
      background-color: rgba(138, 138, 255, 0.1);
      transform: rotate(180deg);
    }
    .icon-btn:focus {
      outline: none;
    }
    .icon-btn:active {
      transform: rotate(180deg) scale(0.9);
    }
    .info-box {
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 8px;
      margin-bottom: 20px;
      transition: background-color 0.3s ease;
    }
    .col-label {
      color: var(--muted-text-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .col-value {
      font-weight: 400;
    }
    .utc-time {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .local-time {
      opacity: 1;
    }
    /* New Chat Threads Section Styling */
    .thread-list {
      margin-top: 30px;
      column-count: 1;
      column-gap: 15px;
    }
    @media (min-width: 768px) {
      .thread-list {
        column-count: 2;
      }
    }
    .thread-item {
      display: inline-block; /* Required for column layout */
      width: 100%;
      margin-bottom: 15px;
      padding: 15px;
      background-color: var(--card-header-bg);
      border-radius: 12px;
      transition: all 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      break-inside: avoid; /* Prevents items from breaking across columns */
      transform: translateY(0);
      border: 2px solid transparent;
    }
    .thread-item:hover {
      background-color: var(--card-bg);
      transform: translateY(-5px);
      box-shadow: 0 10px 16px rgba(0,0,0,0.25);
      border: 2px solid #ff851b;
    }
    .thread-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .thread-header .thread-actions {
      display: flex;
      align-items: center;
      margin-left: 30px;
    }
    .thread-item a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }
    .thread-item a:hover {
      text-decoration: underline;
    }
    .thread-summary {
      font-size: 0.9em;
      color: var(--muted-text-color);
      margin-top: 5px;
      margin-left: 10px;
      line-height: 1.5;
      transition: color 0.3s ease;
    }
    .thread-summary p {
      margin-bottom: 0.5em;
    }
    .thread-summary ul,
    .thread-summary ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      padding-left: 1.5em;
    }
    .thread-summary li {
      margin-bottom: 0.3em;
    }
    .thread-summary a {
      color: var(--primary-color);
    }
    .thread-summary code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .thread-status {
      font-size: 0.8em;
      margin-top: 3px;
      margin-left: 10px;
    }
    /* Markdown content styling */
    .markdown-content {
      line-height: 1.6;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 1.5em;
      margin-bottom: 0.75em;
      color: var(--primary-color);
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .markdown-content h1 {
      font-size: 1.7em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.3em;
      transition: border-color 0.3s ease;
    }
    .markdown-content h3 {
      font-size: 1.3em;
    }
    .markdown-content h4 {
      font-size: 1.1em;
    }
    .markdown-content p {
      margin-bottom: 1em;
    }
    .markdown-content ul, 
    .markdown-content ol {
      margin-bottom: 1em;
      padding-left: 2em;
    }
    .markdown-content li {
      margin-bottom: 0.5em;
    }
    /* Proper nested list styling */
    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ul,
    .markdown-content ol ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .markdown-content li > ul,
    .markdown-content li > ol {
      margin-left: 1em;
    }
    .markdown-content blockquote {
      padding: 0.5em 1em;
      margin-left: 0;
      margin-right: 0;
      background-color: var(--card-header-bg);
      border-left: 4px solid var(--primary-color);
      margin-bottom: 1em;
      transition: background-color 0.3s ease, border-left-color 0.3s ease;
    }
    .markdown-content code {
      background-color: var(--card-header-bg);
      border-radius: 3px;
      padding: 2px 5px;
      font-family: monospace;
      transition: background-color 0.3s ease;
    }
    .markdown-content pre {
      background-color: var(--card-header-bg);
      border-radius: 5px;
      padding: 1em;
      overflow-x: auto;
      margin-bottom: 1em;
      transition: background-color 0.3s ease;
    }
    .markdown-content table {
      border-collapse: collapse;
      margin-bottom: 1em;
      width: 100%;
    }
    .markdown-content table th,
    .markdown-content table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      transition: border-color 0.3s ease;
    }
    .markdown-content table th {
      background-color: var(--card-header-bg);
      text-align: left;
      transition: background-color 0.3s ease;
    }
    .markdown-content strong {
      font-weight: 600;
      color: var(--text-color);
      transition: color 0.3s ease;
    }
    .markdown-content em {
      font-style: italic;
    }
    /* Mobile-specific styles */
    @media (max-width: 767.98px) {
      .row:not(.mb-3) {
        margin-right: -5px;
        margin-left: -5px;
      }
      .row:not(.mb-3) > .col, 
      .row:not(.mb-3) > [class*="col-"] {
        padding-right: 5px;
        padding-left: 5px;
      }
      .btn {
        padding: 0.375rem 0.5rem;
      }
      .btn-orange {
        width: 100%;
        margin-bottom: 10px;
      }
      #report-btn, #generate-btn, #cancel-btn {
        width: 100%;
      }
    }
    /* End markdown styling */

    /* Limit Topics container height to not expand beyond the left column's Info container */
    #topics-container {
        max-height: 345px;
        min-height: 345px;
        overflow-y: auto;
    }
    
    /* New Opinion Histograms styling */
    .histogram-container {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .histogram-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .histogram-container img {
      max-width: 100%;
      border-radius: 6px;
      display: block;
      margin: 0 auto;
    }
    @media (max-width: 767.98px) {
      .col-md-6.col-lg-4.mb-4 {
        padding-left: 10px;
        padding-right: 10px;
      }
      .histogram-container {
        padding: 10px;
      }
    }

    /* Theme toggle switch styling */
    .theme-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .theme-toggle-switch {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 26px;
    }
    
    .theme-toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d2d43;
      transition: .4s;
      border-radius: 34px;
    }
    
    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .theme-toggle-slider {
      background-color: #4a4a69;
    }
    
    input:checked + .theme-toggle-slider:before {
      transform: translateX(26px);
    }
    
    .theme-toggle-icon {
      color: var(--text-color);
      font-size: 16px;
    }
  </style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>

<script>
  // Detect dark mode from URL parameter
  function isDarkModeEnabled() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('darkmode') === 'true';
  }

  // Initialize dark mode if needed
  if (isDarkModeEnabled()) {
    // Add immediate style to prevent flash of light content
    document.documentElement.style.backgroundColor = '#1a1a1a';
    document.documentElement.style.color = '#e6e6e6';
  }
</script>

<style id="darkmode-styles">
  /* Dark mode styles will be enabled via JavaScript */
</style>
</head>
<body>
<div class="dashboard-container">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <div class="title-text"><i class="fas fa-tasks mr-2"></i> Assignment Details</div>
        
        <div class="generated-title text-info mb-1">Patient Autonomy, Medical Paternalism and Related Topics</div>
        
        
      </div>
      
    </div>
    <div class="card-body">
      <div class="row">
        <!-- Left column: General Information & Timelines -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-calendar-alt"></i> Timelines</div>
          </h5>
          
            <div id="timelines-container" class="info-box">
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Completion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-13 05:59:00+00:00">2025-02-13 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
                <div class="row mb-2">
                  <div class="col-5 col-label">Opinion deadline:</div>
                  <div class="col-7 col-value">
                    <span class="utc-time" data-utc-time="2025-02-12 05:59:00+00:00">2025-02-12 05:59:00+00:00</span>
                    <span class="local-time"></span>
                  </div>
                </div>
              
            </div>
          

          <h5 class="section-title mt-4">
            <div class="title-text"><i class="fas fa-info-circle"></i> Info</div>
          </h5>
          <div id="info-container" class="info-box">
            <div class="row mb-3">
              <div class="col-5 col-label">Instructor:</div>
              <div class="col-7 col-value">[redacted]</div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Min. chat time:</div>
              <div class="col-7 col-value">
                
                  25 minutes
                
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-5 col-label">Created on:</div>
              <div class="col-7 col-value">
                <span class="utc-time" data-utc-time="2025-02-05 19:06:50.928236+00:00">2025-02-05 19:06:50.928236+00:00</span>
                <span class="local-time"></span>
              </div>
            </div>
            
            
            <div class="row mb-3">
              <div class="col-5 col-label">Chat threads:</div>
              <div class="col-7 col-value">14 (14 disagree)</div>
            </div>
          </div>
        </div>

        <!-- Right column: Topics and Chat Threads -->
        <div class="col-md-6">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-bookmark"></i> Topics</div>
          </h5>
          
            <div id="topics-container" class="info-box">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Patient Autonomy</div>
                  <div>The right to patient autonomy entails that physicians act wrongly if they mislead their patients about or nudge their patients toward any treatment option.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Medical Paternalism</div>
                  <div>Medical paternalism can be justified if the expected gain to patient welfare is sufficiently high.</div>
                </div>
                <hr class="my-3" style="border-color: #2d2d43;">
              
                <div class="mb-3">
                  <div class="text-info mb-1 font-weight-bold">Apotemnophilia</div>
                  <div>Physicians should use amputation as a treatment for apotemnophilia.</div>
                </div>
                
              
              <!-- Removed toggle link; topics will scroll if content overflows -->
            </div>
          
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-chart-bar mr-1"></i> Opinion Distribution</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i>Opinion scale: -3 Strongly Disagree to +3 Strongly Agree
          </div>
          <div class="info-box">
            
              <div class="row">
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Patient Autonomy" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Medical Paternalism" class="img-fluid" />
                    </div>
                  </div>
                
                  <div class="col-md-6 col-lg-4 mb-4">
                    <div class="histogram-container">
                      <img src="data:image/png;base64,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" alt="Opinion distribution for Apotemnophilia" class="img-fluid" />
                    </div>
                  </div>
                
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text">
              <i class="fas fa-file-alt mr-1"></i> Instructor Report
            </div>
            
          </h5>
          <div class="info-box" id="report-section">
            
              <div id="report-content" class="markdown-content"><p>This assignment asked students to grapple with ethical dilemmas in medical decision-making by debating patient autonomy, medical paternalism, and the controversial treatment of apotemnophilia. Discussions navigated complex ideas about full disclosure versus physician guidance and the ethical limits of interventions, with Guide consistently challenging students to refine their reasoning.</p>
<h3>Themes</h3>
<ul>
<li><strong>Common ground: Many discussions converged on the importance of transparency and informed consent.</strong> Several participants agreed that clear, unbiased disclosure is critical to maintaining trust, even as they acknowledged that nuanced circumstancessuch as emergenciesmight justify limited paternalistic intervention.</li>
<li><strong>Persistent disagreement: Robust debate emerged around the precise limits of medical paternalism.</strong> While some participants viewed any form of nudging as a threat to autonomy, others contended that well-intentioned guidance can help correct misinformation and protect patient welfare, leaving a persistent tension unresolved.</li>
<li><strong>Apotemnophilia debate: The idea of using amputation for apotemnophilia triggered serious ethical concerns.</strong> Although most groups leaned toward favoring intensive psychiatric therapy over irreversible physical interventions, the discussion underscored deep divisions regarding how far a physicians duty extends in addressing mental health issues.</li>
<li><strong>Guides role: Guide diligently probed assumptions and encouraged deeper ethical reflection throughout each discussion.</strong> Its incisive questions pushed participants to assess the real-world implications of their views and to identify any inconsistencies in their reasoning.</li>
</ul>
<h3>Insights</h3>
<ul>
<li><strong>Diverse ethical frameworks were evident across the discussions.</strong> Participants exhibited a range of perspectives that evolved as they considered the balance between expert opinion and patient autonomy, suggesting a strong engagement with nuanced ethical theory.</li>
<li><strong>Real-world dilemmas were effectively simulated by the discussions.</strong> In exploring scenarios from emergency interventions to the ethics of elective procedures, students revealed the practical challenges physicians face when reconciling clinical expertise with respect for individual choice.</li>
</ul>
<h3>Lessons</h3>
<ul>
<li><strong>Clarifying the line between guidance and manipulation remains a key educational opportunity.</strong> Future sessions could benefit from structured frameworks or case studies that help students more clearly delineate when physician influence risks undermining patient autonomy.</li>
<li><strong>Guides targeted questioning significantly enhanced critical debate.</strong> Instructors might consider integrating similar probing techniques into follow-up discussions or lectures to further develop students abilities to recognize and reconcile ethical tensions.</li>
</ul>
<h3>Misconceptions</h3>
<ul>
<li><strong>Some participants conflated nudging with overt coercion.</strong> Although most debates were thoughtful, a few discussions revealed uncertainty over distinguishing subtle guidance from manipulative practices, highlighting a need for clearer conceptual boundaries.</li>
</ul></div>
              <div class="text-muted mt-2">
                Generated on: <span class="utc-time" data-utc-time="2025-03-30T21:50:42.376000+00:00">2025-03-30T21:50:42.376000+00:00</span><span class="local-time"></span>
                
              </div>
              <!-- Add the editor container here -->
              <div id="report-editor-container" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle mr-2"></i> Edit the report in markdown format.
                </div>
                <textarea id="report-markdown-editor" class="form-control">This assignment asked students to grapple with ethical dilemmas in medical decision-making by debating patient autonomy, medical paternalism, and the controversial treatment of apotemnophilia. Discussions navigated complex ideas about full disclosure versus physician guidance and the ethical limits of interventions, with Guide consistently challenging students to refine their reasoning.

### Themes
- **Common ground: Many discussions converged on the importance of transparency and informed consent.** Several participants agreed that clear, unbiased disclosure is critical to maintaining trust, even as they acknowledged that nuanced circumstancessuch as emergenciesmight justify limited paternalistic intervention.
- **Persistent disagreement: Robust debate emerged around the precise limits of medical paternalism.** While some participants viewed any form of nudging as a threat to autonomy, others contended that well-intentioned guidance can help correct misinformation and protect patient welfare, leaving a persistent tension unresolved.
- **Apotemnophilia debate: The idea of using amputation for apotemnophilia triggered serious ethical concerns.** Although most groups leaned toward favoring intensive psychiatric therapy over irreversible physical interventions, the discussion underscored deep divisions regarding how far a physicians duty extends in addressing mental health issues.
- **Guides role: Guide diligently probed assumptions and encouraged deeper ethical reflection throughout each discussion.** Its incisive questions pushed participants to assess the real-world implications of their views and to identify any inconsistencies in their reasoning.

### Insights
- **Diverse ethical frameworks were evident across the discussions.** Participants exhibited a range of perspectives that evolved as they considered the balance between expert opinion and patient autonomy, suggesting a strong engagement with nuanced ethical theory.
- **Real-world dilemmas were effectively simulated by the discussions.** In exploring scenarios from emergency interventions to the ethics of elective procedures, students revealed the practical challenges physicians face when reconciling clinical expertise with respect for individual choice.

### Lessons
- **Clarifying the line between guidance and manipulation remains a key educational opportunity.** Future sessions could benefit from structured frameworks or case studies that help students more clearly delineate when physician influence risks undermining patient autonomy.
- **Guides targeted questioning significantly enhanced critical debate.** Instructors might consider integrating similar probing techniques into follow-up discussions or lectures to further develop students abilities to recognize and reconcile ethical tensions.

### Misconceptions
- **Some participants conflated nudging with overt coercion.** Although most debates were thoughtful, a few discussions revealed uncertainty over distinguishing subtle guidance from manipulative practices, highlighting a need for clearer conceptual boundaries.</textarea>
                <div class="mt-3">
                  <button id="save-report-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-1"></i> Save Changes
                  </button>
                  <button id="cancel-report-edit-btn" class="btn btn-secondary ml-2">
                    <i class="fas fa-times mr-1"></i> Cancel
                  </button>
                  <span id="editor-spinner" class="spinner-border spinner-border-sm ml-2" role="status" style="display: none;"></span>
                </div>
                <div id="editor-status-message" class="status-message mt-3" style="display: none;"></div>
              </div>
            
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-12">
          <h5 class="section-title">
            <div class="title-text"><i class="fas fa-comments mr-1"></i> Chat Threads</div>
            
          </h5>
          <div class="text-muted small mb-2">
            <i class="fas fa-info-circle mr-1"></i> Only threads with 10 or more messages are shown and processed for summaries. Student names are redacted for privacy.
          </div>
          <div class="info-box thread-list" id="thread-list">
            
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5"><ul>
<li><strong>Students tackled the core of patient autonomy by emphasizing full disclosure between physicians and patients.</strong> Student 1 argued that complete transparency is essential to maintain trust, while Student 2 acknowledged the need for honesty but left room for the possibility of persuasion in exceptional, life-saving scenarios.</li>
<li><strong>Both students explored the balance between respecting patient choices and advocating for beneficial treatments.</strong> Student 1 maintained a rigorous position on unbiased information-sharing, whereas Student 2 demonstrated ambivalence, suggesting that a doctors nudging might be acceptable when it clarifies misunderstandings or aids in critical decisions.</li>
<li><strong>Guide played a pivotal role in deepening the discussion and clarifying ethical boundaries.</strong> It prompted the students to re-examine their stances on nudging and full disclosure by challenging inconsistencies and encouraging them to consider real-world implications of patient autonomy, which helped advance the nuance of the debate.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students tackled the core of patient autonomy by emphasizing full disclosure between physicians and patients.** Student 1 argued that complete transparency is essential to maintain trust, while Student 2 acknowledged the need for honesty but left room for the possibility of persuasion in exceptional, life-saving scenarios.
- **Both students explored the balance between respecting patient choices and advocating for beneficial treatments.** Student 1 maintained a rigorous position on unbiased information-sharing, whereas Student 2 demonstrated ambivalence, suggesting that a doctors nudging might be acceptable when it clarifies misunderstandings or aids in critical decisions.
- **Guide played a pivotal role in deepening the discussion and clarifying ethical boundaries.** It prompted the students to re-examine their stances on nudging and full disclosure by challenging inconsistencies and encouraging them to consider real-world implications of patient autonomy, which helped advance the nuance of the debate.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==06c37b66dd::student-dwfilmvkdq==7a4fd504de::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5"><ul>
<li><strong>Students debated patient autonomy with one (Student 2) arguing that physicians are ethically wrong when they mislead but justified in nudging patients if transparent.</strong> They explored the nuances of truthfulness versus guidance, discussing contextual differences such as handling sensitive news for vulnerable groups and balancing family involvement with the need for direct patient information.</li>
<li><strong>Guide played a key role by posing targeted, probing questions that deepened the exploration of ethical trade-offs in doctor-patient interactions.</strong> It encouraged students to consider how empathy and professional opinion can affect patient decision-making, prompting them to reflect on power dynamics and the risk of undue influence while still valuing expertise.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated patient autonomy with one (Student 2) arguing that physicians are ethically wrong when they mislead but justified in nudging patients if transparent.** They explored the nuances of truthfulness versus guidance, discussing contextual differences such as handling sensitive news for vulnerable groups and balancing family involvement with the need for direct patient information.
- **Guide played a key role by posing targeted, probing questions that deepened the exploration of ethical trade-offs in doctor-patient interactions.** It encouraged students to consider how empathy and professional opinion can affect patient decision-making, prompting them to reflect on power dynamics and the risk of undue influence while still valuing expertise.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==51405a0edd::student-dwfilmvkdq==ca3117b8dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5"><ul>
<li><strong>Students explored the ethical balance between patient autonomy and medical paternalism.</strong> Student 1 argued that doctors are best positioned to improve patient welfareespecially in life-and-death situationswhile Student 2 emphasized the importance of respecting patient values and economic realities.</li>
<li><strong>The discussion also highlighted tensions around decision-making authority in healthcare.</strong> Both students weighed the roles of families versus medical professionals, considering extreme examples and real-life socioeconomic factors that complicate informed consent and treatment decisions.</li>
<li><strong>Guide played a pivotal role in deepening the conversation with probing questions.</strong> It skillfully prompted the students to examine underlying assumptions and explore how varying contexts might shift the balance between professional expertise and patient self-determination.</li>
</ul>
<blockquote>
<p><strong>Student 1, you've raised an important tension between trusting expert judgment and honoring a patients unique value ordering. Can you elaborate on why you believe medical paternalism is more justified when a patient's life is at stake, and are there circumstances where you think a patient should be allowed to refuse life-saving treatment?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" class="form-control summary-markdown-editor">- **Students explored the ethical balance between patient autonomy and medical paternalism.** Student 1 argued that doctors are best positioned to improve patient welfareespecially in life-and-death situationswhile Student 2 emphasized the importance of respecting patient values and economic realities.
- **The discussion also highlighted tensions around decision-making authority in healthcare.** Both students weighed the roles of families versus medical professionals, considering extreme examples and real-life socioeconomic factors that complicate informed consent and treatment decisions.
- **Guide played a pivotal role in deepening the conversation with probing questions.** It skillfully prompted the students to examine underlying assumptions and explore how varying contexts might shift the balance between professional expertise and patient self-determination.

  
&gt; **Student 1, you&#39;ve raised an important tension between trusting expert judgment and honoring a patients unique value ordering. Can you elaborate on why you believe medical paternalism is more justified when a patient&#39;s life is at stake, and are there circumstances where you think a patient should be allowed to refuse life-saving treatment?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c72ecfedf::student-dwfilmvkdq==5e19875cdd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5"><ul>
<li><strong>Students debated the ethics of using amputation to treat apotemnophilia.</strong> Student 1 maintained that amputation of a healthy limb fails to address the underlying psychiatric issues, while Student 2 acknowledged potential risks of self-harm if the option is denied, but both agreed that intensive psychiatric therapy should be the primary treatment route.</li>
<li><strong>Students examined the balance between patient autonomy and medical responsibility.</strong> They discussed whether respecting a patients choice could lead to dangerous outcomes, comparing the issue to suicide prevention protocols and emphasizing that a physical solution might only mask deeper mental health problems.</li>
<li><strong>Guide consistently refocused the conversation with probing questions on ethics and treatment criteria.</strong> Its interventions helped clarify the students positions by asking for specifics on therapy requirements, safeguards for patient care, and ethical scenarios in which amputation might ever be justified.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the ethics of using amputation to treat apotemnophilia.** Student 1 maintained that amputation of a healthy limb fails to address the underlying psychiatric issues, while Student 2 acknowledged potential risks of self-harm if the option is denied, but both agreed that intensive psychiatric therapy should be the primary treatment route.
- **Students examined the balance between patient autonomy and medical responsibility.** They discussed whether respecting a patients choice could lead to dangerous outcomes, comparing the issue to suicide prevention protocols and emphasizing that a physical solution might only mask deeper mental health problems.
- **Guide consistently refocused the conversation with probing questions on ethics and treatment criteria.** Its interventions helped clarify the students positions by asking for specifics on therapy requirements, safeguards for patient care, and ethical scenarios in which amputation might ever be justified.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==8c5648d0df::student-dwfilmvkdq==b26105a6df::f85a9dfdc6::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5"><ul>
<li>
<p><strong>Students debated patient autonomy, with one arguing for complete transparency and the other advocating for physician-guided decision-making.</strong> The discussion centered on whether disclosing all information truly supports patient autonomy or if the physicians expert recommendation should sometimes take precedence.</p>
</li>
<li>
<p><strong>A complex case-by-case analysis emerged as students examined scenarios involving parental decisions, voluntary amputations, and end-of-life care.</strong> They weighed the conflict between respecting personal values and ensuring patient safety while considering the potential impact of medical liability on doctorpatient trust.</p>
</li>
<li>
<p><strong>Guide played a pivotal role by prompting students to clarify their stances and consider ethical nuances.</strong> Its interventions nudged the discussion deeper, urging reflection on how harm is defined and how liability, autonomy, and medical ethics intersect in challenging decisions.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated patient autonomy, with one arguing for complete transparency and the other advocating for physician-guided decision-making.** The discussion centered on whether disclosing all information truly supports patient autonomy or if the physicians expert recommendation should sometimes take precedence.

- **A complex case-by-case analysis emerged as students examined scenarios involving parental decisions, voluntary amputations, and end-of-life care.** They weighed the conflict between respecting personal values and ensuring patient safety while considering the potential impact of medical liability on doctorpatient trust.

- **Guide played a pivotal role by prompting students to clarify their stances and consider ethical nuances.** Its interventions nudged the discussion deeper, urging reflection on how harm is defined and how liability, autonomy, and medical ethics intersect in challenging decisions.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==4ec2b458df::student-dwfilmvkdq==8a97a1c8dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5"><ul>
<li>
<p><strong>Students explored the nuances of patient autonomy by debating when physician input shifts from informative to coercive.</strong> Student 1 initially expressed confusion but later clarified that while physicians should inform patients, they must avoid pressuring them into unwanted treatments; Student 2 reinforced this by highlighting the importance of upholding patient autonomy even in complex cases like BIID, referencing real-world articles to illustrate potential harms.</p>
</li>
<li>
<p><strong>Guide effectively deepened the discussion by posing targeted questions that challenged both students to examine ethical dilemmas and the limits of professional judgment.</strong> Guide's interventions pushed the students to consider the implications of doctors deferring to patient demands versus using clinical expertise, thereby encouraging a more reflective dialogue on the interplay of autonomy, ethics, and medical responsibility.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students explored the nuances of patient autonomy by debating when physician input shifts from informative to coercive.** Student 1 initially expressed confusion but later clarified that while physicians should inform patients, they must avoid pressuring them into unwanted treatments; Student 2 reinforced this by highlighting the importance of upholding patient autonomy even in complex cases like BIID, referencing real-world articles to illustrate potential harms.

- **Guide effectively deepened the discussion by posing targeted questions that challenged both students to examine ethical dilemmas and the limits of professional judgment.** Guide&#39;s interventions pushed the students to consider the implications of doctors deferring to patient demands versus using clinical expertise, thereby encouraging a more reflective dialogue on the interplay of autonomy, ethics, and medical responsibility.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==273581dadf::student-dwfilmvkdq==515f6094dd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Apotemnophilia
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5"><ul>
<li><strong>Students engaged in a heated debate about balancing bodily autonomy with the need for mental health safeguards.</strong> Student 1 argued that extensive mental health evaluations and counseling should precede any irreversible medical procedures, while Student 2 maintained that patients deserve full control over their bodies, emphasizing the importance of informed decision-making without unnecessary restrictions.</li>
<li><strong>Guide played a pivotal role by posing incisive questions that deepened the discussion.</strong> It challenged both students to consider parallels with issues such as suicidal ideation and gender-affirming care, prompting them to explore the feasibility of standardized, unbiased evaluation protocols without compromising patient autonomy.</li>
</ul>
<blockquote>
<p><strong>Student 1, given Student 2's suggestion of a standardized, evidence-based evaluation protocol, how might we design such a system to address your concerns about mental fitness while still respecting patient autonomy? This question encourages you to build on Student 2's idea and potentially find common ground in developing a balanced approach.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" class="form-control summary-markdown-editor">- **Students engaged in a heated debate about balancing bodily autonomy with the need for mental health safeguards.** Student 1 argued that extensive mental health evaluations and counseling should precede any irreversible medical procedures, while Student 2 maintained that patients deserve full control over their bodies, emphasizing the importance of informed decision-making without unnecessary restrictions.
- **Guide played a pivotal role by posing incisive questions that deepened the discussion.** It challenged both students to consider parallels with issues such as suicidal ideation and gender-affirming care, prompting them to explore the feasibility of standardized, unbiased evaluation protocols without compromising patient autonomy.

&gt; **Student 1, given Student 2&#39;s suggestion of a standardized, evidence-based evaluation protocol, how might we design such a system to address your concerns about mental fitness while still respecting patient autonomy? This question encourages you to build on Student 2&#39;s idea and potentially find common ground in developing a balanced approach.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==13a1c3cadf::student-dwfilmvkdq==e4d9f16cdf::f85a9dfdc6::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5"><ul>
<li>
<p><strong>Students articulated nuanced positions on patient autonomy.</strong> They debated that while ethical guidance by doctors is acceptable, full and transparent disclosure of information is essential to preserve patient autonomy, with Student 1 emphasizing complete option sharing and Student 2 warning against unethical nudging or withholding. The conversation reflected a convergence toward valuing patient decision-making, despite initial disagreement over acceptable doctor influence.</p>
</li>
<li>
<p><strong>Guide effectively deepened the discussion with probing questions.</strong> It repeatedly encouraged the students to clarify distinctions between beneficial guidance and unethical manipulation by asking targeted questions about transparency, legal ramifications, and ethical boundaries, which steered the dialogue toward a more refined understanding of patient autonomy. While no single intervention reached the threshold for a full blockquote, Guides persistent engagement significantly enriched the conversation.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students articulated nuanced positions on patient autonomy.** They debated that while ethical guidance by doctors is acceptable, full and transparent disclosure of information is essential to preserve patient autonomy, with Student 1 emphasizing complete option sharing and Student 2 warning against unethical nudging or withholding. The conversation reflected a convergence toward valuing patient decision-making, despite initial disagreement over acceptable doctor influence.

- **Guide effectively deepened the discussion with probing questions.** It repeatedly encouraged the students to clarify distinctions between beneficial guidance and unethical manipulation by asking targeted questions about transparency, legal ramifications, and ethical boundaries, which steered the dialogue toward a more refined understanding of patient autonomy. While no single intervention reached the threshold for a full blockquote, Guides persistent engagement significantly enriched the conversation.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==cb401c60de::student-dwfilmvkdq==d1381236df::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5"><ul>
<li>
<p><strong>Students debated the balance between patient autonomy and physician guidance.</strong> They explored how physicians can provide evidence-based recommendations that inform patients without crossing into manipulation, with one student emphasizing the need for neutrality and the other highlighting the circumstances that might justify directional advice.</p>
</li>
<li>
<p><strong>Guide effectively deepened the discussion with targeted, clarifying questions.</strong> It prompted students to reflect on nuanced issues like unconscious bias, emergency decision-making, and the role of advance directives, pushing them to analyze how best to balance a patient's values with clinical expertise.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the balance between patient autonomy and physician guidance.** They explored how physicians can provide evidence-based recommendations that inform patients without crossing into manipulation, with one student emphasizing the need for neutrality and the other highlighting the circumstances that might justify directional advice.

- **Guide effectively deepened the discussion with targeted, clarifying questions.** It prompted students to reflect on nuanced issues like unconscious bias, emergency decision-making, and the role of advance directives, pushing them to analyze how best to balance a patient&#39;s values with clinical expertise.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==69884d54e0::student-dwfilmvkdq==dbc8e3acdf::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5"><ul>
<li>
<p><strong>Students debated the justification of medical paternalism in emergency versus non-emergency contexts.</strong> They discussed situations such as emergencies where immediate intervention is necessary, while also questioning when paternalistic decisions might cross ethical linesespecially when examples involved persuasive communication versus overt manipulation.</p>
</li>
<li>
<p><strong>Students examined the subtle boundary between persuasive guidance and manipulation in medical settings.</strong> They explored scenarios where doctors might over-exaggerate risks or withhold information, comparing hospital experiences and stressing that transparent, informed consent is crucial while recognizing the potential benefits of carefully framed recommendations.</p>
</li>
<li>
<p><strong>Students reflected on maintaining patient trust and autonomy while considering the doctors expertise.</strong> They reached consensus on the importance of seeking second opinions and critically evaluating treatment recommendations to guard against unnecessary procedures or profit-driven motives, with Guide contributing incisive questions that steered the discussion toward these core ethical dilemmas.</p>
</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the justification of medical paternalism in emergency versus non-emergency contexts.** They discussed situations such as emergencies where immediate intervention is necessary, while also questioning when paternalistic decisions might cross ethical linesespecially when examples involved persuasive communication versus overt manipulation.

- **Students examined the subtle boundary between persuasive guidance and manipulation in medical settings.** They explored scenarios where doctors might over-exaggerate risks or withhold information, comparing hospital experiences and stressing that transparent, informed consent is crucial while recognizing the potential benefits of carefully framed recommendations.

- **Students reflected on maintaining patient trust and autonomy while considering the doctors expertise.** They reached consensus on the importance of seeking second opinions and critically evaluating treatment recommendations to guard against unnecessary procedures or profit-driven motives, with Guide contributing incisive questions that steered the discussion toward these core ethical dilemmas.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==1c71d5fadf::student-dwfilmvkdq==3ef5ff40dd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Patient Autonomy
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5"><ul>
<li><strong>Students debated the ethics of nudging versus strict patient autonomy.</strong> They explored whether a doctor's guidanceeven if slightly directivecan coexist with respecting a patients right to choose, with Student 1 arguing that gentle nudges might help overcome misinformation while Student 2 maintained that only unbiased factual presentation preserves true autonomy.</li>
<li><strong>Guide helped deepen the discussion by probing the subtle distinctions between education and influence.</strong> Its questions challenged both students to consider scenarios where a doctors expert advice might inadvertently become a nudge and how to balance individual decision-making with public health responsibilities.</li>
</ul>
<blockquote>
<p><strong>Student 1, you've emphasized the significance of patient autonomy and informed consent. But consider this: Is there a meaningful difference between "nudging" and providing expert medical advice? If a doctor strongly recommends a treatment based on their expertise, couldn't this be seen as a form of nudging? How do we balance respecting patient autonomy with the doctor's duty to provide the best possible care?</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the ethics of nudging versus strict patient autonomy.** They explored whether a doctor&#39;s guidanceeven if slightly directivecan coexist with respecting a patients right to choose, with Student 1 arguing that gentle nudges might help overcome misinformation while Student 2 maintained that only unbiased factual presentation preserves true autonomy.
- **Guide helped deepen the discussion by probing the subtle distinctions between education and influence.** Its questions challenged both students to consider scenarios where a doctors expert advice might inadvertently become a nudge and how to balance individual decision-making with public health responsibilities.

&gt; **Student 1, you&#39;ve emphasized the significance of patient autonomy and informed consent. But consider this: Is there a meaningful difference between &#34;nudging&#34; and providing expert medical advice? If a doctor strongly recommends a treatment based on their expertise, couldn&#39;t this be seen as a form of nudging? How do we balance respecting patient autonomy with the doctor&#39;s duty to provide the best possible care?**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==16dba2f4df::student-dwfilmvkdq==4373d88edd::dd3287d78f::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5"><ul>
<li>
<p><strong>Students debated the ethical justification of medical paternalism by contrasting absolute patient autonomy with scenarios demanding provider intervention.</strong> Student 1 maintained that treatment should primarily respect patient choice, while Student 2 argued that in cases of compromised capacitysuch as intoxication or traumadoctors might justifiably override refusals to restore autonomy.</p>
</li>
<li>
<p><strong>Students probed the complexities of risk in emergency treatments and the extent of doctors responsibilities when patient histories are unclear or consent is questionable.</strong> They discussed concrete examples like administering IVs and the potential cascade of harm or benefit, weighing immediate safety against the inherent dangers of medical interventions.</p>
</li>
<li>
<p><strong>Guide effectively deepened the inquiry by prompting students to reconsider their definitions of special cases and the boundaries between autonomy and duty of care.</strong> Guides interventions steered the conversation to focus on balancing immediate medical needs with long-term risks and finding common ground between personal responsibility and societal protection.</p>
</li>
</ul>
<blockquote>
<p><strong>Student 2, how do you propose balancing immediate medical needs with potential unknown risks? Consider the limits of medical knowledge in emergency situations. Student 1, in what circumstances, if any, would you consider temporary paternalism justified? Think about the spectrum between full autonomy and complete incapacitation. Focus on finding any common ground in your perspectives.</strong></p>
</blockquote></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the ethical justification of medical paternalism by contrasting absolute patient autonomy with scenarios demanding provider intervention.** Student 1 maintained that treatment should primarily respect patient choice, while Student 2 argued that in cases of compromised capacitysuch as intoxication or traumadoctors might justifiably override refusals to restore autonomy.

- **Students probed the complexities of risk in emergency treatments and the extent of doctors responsibilities when patient histories are unclear or consent is questionable.** They discussed concrete examples like administering IVs and the potential cascade of harm or benefit, weighing immediate safety against the inherent dangers of medical interventions.

- **Guide effectively deepened the inquiry by prompting students to reconsider their definitions of special cases and the boundaries between autonomy and duty of care.** Guides interventions steered the conversation to focus on balancing immediate medical needs with long-term risks and finding common ground between personal responsibility and societal protection.

  
&gt; **Student 2, how do you propose balancing immediate medical needs with potential unknown risks? Consider the limits of medical knowledge in emergency situations. Student 1, in what circumstances, if any, would you consider temporary paternalism justified? Think about the spectrum between full autonomy and complete incapacitation. Focus on finding any common ground in your perspectives.**</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==98faa9a4dd::student-dwfilmvkdq==bc0ebcb4e8::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5"><ul>
<li><strong>Students discussed the complexities of medical paternalism.</strong> Student 1 emphasized the importance of patient autonomy and advocated for family involvement when a patients judgment might be impaired, while Student 2 argued for a balanced approach where both family input and medical expertise play key roles in decision-making.  </li>
<li><strong>Guide facilitated the discussion through probing questions and clarifications.</strong> Guide challenged both students to define clear criteria for when a patients judgment is sufficiently impaired to warrant a shift in decision-making authority and to consider safeguards that protect patient welfare when trust is compromised.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" class="form-control summary-markdown-editor">- **Students discussed the complexities of medical paternalism.** Student 1 emphasized the importance of patient autonomy and advocated for family involvement when a patients judgment might be impaired, while Student 2 argued for a balanced approach where both family input and medical expertise play key roles in decision-making.  
- **Guide facilitated the discussion through probing questions and clarifications.** Guide challenged both students to define clear criteria for when a patients judgment is sufficiently impaired to warrant a shift in decision-making authority and to consider safeguards that protect patient welfare when trust is compromised.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==48c11aa6dd::student-dwfilmvkdq==fc78c33cdf::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
                <div class="thread-item" id="thread-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5">
                  <div class="thread-header">
                    
                      <span style="font-size: 1.2em; font-weight: bold; color: #23004D;">
                        
                          Students discuss Medical Paternalism
                        
                      </span>
                    
                  </div>
                  
                    <div class="thread-summary markdown-content" id="summary-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5"><ul>
<li><strong>Students debated the boundaries of medical paternalism versus patient autonomy.</strong> The discussion featured nuanced views on when paternalistic intervention is permissiblehighlighting examples such as DNR orders, elective procedures, and situations where patients decision-making might be compromisedand considered how ethical teams and shifting informed consent can adjust this balance.</li>
<li><strong>Guide effectively deepened the dialogue with targeted questions.</strong> It steered the conversation by asking for specific examples and challenging the participants to reconcile their views on autonomy and responsibility in critical scenarios, while also prompting them to consider the impact of cultural and religious factors on medical decision-making.</li>
</ul></div>
                  
                  <!-- Added status message and spinner elements for summary generation -->
                  <div class="status-message thread-status" id="status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  <div class="spinner-border spinner-border-sm text-orange" role="status" id="spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                    <span class="sr-only">Loading...</span>
                  </div>
                  <div id="summary-editor-container-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" class="summary-editor-container" style="display: none;">
                    <div class="alert alert-info">
                      <i class="fas fa-info-circle mr-2"></i> Edit the summary in markdown format.
                    </div>
                    <textarea id="summary-markdown-editor-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" class="form-control summary-markdown-editor">- **Students debated the boundaries of medical paternalism versus patient autonomy.** The discussion featured nuanced views on when paternalistic intervention is permissiblehighlighting examples such as DNR orders, elective procedures, and situations where patients decision-making might be compromisedand considered how ethical teams and shifting informed consent can adjust this balance.
- **Guide effectively deepened the dialogue with targeted questions.** It steered the conversation by asking for specific examples and challenging the participants to reconcile their views on autonomy and responsibility in critical scenarios, while also prompting them to consider the impact of cultural and religious factors on medical decision-making.</textarea>
                    <div class="mt-3">
                      <button class="btn btn-primary save-summary-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-save mr-1"></i> Save Changes
                      </button>
                      <button class="btn btn-secondary ml-2 cancel-summary-edit-btn" data-session-id="student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5">
                        <i class="fas fa-times mr-1"></i> Cancel
                      </button>
                      <div class="spinner-border text-primary ml-2 summary-editor-spinner" role="status" id="summary-editor-spinner-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" style="display: none;">
                        <span class="sr-only">Saving...</span>
                      </div>
                    </div>
                    <div class="status-message summary-editor-status" id="summary-editor-status-student-dwfilmvkdq==14e26586df::student-dwfilmvkdq==43f73032dd::5f0da7e0ec::f2dc0abad5" style="display: none;"></div>
                  </div>
                </div>
              
            
          </div>

          <!-- Removing the button row since we moved it to the header -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function debug_log(message, level) {
    console.log('DEBUG:', message);
  }

  // Convert UTC timestamps to local timezone
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Theme toggling functionality
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle-input');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      htmlElement.classList.remove('dark-mode');
      htmlElement.classList.add('light-mode');
      themeToggle.checked = true;
    } else {
      // Set dark mode as default if no preference found
      htmlElement.classList.add('dark-mode');
      htmlElement.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
      themeToggle.checked = false;
    }
    
    // Handle toggle changes
    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        // Switch to light mode
        htmlElement.classList.remove('dark-mode');
        htmlElement.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        // Switch to dark mode
        htmlElement.classList.remove('light-mode');
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Handle refresh button click
    const refreshBtn = document.getElementById('refresh-cache-btn');
    if (refreshBtn) {
      refreshBtn.addEventListener('click', function() {
        // Add a spinning animation while refreshing
        const icon = refreshBtn.querySelector('i');
        icon.classList.add('fa-spin');
        
        // Reload the page with bypass_cache=true parameter
        const currentUrl = window.location.href;
        const url = new URL(currentUrl);
        url.searchParams.set('bypass_cache', 'true');
        window.location.href = url.toString();
      });
    }
    
    // Convert UTC timestamps to local timezone
    document.querySelectorAll('[data-utc-time]').forEach(function(element) {
      const utcTime = element.getAttribute('data-utc-time');
      try {
        const localDate = new Date(utcTime);
        if (!isNaN(localDate)) {
          const options = { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true
          };
          const localTimeStr = localDate.toLocaleString(undefined, options);
          
          // Find the next sibling with class local-time and set its content
          const localTimeElement = element.nextElementSibling;
          if (localTimeElement && localTimeElement.classList.contains('local-time')) {
            localTimeElement.textContent = localTimeStr;
            element.style.display = 'none';
            localTimeElement.style.display = 'inline';
          }
        }
      } catch (e) {
        console.error('Error converting time:', e);
      }
    });
  });
  
  // Original convert UTC timestamps function (duplicated in script block below) can be removed
</script>

<script>
  // New code for summary generation progress
  let pollingInterval;
  let cancelRequested = false;

  document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const cancelBtn = document.getElementById('cancel-btn');
    const reportBtn = document.getElementById('report-btn');
    
    // Initialize the report button state based on whether summaries already exist
    const hasSavedSummaries = true;
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      console.log("Enabling report button because saved summaries exist");
    }
    
    // Check if any thread is currently in 'generating' status
    const hasGeneratingThreads = Array.from(document.querySelectorAll('.thread-status'))
      .some(el => el.textContent === 'Generating summary...');
    
    if (hasGeneratingThreads) {
      // Start polling if there are already generating threads
      startPolling();
      generateBtn.style.display = 'none';
      cancelBtn.style.display = 'inline-block';
    }
    
    // Handle generate button click
    if (generateBtn) {
      generateBtn.addEventListener('click', function() {
        // Show all spinners and status messages
        document.querySelectorAll('.thread-status').forEach(status => {
          status.textContent = 'Queued for generation...';
          status.style.display = 'block';
          status.className = 'thread-status text-info';
        });
        
        generateBtn.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        
        // Make AJAX call to queue summaries instead of form submission
        fetch('/assignment/f2dc0abad5/generate_summaries', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => {
          if (response.ok) {
            debug_log("Summaries queued successfully", 1)
            // Start polling for updates
            startPolling();
            // Enable report button when summaries are being generated
            if (reportBtn) reportBtn.disabled = false;
          } else {
            debug_log("Error queueing summaries", 1)
          }
        })
        .catch(error => {
          debug_log("Network error:", error, 1)
        });
      });
      
      // Handle cancel button
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          cancelRequested = true;
          fetch('/assignment/f2dc0abad5/cancel_generation', {
            method: 'POST'
          }).then(response => {
            if (response.ok) {
              stopPolling();
              // Reset UI
              document.querySelectorAll('.thread-status').forEach(status => {
                if (status.textContent === 'Queued for generation...') {
                  status.style.display = 'none';
                }
              });
              document.querySelectorAll('.spinner-border').forEach(spinner => {
                spinner.style.display = 'none';
              });
              generateBtn.style.display = 'inline-block';
              cancelBtn.style.display = 'none';
            }
          });
        });
      }
    }
    
    // Handle report button click
    if (reportBtn) {
      reportBtn.addEventListener('click', function() {
        // Show spinner
        const reportSpinner = document.getElementById('report-spinner');
        if (reportSpinner) reportSpinner.style.display = 'inline-block';
        
        // Disable button while generating
        reportBtn.disabled = true;
        
        // Change message in report section
        const noReportMsg = document.getElementById('no-report-msg');
        if (noReportMsg) {
          noReportMsg.textContent = 'Generating instructor report...';
          noReportMsg.className = 'text-info mb-0';
        }
        
        // Make AJAX call to generate the report
        fetch('/assignment/f2dc0abad5/generate_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Report generation initiated:", data, 1)
          
          // Start polling for report status
          checkReportStatus();
        })
        .catch(error => {
          debug_log("Error generating report:", error, 1)
          reportBtn.disabled = false;
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (noReportMsg) {
            noReportMsg.textContent = 'Error generating report. Please try again.';
            noReportMsg.className = 'text-danger mb-0';
          }
        });
      });
    }
    
    // Handle refresh data button click
    const refreshDataBtn = document.getElementById('refresh-data-btn');
    if (refreshDataBtn) {
      refreshDataBtn.addEventListener('click', function() {
        // Show spinner
        const refreshSpinner = document.getElementById('refresh-spinner');
        if (refreshSpinner) refreshSpinner.style.display = 'inline-block';
        
        // Disable button while refreshing
        refreshDataBtn.disabled = true;
        
        // Make AJAX call to refresh data
        fetch('/assignment/f2dc0abad5/refresh_data', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          debug_log("Data refresh initiated:", data, 1);
          
          // Reload the page to show refreshed data
          window.location.reload();
        })
        .catch(error => {
          debug_log("Error refreshing data:", error, 1);
          if (refreshSpinner) refreshSpinner.style.display = 'none';
          refreshDataBtn.disabled = false;
          alert('Error refreshing data. Please try again.');
        });
      });
    }
    
    // Handle regenerate title button click
    const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
    if (regenerateTitleBtn) {
      regenerateTitleBtn.addEventListener('click', function() {
        // Disable the button and show a spinner icon
        regenerateTitleBtn.disabled = true;
        const icon = regenerateTitleBtn.querySelector('i');
        const originalIcon = icon.className;
        icon.className = 'fas fa-spinner fa-spin';
        
        // Call the regenerate title endpoint
        fetch('/assignment/f2dc0abad5/regenerate_title', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update the title text directly
            const titleEl = document.querySelector('.generated-title');
            if (titleEl) {
              titleEl.textContent = data.title;
            }
            // Show success message
            console.log("Title regenerated:", data.title);
          } else {
            console.error("Error regenerating title:", data.message);
            alert("Error regenerating title: " + data.message);
          }
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        })
        .catch(error => {
          console.error("Error:", error);
          alert("Error regenerating title. Please try again.");
          
          // Reset the button
          regenerateTitleBtn.disabled = false;
          icon.className = originalIcon;
        });
      });
    }
  });

  function startPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
    }
    
    // Poll every 2 seconds
    pollingInterval = setInterval(checkSummaryStatus, 2000);
    
    // Do an immediate check to start the process
    checkSummaryStatus();
  }

  function stopPolling() {
    if (pollingInterval) {
      clearInterval(pollingInterval);
      pollingInterval = null;
    }
  }

  function checkSummaryStatus() {
    console.log("Checking summary status...");
    fetch('/assignment/f2dc0abad5/summary_status')
      .then(response => response.json())
      .then(data => {
        console.log("Status data:", data);
        let activeGeneration = false;
        
        Object.entries(data).forEach(([sessionId, threadInfo]) => {
          const statusEl = document.getElementById(`status-${sessionId}`);
          const summaryEl = document.getElementById(`summary-${sessionId}`);
          const spinnerEl = document.getElementById(`spinner-${sessionId}`);
          
          if (threadInfo.status === 'generating') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Generating summary...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'inline-block';
            }
          } else if (threadInfo.status === 'completed') {
            if (statusEl) {
              statusEl.style.display = 'none';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
            if (summaryEl && threadInfo.summary) {
              summaryEl.innerHTML = threadInfo.summary;
              summaryEl.style.display = 'block';
            }
          } else if (threadInfo.status === 'queued') {
            activeGeneration = true;
            if (statusEl) {
              statusEl.textContent = 'Queued for generation...';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-info';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'error') {
            if (statusEl) {
              statusEl.textContent = 'Error generating summary';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-danger';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          } else if (threadInfo.status === 'skipped') {
            if (statusEl) {
              statusEl.textContent = threadInfo.message || 'Skipped due to insufficient messages';
              statusEl.style.display = 'block';
              statusEl.className = 'thread-status text-warning';
            }
            if (spinnerEl) {
              spinnerEl.style.display = 'none';
            }
          }
        });
        
        // If no thread is still queued or generating, stop polling and reset UI
        if (!activeGeneration) {
          stopPolling();
          document.getElementById('generate-btn').style.display = 'inline-block';
          document.getElementById('cancel-btn').style.display = 'none';
          
          const reportBtn = document.getElementById('report-btn');
          if (reportBtn) reportBtn.disabled = false;
        }
      })
      .catch(error => {
        debug_log('Error checking summary status:', error, 1)
      });
  }
  
  // Function to check the report generation status
  function checkReportStatus() {
    fetch('/assignment/f2dc0abad5/report_status')
      .then(response => response.json())
      .then(data => {
        debug_log("Report status:", data, 1)
        
        const reportBtn = document.getElementById('report-btn');
        const reportSpinner = document.getElementById('report-spinner');
        const noReportMsg = document.getElementById('no-report-msg');
        const reportSection = document.getElementById('report-section');
        
        if (data.status === 'completed') {
          // Report is ready, update the UI
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) {
            reportBtn.disabled = false;
            reportBtn.textContent = 'Regenerate report';
          }
          
          // Display the report
          if (reportSection) {
            // Use safe assignment of innerHTML to preserve nested HTML structure
            const reportContent = document.createElement('div');
            reportContent.id = 'report-content';
            reportContent.className = 'markdown-content';
            
            // Add custom CSS to ensure proper nested list rendering
            const styleTag = document.createElement('style');
            styleTag.textContent = `
              #report-content ul ul { 
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                padding-left: 2em;
              }
              #report-content li > ul {
                margin-left: 1em;
              }
            `;
            reportContent.appendChild(styleTag);
            
            // Add the content
            reportContent.innerHTML += data.content;
            
            const generatedText = document.createElement('div');
            generatedText.className = 'text-muted mt-2';
            generatedText.innerHTML = `Generated on: <span class="utc-time" data-utc-time="${data.generated_at}">${data.generated_at}</span><span class="local-time"></span>`;
            
            // Clear the report section and append the new content
            reportSection.innerHTML = '';
            reportSection.appendChild(reportContent);
            reportSection.appendChild(generatedText);
            
            // Convert the timestamp to local time
            const utcTimeElements = reportSection.querySelectorAll('[data-utc-time]');
            utcTimeElements.forEach(function(element) {
              const utcTime = element.getAttribute('data-utc-time');
              try {
                const localDate = new Date(utcTime);
                if (!isNaN(localDate)) {
                  const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true
                  };
                  const localTimeStr = localDate.toLocaleString(undefined, options);
                  
                  // Find the next sibling with class local-time and set its content
                  const localTimeElement = element.nextElementSibling;
                  if (localTimeElement && localTimeElement.classList.contains('local-time')) {
                    localTimeElement.textContent = localTimeStr;
                    element.style.display = 'none';
                    localTimeElement.style.display = 'inline';
                  }
                }
              } catch (e) {
                console.error('Error converting time:', e);
              }
            });
          }
        } else if (data.status === 'generating') {
          // Report is still being generated, check again in 2 seconds
          if (noReportMsg) {
            noReportMsg.textContent = 'Generating instructor report...';
            noReportMsg.className = 'text-info mb-0';
          }
          setTimeout(checkReportStatus, 2000);
        } else if (data.status === 'error') {
          // Error generating report
          if (reportSpinner) reportSpinner.style.display = 'none';
          if (reportBtn) reportBtn.disabled = false;
          if (noReportMsg) {
            noReportMsg.textContent = `Error generating report: ${data.error || 'Unknown error'}`;
            noReportMsg.className = 'text-danger mb-0';
          }
        }
      })
      .catch(error => {
        debug_log('Error checking report status:', error, 1)
        const reportSpinner = document.getElementById('report-spinner');
        const reportBtn = document.getElementById('report-btn');
        const noReportMsg = document.getElementById('no-report-msg');
        
        if (reportSpinner) reportSpinner.style.display = 'none';
        if (reportBtn) reportBtn.disabled = false;
        if (noReportMsg) {
          noReportMsg.textContent = 'Error checking report status. Please try again.';
          noReportMsg.className = 'text-danger mb-0';
        }
      });
  }
</script>

<!-- Add CodeMirror for report editing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/material-darker.min.css">

<script>
  // Report editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editReportBtn = document.getElementById('edit-report-btn');
    const reportContent = document.getElementById('report-content');
    const reportEditorContainer = document.getElementById('report-editor-container');
    const saveReportBtn = document.getElementById('save-report-btn');
    const cancelReportEditBtn = document.getElementById('cancel-report-edit-btn');
    const editorSpinner = document.getElementById('editor-spinner');
    const statusMessage = document.getElementById('editor-status-message');

    // Initialize CodeMirror if report editor exists
    let reportEditor;
    const reportMarkdownEditor = document.getElementById('report-markdown-editor');
    if (reportMarkdownEditor) {
      reportEditor = CodeMirror.fromTextArea(reportMarkdownEditor, {
        lineNumbers: true,
        theme: 'material-darker',
        mode: 'markdown',
        lineWrapping: true
      });
    }

    // Edit button handler
    if (editReportBtn) {
      editReportBtn.addEventListener('click', function() {
        reportContent.style.display = 'none';
        reportEditorContainer.style.display = 'block';
        // Refresh CodeMirror to ensure proper rendering
        if (reportEditor) reportEditor.refresh();
      });
    }

    // Cancel button handler
    if (cancelReportEditBtn) {
      cancelReportEditBtn.addEventListener('click', function() {
        reportContent.style.display = 'block';
        reportEditorContainer.style.display = 'none';
        statusMessage.style.display = 'none';
      });
    }

    // Save button handler
    if (saveReportBtn) {
      saveReportBtn.addEventListener('click', function() {
        // Get the edited markdown
        const markdown = reportEditor.getValue();
        
        if (!markdown.trim()) {
          showEditorStatus('Report content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        editorSpinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/f2dc0abad5/edit_report', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          editorSpinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            reportContent.innerHTML = data.content;
            
            // Show success message and close editor
            showEditorStatus(data.message, 'success');
            setTimeout(() => {
              reportContent.style.display = 'block';
              reportEditorContainer.style.display = 'none';
              statusMessage.style.display = 'none';
            }, 1500);
          } else {
            showEditorStatus(data.message, 'error');
          }
        })
        .catch(error => {
          editorSpinner.style.display = 'none';
          showEditorStatus('Error saving report: ' + error, 'error');
        });
      });
    }
    
    // Helper to show status messages
    function showEditorStatus(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message ${type}`;
      statusMessage.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<!-- Add CSS for the editor status messages -->
<style>
  .status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 6px;
  }
  .success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid #28a745;
    color: #28a745;
  }
  .error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid #dc3545;
    color: #dc3545;
  }
  .CodeMirror {
    height: auto;
    min-height: 300px;
    border-radius: 6px;
    font-family: 'Fira Code', 'Courier New', monospace;
    font-size: 14px;
    padding: 10px 0;
    margin-bottom: 20px;
  }
</style>

<!-- New export button update script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const exportBtn = document.querySelector('a[href*="/export"]');
  if (exportBtn) {
    exportBtn.addEventListener('click', function(e) {
      e.preventDefault();
      // Read the current theme from localStorage (assumes 'theme' is saved as 'light' for light-mode)
      const currentTheme = localStorage.getItem('theme') === 'light' ? 'light-mode' : 'dark-mode';
      const exportUrl = new URL(this.href, window.location.origin);
      exportUrl.searchParams.set('theme', currentTheme);
      window.location.href = exportUrl.toString();
    });
  }
  
  // Set theme class on HTML element for export mode
  if ('True' === 'True' && 'light-mode') {
    document.documentElement.className = 'light-mode';
  }
});
</script>

<script>
  // Summary editing functionality
  document.addEventListener('DOMContentLoaded', function() {
    const editSummaryButtons = document.querySelectorAll('.edit-summary-btn');
    const summaryContainers = document.querySelectorAll('.summary-editor-container');
    const saveSummaryButtons = document.querySelectorAll('.save-summary-btn');
    const cancelSummaryEditButtons = document.querySelectorAll('.cancel-summary-edit-btn');
    const summaryEditors = document.querySelectorAll('.summary-markdown-editor');
    const summaryStatusMessages = document.querySelectorAll('.summary-editor-status');

    editSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'block';
          }
        });
        summaryEditors.forEach(editor => {
          if (editor.id === `summary-markdown-editor-${sessionId}`) {
            editor.focus();
          }
        });
      });
    });

    saveSummaryButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        const markdown = this.previousElementSibling.value;
        
        if (!markdown.trim()) {
          showSummaryStatus('Summary content cannot be empty', 'error');
          return;
        }
        
        // Show spinner
        const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
        spinner.style.display = 'inline-block';
        
        // Make API call to save
        fetch('/assignment/f2dc0abad5/edit_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            session_id: sessionId,
            summary_markdown: markdown
          })
        })
        .then(response => response.json())
        .then(data => {
          spinner.style.display = 'none';
          
          if (data.success) {
            // Update the displayed content with the HTML returned from the server
            const summaryContainer = document.getElementById(`summary-editor-container-${sessionId}`);
            summaryContainer.innerHTML = data.content;
            
            // Show success message and close editor
            showSummaryStatus(data.message, 'success');
            setTimeout(() => {
              summaryContainer.style.display = 'none';
              summaryStatusMessages.forEach(status => {
                status.style.display = 'none';
              });
            }, 1500);
          } else {
            showSummaryStatus(data.message, 'error');
          }
        })
        .catch(error => {
          spinner.style.display = 'none';
          showSummaryStatus('Error saving summary: ' + error, 'error');
        });
      });
    });

    cancelSummaryEditButtons.forEach((button, index) => {
      button.addEventListener('click', function() {
        const sessionId = this.getAttribute('data-session-id');
        summaryContainers.forEach(container => {
          if (container.id === `summary-editor-container-${sessionId}`) {
            container.style.display = 'none';
          }
        });
        summaryStatusMessages.forEach(status => {
          status.style.display = 'none';
        });
      });
    });

    // Helper to show status messages
    function showSummaryStatus(message, type) {
      const statusEl = document.getElementById(`summary-editor-status-${sessionId}`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
      statusEl.style.display = 'block';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 5000);
    }
  });
</script>

<!-- Add JavaScript for thread summary editing -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all edit buttons for summaries
    const editSummaryBtns = document.querySelectorAll('.edit-summary-btn');
    // Get all regenerate buttons for summaries
    const regenerateSummaryBtns = document.querySelectorAll('.regenerate-summary-btn');
    
    // Initialize CodeMirror editors object to store all editors
    const summaryEditors = {};
    
    // Add click handlers to all edit buttons
    editSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
      
      // Create CodeMirror editor when edit button is clicked (lazy initialization)
      btn.addEventListener('click', function() {
        summaryElement.style.display = 'none';
        editorContainer.style.display = 'block';
        
        // Initialize CodeMirror if not already done
        if (!summaryEditors[sessionId]) {
          const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
          // Get original markdown content from data attribute or use HTML content as fallback
          let markdownContent = textarea.value;
          if (!markdownContent) {
            // This is a simple fallback that won't be perfect - ideally the backend would provide the markdown
            markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
          }
          
          summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
            lineNumbers: true,
            theme: 'material-darker',
            mode: 'markdown',
            lineWrapping: true
          });
          
          summaryEditors[sessionId].setValue(markdownContent);
          // Refresh to ensure proper rendering
          summaryEditors[sessionId].refresh();
        } else {
          // Just refresh if already initialized
          summaryEditors[sessionId].refresh();
        }
      });
      
      // Add handler for cancel button
      const cancelBtn = document.querySelector(`.cancel-summary-edit-btn[data-session-id="${sessionId}"]`);
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          summaryElement.style.display = 'block';
          editorContainer.style.display = 'none';
          document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
        });
      }
      
      // Add handler for save button
      const saveBtn = document.querySelector(`.save-summary-btn[data-session-id="${sessionId}"]`);
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          // Get the edited markdown
          const markdown = summaryEditors[sessionId].getValue();
          
          if (!markdown.trim()) {
            showSummaryStatus(sessionId, 'Summary content cannot be empty', 'error');
            return;
          }
          
          // Show spinner
          const spinner = document.getElementById(`summary-editor-spinner-${sessionId}`);
          spinner.style.display = 'inline-block';
          
          // Make API call to save
          fetch(`/assignment/f2dc0abad5/edit_summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              session_id: sessionId,
              markdown: markdown
            })
          })
          .then(response => response.json())
          .then(data => {
            spinner.style.display = 'none';
            
            if (data.success) {
              // Update the displayed content with the HTML returned from the server
              summaryElement.innerHTML = data.content + 
                `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                   <i class="fas fa-sync"></i>
                 </button>
                 <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                   <i class="fas fa-pencil-alt"></i>
                 </button>`;
              
              // Show success message and close editor
              showSummaryStatus(sessionId, data.message, 'success');
              setTimeout(() => {
                summaryElement.style.display = 'block';
                editorContainer.style.display = 'none';
                document.getElementById(`summary-editor-status-${sessionId}`).style.display = 'none';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
              }, 1500);
            } else {
              showSummaryStatus(sessionId, data.message || 'Error saving summary', 'error');
            }
          })
          .catch(error => {
            spinner.style.display = 'none';
            showSummaryStatus(sessionId, 'Error saving summary: ' + error, 'error');
          });
        });
      }
    });
    
    // Add click handlers to all regenerate buttons
    regenerateSummaryBtns.forEach(btn => {
      const sessionId = btn.getAttribute('data-session-id');
      const summaryElement = document.getElementById(`summary-${sessionId}`);
      
      btn.addEventListener('click', function() {
        if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
          // Show a spinner in the summary area
          const statusElement = document.getElementById(`status-${sessionId}`);
          const spinnerElement = document.getElementById(`spinner-${sessionId}`);
          
          if (statusElement && spinnerElement) {
            statusElement.textContent = 'Regenerating summary...';
            statusElement.className = 'status-message thread-status text-info';
            statusElement.style.display = 'block';
            spinnerElement.style.display = 'inline-block';
            
            // Hide the summary while it's regenerating
            summaryElement.style.opacity = '0.5';
            
            // Make API call to regenerate
            fetch(`/assignment/f2dc0abad5/regenerate_summary`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                session_id: sessionId
              })
            })
            .then(response => response.json())
            .then(data => {
              spinnerElement.style.display = 'none';
              
              if (data.success) {
                // Update the displayed content with the HTML returned from the server
                summaryElement.innerHTML = data.content + 
                  `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                     <i class="fas fa-sync"></i>
                   </button>
                   <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                     <i class="fas fa-pencil-alt"></i>
                   </button>`;
                
                // Reset styles and show success message
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message;
                statusElement.className = 'status-message thread-status success';
                
                // Reattach event listeners to the new buttons
                attachButtonListeners(sessionId);
                
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 3000);
              } else {
                summaryElement.style.opacity = '1';
                statusElement.textContent = data.message || 'Error regenerating summary';
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              }
            })
            .catch(error => {
              spinnerElement.style.display = 'none';
              summaryElement.style.opacity = '1';
              statusElement.textContent = 'Error regenerating summary: ' + error;
              statusElement.className = 'status-message thread-status error';
              setTimeout(() => {
                statusElement.style.display = 'none';
              }, 5000);
            });
          }
        }
      });
    });
    
    // Function to reattach event listeners after content is updated
    function attachButtonListeners(sessionId) {
      // Find the newly created buttons
      const newEditBtn = document.querySelector(`.edit-summary-btn[data-session-id="${sessionId}"]`);
      const newRegenerateBtn = document.querySelector(`.regenerate-summary-btn[data-session-id="${sessionId}"]`);
      
      // Reattach edit button listener
      if (newEditBtn) {
        const summaryElement = document.getElementById(`summary-${sessionId}`);
        const editorContainer = document.getElementById(`summary-editor-container-${sessionId}`);
        
        newEditBtn.addEventListener('click', function() {
          summaryElement.style.display = 'none';
          editorContainer.style.display = 'block';
          
          // Reinitialize or refresh CodeMirror
          if (!summaryEditors[sessionId]) {
            const textarea = document.getElementById(`summary-markdown-editor-${sessionId}`);
            let markdownContent = textarea.value;
            if (!markdownContent) {
              markdownContent = summaryElement.innerHTML.replace(/<button.*?<\/button>/g, '');
            }
            
            summaryEditors[sessionId] = CodeMirror.fromTextArea(textarea, {
              lineNumbers: true,
              theme: 'material-darker',
              mode: 'markdown',
              lineWrapping: true
            });
            
            summaryEditors[sessionId].setValue(markdownContent);
            summaryEditors[sessionId].refresh();
          } else {
            summaryEditors[sessionId].refresh();
          }
        });
      }
      
      // Reattach regenerate button listener
      if (newRegenerateBtn) {
        newRegenerateBtn.addEventListener('click', function() {
          if (confirm('Are you sure you want to regenerate this summary? This will replace the current summary with a newly generated one.')) {
            const summaryElement = document.getElementById(`summary-${sessionId}`);
            const statusElement = document.getElementById(`status-${sessionId}`);
            const spinnerElement = document.getElementById(`spinner-${sessionId}`);
            
            if (statusElement && spinnerElement) {
              statusElement.textContent = 'Regenerating summary...';
              statusElement.className = 'status-message thread-status text-info';
              statusElement.style.display = 'block';
              spinnerElement.style.display = 'inline-block';
              
              summaryElement.style.opacity = '0.5';
              
              fetch(`/assignment/f2dc0abad5/regenerate_summary`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  session_id: sessionId
                })
              })
              .then(response => response.json())
              .then(data => {
                spinnerElement.style.display = 'none';
                
                if (data.success) {
                  summaryElement.innerHTML = data.content + 
                    `<button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 regenerate-summary-btn" data-session-id="${sessionId}" title="Regenerate summary" style="vertical-align: baseline; margin-right: 8px;">
                       <i class="fas fa-sync"></i>
                     </button>
                     <button type="button" class="btn btn-link btn-sm text-muted p-0 ml-1 edit-summary-btn" data-session-id="${sessionId}" title="Edit summary" style="vertical-align: baseline;">
                       <i class="fas fa-pencil-alt"></i>
                     </button>`;
                  
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message;
                  statusElement.className = 'status-message thread-status success';
                  
                  attachButtonListeners(sessionId);
                  
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 3000);
                } else {
                  summaryElement.style.opacity = '1';
                  statusElement.textContent = data.message || 'Error regenerating summary';
                  statusElement.className = 'status-message thread-status error';
                  setTimeout(() => {
                    statusElement.style.display = 'none';
                  }, 5000);
                }
              })
              .catch(error => {
                spinnerElement.style.display = 'none';
                summaryElement.style.opacity = '1';
                statusElement.textContent = 'Error regenerating summary: ' + error;
                statusElement.className = 'status-message thread-status error';
                setTimeout(() => {
                  statusElement.style.display = 'none';
                }, 5000);
              });
            }
          }
        });
      }
    }
    
    // Helper to show status messages for summary editing
    function showSummaryStatus(sessionId, message, type) {
      const statusElement = document.getElementById(`summary-editor-status-${sessionId}`);
      statusElement.textContent = message;
      statusElement.className = `status-message summary-editor-status ${type}`;
      statusElement.style.display = 'block';
      
      if (type === 'success') {
        setTimeout(() => {
          statusElement.style.display = 'none';
        }, 3000);
      }
    }
  });
</script>

<script>
  // Handle regenerate title button click
  const regenerateTitleBtn = document.getElementById('regenerate-title-btn');
  if (regenerateTitleBtn) {
    regenerateTitleBtn.addEventListener('click', function() {
      // Disable the button and show a spinner icon
      regenerateTitleBtn.disabled = true;
      const icon = regenerateTitleBtn.querySelector('i');
      const originalIcon = icon.className;
      icon.className = 'fas fa-spinner fa-spin';
      
      // Call the regenerate title endpoint
      fetch('/assignment/f2dc0abad5/regenerate_title', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Update the title text directly
          const titleEl = document.querySelector('.generated-title');
          if (titleEl) {
            titleEl.textContent = data.title;
          }
          // Show success message
          console.log("Title regenerated:", data.title);
        } else {
          console.error("Error regenerating title:", data.message);
          alert("Error regenerating title: " + data.message);
        }
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Error regenerating title. Please try again.");
        
        // Reset the button
        regenerateTitleBtn.disabled = false;
        icon.className = originalIcon;
      });
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let pollingInterval = null;

    // Debug logging function
    function debug_log(message, level, details = null) {
      if (details) {
        console.log(`DEBUG[${level}]: ${message}`, details);
      } else {
        console.log(`DEBUG[${level}]: ${message}`);
      }
    }
    
    // Initialize the report button state based on saved summaries status
    const reportBtn = document.getElementById('report-btn');
    const hasSavedSummaries = true;
    
    if (reportBtn && hasSavedSummaries) {
      // If we already have saved summaries, enable the report button
      reportBtn.disabled = false;
      debug_log("Enabling report button because saved summaries exist", 1);
    }
  });
</script>

<script>
  // This script handles dark mode parameter in URL
  document.addEventListener('DOMContentLoaded', function() {
    // Check for darkmode parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('darkmode') === 'true') {
      // Create and append dark mode styles
      const darkModeStyle = document.createElement('style');
      darkModeStyle.textContent = `
        body { background-color: #1a1a1a !important; }
        body, div, section, article, aside, header, footer, main, p, span, h1, h2, h3, h4, h5, h6, li, td, th {
          color: #e6e6e6 !important;
        }
        .answer-card, .question-card, .card, .container, .container-fluid, .row {
          background-color: #2a2a2a !important;
          color: #e6e6e6 !important;
        }
        a { color: #88afd3 !important; }
        pre, code { background-color: #333 !important; color: #f8f8f8 !important; }
        table, tr, td, th { border-color: #444 !important; background-color: #2a2a2a !important; }
        input, textarea, select { background-color: #333 !important; color: #e6e6e6 !important; }
        blockquote { background-color: #333 !important; border-left-color: #666 !important; }
        .panel, .panel-default, .panel-body, .panel-heading { 
          background-color: #2a2a2a !important; 
          color: #e6e6e6 !important;
          border-color: #444 !important;
        }
        .text-muted, .text-secondary { color: #aaa !important; }
        .bg-light, .bg-white { background-color: #2a2a2a !important; }
        .border { border-color: #444 !important; }
      `;
      document.head.appendChild(darkModeStyle);
    }
  });
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        color: #e6e6e6 !important;
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>

<script>
  // Dark mode implementation
  (function() {
    // Only apply if the darkmode parameter is true
    if (!isDarkModeEnabled()) return;
    
    // Get our style element
    const darkStyles = document.getElementById('darkmode-styles');
    
    // Set comprehensive dark mode styles
    darkStyles.textContent = `
      /* Force literally everything to dark mode */
      html, body { 
        background-color: #1a1a1a !important;
        color: #e6e6e6 !important;
      }
      
      /* Target ALL elements with a wildcard selector */
      * {
        background-color: transparent !important;
        border-color: #444 !important;
      }
      
      /* Explicitly target common containers */
      div, section, article, aside, header, footer, main, nav,
      .container, .row, .col, .card, .panel, .jumbotron, .well,
      [class*="container"], [class*="wrapper"], [class*="panel"], 
      [class*="card"], [class*="box"], [class*="section"],
      [id*="container"], [id*="wrapper"], [id*="panel"], 
      [id*="card"], [id*="box"], [id*="section"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Force background colors for specific elements */
      [class*="bg-"], [class*="background"], 
      [style*="background"], [style*="bg"] {
        background-color: #2a2a2a !important;
      }
      
      /* White elements and their children */
      [class*="white"], [class*="light"],
      [style*="white"], [style*="rgb(255"], [style*="rgb(248"],
      [style*="rgb(250"], [style*="rgb(252"], [style*="rgb(240"],
      [style*="rgb(245"], [style*="#fff"], [style*="#ffffff"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Bootstrap and common framework classes */
      .bg-white, .bg-light, .bg-default, .bg-secondary,
      .text-dark, .text-black {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Links */
      a, a:visited, a:hover, a:active, .link, [class*="link"] {
        color: #88afd3 !important;
      }
      
      /* Code and pre elements */
      pre, code, .code, .pre, [class*="code"], [class*="pre"] {
        background-color: #333 !important;
        color: #f8f8f8 !important;
      }
      
      /* Tables */
      table, tr, td, th, thead, tbody, tfoot,
      .table, [class*="table"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Form elements */
      input, textarea, select, button, .form-control,
      [class*="input"], [class*="button"], [class*="form"] {
        background-color: #333 !important;
        color: #e6e6e6 !important;
        border-color: #555 !important;
      }
      
      /* Modals and popups */
      .modal, .popover, .tooltip, .dropdown-menu,
      [class*="modal"], [class*="popover"], [class*="tooltip"], [class*="dropdown"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
        border-color: #444 !important;
      }
      
      /* Sway specific elements observed in screenshot */
      [class*="assignment-details"], [class*="details"],
      .card-like, .topic-section, [class*="topic"],
      [class*="student"], [class*="discuss"], [class*="debate"],
      [class*="abortion"], [class*="timeline"],
      .marquis, .hendricks, .thomson, .singer,
      .guide, .completion {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Specific elements in the screenshot */
      .students-discuss, .student-debate, .debate-section,
      [class*="discuss"], [class*="debate"], 
      [style*="background-color: rgb(255, 255, 255)"] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }

      /* General text colors and backgrounds */
      h1, h2, h3, h4, h5, h6, p, span, li, strong, em, b, i, u,
      label, small, .text, [class*="text"] {
        color: #e6e6e6 !important;
      }
      
      /* Target RGB inline styles specifically */
      [style*="rgb("] {
        background-color: #2a2a2a !important;
        color: #e6e6e6 !important;
      }
      
      /* Override any !important inline styles with double !important (hack but effective) */
      [style*="!important"] {
        background-color: #2a2a2a !important !important;
        color: #e6e6e6 !important !important;
      }
      
      /* Fix for dark purple text against dark background */
      h1, h2, h3, h4, h5, h6, 
      [style*="purple"], [style*="violet"], 
      [class*="purple"], [class*="violet"],
      [style*="rgb(128, 0, 128)"], [style*="rgb(138, 43, 226)"],
      [style*="rgb(75, 0, 130)"], [style*="rgb(106, 90, 205)"],
      [style*="rgb(147, 112, 219)"], [style*="rgb(153, 50, 204)"],
      [style*="color: #800080"], [style*="color: #8a2be2"],
      [style*="color: #4b0082"], [style*="color: #6a5acd"] {
        color: #bb86fc !important; /* Light purple that works on dark backgrounds */
      }
      
      /* Specific fix for topic headers and main title */
      .generated-title, [class*="title"],
      [id*="topic"], [class*="topic"],
      [id*="marquis"], [class*="marquis"],
      [id*="hendricks"], [class*="hendricks"],
      [id*="thomson"], [class*="thomson"],
      [id*="singer"], [class*="singer"],
      [id*="abortion"], [class*="abortion"] {
        color: #bb86fc !important; /* Light purple */
      }

      /* Add specific targeting for the #23004D dark purple color */
      [style*="color: #23004D"], [style*="color:#23004D"],
      [style*="color: rgb(35, 0, 77)"], [style*="color:rgb(35, 0, 77)"],
      [style*="color: rgba(35, 0, 77"], [style*="color:rgba(35, 0, 77"],
      [class*="text-primary"], /* Common bootstrap class that might use this color */
      .assignment-details h1 + div, /* Target divs immediately after headings in assignment details */
      .topic-list span, /* Target spans in topic lists */
      .topic-container * /* Target all elements in topic containers */
      {
        color: #bb86fc !important; /* Light purple for readability */
      }
    `;
    
    // Function to force dark backgrounds on elements that resist
    function forceDarkElements() {
      // Get all elements
      const allElements = document.querySelectorAll('*');
      
      // Check the computed style of all elements
      allElements.forEach(el => {
        const style = window.getComputedStyle(el);
        const bgColor = style.backgroundColor;
        const textColor = style.color;
        
        // If it's still white or very light (rgb values close to 255)
        if (bgColor.includes('rgb(255, 255, 255)') || 
            bgColor.includes('rgb(248') ||
            bgColor.includes('rgb(250') ||
            bgColor.includes('rgb(252') ||
            bgColor.includes('rgb(245')) {
          // Force it to be dark with inline style (highest specificity)
          el.style.setProperty('background-color', '#2a2a2a', 'important');
          el.style.setProperty('color', '#e6e6e6', 'important');
        }
        
        // Check for dark purple text that would be hard to read
        if (textColor.includes('rgb(128, 0, 128)') || // purple
            textColor.includes('rgb(75, 0, 130)') ||  // indigo
            textColor.includes('rgb(106, 90, 205)') || // slate blue
            textColor.includes('rgb(138, 43, 226)') || // blue violet
            textColor.includes('rgb(147, 112, 219)') || // medium purple
            textColor.includes('rgb(153, 50, 204)') || // dark orchid
            textColor.includes('rgb(102, 51, 153)') || // rebecca purple
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) < 150 && 
             parseInt(textColor.match(/\d+/g)[1]) < 100 && 
             parseInt(textColor.match(/\d+/g)[2]) > 150)) { // Any dark purplish color
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important'); // Material Design purple
        }

        // Add specific check for the #23004D dark purple
        if (textColor === 'rgb(35, 0, 77)' || 
            textColor.includes('#23004D') ||
            (textColor.includes('rgb(') && 
             parseInt(textColor.match(/\d+/g)[0]) === 35 && 
             parseInt(textColor.match(/\d+/g)[1]) === 0 && 
             parseInt(textColor.match(/\d+/g)[2]) === 77)) {
          
          // Replace with a lighter purple that's readable on dark backgrounds
          el.style.setProperty('color', '#bb86fc', 'important');
        }
      });
    }
    
    // Run once when loaded
    document.addEventListener('DOMContentLoaded', function() {
      forceDarkElements();
      
      // And again after all images and resources load
      window.addEventListener('load', forceDarkElements);
      
      // And periodically check for any dynamic content
      setInterval(forceDarkElements, 1000);
    });
  })();
</script>
</body>
</html>